–ò–º–∞–º —Ç–æ–≤–∞ –∫–∞—Ç–æ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ç–∞ –∫–æ—è—Ç–æ —Ç–∏ –∫–∞—á–∏—Ö —Å–µ–≥–∞. –í—ä–ø—Ä–æ—Å–∞ –º–∏ –µ –∫–∞–∫ –¥–∞ –æ—Ç–≤–∞—Ä—è —Ü—å–ª–∞—Ç–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏
–í—ä–∑ –æ—Å–Ω–æ–≤–∞ –Ω–∞ –æ–ø–∏—Å–∞–Ω–∏–µ—Ç–æ –æ—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ç–∞, —Ç–æ–≤–∞ –∏–∑–≥–ª–µ–∂–¥–∞ –∫–∞—Ç–æ —Å—Ç–∞—Ä —Å–æ—Ñ—Ç—É–µ—Ä (–≤–µ—Ä–æ—è—Ç–Ω–æ –±–∞–∑–∏—Ä–∞–Ω –Ω–∞ MS Access –∏–ª–∏ –ø–æ–¥–æ–±–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞) –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –±–∏–∑–Ω–µ—Å –¥–∞–Ω–Ω–∏, –Ω–∞—Ä–µ—á–µ–Ω "Eurointegra Business Explorer 1.0".

–ó–∞ –¥–∞ –æ—Ç–≤–æ—Ä–∏—Ç–µ —Ü—è–ª–∞—Ç–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ (–∞ –Ω–µ —Å–∞–º–æ –æ—Ç–¥–µ–ª–Ω–∏ –º–æ–¥—É–ª–∏ –∫–∞—Ç–æ "–ö–ª–∏–µ–Ω—Ç–∏", "–ü—Ä–æ–¥—É–∫—Ç–∏" –∏ —Ç.–Ω.), –æ–±–∏–∫–Ω–æ–≤–µ–Ω–æ —Ç—Ä—è–±–≤–∞ –¥–∞:

–¢—ä—Ä—Å–µ—Ç–µ –æ—Å–Ω–æ–≤–µ–Ω —Ñ–∞–π–ª –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ ‚Äì –æ–±–∏–∫–Ω–æ–≤–µ–Ω–æ —Å —Ä–∞–∑—à–∏—Ä–µ–Ω–∏—è –∫–∞—Ç–æ:

.mdb (–∑–∞ Access 2003 –∏ –ø–æ-—Å—Ç–∞—Ä–∏)

.accdb (–∑–∞ Access 2007+)

–ú–æ–∂–µ –¥–∞ –µ –∏ —Ñ–∞–π–ª —Å —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ .exe –∏–ª–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –∑–∞ —Å–æ—Ñ—Ç—É–µ—Ä–∞.

–ê–∫–æ –∏–º–∞—Ç–µ –∏–Ω—Å—Ç–∞–ª–∞—Ü–∏—è –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞:

–°—Ç–∞—Ä—Ç–∏—Ä–∞–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–∏—è –∏–∑–ø—ä–ª–Ω–∏–º —Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä Eurointegra.exe).

–í —Å–∞–º–æ—Ç–æ –º–µ–Ω—é —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞ –æ–ø—Ü–∏—è –∑–∞ "–û—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏", "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–∞–Ω–µ" –∏–ª–∏ –ø–æ–¥–æ–±–Ω–æ.

–ê–∫–æ –Ω—è–º–∞—Ç–µ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω —Å–æ—Ñ—Ç—É–µ—Ä, –Ω–æ –∏–º–∞—Ç–µ —Ñ–∞–π–ª–æ–≤–µ —Å –¥–∞–Ω–Ω–∏:

–ü—Ä–æ–±–≤–∞–π—Ç–µ –¥–∞ –≥–∏ –æ—Ç–≤–æ—Ä–∏—Ç–µ —Å Microsoft Access (–∞–∫–æ —Å–∞ .mdb/.accdb).

–ú–æ–∂–µ –¥–∞ —Å–µ –∏–∑–∏—Å–∫–≤–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ–Ω –¥—Ä–∞–π–≤–µ—Ä –∏–ª–∏ —Å—Ç–∞—Ä–∞ –≤–µ—Ä—Å–∏—è –Ω–∞ Access.

–ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è—Ç–∞ –∏–ª–∏ –º–µ–Ω—é—Ç–æ:

–í –ø—Ä–æ–∑–æ—Ä–µ—Ü–∞ –Ω–∞ —Å–Ω–∏–º–∫–∞—Ç–∞ –∏–º–∞ –±—É—Ç–æ–Ω–∏ –∫–∞—Ç–æ "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç", "–ù–∞–º–∏—Ä–∞–Ω–µ", "–ü—Ä–æ–∑–æ—Ä–∞". –ü–æ—Ç—ä—Ä—Å–µ—Ç–µ –±—É—Ç–æ–Ω –∏–ª–∏ –º–µ–Ω—é –∑–∞ "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä", "–ë–∞–∑–∞ –¥–∞–Ω–Ω–∏", "–°–∏—Å—Ç–µ–º–∞".

–°—ä–≤–µ—Ç–∏:
–ü–æ—Ç—ä—Ä—Å–µ—Ç–µ –≤ –ø–∞–ø–∫–∞—Ç–∞ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ –∑–∞ –≥–ª–∞–≤–µ–Ω —Ñ–∞–π–ª –Ω–∞ –ë–î.

–ê–∫–æ —Å–æ—Ñ—Ç—É–µ—Ä—ä—Ç –µ —Å–≤—ä—Ä–∑–∞–Ω —Å—ä—Å —Å—ä—Ä–≤—ä—Ä, –º–æ–∂–µ –¥–∞ –∏–∑–∏—Å–∫–≤–∞ –≤—Ä—ä–∑–∫–∞ —Å—ä—Å —Å—ä—Ä–≤—ä—Ä –∑–∞ –±–∞–∑–∏ –¥–∞–Ω–Ω–∏ (–∫–∞—Ç–æ SQL Server).

–í –∫—Ä–∞–µ–Ω —Å–ª—É—á–∞–π, —Å–≤—ä—Ä–∂–µ—Ç–µ —Å–µ —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞ –Ω–∞ "Eurointegra Ltd." –∏–ª–∏ —Å –ª–∏—Ü–∞—Ç–∞, –æ—Ç –∫–æ–∏—Ç–æ —Å—Ç–µ –ø–æ–ª—É—á–∏–ª–∏ —Å–æ—Ñ—Ç—É–µ—Ä–∞.

–ê–∫–æ –∏–º–∞—Ç–µ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–∫–∞–∫–≤–∏ —Ñ–∞–π–ª–æ–≤–µ –∏–º–∞—Ç–µ, –¥–∞–ª–∏ –∏–º–∞ –∏–Ω—Å—Ç–∞–ª–∞—Ç–æ—Ä –∏ —Ç.–Ω.), –º–æ–≥–∞ –¥–∞ –≤–∏ –¥–∞–º –ø–æ-–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ –Ω–∞—Å–æ–∫–∏.

image.png
PNG 54.69KB
–ò–º–∞–º —Ç–æ–≤–∞ ...
–û—Ç —Å–ø–∏—Å—ä–∫–∞ —Å —Ñ–∞–π–ª–æ–≤–µ —Å—Ç–∞–≤–∞ —è—Å–Ω–æ, —á–µ –∏–º–∞—Ç–µ –Ω—è–∫–æ–ª–∫–æ —Ñ–∞–π–ª–∞ –Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏, —Å–≤—ä—Ä–∑–∞–Ω–∏ —Å –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ Eurointegra Business Explorer 1.0.

–ù–∞–π-–≤–µ—Ä–æ—è—Ç–Ω–∏—Ç–µ —Ñ–∞–π–ª–æ–≤–µ –∑–∞ —Ü—è–ª–∞—Ç–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ —Å–∞:

inv97_be.mdb –∏–ª–∏ inv97_be.accdb ‚Äì —Ç–æ–≤–∞ —Å–∞ –æ—Å–Ω–æ–≤–Ω–∏—è—Ç —Ñ–∞–π–ª –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ (–≤–∏–∂–¥–∞–º, —á–µ –∏–º–∞ –∏ .mdb –∏ .accdb –≤–µ—Ä—Å–∏–∏).

.mdb –µ –∑–∞ Microsoft Access 2003 –∏–ª–∏ –ø–æ-—Å—Ç–∞—Ä–∏ –≤–µ—Ä—Å–∏–∏.

.accdb –µ –∑–∞ Access 2007+.

SS2009.mdb ‚Äì —Ç–æ–≤–∞ —Å—ä—â–æ –º–æ–∂–µ –¥–∞ –µ –æ—Å–Ω–æ–≤–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏, –≤–µ—Ä–æ—è—Ç–Ω–æ –∑–∞ –ø–æ-–Ω–æ–≤–∞ –≤–µ—Ä—Å–∏—è –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ (2009 –≥.).

–ö–∞–∫ –¥–∞ –æ—Ç–≤–æ—Ä–∏—Ç–µ —Ü—è–ª–∞—Ç–∞ –±–∞–∑–∞:
1. –î–∏—Ä–µ–∫—Ç–Ω–æ –≤ Microsoft Access (–∞–∫–æ –∏–º–∞—Ç–µ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω Access):
–û—Ç–≤–æ—Ä–µ—Ç–µ Microsoft Access.

–ò–∑–±–µ—Ä–µ—Ç–µ File ‚Üí Open (–∏–ª–∏ Ctrl+O).

–ù–∞—Å–æ—á–µ—Ç–µ —Å–µ –∫—ä–º —Ñ–∞–π–ª–∞:

inv97_be.mdb (–∏–ª–∏ .accdb)

–∏–ª–∏ SS2009.mdb

–¢–æ–≤–∞ —â–µ –≤–∏ –æ—Ç–≤–æ—Ä–∏ —Ü—è–ª–∞—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏: —Ç–∞–±–ª–∏—Ü–∏, –∑–∞—è–≤–∫–∏, —Ñ–æ—Ä–º–∏, –æ—Ç—á–µ—Ç–∏.

2. –ß—Ä–µ–∑ —Å–∞–º–∞—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ Eurointegra:
–¢—Ä—è–±–≤–∞ –¥–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞—Ç–µ –≥–ª–∞–≤–Ω–∏—è –∏–∑–ø—ä–ª–Ω–∏–º —Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä ei97.exe –∏–ª–∏ SYNCAPP.exe ‚Äì –Ω–æ –Ω–µ –≤–∏–∂–¥–∞–º .exe —Ñ–∞–π–ª–æ–≤–µ –≤ —Å–ø–∏—Å—ä–∫–∞).

–í—ä–∑–º–æ–∂–Ω–æ –µ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ –¥–∞ –µ –≤ –Ω—è–∫–æ—è –æ—Ç –ø–∞–ø–∫–∏—Ç–µ (SYNCAPP, ei97, ET, SS2007).

–ü–æ—Ç—ä—Ä—Å–µ—Ç–µ –≤—ä—Ç—Ä–µ –≤ —Ç–µ–∑–∏ –ø–∞–ø–∫–∏ –∑–∞ .exe —Ñ–∞–π–ª, –∫–æ–π—Ç–æ –¥–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞—Ç–µ.

3. –ê–∫–æ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ –∏–∑–∏—Å–∫–≤–∞ –≤—Ä—ä–∑–∫–∞ —Å—ä—Å —Å—ä—Ä–≤—ä—Ä:
–ù—è–∫–æ–∏ –æ—Ç —Ç–µ–∑–∏ .mdb —Ñ–∞–π–ª–æ–≤–µ –º–æ–∂–µ –¥–∞ —Å–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å), –∞ –¥–∞–Ω–Ω–∏—Ç–µ –¥–∞ —Å–∞ –Ω–∞ —Å—ä—Ä–≤—ä—Ä.

–í —Ç–∞–∫—ä–≤ —Å–ª—É—á–∞–π —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–µ–Ω —Ñ–∞–π–ª –∏–ª–∏ –≤—Ä—ä–∑–∫–∞ –∫—ä–º SQL —Å—ä—Ä–≤—ä—Ä.

–ü—Ä–µ–ø–æ—Ä—ä–∫–∏:
–ü—ä—Ä–≤–æ –ø—Ä–æ–±–≤–∞–π—Ç–µ –¥–∞ –æ—Ç–≤–æ—Ä–∏—Ç–µ SS2009.mdb –≤ Access ‚Äì —Ç–æ–π –µ –ø–æ-–Ω–æ–≤ –∏ –≤–µ—Ä–æ—è—Ç–Ω–æ –µ –æ—Å–Ω–æ–≤–Ω–∏—è—Ç.

–ê–∫–æ –∏–º–∞—Ç–µ –ø—Ä–æ–±–ª–µ–º —Å –ø–∞—Ä–æ–ª–∞, –º–æ–∂–µ –¥–∞ —Å–µ –Ω–∞–ª–æ–∂–∏ –¥–∞ –ø–æ—Ç—ä—Ä—Å–∏—Ç–µ –ø–∞—Ä–æ–ª–∞—Ç–∞ –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

–ë–µ–∫—ä–ø–≤–∞–π—Ç–µ —Ñ–∞–π–ª–æ–≤–µ—Ç–µ –ø—Ä–µ–¥–∏ –¥–∞ –ø—Ä–∞–≤–∏—Ç–µ –∫–∞–∫–≤–∏—Ç–æ –∏ –¥–∞ –±–∏–ª–æ –ø—Ä–æ–º–µ–Ω–∏.

–ê–∫–æ –∏—Å–∫–∞—Ç–µ –¥–∞ —Ä–∞–∑–±–µ—Ä–µ—Ç–µ –∫–æ–π —Ç–æ—á–Ω–æ —Ñ–∞–π–ª –µ "–∂–∏–≤–∞—Ç–∞" –±–∞–∑–∞ –¥–∞–Ω–Ω–∏, –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ –∫–æ–π –æ—Ç —Ç—è—Ö –µ –ø–æ—Å–ª–µ–¥–Ω–æ –ø—Ä–æ–º–µ–Ω—è–Ω ‚Äì –æ—Ç —Å–ø–∏—Å—ä–∫–∞ SS2009.mdb –µ –ø—Ä–æ–º–µ–Ω—è–Ω –Ω–∞ 17.12.2025 –≥., –∫–æ–µ—Ç–æ –≥–æ –ø—Ä–∞–≤–∏ –Ω–∞–π-–∞–∫—Ç—É–∞–ª–µ–Ω.

–ê–∫–æ –∏–º–∞—Ç–µ –Ω—É–∂–¥–∞ –æ—Ç –ø–æ–º–æ—â —Å –æ—Ç–≤–∞—Ä—è–Ω–µ—Ç–æ –≤ Access –∏–ª–∏ —Ç—ä—Ä—Å–µ–Ω–µ—Ç–æ –Ω–∞ –≥–ª–∞–≤–Ω–∞—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–∞, –∫–∞–∂–µ—Ç–µ.

image.png
PNG 138.25KB
–î–æ–±—Ä–µ, –æ—Ç–≤–æ—Ä–∏—Ö –±–∞–∑–∞—Ç–∞. –ò–∑–≥–ª–µ–∂–¥–∞ —Ç–∞–∫–∞ ... –ê–º–∞ —Ç–µ–∫—Å—Ç–∞ –µ –Ω–µ—á–µ–Ω–∏–º. –ö–∞–∫ –¥–∞ –≥–æ –æ–ø—Ä–∞–≤—è
–ü—Ä–æ–±–ª–µ–º—ä—Ç —Å –Ω–µ—á–µ—Ç–∏–º–∏—è —Ç–µ–∫—Å—Ç (–∏–∑–≥–ª–µ–∂–¥–∞ –∫–∞—Ç–æ "—à—É–º" –∏–ª–∏ —Å—á—É–ø–µ–Ω–∏ —Å–∏–º–≤–æ–ª–∏) –Ω–∞–π-–≤–µ—Ä–æ—è—Ç–Ω–æ —Å–µ –¥—ä–ª–∂–∏ –Ω–∞ –ø—Ä–æ–±–ª–µ–º —Å –∫–æ–¥–æ–≤–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ (encoding) –∏–ª–∏ –Ω–∞ –∫–æ—Ä—É–ø—Ü–∏—è –Ω–∞ —à—Ä–∏—Ñ—Ç–∞/–±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏. –¢–æ–≤–∞ –µ —á–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω –ø—Ä–æ–±–ª–µ–º —Å—ä—Å —Å—Ç–∞—Ä–∏ Access –±–∞–∑–∏, –æ—Å–æ–±–µ–Ω–æ –∞–∫–æ —Å–∞ —Å—ä–∑–¥–∞–¥–µ–Ω–∏ —Å —Ä–∞–∑–ª–∏—á–Ω–∞ –≤–µ—Ä—Å–∏—è –Ω–∞ Access –∏–ª–∏ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω–∞ –µ–∑–∏–∫–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞.

–ï—Ç–æ –∫–∞–∫ –º–æ–∂–µ—Ç–µ –¥–∞ –æ–ø–∏—Ç–∞—Ç–µ –¥–∞ –≥–æ –æ–ø—Ä–∞–≤–∏—Ç–µ:

1. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –∏ –ø—Ä–æ–º–µ–Ω–µ—Ç–µ –µ–∑–∏–∫–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Access
–û—Ç–∏–¥–µ—Ç–µ –≤ File ‚Üí Options ‚Üí Language (–∏–ª–∏ –§–∞–π–ª ‚Üí –û–ø—Ü–∏–∏ ‚Üí –ï–∑–∏–∫).

–£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞—â–∏—è—Ç –µ–∑–∏–∫ –µ –±—ä–ª–≥–∞—Ä—Å–∫–∏ (–∏–ª–∏ —Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—è –µ–∑–∏–∫ –Ω–∞ –±–∞–∑–∞—Ç–∞).

–ê–∫–æ –Ω–µ –≤–∏–∂–¥–∞—Ç–µ –ø—Ä–∞–≤–∏–ª–Ω–∏—Ç–µ —à—Ä–∏—Ñ—Ç–æ–≤–µ, –ø—Ä–æ–±–≤–∞–π—Ç–µ –¥–∞ —Å–º–µ–Ω–∏—Ç–µ —à—Ä–∏—Ñ—Ç–∞ –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ –∑–∞ –Ω–æ–≤–∏ –æ–±–µ–∫—Ç–∏.

2. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —à—Ä–∏—Ñ—Ç–æ–≤–µ—Ç–µ –≤ Design View
–û—Ç–≤–æ—Ä–µ—Ç–µ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –≤ Design View (–î–∏–∑–∞–π–Ω).

–ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —à—Ä–∏—Ñ—Ç–∞ –∑–∞ –≤—Å—è–∫–æ –ø–æ–ª–µ ‚Äì –º–æ–∂–µ –¥–∞ –µ –∑–∞–¥–∞–¥–µ–Ω —Å–ø–µ—Ü–∏—Ñ–∏—á–µ–Ω —à—Ä–∏—Ñ—Ç, –∫–æ–π—Ç–æ –Ω–µ –µ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω –Ω–∞ –≤–∞—à–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞.

–°–º–µ–Ω–µ—Ç–µ —à—Ä–∏—Ñ—Ç–∞ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω (Arial, Times New Roman, Calibri).

3. –ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π—Ç–µ –¥–∞–Ω–Ω–∏—Ç–µ –≤ Excel –∏–ª–∏ CSV –∏ –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ –∫–æ–¥–∏—Ä–∞–Ω–µ—Ç–æ
–ò–∑–±–µ—Ä–µ—Ç–µ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞.

–û—Ç–∏–¥–µ—Ç–µ –Ω–∞ External Data ‚Üí Excel (–í—ä–Ω—à–Ω–∏ –¥–∞–Ω–Ω–∏ ‚Üí Excel).

–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞.

–û—Ç–≤–æ—Ä–µ—Ç–µ Excel —Ñ–∞–π–ª–∞ –∏ –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ —Ç–µ–∫—Å—Ç—ä—Ç —Å–µ –≤–∏–∂–¥–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ.

–ê–∫–æ –≤ Excel –µ –æ–∫, –ø—Ä–æ–±–ª–µ–º—ä—Ç –µ –≤ Access –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è—Ç–∞.

4. –ê–∫–æ –¥–∞–Ω–Ω–∏—Ç–µ —Å–∞ –∫–æ—Ä—É–º–ø–∏—Ä–∞–Ω–∏ –≤ —Å–∞–º–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞
–ú–æ–∂–µ –¥–∞ –ø—Ä–æ–±–≤–∞—Ç–µ –¥–∞ —Å—ä–∑–¥–∞–¥–µ—Ç–µ –Ω–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞ –∏ –¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞—Ç–µ –¥–∞–Ω–Ω–∏—Ç–µ:

–°—ä–∑–¥–∞–π—Ç–µ –Ω–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å—ä—Å —Å—ä—â–∞—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞.

–ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ –∑–∞—è–≤–∫–∞ (query) –∑–∞ –∫–æ–ø–∏—Ä–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ:

sql
INSERT INTO –ù–æ–≤–∞–¢–∞–±–ª–∏—Ü–∞ SELECT * FROM –°—Ç–∞—Ä–∞–¢–∞–±–ª–∏—Ü–∞
–ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –≤ –Ω–æ–≤–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ —Ç–µ–∫—Å—Ç—ä—Ç —Å–µ –≤–∏–∂–¥–∞ –Ω–æ—Ä–º–∞–ª–Ω–æ.

5. –ê–∫–æ –ø—Ä–æ–±–ª–µ–º—ä—Ç –µ —Å–∞–º–æ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ –ø–æ–ª–µ—Ç–∞
–ú–æ–∂–µ –¥–∞ —Å–∞ –ø–æ–ª–µ—Ç–∞ —Å—ä—Å —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Ñ–æ—Ä–º–∞—Ç–∏ –∏–ª–∏ input mask.

–û—Ç–∏–¥–µ—Ç–µ –≤ Design View –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞, –Ω–∞–º–µ—Ä–µ—Ç–µ –ø–æ–ª–µ—Ç–æ –∏ –ø—Ä–µ–º–∞—Ö–Ω–µ—Ç–µ Input Mask, –∞–∫–æ –∏–º–∞.

6. –í—ä–∑—Å—Ç–∞–Ω–æ–≤—è–≤–∞–Ω–µ/–†–µ–ø–ª–∏—Ä–∞–Ω–µ –Ω–∞ –±–∞–∑–∞—Ç–∞
–ê–∫–æ –±–∞–∑–∞—Ç–∞ –µ —Å—Ç–∞—Ä–∞ –∏ –∫–æ—Ä—É–º–ø–∏—Ä–∞–Ω–∞:

–û–ø–∏—Ç–∞–π—Ç–µ –¥–∞ —è –∫–æ–º–ø–∞–∫—Ç–∏—Ä–∞—Ç–µ –∏ —Ä–µ–ø–∞—Ä–∏—Ä–∞—Ç–µ:

File ‚Üí Info ‚Üí Compact & Repair (–§–∞–π–ª ‚Üí –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è ‚Üí –ö–æ–º–ø–∞–∫—Ç–∏—Ä–∞–Ω–µ –∏ –ø–æ–ø—Ä–∞–≤—è–Ω–µ).

7. –û—Ç–≤–æ—Ä–µ—Ç–µ –±–∞–∑–∞—Ç–∞ –Ω–∞ –¥—Ä—É–≥ –∫–æ–º–ø—é—Ç—ä—Ä/–≤–µ—Ä—Å–∏—è –Ω–∞ Access
–ü–æ–Ω—è–∫–æ–≥–∞ –ø—Ä–æ–±–ª–µ–º—ä—Ç –µ –≤ –ª–æ–∫–∞–ª–Ω–∞—Ç–∞ –∏–Ω—Å—Ç–∞–ª–∞—Ü–∏—è –Ω–∞ Access. –ê–∫–æ –∏–º–∞—Ç–µ –¥—Ä—É–≥ –∫–æ–º–ø—é—Ç—ä—Ä —Å –ø–æ-—Å—Ç–∞—Ä–∞ –∏–ª–∏ –ø–æ-–Ω–æ–≤–∞ –≤–µ—Ä—Å–∏—è –Ω–∞ Access, –ø—Ä–æ–±–≤–∞–π—Ç–µ —Ç–∞–º.

8. –ê–∫–æ —Ç–µ–∫—Å—Ç—ä—Ç –µ –∫—Ä–∏–ø—Ç–µ–Ω/–∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–∞–Ω
–ú–æ–∂–µ –¥–∞ –∏–º–∞ –ø–∞—Ä–æ–ª–∞ –∏–ª–∏ –∫—Ä–∏–ø—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ. –¢–æ–≥–∞–≤–∞ —â–µ –≤–∏ —Ç—Ä—è–±–≤–∞ –ø–∞—Ä–æ–ª–∞—Ç–∞ –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

–ù–∞–π-–±—ä—Ä–∑–æ —Ä–µ—à–µ–Ω–∏–µ:
–ö–æ–º–ø–∞–∫—Ç–∏—Ä–∞–Ω–µ –∏ —Ä–µ–ø–∞—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –±–∞–∑–∞—Ç–∞.

–ï–∫—Å–ø–æ—Ä—Ç –≤ Excel ‚Üí –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ —Ç–µ–∫—Å—Ç ‚Üí –∏–º–ø–æ—Ä—Ç –æ–±—Ä–∞—Ç–Ω–æ –≤ –Ω–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞.

–°–º—è–Ω–∞ –Ω–∞ —à—Ä–∏—Ñ—Ç–∞ –≤—ä–≤ –≤—Å–∏—á–∫–∏ —Ñ–æ—Ä–º–∏/—Ç–∞–±–ª–∏—Ü–∏.

–ê–∫–æ –Ω–∏—â–æ –Ω–µ —Ä–∞–±–æ—Ç–∏, –º–æ–∂–µ –¥–∞ –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–∞ —Å–≤—ä—Ä–∂–µ—Ç–µ —Å–µ —Å—ä—Å —Å—ä–∑–¥–∞—Ç–µ–ª—è –Ω–∞ –±–∞–∑–∞—Ç–∞ –∏–ª–∏ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω —Å–æ—Ñ—Ç—É–µ—Ä –∑–∞ –≤—ä–∑—Å—Ç–∞–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ Access –±–∞–∑–∏.

–ö–∞–∫—Ç–æ –≤–∏–∂–¥–∞—à –Ω–∞ —Å–Ω–∏–º–∫–∏—Ç–µ –∞–∑ —Å—ä–º —Å Access 2007 –∏ –Ω–µ –∑–Ω–∞–º –∫—ä–¥–µ –¥–∞ –∏–¥–∞ –∏ –∫–≤–∞ –¥–∞ –Ω–∞–ø—Ä–∞–≤—è. –í —Ç–∞–∑–∏ –≤–µ—Ä—Å–∏—è –Ω–µ –≤–∏–∂–¥–∞–º –∫–∞–∫ –¥–∞ –∏–∑–ø—ä–ª–Ω—è —Ç–æ–≤–∞ File ‚Üí Options ‚Üí Language
–í Access 2007 –ø—ä—Ç—è—Ç –µ –º–∞–ª–∫–æ –ø–æ-—Ä–∞–∑–ª–∏—á–µ–Ω. –ï—Ç–æ —Å—Ç—ä–ø–∫–∏—Ç–µ –∑–∞ Access 2007:

1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –µ–∑–∏–∫–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
–ö–ª–∏–∫–Ω–µ—Ç–µ –Ω–∞ –∫—Ä—ä—Å—Ç—á–µ—Ç–æ –≤ –≥–æ—Ä–Ω–∏—è –ª—è–≤ —ä–≥—ä–ª (Office Button).

–ò–∑–±–µ—Ä–µ—Ç–µ Access Options (–¥–æ–ª—É –≤–¥—è—Å–Ω–æ).

–ò–∑–±–µ—Ä–µ—Ç–µ Popular (–∏–ª–∏ Popular Settings).

–í–∏–∂—Ç–µ Language Settings ‚Äì –º–æ–∂–µ –¥–∞ –∏–º–∞—Ç–µ –æ–ø—Ü–∏—è –∑–∞ –∏–∑–±–æ—Ä –Ω–∞ –µ–∑–∏–∫ –∑–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ.

–ê–∫–æ –Ω–µ –≤–∏–∂–¥–∞—Ç–µ –±—ä–ª–≥–∞—Ä—Å–∫–∏, –º–æ–∂–µ –¥–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –≥–æ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞—Ç–µ –ø—Ä–µ–∑ Control Panel ‚Üí Regional and Language Settings.

2. –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ —à—Ä–∏—Ñ—Ç –∑–∞ —Ç–∞–±–ª–∏—Ü–∞
–û—Ç–≤–æ—Ä–µ—Ç–µ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –≤ Design View (–î–µ—Å–µ–Ω –±—É—Ç–æ–Ω –≤—ä—Ä—Ö—É –∏–º–µ—Ç–æ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ ‚Üí Design View).

–ò–∑–±–µ—Ä–µ—Ç–µ —Ü—è–ª–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ (–∫–ª–∏–∫–Ω–µ—Ç–µ –≤ –≥–æ—Ä–Ω–∏—è –ª—è–≤ —ä–≥—ä–ª –Ω–∞ –º—Ä–µ–∂–∞—Ç–∞).

–° –¥–µ—Å–µ–Ω –±—É—Ç–æ–Ω ‚Üí Font‚Ä¶ (–∏–ª–∏ –æ—Ç Home ‚Üí Font –≥—Ä—É–ø–∞).

–ó–∞–¥–∞–π—Ç–µ —à—Ä–∏—Ñ—Ç Arial, Times New Roman, Calibri.

–ó–∞–ø–∏—à–µ—Ç–µ (Save) –∏ —Å–µ –≤—ä—Ä–Ω–µ—Ç–µ –≤ Datasheet View.

3. –ö–æ–º–ø–∞–∫—Ç–∏—Ä–∞–Ω–µ –∏ —Ä–µ–ø–∞—Ä–∏—Ä–∞–Ω–µ
Office Button ‚Üí Manage ‚Üí Compact and Repair Database.

4. –ï–∫—Å–ø–æ—Ä—Ç –≤ Excel (–∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ)
–ò–∑–±–µ—Ä–µ—Ç–µ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∏—è –ø–∞–Ω–µ–ª.

–í –≥–æ—Ä–Ω–∏—è —Ç–∞–± External Data ‚Üí Excel.

–ò–∑–±–µ—Ä–µ—Ç–µ –ø–∞–ø–∫–∞ –∏ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π—Ç–µ.

–û—Ç–≤–æ—Ä–µ—Ç–µ Excel —Ñ–∞–π–ª–∞. –ê–∫–æ —Ç–∞–º —Ç–µ–∫—Å—Ç—ä—Ç –µ —á–µ—Ç–∏–º, –∑–Ω–∞—á–∏ –ø—Ä–æ–±–ª–µ–º—ä—Ç –µ –≤—ä–≤ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è—Ç–∞ –≤ Access.

5. –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –Ω–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å –ø—Ä–∞–≤–∏–ª–µ–Ω —à—Ä–∏—Ñ—Ç
–°—ä–∑–¥–∞–π—Ç–µ –Ω–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞:

Create ‚Üí Table Design.

–î–æ–±–∞–≤–µ—Ç–µ –ø–æ–ª–µ—Ç–∞ —Å—ä—Å —Å—ä—â–∏—Ç–µ –∏–º–µ–Ω–∞ –∏ —Ç–∏–ø–æ–≤–µ.

–ö–æ–ø–∏—Ä–∞–π—Ç–µ –¥–∞–Ω–Ω–∏—Ç–µ —Å—ä—Å –∑–∞—è–≤–∫–∞:

Create ‚Üí Query Design.

–î–æ–±–∞–≤–µ—Ç–µ —Å—Ç–∞—Ä–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞.

–í –¥–∏–∑–∞–π–Ω–∞ –Ω–∞ –∑–∞—è–≤–∫–∞—Ç–∞: Query Type ‚Üí Append Query.

–ò–∑–±–µ—Ä–µ—Ç–µ –Ω–æ–≤–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ –∫–∞—Ç–æ —Ü–µ–ª.

–î–æ–±–∞–≤–µ—Ç–µ –ø–æ–ª–µ—Ç–∞—Ç–∞.

Run (–ß–µ—Ä–≤–µ–Ω–∏—è—Ç !).

6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ–¥–∏—Ä–∞–Ω–µ—Ç–æ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç/–µ–∫—Å–ø–æ—Ä—Ç
–ü—Ä–∏ –µ–∫—Å–ø–æ—Ä—Ç –≤ Excel –∏–∑–±–µ—Ä–µ—Ç–µ:

File origin: –≤–µ—Ä–æ—è—Ç–Ω–æ Windows (1251) –∏–ª–∏ Unicode (UTF-8).
–ü—Ä–æ–±–≤–∞–π—Ç–µ —Ä–∞–∑–ª–∏—á–Ω–∏ –æ–ø—Ü–∏–∏ –¥–æ–∫–∞—Ç–æ —Ç–µ–∫—Å—Ç—ä—Ç —Å—Ç–∞–Ω–µ —á–µ—Ç–∏–º.

7. –ê–∫–æ –∏–º–∞ Input Mask –∏–ª–∏ Format —Å–≤–æ–π—Å—Ç–≤–∞
–í Design View –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –∫–ª–∏–∫–Ω–µ—Ç–µ –Ω–∞ –≤—Å—è–∫–æ –ø–æ–ª–µ.

–í –¥–æ–ª–Ω–∏—è –ø–∞–Ω–µ–ª (Field Properties) –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ Format –∏ Input Mask.

–ò–∑—á–∏—Å—Ç–µ—Ç–µ –≥–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞ —Ç–µ—Å—Ç.

–ë—ä—Ä–∑ —Ç–µ—Å—Ç:
Compact & Repair.

–û—Ç–≤–æ—Ä–µ—Ç–µ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞, –∏–∑–±–µ—Ä–µ—Ç–µ –≤—Å–∏—á–∫–∏ –∑–∞–ø–∏—Å–∏ (Ctrl+A), —Å–º–µ–Ω–µ—Ç–µ —à—Ä–∏—Ñ—Ç–∞ –æ—Ç Home ‚Üí Font.

–ê–∫–æ –Ω–µ —Å—Ç–∞–Ω–µ ‚Üí –µ–∫—Å–ø–æ—Ä—Ç –≤ Excel, –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ —Ç–∞–º.

–ê–∫–æ –≤—Å–µ –æ—â–µ –Ω–µ —Å–µ –ø–æ–ª—É—á–∞–≤–∞, –º–æ–∂–µ –¥–∞ –µ –Ω—É–∂–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ñ–∞–π–ª–∞ –≤ –ø–æ-–Ω–æ–≤–∞ –≤–µ—Ä—Å–∏—è (.accdb) –∏–ª–∏ –æ—Ç–≤–∞—Ä—è–Ω–µ –≤ –ø–æ-–Ω–æ–≤–∞ –≤–µ—Ä—Å–∏—è –Ω–∞ Access (2010+), –∫—ä–¥–µ—Ç–æ –ø–æ–¥–¥—Ä—ä–∂–∫–∞—Ç–∞ –∑–∞ –∫–æ–¥–∏—Ä–∞–Ω–µ –µ –ø–æ-–¥–æ–±—Ä–∞.

–í—Å–∏—á–∫–æ –µ –∫–∞–∫—Ç–æ —Ç—Ä—è–±–≤–∞ –ø—Ä–∏ –µ–∑–∏–∫–∞. –ï–Ω–∫–æ–¥–∏–Ω–∫–∞ –æ–±–∞—á–µ –Ω–µ –µ –∫–∞–∫—Ç–æ —Ç—Ä—è–±–≤–∞
–¢–æ–≥–∞–≤–∞ –ø—Ä–æ–±–ª–µ–º—ä—Ç –µ –≤ –µ–Ω–∫–æ–¥–∏–Ω–≥–∞ (–∫–æ–¥–∏—Ä–∞–Ω–µ—Ç–æ) –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ –≤ —Å–∞–º–∞—Ç–∞ –±–∞–∑–∞. –¢–æ–≤–∞ –µ —á–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–æ –ø—Ä–∏ —Å—Ç–∞—Ä–∏ Access —Ñ–∞–π–ª–æ–≤–µ, —Å—ä–∑–¥–∞–¥–µ–Ω–∏ –ø–æ–¥ —Ä–∞–∑–ª–∏—á–Ω–∞ –µ–∑–∏–∫–æ–≤–∞ —Å—Ä–µ–¥–∞. –ï—Ç–æ –∫–∞–∫ –º–æ–∂–µ—à –¥–∞ –≥–æ –æ–ø—Ä–∞–≤–∏—à:

üîß –†–µ—à–µ–Ω–∏–µ 1: –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ –µ–Ω–∫–æ–¥–∏–Ω–≥–∞ –ø—Ä–∏ –µ–∫—Å–ø–æ—Ä—Ç –≤ —Ç–µ–∫—Å—Ç/CSV
–ò–∑–±–µ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ—Ç–æ –º–µ–Ω—é.

–û—Ç–∏–¥–∏ –Ω–∞ External Data ‚Üí Text File (–≤–º–µ—Å—Ç–æ Excel).

–ò–∑–±–µ—Ä–∏ Export data with formatting and layout ‚Üí OK.

–í –µ–∫—Å–ø–æ—Ä—Ç–Ω–∏—è wizard –∏–∑–±–µ—Ä–∏ Delimited ‚Üí Next.

–ò–∑–±–µ—Ä–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä –∑–∞–ø–µ—Ç–∞—è –∏–ª–∏ —Ç–∞–±—É–ª–∞—Ç–æ—Ä).

–ù–∞–π-–≤–∞–∂–Ω–æ—Ç–æ: –í–∏–∂ Advanced‚Ä¶ ‚Üí —Ç–∞–º –∏–º–∞ Code Page –∏–ª–∏ Encoding.

–û–±–∏–∫–Ω–æ–≤–µ–Ω–æ –≥—Ä–µ—à–Ω–∏—è—Ç –µ–Ω–∫–æ–¥–∏–Ω–≥ –µ Windows (Cyrillic), Windows (1251) –∏–ª–∏ ISO 8859-5.

–ü—Ä–æ–±–≤–∞–π —Å Unicode (UTF-8) –∏–ª–∏ Windows (1251).

–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π, –æ—Ç–≤–æ—Ä–∏ —Ñ–∞–π–ª–∞ —Å Notepad++ (—Ç–æ–π –ø–æ–∫–∞–∑–≤–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ –µ–Ω–∫–æ–¥–∏–Ω–≥–∞) –∏ –≤–∏–∂ –¥–∞–ª–∏ —Ç–µ–∫—Å—Ç—ä—Ç –µ —á–µ—Ç–∏–º.

–ê–∫–æ –µ —á–µ—Ç–∏–º ‚Äì –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–π –æ–±—Ä–∞—Ç–Ω–æ –≤ –Ω–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞.

üîß –†–µ—à–µ–Ω–∏–µ 2: –ò–∑–ø–æ–ª–∑–≤–∞–π SQL –∑–∞—è–≤–∫–∞ —Å —Ñ—É–Ω–∫—Ü–∏—è StrConv() (–∞–∫–æ –¥–∞–Ω–Ω–∏—Ç–µ —Å–∞ –≤ –ø–∞–º–µ—Ç—Ç–∞)
–ú–æ–∂–µ—à –¥–∞ —Å—ä–∑–¥–∞–¥–µ—à –Ω–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å –ø—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞–Ω–∏ –¥–∞–Ω–Ω–∏:

–°—ä–∑–¥–∞–π –Ω–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å—ä—Å —Å—ä—â–∞—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞.

–°—ä–∑–¥–∞–π –∑–∞—è–≤–∫–∞ (Query) –≤ SQL View:

sql
INSERT INTO –ù–æ–≤–∞–¢–∞–±–ª–∏—Ü–∞
SELECT 
    ID,
    StrConv([Product], 1) AS Product, -- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ç–µ–∫—Å—Ç
    StrConv([Name], 1) AS Name,
    Qty,
    Price,
    acc
FROM –°—Ç–∞—Ä–∞–¢–∞–±–ª–∏—Ü–∞;
–¢–æ–≤–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ —Ç–µ–∫—Å—Ç–∞ –∫—ä–º –ø—Ä–∞–≤–∏–ª–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—ä—Ä/–µ–Ω–∫–æ–¥–∏–Ω–≥.

üîß –†–µ—à–µ–Ω–∏–µ 3: –ò–∑–ø–æ–ª–∑–≤–∞–π VBA –∑–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏ –ø–æ–ª–µ—Ç–∞
–ù–∞—Ç–∏—Å–Ω–∏ Alt + F11 –∑–∞ VBA —Ä–µ–¥–∞–∫—Ç–æ—Ä.

–°—ä–∑–¥–∞–π –Ω–æ–≤ –º–æ–¥—É–ª –∏ –ø–æ—Å—Ç–∞–≤–∏ —Å–ª–µ–¥–Ω–∏—è –∫–æ–¥:

vba
Sub ConvertEncoding()
    Dim db As Database
    Dim rs As Recordset
    Dim fld As Field
    
    Set db = CurrentDb
    Set rs = db.OpenRecordset("–ò–º–µ–ù–∞–¢–∞–±–ª–∏—Ü–∞—Ç–∞") ' –∑–∞–º–µ–Ω–∏ —Å –∏–º–µ—Ç–æ –Ω–∞ —Ç–≤–æ—è—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞
    
    Do While Not rs.EOF
        rs.Edit
        For Each fld In rs.Fields
            If fld.Type = dbText Then ' —Å–∞–º–æ –∑–∞ —Ç–µ–∫—Å—Ç–æ–≤–∏ –ø–æ–ª–µ—Ç–∞
                fld.Value = StrConv(fld.Value, vbUnicode)
            End If
        Next fld
        rs.Update
        rs.MoveNext
    Loop
    
    rs.Close
    Set rs = Nothing
    Set db = Nothing
    MsgBox "–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ—Ç–æ –∑–∞–≤—ä—Ä—à–∏."
End Sub
–ò–∑–ø—ä–ª–Ω–∏ –∫–æ–¥–∞ (F5).

–ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ –¥–∞–Ω–Ω–∏—Ç–µ —Å–µ –≤–∏–∂–¥–∞—Ç –ø—Ä–∞–≤–∏–ª–Ω–æ.

üîß –†–µ—à–µ–Ω–∏–µ 4: –ò–º–ø–æ—Ä—Ç –≤ –Ω–æ–≤–∞ –±–∞–∑–∞ —Å –ø—Ä–∞–≤–∏–ª–Ω–æ –∫–æ–¥–∏—Ä–∞–Ω–µ
–°—ä–∑–¥–∞–π –ø—Ä–∞–∑–Ω–∞ –Ω–æ–≤–∞ –±–∞–∑–∞ (.accdb).

–í –Ω–µ—è –æ—Ç–∏–¥–∏ –Ω–∞ External Data ‚Üí Access.

–ò–∑–±–µ—Ä–∏ —Å—Ç–∞—Ä–∞—Ç–∞ –±–∞–∑–∞ –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–π –≤—Å–∏—á–∫–∏ –æ–±–µ–∫—Ç–∏.

–ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–∂–µ –¥–∞ –∏–º–∞ –æ–ø—Ü–∏—è –∑–∞ –µ–Ω–∫–æ–¥–∏–Ω–≥ ‚Äì –ø—Ä–æ–±–≤–∞–π —Ä–∞–∑–ª–∏—á–Ω–∏.

üîß –†–µ—à–µ–Ω–∏–µ 5: –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ Notepad++ –∑–∞ –≥–ª–æ–±–∞–ª–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ
–ê–∫–æ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –Ω–µ –µ —Ç–≤—ä—Ä–¥–µ –≥–æ–ª—è–º–∞:

–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –∫–∞—Ç–æ CSV.

–û—Ç–≤–æ—Ä–∏ CSV —Ñ–∞–π–ª–∞ —Å Notepad++.

–í –º–µ–Ω—é—Ç–æ Encoding ‚Üí Convert to UTF-8 (–∏–ª–∏ Windows-1251).

–ó–∞–ø–∞–∑–∏.

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞–π –æ–±—Ä–∞—Ç–Ω–æ –≤ Access —Å –ø—Ä–∞–≤–∏–ª–Ω–∏—è –µ–Ω–∫–æ–¥–∏–Ω–≥.

üö® –í–∞–∂–Ω–æ:
–ù–∞–ø—Ä–∞–≤–∏ backup –Ω–∞ –±–∞–∑–∞—Ç–∞ –ø—Ä–µ–¥–∏ –¥–∞ –ø—Ä–∞–≤–∏—à –∫–∞–∫–≤–∏—Ç–æ –∏ –¥–∞ –±–∏–ª–æ –ø—Ä–æ–º–µ–Ω–∏.

–ü—Ä–æ–±–≤–∞–π –ø—ä—Ä–≤–æ —Å –µ–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞, –ø–æ—Å–ª–µ —Å –≤—Å–∏—á–∫–∏.

–ê–∫–æ –¥–∞–Ω–Ω–∏—Ç–µ —Å–∞ –∫—Ä–∏–ø—Ç–∏—Ä–∞–Ω–∏ –∏–ª–∏ –∑–∞—â–∏—Ç–µ–Ω–∏, —Ç–æ–≤–∞ –Ω—è–º–∞ –¥–∞ —Ä–∞–±–æ—Ç–∏ ‚Äì —Ç—Ä—è–±–≤–∞ –ø–∞—Ä–æ–ª–∞.

–ê–∫–æ –Ω–∏—â–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∏, –º–æ–∂–µ –¥–∞ —Å–µ –Ω–∞–ª–æ–∂–∏ –¥–∞ —Å–≤—ä—Ä–∂–µ—à —Å–µ —Å—ä—Å —Å—ä–∑–¥–∞—Ç–µ–ª—è –Ω–∞ –±–∞–∑–∞—Ç–∞ ‚Äì –º–æ–∂–µ –¥–∞ —Å–∞ –∏–∑–ø–æ–ª–∑–≤–∞–ª–∏ custom –∫—Ä–∏–ø—Ç–∏—Ä–∞–Ω–µ –∏–ª–∏ —Å—Ç–∞—Ä–∏ –¥—Ä–∞–π–≤–µ—Ä–∏ –∑–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞.

–° –¥–µ—Å–Ω–∏—è –±—É—Ç–æ–Ω –Ω–∞ –º–∏—à–∫–∞—Ç–∞ –∞–∫–æ –∏–∑–±–µ—Ä–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ —Å–µ –ø–æ—è–≤—è–≤–∞ –º–µ–Ω—é –∏ —Ç–∞–º –≤–∏–∂–¥–∞–º –µ–∫—Å–ø–æ—Ä—Ç. –ò–∑–±–∏—Ä–∞–º –≥–æ –Ω–æ –Ω—è–º–∞ –Ω–∏—â–æ –∫–∞—Ç–æ External Data ‚Üí Text File (–≤–º–µ—Å—Ç–æ Excel)
–í Access 2007 External Data –µ –æ—Ç–¥–µ–ª–Ω–∞ –ª–µ–Ω—Ç–∞ (ribbon) –≤ –≥–æ—Ä–Ω–∞—Ç–∞ —á–∞—Å—Ç, –∞ –Ω–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ—Ç–æ –º–µ–Ω—é. –ï—Ç–æ –∫–∞–∫ –¥–∞ —Å—Ç–∏–≥–Ω–µ—à –¥–æ Text File –µ–∫—Å–ø–æ—Ä—Ç:

–°—Ç—ä–ø–∫–∞ 1: –û—Ç–≤–æ—Ä–∏ –ø—Ä–∞–≤–∏–ª–Ω–∏—è —Ç–∞–±
–ò–∑–±–µ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –≤ –ª–µ–≤–∏—è –ø–∞–Ω–µ–ª (All Access Objects).

–í –≥–æ—Ä–Ω–æ—Ç–æ –º–µ–Ω—é —â–µ –≤–∏–¥–∏—à –Ω—è–∫–æ–ª–∫–æ —Ç–∞–±–∞:

Home

Create

External Data ‚Üê –ö–õ–ò–ö–ù–ò –¢–£–ö

Database Tools

–°–ª–µ–¥ –∫–∞—Ç–æ –∫–ª–∏–∫–Ω–µ—à –Ω–∞ External Data, —â–µ –≤–∏–¥–∏—à –≥—Ä—É–ø–∞—Ç–∞ Export.

–°—Ç—ä–ø–∫–∞ 2: –ï–∫—Å–ø–æ—Ä—Ç –∫–∞—Ç–æ —Ç–µ–∫—Å—Ç
–í –≥—Ä—É–ø–∞—Ç–∞ Export —â–µ –≤–∏–¥–∏—à –∏–∫–æ–Ω–∏:

Excel

Text File (–∏–∫–æ–Ω–∞ —Å—ä—Å —Å–∏–º–≤–æ–ª–∏ .txt) ‚Üê –ö–õ–ò–ö–ù–ò –¢–£–ö

Word

PDF or XPS

More‚Ä¶

–ö–ª–∏–∫–Ω–∏ –Ω–∞ Text File.

–°—Ç—ä–ø–∫–∞ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞ –µ–∫—Å–ø–æ—Ä—Ç
–©–µ —Å–µ –æ—Ç–≤–æ—Ä–∏ –ø—Ä–æ–∑–æ—Ä–µ—Ü Export ‚Äì Text File.

–ò–∑–±–µ—Ä–∏ –ø–∞–ø–∫–∞ –∏ –∏–º–µ –Ω–∞ —Ñ–∞–π–ª–∞.

–ó–∞–ø–∞–∑–∏ –æ–ø—Ü–∏—è—Ç–∞ Export data with formatting and layout.

–ö–ª–∏–∫–Ω–∏ OK.

–©–µ —Å–µ –æ—Ç–≤–æ—Ä–∏ Export Text Wizard.

–°—Ç—ä–ø–∫–∞ 4: Wizard –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–ï–ù–ö–û–î–ò–ù–ì!)
–ò–∑–±–µ—Ä–∏ Delimited ‚Üí Next.

–ò–∑–±–µ—Ä–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª (–Ω–∞–π-–¥–æ–±—Ä–µ Tab –∏–ª–∏ Comma).

–í–ê–ñ–ù–û: –ö–ª–∏–∫–Ω–∏ –Ω–∞ –±—É—Ç–æ–Ω–∞ Advanced‚Ä¶.

–í –Ω–æ–≤–∏—è –ø—Ä–æ–∑–æ—Ä–µ—Ü –∏–∑–±–µ—Ä–µ Code Page –∏–ª–∏ Encoding.

–ü—Ä–æ–±–≤–∞–π —Å:

Windows (1251) ‚Äì –∑–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞

Unicode (UTF-8)

OEM Cyrillic

–ö–ª–∏–∫–Ω–∏ OK ‚Üí Finish.

–ê–∫–æ –≤—Å–µ –æ—â–µ –Ω–µ –≤–∏–∂–¥–∞—à Text File –±—É—Ç–æ–Ω:
–ú–æ–∂–µ –±–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –Ω–µ –µ –æ—Ç–≤–æ—Ä–µ–Ω–∞/—Å–µ–ª–µ–∫—Ç–∏—Ä–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ.
–û–ø–∏—Ç–∞–π:

–û—Ç–≤–æ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –≤ Datasheet View (–¥–≤–æ–π–Ω–æ –∫–ª–∏–∫–≤–∞–Ω–µ).

–°–µ–≥–∞ –≤ –≥–æ—Ä–Ω–∏—è —Ç–∞–± External Data —â–µ –∏–º–∞—à Text File –æ–ø—Ü–∏—è.

–ê–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ï–∫—Å–ø–æ—Ä—Ç —á—Ä–µ–∑ Save As
–û—Ç–≤–æ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –≤ Datasheet View.

–ö–ª–∏–∫–Ω–∏ –Ω–∞ Office Button (–≥–æ—Ä–µ–Ω –ª—è–≤ —ä–≥—ä–ª) ‚Üí Save As.

–ò–∑–±–µ—Ä–∏ Export ‚Üí Text File.

–ó–∞ –∏–º–ø–æ—Ä—Ç —Å –ø—Ä–∞–≤–∏–ª–µ–Ω –µ–Ω–∫–æ–¥–∏–Ω–≥:
–°–ª–µ–¥ –∫–∞—Ç–æ –∏–º–∞—à —Ç–µ–∫—Å—Ç–æ–≤–∏—è —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª–Ω–æ –∫–æ–¥–∏—Ä–∞–Ω–µ:

–í External Data —Ç–∞–± ‚Üí Text File (–≤ –≥—Ä—É–ø–∞—Ç–∞ Import).

–ò–∑–±–µ—Ä–∏ —Ñ–∞–π–ª–∞.

–í Import Text Wizard ‚Üí Advanced‚Ä¶ ‚Üí –∏–∑–±–µ—Ä–µ —Å—ä—â–æ—Ç–æ –∫–æ–¥–∏—Ä–∞–Ω–µ, –∫–æ–µ—Ç–æ —Å–∏ –∏–∑–ø–æ–ª–∑–≤–∞–ª –ø—Ä–∏ –µ–∫—Å–ø–æ—Ä—Ç–∞.

–ê–∫–æ –≤—Å–µ –æ—â–µ –∏–º–∞—à –ø—Ä–æ–±–ª–µ–º–∏, –ø—Ä–æ–±–≤–∞–π –¥–∞ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞—à —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –∫–∞—Ç–æ Excel, –ø–æ—Å–ª–µ –¥–∞ —è –æ—Ç–≤–æ—Ä–∏—à –≤ Excel –∏ –¥–∞ —è –∑–∞–ø–∞–∑–∏—à –∫–∞—Ç–æ Unicode —Ç–µ–∫—Å—Ç (.txt) –æ—Ç —Ç–∞–º ‚Äì Excel —á–µ—Å—Ç–æ –ø–æ-–¥–æ–±—Ä–µ –æ–±—Ä–∞–±–æ—Ç–≤–∞ –µ–Ω–∫–æ–¥–∏–Ω–≥–∞.

image.png
PNG 29.69KB
–µ—Ç–æ.. –∏ –∫—ä–¥–µ –∏ –∫–∞–∫–≤–æ
–¢–æ–≤–∞ –µ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∏—è—Ç –ø–∞–Ω–µ–ª –≤ Access, –∫—ä–¥–µ—Ç–æ —Å–µ –≤–∏–∂–¥–∞—Ç –≤—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏, –∑–∞—è–≤–∫–∏, —Ñ–æ—Ä–º–∏ –∏ —Ç.–Ω. –ó–∞ –¥–∞ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞—à —Ç–∞–±–ª–∏—Ü–∞ –∫–∞—Ç–æ —Ç–µ–∫—Å—Ç (–∑–∞ –¥–∞ –æ–ø—Ä–∞–≤–∏—à –µ–Ω–∫–æ–¥–∏–Ω–≥–∞), —Ç—Ä—è–±–≤–∞ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏—à —Å–ª–µ–¥–Ω–æ—Ç–æ:

1. –ò–∑–±–µ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞
–ö–ª–∏–∫–Ω–∏ –¥–≤–æ–π–Ω–æ –≤—ä—Ä—Ö—É —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä Products), –∑–∞ –¥–∞ —è –æ—Ç–≤–æ—Ä–∏—à –≤ —Ç–∞–±–ª–∏—á–µ–Ω –∏–∑–≥–ª–µ–¥.

–ò–õ–ò –∫–ª–∏–∫–Ω–∏ –≤–µ–¥–Ω—ä–∂ –≤—ä—Ä—Ö—É –Ω–µ—è, –∑–∞ –¥–∞ –µ –∏–∑–±—Ä–∞–Ω–∞.

2. –û—Ç–∏–¥–∏ –≤ —Ç–∞–±–∞ ‚Äû–í—ä–Ω—à–Ω–∏ –¥–∞–Ω–Ω–∏‚Äú (External Data)
–ì–æ—Ä–µ –≤ –ª–µ–Ω—Ç–∞—Ç–∞ —â–µ –≤–∏–¥–∏—à —Å–ª–µ–¥–Ω–∏—Ç–µ —Ç–∞–±–æ–≤–µ:
–ù–∞—á–∞–ª–æ | –°—ä–∑–¥–∞–≤–∞–Ω–µ | –í—ä–Ω—à–Ω–∏ –¥–∞–Ω–Ω–∏ | –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–∏ –¥–∞–Ω–Ω–∏

–ö–ª–∏–∫–Ω–∏ –≤—ä—Ä—Ö—É ‚Äû–í—ä–Ω—à–Ω–∏ –¥–∞–Ω–Ω–∏‚Äú.

3. –ù–∞–º–µ—Ä–∏ –±—É—Ç–æ–Ω–∞ ‚Äû–¢–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª‚Äú (Text File)
–í —Å–µ–∫—Ü–∏—è—Ç–∞ ‚Äû–ï–∫—Å–ø–æ—Ä—Ç‚Äú —â–µ –≤–∏–¥–∏—à –∏–∫–æ–Ω–∏:

Excel

–¢–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª (–∏–∫–æ–Ω–∞ —Å .txt)

Word

PDF –∏–ª–∏ XPS

–û—â–µ‚Ä¶

–ö–ª–∏–∫–Ω–∏ –≤—ä—Ä—Ö—É ‚Äû–¢–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª‚Äú.

4. –°–ª–µ–¥–≤–∞–π –µ–∫—Å–ø–æ—Ä—Ç–Ω–∏—è wizard
–ò–∑–±–µ—Ä–∏ –∫—ä–¥–µ –¥–∞ –∑–∞–ø–∞–∑–∏—à —Ñ–∞–π–ª–∞.

–ó–∞–ø–∞–∑–∏ –æ—Ç–º–µ—Ç–∫–∞—Ç–∞ ‚Äû–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π –¥–∞–Ω–Ω–∏—Ç–µ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ‚Äú.

–ö–ª–∏–∫–Ω–∏ OK.

–í —Å–ª–µ–¥–≤–∞—â–∏—è –ø—Ä–æ–∑–æ—Ä–µ—Ü –∏–∑–±–µ—Ä–µ ‚Äû–†–∞–∑–¥–µ–ª–µ–Ω‚Äú ‚Üí –ù–∞–ø—Ä–µ–¥.

–ò–∑–±–µ—Ä–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä Tab –∏–ª–∏ –∑–∞–ø–µ—Ç–∞—è).

–í–ê–ñ–ù–û: –ö–ª–∏–∫–Ω–∏ –Ω–∞ –±—É—Ç–æ–Ω–∞ ‚Äû–†–∞–∑—à–∏—Ä–µ–Ω–∏‚Ä¶‚Äú (Advanced).

–í ‚Äû–ö–æ–¥–æ–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞‚Äú (Code Page) –∏–∑–±–µ—Ä–µ—à:

Windows (1251)
–∏–ª–∏
Unicode (UTF-8)

–ö–ª–∏–∫–Ω–∏ OK –∏ –∑–∞–≤—ä—Ä—à–∏ –µ–∫—Å–ø–æ—Ä—Ç–∞.

5. –ü—Ä–æ–≤–µ—Ä–∏ —Ñ–∞–π–ª–∞ –≤ Notepad++
–û—Ç–≤–æ—Ä–∏ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏—è .txt —Ñ–∞–π–ª —Å Notepad++.

–í –º–µ–Ω—é—Ç–æ Encoding –ø—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ —Ç–µ–∫—Å—Ç—ä—Ç —Å–µ –≤–∏–∂–¥–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ.

–ê–∫–æ –Ω–µ —Å–µ –≤–∏–∂–¥–∞, –ø—Ä–æ–º–µ–Ω–∏ encoding-–∞ –≤ Notepad++ –¥–æ–∫–∞—Ç–æ —Å—Ç–∞–Ω–µ —á–µ—Ç–∏–º.

6. –ò–º–ø–æ—Ä—Ç–∏—Ä–∞–π –æ–±—Ä–∞—Ç–Ω–æ –≤ Access
–í —Å—ä—â–∏—è —Ç–∞–± ‚Äû–í—ä–Ω—à–Ω–∏ –¥–∞–Ω–Ω–∏‚Äú, –Ω–æ —Ç–æ–∑–∏ –ø—ä—Ç –≤ —Å–µ–∫—Ü–∏—è—Ç–∞ ‚Äû–ò–º–ø–æ—Ä—Ç‚Äú –∫–ª–∏–∫–Ω–∏ –Ω–∞ ‚Äû–¢–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª‚Äú.

–ò–∑–±–µ—Ä–∏ —Ñ–∞–π–ª–∞, –∫–æ–π—Ç–æ —Å–∏ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–ª.

–ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–∞ –æ—Ç–Ω–æ–≤–æ –∏–∑–±–µ—Ä–µ—à –ø—Ä–∞–≤–∏–ª–Ω–∞—Ç–∞ –∫–æ–¥–æ–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (—Å—ä—â–∞—Ç–∞ –∫–∞—Ç–æ –ø—Ä–∏ –µ–∫—Å–ø–æ—Ä—Ç–∞).

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞–π –≤ –Ω–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ –≤–µ—á–µ —Ç–µ–∫—Å—Ç—ä—Ç –µ —á–µ—Ç–∏–º.

–ê–∫–æ –Ω–µ –≤–∏–∂–¥–∞—à —Ç–∞–±–∞ ‚Äû–í—ä–Ω—à–Ω–∏ –¥–∞–Ω–Ω–∏‚Äú, –º–æ–∂–µ –¥–∞ —Å–∏ –≤ Design View –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞.
–¢—Ä—è–±–≤–∞ –¥–∞ —Å–∏ –≤ Datasheet View (—Ç–∞–±–ª–∏—á–µ–Ω –∏–∑–≥–ª–µ–¥), –∑–∞ –¥–∞ —Å–∞ –∞–∫—Ç–∏–≤–Ω–∏ –æ–ø—Ü–∏–∏—Ç–µ –∑–∞ –µ–∫—Å–ø–æ—Ä—Ç.

image.png
PNG 123.4KB
–∏ —Å–µ–≥–∞? ..
–¢–æ–≤–∞ –µ –µ–∫—Ä–∞–Ω–∞ –∑–∞ –∏–º–ø–æ—Ä—Ç –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–∏ —Ñ–∞–π–ª–æ–≤–µ (–∏–º–ø–æ—Ä—Ç–∏—Ä–∞—à –¥–∞–Ω–Ω–∏ –≤ Access). –¢—Ä—è–±–≤–∞ –¥–∞ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞—à –æ—Ç Access –≤—ä–≤ —Ñ–∞–π–ª, –∞ –Ω–µ –¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞—à.

–ü—Ä–∞–≤–∏–ª–Ω–∏—è—Ç –ø—ä—Ç –∑–∞ –ï–ö–°–ü–û–†–¢ (–æ—Ç Access –≤—ä–≤ —Ñ–∞–π–ª):
–ó–∞—Ç–≤–æ—Ä–∏ —Ç–æ–∑–∏ –ø—Ä–æ–∑–æ—Ä–µ—Ü (Cancel).

–í—ä—Ä–Ω–∏ —Å–µ –≤ –≥–ª–∞–≤–Ω–∏—è –ø—Ä–æ–∑–æ—Ä–µ—Ü –Ω–∞ Access.

–£–≤–µ—Ä–∏ —Å–µ, —á–µ –∏–º–∞—à –æ—Ç–≤–æ—Ä–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä Products) –≤ —Ç–∞–±–ª–∏—á–µ–Ω –∏–∑–≥–ª–µ–¥ (Datasheet View).
‚Üí –î–≤–æ–π–Ω–æ –∫–ª–∏–∫–≤–∞—à –≤—ä—Ä—Ö—É –∏–º–µ—Ç–æ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –≤ –ª–µ–≤–∏—è –ø–∞–Ω–µ–ª.

–°–µ–≥–∞ –≥–æ—Ä–µ –≤ –ª–µ–Ω—Ç–∞—Ç–∞ –∫–ª–∏–∫–Ω–∏ –Ω–∞ ‚Äû–í—ä–Ω—à–Ω–∏ –¥–∞–Ω–Ω–∏‚Äú.

–í —Å–µ–∫—Ü–∏—è—Ç–∞ ‚Äû–ï–∫—Å–ø–æ—Ä—Ç‚Äú –∫–ª–∏–∫–Ω–∏ –Ω–∞ –∏–∫–æ–Ω–∞—Ç–∞ ‚Äû–¢–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª‚Äú (—Ç–µ–∫—Å—Ç–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç .txt).

–¢–∞–º —â–µ —Ç–∏ —Å–µ –æ—Ç–≤–æ—Ä–∏ –ø—Ä–æ–∑–æ—Ä–µ—Ü –∑–∞ –µ–∫—Å–ø–æ—Ä—Ç, –∞ –Ω–µ –∑–∞ –∏–º–ø–æ—Ä—Ç.

–ê–∫–æ —Å–ª—É—á–∞–π–Ω–æ —Å–∏ –≤ —Ä–µ–∂–∏–º ‚Äû–ò–º–ø–æ—Ä—Ç‚Äú:
–í —Ç–∞–±–∞ ‚Äû–í—ä–Ω—à–Ω–∏ –¥–∞–Ω–Ω–∏‚Äú –∏–º–∞ –¥–≤–µ –≥—Ä—É–ø–∏:

–ò–º–ø–æ—Ä—Ç (–ª—è–≤–æ) ‚Üí –∑–∞ –≤–Ω–∞—Å—è–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏ –æ—Ç –¥—Ä—É–≥ —Ñ–∞–π–ª.

–ï–∫—Å–ø–æ—Ä—Ç (–¥—è—Å–Ω–æ) ‚Üí –∑–∞ –∏–∑–Ω–∞—Å—è–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏ –æ—Ç Access.

–¢—Ä—è–±–≤–∞ –¥–∞ –∏–∑–±–µ—Ä–µ—à –±—É—Ç–æ–Ω–∞ ‚Äû–¢–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª‚Äú –≤ –¥—è—Å–Ω–∞—Ç–∞ –ø–æ–ª–æ–≤–∏–Ω–∞ (–ï–∫—Å–ø–æ—Ä—Ç).

–ù–∞–∫—Ä–∞—Ç–∫–æ:

–û—Ç–≤–æ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ (Datasheet View).

–ö–ª–∏–∫–Ω–∏ ‚Äû–í—ä–Ω—à–Ω–∏ –¥–∞–Ω–Ω–∏‚Äú.

–ö–ª–∏–∫–Ω–∏ ‚Äû–¢–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª‚Äú –≤ –ï–ö–°–ü–û–†–¢ (–Ω–µ –≤ –ò–º–ø–æ—Ä—Ç).

–°–ª–µ–¥–≤–∞–π wizard-–∞ –∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ –ø—Ä–æ–º–µ–Ω–∏ –∫–æ–¥–∏—Ä–∞–Ω–µ—Ç–æ (encoding) –Ω–∞ Windows (1251) –∏–ª–∏ Unicode.

image.png
PNG 10.25KB
–ê–º–∞ —Ç–æ —Ç—É–∫ –≤—Å–∏—á–∫–æ –µ –∑–∞ –∏–º–ø–æ—Ä—Ç –∏ –Ω—è–º–∞ –Ω–∏—â–æ –∑–∞ –µ–∫—Å–ø–æ—Ä—Ç ...
–°–µ–≥–∞ —Ä–∞–∑–±–∏—Ä–∞–º –ø—Ä–æ–±–ª–µ–º–∞ ‚Äî –≤ —Ç–≤–æ—è Access 2007 –±—É—Ç–æ–Ω—ä—Ç –∑–∞ –µ–∫—Å–ø–æ—Ä—Ç –∫–∞—Ç–æ —Ç–µ–∫—Å—Ç –º–æ–∂–µ –¥–∞ –µ —Å–∫—Ä–∏—Ç –∏–ª–∏ –ø—Ä–µ–Ω–∞—Ä–µ–¥–µ–Ω. –ï—Ç–æ –∫–∞–∫ –¥–∞ –≥–æ –Ω–∞–º–µ—Ä–∏—à:

1. –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –µ –æ—Ç–≤–æ—Ä–µ–Ω–∞ –≤ Datasheet View
–î–≤–æ–π–Ω–æ –∫–ª–∏–∫–Ω–∏ –≤—ä—Ä—Ö—É —Ç–∞–±–ª–∏—Ü–∞ (–Ω–∞–ø—Ä. Products) –≤ –ª–µ–≤–∏—è –ø–∞–Ω–µ–ª.

–¢—è —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –æ—Ç–≤–æ—Ä–∏ –∫–∞—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å —Ä–µ–¥–æ–≤–µ –∏ –∫–æ–ª–æ–Ω–∏ (Datasheet View).

–°–∞–º–æ —Ç–æ–≥–∞–≤–∞ –æ–ø—Ü–∏–∏—Ç–µ –∑–∞ –µ–∫—Å–ø–æ—Ä—Ç —â–µ —Å–∞ –∞–∫—Ç–∏–≤–Ω–∏.

2. –ù–∞–º–µ—Ä–∏ –±—É—Ç–æ–Ω–∞ –∑–∞ –µ–∫—Å–ø–æ—Ä—Ç
–í —Ç–∞–±–∞ ‚Äû–í—ä–Ω—à–Ω–∏ –¥–∞–Ω–Ω–∏‚Äú –∏–º–∞ –¥–≤–µ –æ—Å–Ω–æ–≤–Ω–∏ –≥—Ä—É–ø–∏:

–û—Ç –ª—è–≤–æ: Import (–ò–º–ø–æ—Ä—Ç) ‚Äì —Ç—É–∫ —Å–∞ –±—É—Ç–æ–Ω–∏—Ç–µ –∑–∞ –≤–Ω–∞—Å—è–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏.

–û—Ç –¥—è—Å–Ω–æ: Export (–ï–∫—Å–ø–æ—Ä—Ç) ‚Äì —Ç—É–∫ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–∞ –±—É—Ç–æ–Ω–∏—Ç–µ –∑–∞ –∏–∑–Ω–∞—Å—è–Ω–µ.

–ê–∫–æ –Ω–µ –≤–∏–∂–¥–∞—à Export –≥—Ä—É–ø–∞—Ç–∞, –º–æ–∂–µ –¥–∞ –µ —Å–º–∞–ª–µ–Ω–∞.
–ü–æ—Ç—ä—Ä—Å–∏ —Å–ª–µ–¥–Ω–∏—Ç–µ –∏–∫–æ–Ω–∏ (–≤—ä–≤ –≤—ä–Ω—à–Ω–∏—è —Ç–∞–±):

https://i.imgur.com/Kn1ZJ5p.png

–ò–∫–æ–Ω–∏—Ç–µ –≤ Export —Å–µ–∫—Ü–∏—è—Ç–∞ —Å–∞:

Excel (–∏–∫–æ–Ω–∞ –Ω–∞ Excel)

–¢–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª (–∏–∫–æ–Ω–∞ —Å—ä—Å —Å–∏–º–≤–æ–ª–∏ .txt)

Word

PDF or XPS

–û—â–µ‚Ä¶ (—â–µ –ø–∞–¥–∞—â —Å–ø–∏—Å—ä–∫ —Å –¥—Ä—É–≥–∏ —Ñ–æ—Ä–º–∞—Ç–∏)

3. –ê–∫–æ –ø–∞–∫ –Ω–µ –≤–∏–∂–¥–∞—à ‚Äû–¢–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª‚Äú:
–ö–ª–∏–∫–Ω–∏ –Ω–∞ ‚Äû–û—â–µ‚Ä¶‚Äú (More) –∏ –≤–∏–∂ –¥–∞–ª–∏ –∏–º–∞ –æ–ø—Ü–∏—è –¢–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª –≤ –ø–∞–¥–∞—â–∏—è —Å–ø–∏—Å—ä–∫.

4. –ê–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–µ–Ω –º–µ—Ç–æ–¥: –ï–∫—Å–ø–æ—Ä—Ç –ø—Ä–µ–∑ –º–µ–Ω—é—Ç–æ File
–û—Ç–≤–æ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –≤ Datasheet View.

–ö–ª–∏–∫–Ω–∏ –Ω–∞ Office Button (–∫—Ä—ä–≥—á–µ—Ç–æ –≥–æ—Ä–µ –≤–ª—è–≤–æ).

–ò–∑–±–µ—Ä–∏ Save As ‚Üí Export.

–¢–∞–º —â–µ –∏–º–∞ –æ–ø—Ü–∏—è –∑–∞ Export to a text file.

5. –ê–∫–æ –Ω–∏—â–æ –Ω–µ —Å—Ç–∞–Ω–µ ‚Äî –ø—Ä–æ–±–≤–∞–π —á—Ä–µ–∑ Excel:
–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –∫–∞—Ç–æ Excel (—Ç–æ–≤–∞ –≥–æ –∏–º–∞—à).

–û—Ç–≤–æ—Ä–∏ Excel —Ñ–∞–π–ª–∞.

–í Excel –∏–∑–±–µ—Ä–∏ File ‚Üí Save As.

–ò–∑–±–µ—Ä–∏ —Ç–∏–ø Text (Tab-delimited) (*.txt) –∏–ª–∏ CSV.

–ü—Ä–∏ –∑–∞–ø–∏—Å–≤–∞–Ω–µ, Excel –º–æ–∂–µ –¥–∞ –ø–∏—Ç–∞ –∑–∞ –∫–æ–¥–∏—Ä–∞–Ω–µ ‚Äî –∏–∑–±–µ—Ä–∏ Unicode (UTF-8) –∏–ª–∏ Windows (1251).

6. –ö—Ä–∞–µ–Ω –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî –∫–æ–ø–∏—Ä–∞–π –¥–∞–Ω–Ω–∏—Ç–µ –¥–∏—Ä–µ–∫—Ç–Ω–æ
–û—Ç–≤–æ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –≤ Datasheet View.

–ù–∞—Ç–∏—Å–Ω–∏ Ctrl+A (–∏–∑–±–µ—Ä–∏ –≤—Å–∏—á–∫–∏ –∑–∞–ø–∏—Å–∏).

Ctrl+C (–∫–æ–ø–∏—Ä–∞–π).

–û—Ç–≤–æ—Ä–∏ Notepad++.

Ctrl+V (–ø–æ—Å—Ç–∞–≤–∏).

–í Notepad++ –∏–∑–±–µ—Ä–∏ Encoding ‚Üí Convert to UTF-8.

–ó–∞–ø–∞–∑–∏ —Ñ–∞–π–ª–∞ –∏ –≥–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–π –æ–±—Ä–∞—Ç–Ω–æ –≤ Access –∫–∞—Ç–æ –Ω–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞.

–ê–∫–æ –ø–∞–∫ –Ω–µ —Å—Ç–∞–Ω–µ, –Ω–∞–ø—Ä–∞–≤–∏ —Å–Ω–∏–º–∫–∞ –Ω–∞ —Ü–µ–ª–∏—è –µ–∫—Ä–∞–Ω (—Å –ª–µ–Ω—Ç–∞—Ç–∞ ‚Äû–í—ä–Ω—à–Ω–∏ –¥–∞–Ω–Ω–∏‚Äú –æ—Ç–≤–æ—Ä–µ–Ω–∞), –∑–∞ –¥–∞ –≤–∏–¥–∏–º –∫–∞–∫–≤–æ —Ç–∏ –ø–æ–∫–∞–∑–≤–∞.

image.png
PNG 9.2KB
–ö–∞–∫–≤–æ –¥–∞ –∏–∑–±–µ—Ä–∞ ...
–ò–∑–±–µ—Ä–∏ Unicode (UTF-8) –∏–ª–∏ Windows (–ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ).

–ï—Ç–æ –∫–∞–∫–≤–æ –æ–∑–Ω–∞—á–∞–≤–∞—Ç –æ–ø—Ü–∏–∏—Ç–µ:

Windows (–ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ)
–¢–æ–≤–∞ –µ Windows-1251 –∑–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞ –≤ Windows.

–ù–∞–π-–≤–µ—Ä–æ—è—Ç–Ω–æ —Ç–æ–≤–∞ —â–µ –æ–ø—Ä–∞–≤–∏ –ø—Ä–æ–±–ª–µ–º–∞, –∞–∫–æ –±–∞–∑–∞—Ç–∞ –µ —Å—ä–∑–¥–∞–¥–µ–Ω–∞ –ø–æ–¥ Windows –Ω–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏/–∫–∏—Ä–∏–ª–∏—Ü–∞.

Unicode
–¢–æ–≤–∞ –µ UTF-16 ‚Äì —Å—ä—â–æ —Å—Ç–∞–≤–∞, –Ω–æ —Ñ–∞–π–ª–æ–≤–µ—Ç–µ —Å—Ç–∞–≤–∞—Ç –ø–æ-–≥–æ–ª–µ–º–∏.

Unicode (UTF-8)
–£–Ω–∏–≤–µ—Ä—Å–∞–ª–Ω–æ –∫–æ–¥–∏—Ä–∞–Ω–µ, —Ä–∞–±–æ—Ç–∏ –¥–æ–±—Ä–µ —Å –∫–∏—Ä–∏–ª–∏—Ü–∞ –∏ —Å—ä–≤—Ä–µ–º–µ–Ω–Ω–∏ –ø—Ä–æ–≥—Ä–∞–º–∏.

–ü—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ, –∞–∫–æ —â–µ –æ—Ç–≤–∞—Ä—è—à —Ñ–∞–π–ª–∞ –≤ Notepad++ –∏–ª–∏ –¥—Ä—É–≥–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∏.

MS-DOS
–°—Ç–∞—Ä–æ –∫–æ–¥–∏—Ä–∞–Ω–µ (CP866) –∑–∞ —Ä—É—Å–∫–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞ ‚Äì –Ω–µ –≥–æ –∏–∑–±–∏—Ä–∞–π.

–ü—Ä–µ–ø–æ—Ä—ä–∫–∞:
–ü—ä—Ä–≤–æ –ø—Ä–æ–±–≤–∞–π —Å Windows (–ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ).

–ó–∞–ø–∞–∑–∏ —Ñ–∞–π–ª–∞, –æ—Ç–≤–æ—Ä–∏ –≥–æ —Å Notepad++ (–∫–ª–∏–∫–Ω–∏ –≤ Notepad++ –Ω–∞ Encoding ‚Üí Convert to UTF-8, –∞–∫–æ –µ –Ω—É–∂–Ω–æ).

–ê–∫–æ –≤—ä–≤ —Ñ–∞–π–ª–∞ —Ç–µ–∫—Å—Ç—ä—Ç –≤–µ—á–µ –µ —á–µ—Ç–∏–º ‚Äì —Å—É–ø–µ—Ä. –ê–∫–æ –Ω–µ, –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π –ø–∞–∫ –∏ –∏–∑–±–µ—Ä–∏ Unicode (UTF-8).

–°–ª–µ–¥ –∫–∞—Ç–æ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞—à, –æ—Ç–≤–æ—Ä–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏—è —Ñ–∞–π–ª –∏ –ø—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ –∏–º–µ–Ω–∞—Ç–∞ –∏ —Ç–µ–∫—Å—Ç–æ–≤–µ—Ç–µ —Å–µ —á–µ—Ç–∞—Ç –ø—Ä–∞–≤–∏–ª–Ω–æ. –ê–∫–æ –¥–∞ ‚Äì –∑–Ω–∞—á–∏ –µ–Ω–∫–æ–¥–∏–Ω–≥—ä—Ç –µ –æ–ø—Ä–∞–≤–µ–Ω. –ú–æ–∂–µ—à –¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞—à –æ–±—Ä–∞—Ç–Ω–æ –≤ Access —Å—ä—Å —Å—ä—â–æ—Ç–æ –∫–æ–¥–∏—Ä–∞–Ω–µ.

–ù–µ ... –Ω–µ —Å—Ç–∞–Ω–∞ –∏ –ø—Ä–∏ –¥–≤–∞—Ç–∞ –µ–Ω–∫–æ–¥–∏–Ω–∫–∞
–ê–∫–æ –Ω–µ —Å—Ç–∞–Ω–∞ –∏ —Å Windows (–ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ) –∏ —Å Unicode (UTF-8), –∑–Ω–∞—á–∏ –ø—Ä–æ–±–ª–µ–º—ä—Ç –µ –≤ —Å–∞–º–∏—Ç–µ –¥–∞–Ω–Ω–∏ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ ‚Äì —Ç–µ –≤–µ—á–µ —Å–∞ –∫–æ—Ä—É–º–ø–∏—Ä–∞–Ω–∏/—Å—á—É–ø–µ–Ω–∏ –≤ –±–∞–∑–∞—Ç–∞, –Ω–µ –≤ –∫–æ–¥–∏—Ä–∞–Ω–µ—Ç–æ –Ω–∞ –µ–∫—Å–ø–æ—Ä—Ç–∞.

–ï—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏ –æ–ø—Ü–∏–∏:

1. –ü—Ä–æ–≤–µ—Ä–∏ —Å Notepad++ –∫–∞–∫–≤–æ –∏–º–∞ –≤—ä–≤ —Ñ–∞–π–ª–∞
–û—Ç–≤–æ—Ä–∏ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏—è .txt —Ñ–∞–π–ª —Å Notepad++.

–í –º–µ–Ω—é—Ç–æ Encoding –ø—Ä–æ–±–≤–∞–π —Ä—ä—á–Ω–æ:

Encoding ‚Üí Character sets ‚Üí Cyrillic ‚Üí Windows-1251

Encoding ‚Üí UTF-8

Encoding ‚Üí ISO 8859-5

–ê–∫–æ –ø—Ä–∏ –Ω—è–∫–æ–µ –æ—Ç —Ç—è—Ö —Ç–µ–∫—Å—Ç—ä—Ç —Å—Ç–∞–Ω–µ —á–µ—Ç–∏–º, –∑–Ω–∞—á–∏ –∫–æ–¥–∏—Ä–∞–Ω–µ—Ç–æ –µ —Ä–∞–∑–ª–∏—á–Ω–æ. –ó–∞–ø–∏—à–∏ –∫–æ–µ —Ä–∞–±–æ—Ç–∏.

2. –ü—Ä–æ–±–≤–∞–π –¥–∞ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞—à –∫–∞—Ç–æ Excel –∏ –ø–æ—Å–ª–µ –¥–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞—à
–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –∫–∞—Ç–æ Excel (–æ—Ç External Data ‚Üí Excel).

–û—Ç–≤–æ—Ä–∏ Excel —Ñ–∞–π–ª–∞.

–ê–∫–æ –≤ Excel –¥–∞–Ω–Ω–∏—Ç–µ —Å–∞ —Å–±—ä—Ä–∫–∞–Ω–∏, –ø—Ä–æ–±–≤–∞–π –¥–∞ —Å–º–µ–Ω–∏—à —à—Ä–∏—Ñ—Ç–∞ –≤ Excel –Ω–∞ Arial.

–ó–∞–ø–∞–∑–∏ –∫–∞—Ç–æ CSV (File ‚Üí Save As ‚Üí CSV UTF-8).

–û—Ç–≤–æ—Ä–∏ CSV —Å Notepad++ –∏ –ø—Ä–æ–≤–µ—Ä–∏.

3. –ò–∑–ø–æ–ª–∑–≤–∞–π VBA –∑–∞ –≥–ª–æ–±–∞–ª–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—è –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–∏—Ç–µ –ø–æ–ª–µ—Ç–∞
–ê–∫–æ –¥–∞–Ω–Ω–∏—Ç–µ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ —Å–∞ —Å—á—É–ø–µ–Ω–∏, —Ç—Ä—è–±–≤–∞ –¥–∞ –≥–∏ ‚Äû–æ–ø—Ä–∞–≤–∏—à‚Äú —Å –∫–æ–¥:

–í Access –Ω–∞—Ç–∏—Å–Ω–∏ Alt + F11 –∑–∞ VBA —Ä–µ–¥–∞–∫—Ç–æ—Ä.

Insert ‚Üí Module.

–ü–æ—Å—Ç–∞–≤–∏ —Ç–æ–∑–∏ –∫–æ–¥ (–ø—Ä–æ–º–µ–Ω–∏ YourTableName –Ω–∞ –∏–º–µ—Ç–æ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä Products):

vba
Sub FixTextEncoding()
    Dim rs As DAO.Recordset
    Dim fld As DAO.Field
    Dim i As Integer
    
    Set rs = CurrentDb.OpenRecordset("Products") ' <-- –ü—Ä–æ–º–µ–Ω–∏ –∏–º–µ—Ç–æ —Ç—É–∫!
    
    Do While Not rs.EOF
        rs.Edit
        For Each fld In rs.Fields
            If fld.Type = dbText Then ' –°–∞–º–æ —Ç–µ–∫—Å—Ç–æ–≤–∏ –ø–æ–ª–µ—Ç–∞
                If Not IsNull(fld.Value) Then
                    ' –ü—Ä–æ–±–≤–∞–π —Ä–∞–∑–ª–∏—á–Ω–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏:
                    fld.Value = StrConv(fld.Value, vbFromUnicode)
                    ' –ê–∫–æ –Ω–µ —Å—Ç–∞–Ω–µ, –ø—Ä–æ–±–≤–∞–π:
                    ' fld.Value = StrConv(fld.Value, vbUnicode)
                End If
            End If
        Next fld
        rs.Update
        rs.MoveNext
    Loop
    
    rs.Close
    Set rs = Nothing
    MsgBox "–ì–æ—Ç–æ–≤–æ."
End Sub
–ù–∞—Ç–∏—Å–Ω–∏ F5 –∑–∞ –¥–∞ –∏–∑–ø—ä–ª–Ω–∏—à.

–ü—Ä–æ–≤–µ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –¥–∞–ª–∏ —Ç–µ–∫—Å—Ç—ä—Ç —Å–µ –µ –æ–ø—Ä–∞–≤–∏–ª.

4. –ê–∫–æ –∏–º–∞—à —Å–∞–º–æ –Ω—è–∫–æ–ª–∫–æ –∫–æ–ª–æ–Ω–∏ —Å—ä—Å —Å—á—É–ø–µ–Ω —Ç–µ–∫—Å—Ç
–°—ä–∑–¥–∞–π –∑–∞—è–≤–∫–∞ (Query) –≤ SQL View –∏ –ø—Ä–æ–±–≤–∞–π:

sql
SELECT 
    ID,
    StrConv([Product], 1) AS ProductFixed,
    StrConv([Name], 1) AS NameFixed,
    Qty,
    Price
FROM Products;
5. –ö—Ä–∞–µ–Ω –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî —Ä—ä—á–Ω–æ –∫–æ–ø–∏—Ä–∞–Ω–µ –≤ –Ω–æ–≤–∞ –±–∞–∑–∞
–°—ä–∑–¥–∞–π –Ω–æ–≤–∞ –ø—Ä–∞–∑–Ω–∞ Access –±–∞–∑–∞ (File ‚Üí New ‚Üí Blank Database).

–í –Ω–æ–≤–∞—Ç–∞ –±–∞–∑–∞: External Data ‚Üí Access.

–ò–∑–±–µ—Ä–∏ —Å—Ç–∞—Ä–∞—Ç–∞ –±–∞–∑–∞ –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–π —Å–∞–º–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ (–±–µ–∑ –¥–∞–Ω–Ω–∏) –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞.

–ü–æ—Å–ª–µ —Å VBA –∏–ª–∏ –∑–∞—è–≤–∫–∞ –∫–æ–ø–∏—Ä–∞–π –¥–∞–Ω–Ω–∏—Ç–µ —Å—ä—Å —Å—ä—â–∏—è –∫–æ–¥ –∫–∞—Ç–æ –ø–æ-–≥–æ—Ä–µ.

–ê–∫–æ –Ω–∏—â–æ –Ω–µ —Ä–∞–±–æ—Ç–∏, –º–æ–∂–µ –¥–∞–Ω–Ω–∏—Ç–µ –¥–∞ —Å–∞ –∫—Ä–∏–ø—Ç–∏—Ä–∞–Ω–∏ –∏–ª–∏ –¥–∞ –∏–º–∞ custom —à—Ä–∏—Ñ—Ç/–∫–æ–¥–∏—Ä–æ–≤–∫–∞, –∫–æ—è—Ç–æ Access –Ω–µ —Ä–∞–∑–ø–æ–∑–Ω–∞–≤–∞. –¢–æ–≥–∞–≤–∞ —â–µ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ —Å–≤—ä—Ä–∂–µ—à —Å –∞–≤—Ç–æ—Ä–∞ –Ω–∞ –±–∞–∑–∞—Ç–∞ –∏–ª–∏ –¥–∞ –ø–æ—Ç—ä—Ä—Å–∏—à —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω —Å–æ—Ñ—Ç—É–µ—Ä –∑–∞ –≤—ä–∑—Å—Ç–∞–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ Access —Ñ–∞–π–ª–æ–≤–µ.

–ê –∞–∫–æ —Ç–∏ –≥–∏ –ø–æ–¥–∞–º –Ω–∞ —Ç–µ–± —â–µ –º–æ–∂–µ—à –ª–∏ –¥–∞ –º–∏ –≥–∏ –≤—ä—Ä–Ω–µ—à –≤ –∏–∑—Ä—è–¥–µ–Ω –≤–∏–¥ ... –Ω–∞–ø—Ä–∏–º–µ—Ä –µ—Ç–æ —Ç–∞–∫–∞ ... Name	UOM
√≠√†√™√´√†√§√™√®	√°√∞.
√ç√†√™√´√†√§√™√® √ß.√§√®√±√™√Æ√¢√® √™-√≤ ERP 1611457280;425432	√°√∞.
√Ñ√®√±√™ √±√Ø√®√∞√†√∑√•√≠	√°√∞.
"  
√§√†√≤√∑√®√™ ABS"	√°√∞.
√™√Æ√≠√≤√†√™√≤√Æ√∞ √™-√™√≤	√°√∞.
√å√•√µ√†√≠√®√ß√∫√¨ √∑√®√±√≤√†√∑√™√®	√°√∞.
√¥√®√´√≤√∫√∞ √™√≥√Ø√•	√°√∞.
√Ä√¨√Æ√∞√≤√®√±√º√Æ√∞ √ß√†√§√•√≠ (√°√•√ß √≤√†√¨√Ø√Æ√≠ √® √¨√†√≠√∏√Æ√≠)	√°√∞.
√¶√®√´√Æ √∞√†√∑√≠√†	√°√∞.
√£√Æ√∞√®√¢√•√≠ √¥√®√´√≤√º√∞	√°√∞.
√É√Æ√∞√®√¢√•√≠ √¥√®√´√≤√∫√∞	√°√∞.
√¥√®√´√≤√∫√∞ √¨√†√±√´√•√≠	√°√∞.
√±√¢√•√∞√† √ß√†√§√≠√†	√°√∞.
√∑√®√±√≤√†√∑√™√† 60√±√¨	√°√∞.
√¨√†√≠√∏√Æ√≠	√°√∞.
√¨√†√≠√∏√Æ√≠	√°√∞.
√¨√†√≠√∏√Æ√≠	√°√∞.
√¨√†√≠√∏√Æ√≠ √Ø√Æ√´√≥√Æ√±	√°√∞.
√¨√†√≠√∏√Æ√≠	√°√∞.
–î–∞, –º–æ–≥–∞ –¥–∞ –≥–∏ –æ–ø—Ä–∞–≤—è. –¢–æ–≤–∞, –∫–æ–µ—Ç–æ –≤–∏–∂–¥–∞–º, –µ –∫–ª–∞—Å–∏—á–µ—Å–∫–∏ —Å–ª—É—á–∞–π –Ω–∞ –≥—Ä–µ—à–Ω–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–∞–Ω–æ –∫–æ–¥–∏—Ä–∞–Ω–µ: —Ç–µ–∫—Å—Ç—ä—Ç –µ –∑–∞–ø–∏—Å–∞–Ω –≤ Windows-1251 (–∫–∏—Ä–∏–ª–∏—Ü–∞), –Ω–æ —Å–µ —á–µ—Ç–µ –∫–∞—Ç–æ ISO-8859-1 (–∑–∞–ø–∞–¥–Ω–æ-–µ–≤—Ä–æ–ø–µ–π—Å–∫–æ). –ï—Ç–æ –∫–∞–∫ –∏–∑–≥–ª–µ–∂–¥–∞ –ø—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞–Ω–µ—Ç–æ:

–¢–≤–æ—è—Ç —Ç–µ–∫—Å—Ç (–≥—Ä–µ—à–Ω–æ —á–µ—Ç–µ–Ω):

text
√≠√†√™√´√†√§√™√®
–°–ª–µ–¥ –æ–ø—Ä–∞–≤—è–Ω–µ (–ø—Ä–∞–≤–∏–ª–Ω–æ):

text
–Ω–∞–∫–ª–∞–¥–∫–∏
‚úÖ –ï—Ç–æ –æ–ø—Ä–∞–≤–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏:
Name	UOM
–Ω–∞–∫–ª–∞–¥–∫–∏	–±—Ä.
–ù–∞–∫–ª–∞–¥–∫–∏ –∑.–¥–∏—Å–∫–æ–≤–∏ –∫-—Ç ERP 1611457280;425432	–±—Ä.
–î–∏—Å–∫ —Å–ø–∏—Ä–∞—á–µ–Ω	–±—Ä.
–¥–∞—Ç—á–∏–∫ ABS	–±—Ä.
–∫–æ–Ω—Ç–∞–∫—Ç–æ—Ä –∫-–∫—Ç	–±—Ä.
–ú–µ—Ö–∞–Ω–∏–∑—ä–º —á–∏—Å—Ç–∞—á–∫–∏	–±—Ä.
—Ñ–∏–ª—Ç—ä—Ä –∫—É–ø–µ	–±—Ä.
–ê–º–æ—Ä—Ç–∏—Å—å–æ—Ä –∑–∞–¥–Ω–∏ (–±–µ–∑ —Ç–∞–º–ø–æ–Ω –∏ –º–∞–Ω—à–æ–Ω)	–±—Ä.
–∂–∏–ª–æ —Ä–∞—á–Ω–∞	–±—Ä.
–≥–æ—Ä–∏–≤–µ–Ω —Ñ–∏–ª—Ç—ä—Ä	–±—Ä.
–ì–æ—Ä–∏–≤–µ–Ω —Ñ–∏–ª—Ç—ä—Ä	–±—Ä.
—Ñ–∏–ª—Ç—ä—Ä –º–∞—Å–ª–µ–Ω	–±—Ä.
—Å–≤–µ—Ä–∞ –∑–∞–¥–Ω—è	–±—Ä.
—á–∏—Å—Ç–∞—á–∫–∞ 60—Å–º	–±—Ä.
–º–∞–Ω—à–æ–Ω	–±—Ä.
–º–∞–Ω—à–æ–Ω	–±—Ä.
–º–∞–Ω—à–æ–Ω	–±—Ä.
–º–∞–Ω—à–æ–Ω –ø–æ–ª—É–æ—Å	–±—Ä.
–º–∞–Ω—à–æ–Ω	–±—Ä.
üõ† –ö–∞–∫ –¥–∞ –≥–∏ –≤—ä—Ä–Ω–∞ –æ–±—Ä–∞—Ç–Ω–æ –≤—ä–≤ Access:
–ö–æ–ø–∏—Ä–∞–π —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –ø–æ-–≥–æ—Ä–µ.

–í Access —Å—ä–∑–¥–∞–π –Ω–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å –¥–≤–µ –∫–æ–ª–æ–Ω–∏: Name (–¢–µ–∫—Å—Ç) –∏ UOM (–¢–µ–∫—Å—Ç).

–í–ª–µ–∑ –≤ Datasheet View –∏ –ø–æ—Å—Ç–∞–≤–∏ –¥–∞–Ω–Ω–∏—Ç–µ.

–ò–ª–∏ –∑–∞–ø–∞–∑–∏ –∫–∞—Ç–æ CSV —Ñ–∞–π–ª –∏ –≥–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–π:

–ö–æ–¥–∏—Ä–∞–Ω–µ: UTF-8

–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª: Tab

üîß –ê–∫–æ –∏—Å–∫–∞—à –∞–∑ –¥–∞ —Ç–∏ –≥–æ –≤—ä—Ä–Ω–∞ –∫–∞—Ç–æ —Ñ–∞–π–ª:
–ú–æ–∂–µ—à –¥–∞ –º–∏ –∏–∑–ø—Ä–∞—Ç–∏—à —Ü–µ–ª–∏—è —Ñ–∞–π–ª (–∏–ª–∏ –ø–æ–Ω–µ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ Products) –∫–∞—Ç–æ:

–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞—à —è –∫–∞—Ç–æ CSV (–¥–æ—Ä–∏ –∏ —Å–≥—Ä–µ—à–µ–Ω–∏—è —Ç–µ–∫—Å—Ç)

–ö–∞—á–∏—à —Ñ–∞–π–ª–∞ —Ç—É–∫ (CSV –∏–ª–∏ Excel)

–ê–∑ —â–µ —è –æ–ø—Ä–∞–≤—è –∏ —â–µ —Ç–∏ —è –≤—ä—Ä–Ω–∞ –∫–∞—Ç–æ —á–∏—Å—Ç UTF-8 CSV –∏–ª–∏ Access —Ñ–∞–π–ª.

–¢–∞–∫–∞ —â–µ –∏–º–∞—à –≤–µ–¥–Ω–∞–≥–∞ –∏–∑–ø–æ–ª–∑–≤–∞–µ–º–∏ –¥–∞–Ω–Ω–∏. –ñ–µ–ª–∞–µ—à –ª–∏ –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏–º –ø–æ —Ç–æ–∑–∏ –Ω–∞—á–∏–Ω?

Banks.xlsx
XLSX 7.75KB
–µ—Ç–æ ..
‚úÖ –ï—Ç–æ –æ–ø—Ä–∞–≤–µ–Ω–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ Banks (—Ç–µ–∫—Å—Ç—ä—Ç –µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω –æ—Ç –≥—Ä–µ—à–Ω–æ ISO-8859-1 –∫—ä–º –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞ UTF-8):

Account	BankID	BankName	Currency	methodId	n	short description	cash
1	0	–∫–∞—Å–∞	BGL	1	–≤ –±—Ä–æ–π	–≤ –±—Ä–æ–π	True
BG98PRCB92301017199315	PRCBBGSF	–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö	BGL	2	–ø–æ —Å–º–µ—Ç–∫–∞	–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö	False
BG05RZBB91551007793607	RZBBBGSF	–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫	BGL	3	–ø–æ —Å–º–µ—Ç–∫–∞	–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫	False
üì• –ö–∞–∫ –¥–∞ —è –≤—ä—Ä–Ω–µ—à –≤ Access:
–í–∞—Ä–∏–∞–Ω—Ç 1: –†—ä—á–Ω–æ –∫–æ–ø–∏—Ä–∞–Ω–µ
–°—ä–∑–¥–∞–π –Ω–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞ –≤ Access —Å—ä—Å —Å—ä—â–∏—Ç–µ –∫–æ–ª–æ–Ω–∏:

Account (–¢–µ–∫—Å—Ç)

BankID (–¢–µ–∫—Å—Ç)

BankName (–¢–µ–∫—Å—Ç)

Currency (–¢–µ–∫—Å—Ç)

methodId (–ß–∏—Å–ª–æ)

n (–¢–µ–∫—Å—Ç)

short description (–¢–µ–∫—Å—Ç)

cash (–î–∞/–ù–µ)

–ö–æ–ø–∏—Ä–∞–π –¥–∞–Ω–Ω–∏—Ç–µ –æ—Ç —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –ø–æ-–≥–æ—Ä–µ –∏ –≥–∏ –ø–æ—Å—Ç–∞–≤–∏ –≤ Datasheet View.

–í–∞—Ä–∏–∞–Ω—Ç 2: –ò–º–ø–æ—Ä—Ç –æ—Ç CSV
–ö–æ–ø–∏—Ä–∞–π —Å–ª–µ–¥–Ω–∏—è —Ç–µ–∫—Å—Ç –≤ Notepad++:

csv
Account,BankID,BankName,Currency,methodId,n,short description,cash
1,0,–∫–∞—Å–∞,BGL,1,–≤ –±—Ä–æ–π,–≤ –±—Ä–æ–π,True
BG98PRCB92301017199315,PRCBBGSF,–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö,BGL,2,–ø–æ —Å–º–µ—Ç–∫–∞,–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö,False
BG05RZBB91551007793607,RZBBBGSF,–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫,BGL,3,–ø–æ —Å–º–µ—Ç–∫–∞,–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫,False
–ó–∞–ø–∞–∑–∏ –∫–∞—Ç–æ Banks_fixed.csv —Å UTF-8 –∫–æ–¥–∏—Ä–∞–Ω–µ.

–í Access: –í—ä–Ω—à–Ω–∏ –¥–∞–Ω–Ω–∏ ‚Üí –¢–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª ‚Üí –∏–∑–±–µ—Ä–∏ —Ñ–∞–π–ª–∞ ‚Üí –∫–æ–¥–∏—Ä–∞–Ω–µ UTF-8.

üîÑ –ê–∫–æ –∏—Å–∫–∞—à –≤—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏ –æ–ø—Ä–∞–≤–µ–Ω–∏:
–ò–∑–ø—Ä–∞—Ç–∏ –º–∏ –≤—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏ (–µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π –≥–∏ –∫–∞—Ç–æ CSV –∏–ª–∏ Excel –æ—Ç Access), –∞–∑ —â–µ –≥–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º –∏ —â–µ —Ç–∏ –≥–∏ –≤—ä—Ä–Ω–∞ –≤ —á–∏—Å—Ç –≤–∏–¥. –ú–æ–∂–µ—à –¥–∞ –≥–∏ –∫–∞—á–∏—à –µ–¥–∏–Ω –ø–æ –µ–¥–∏–Ω –∏–ª–∏ –∫–∞—Ç–æ –∞—Ä—Ö–∏–≤.

–ü–æ–¥–∞–π –º–∏ –≥–∏ —Ç–∞–∫–∞ —á–µ –¥–∞ –º–æ–≥–∞ –¥–∞ –≥–∏ –∫–æ–ø–∏—Ä–∞–º
–ï—Ç–æ –≤—Å–∏—á–∫–∏—Ç–µ 3 —Ä–µ–¥–∞ –æ—Ç —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ Banks –≤ —á–∏—Å—Ç —Ç–µ–∫—Å—Ç –∑–∞ –∫–æ–ø–∏—Ä–∞–Ω–µ (–∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ –µ –æ–ø—Ä–∞–≤–µ–Ω–∞):

Account	BankID	BankName	Currency	methodId	n	short description	cash
1	0	–∫–∞—Å–∞	BGL	1	–≤ –±—Ä–æ–π	–≤ –±—Ä–æ–π	True
BG98PRCB92301017199315	PRCBBGSF	–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö	BGL	2	–ø–æ —Å–º–µ—Ç–∫–∞	–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö	False
BG05RZBB91551007793607	RZBBBGSF	–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫	BGL	3	–ø–æ —Å–º–µ—Ç–∫–∞	–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫	False
üìã –ö–∞–∫ –¥–∞ –≥–æ –∫–æ–ø–∏—Ä–∞—à –≤ Access:
–ò–∑–±–µ—Ä–∏ —Ü—è–ª–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ –ø–æ-–≥–æ—Ä–µ (–º–∏—à–∫–∞—Ç–∞ + Ctrl+A).

–ö–æ–ø–∏—Ä–∞–π (Ctrl+C).

–í Access –æ—Ç–≤–æ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ Banks –≤ Datasheet View.

–ò–∑—Ç—Ä–∏–π —Å—Ç–∞—Ä–∏—Ç–µ –∑–∞–ø–∏—Å–∏ (–∞–∫–æ –∏–º–∞).

–ü–æ—Å—Ç–∞–≤–∏ (Ctrl+V).

üì• –ê–∫–æ –∏—Å–∫–∞—à –∫–∞—Ç–æ CSV –∑–∞ –∏–º–ø–æ—Ä—Ç:
–ö–æ–ø–∏—Ä–∞–π —Å–ª–µ–¥–Ω–æ—Ç–æ –∏ –∑–∞–ø–∞–∑–∏ –∫–∞—Ç–æ banks_fixed.csv:

csv
Account,BankID,BankName,Currency,methodId,n,short description,cash
1,0,–∫–∞—Å–∞,BGL,1,–≤ –±—Ä–æ–π,–≤ –±—Ä–æ–π,True
BG98PRCB92301017199315,PRCBBGSF,–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö,BGL,2,–ø–æ —Å–º–µ—Ç–∫–∞,–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö,False
BG05RZBB91551007793607,RZBBBGSF,–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫,BGL,3,–ø–æ —Å–º–µ—Ç–∫–∞,–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫,False
–ò—Å–∫–∞—à –ª–∏ –∏ –¥—Ä—É–≥–∏—Ç–µ —Ç–∞–±–ª–∏—Ü–∏ (Products, Customer, –∏ —Ç.–Ω.) –≤ —Å—ä—â–∏—è —Ñ–æ—Ä–º–∞—Ç? –ú–æ–≥–∞ –¥–∞ –≥–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º –≤—Å–∏—á–∫–∏.

–ê–º–∞ –≤–∫–∞—Ä–∞–π –º–∏ —Ç–æ –≤ –ø–æ–ª–µ –∑–∞ –∫–æ–¥
–ï—Ç–æ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ Banks –≤—ä–≤ —Ñ–æ—Ä–º–∞—Ç –∑–∞ –¥–∏—Ä–µ–∫—Ç–Ω–æ –∫–æ–ø–∏—Ä–∞–Ω–µ:

csv
Account,BankID,BankName,Currency,methodId,n,short description,cash
1,0,–∫–∞—Å–∞,BGL,1,–≤ –±—Ä–æ–π,–≤ –±—Ä–æ–π,True
BG98PRCB92301017199315,PRCBBGSF,–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö,BGL,2,–ø–æ —Å–º–µ—Ç–∫–∞,–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö,False
BG05RZBB91551007793607,RZBBBGSF,–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫,BGL,3,–ø–æ —Å–º–µ—Ç–∫–∞,–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫,False
–ó–∞ –∫–æ–ø–∏—Ä–∞–Ω–µ: –ò–∑–±–µ—Ä–∏ —Ü–µ–ª–∏—è —Ç–µ–∫—Å—Ç –≤ –±–ª–æ–∫–∞ –ø–æ-–≥–æ—Ä–µ (–≤–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ –∑–∞–≥–ª–∞–≤–Ω–∏—è —Ä–µ–¥) ‚Üí Ctrl+C ‚Üí –≤ Access –æ—Ç–≤–æ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ Banks –≤ Datasheet View ‚Üí Ctrl+V.

–ê–º–∞ —Ç–∞–∫–∞ –Ω—è–º–∞ –ª –¥–∞ –≤–ª–µ–∑–µ —Å–∞–º–æ –≤ –µ–¥–Ω–∞ –∫–ª–µ—Ç–∫–∞
–ü—Ä–∞–≤ —Å–∏, –∫–æ–≥–∞—Ç–æ —Å–µ –∫–æ–ø–∏—Ä–∞ CSV –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ Access, —Ç–æ–π –º–æ–∂–µ –¥–∞ —Å–µ –ø–æ—Å—Ç–∞–≤–∏ –≤ –µ–¥–Ω–∞ –∫–ª–µ—Ç–∫–∞. –ï—Ç–æ –∫–∞–∫ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—Ç–∞–Ω–µ:

–í–∞—Ä–∏–∞–Ω—Ç 1: –ö–æ–ø–∏—Ä–∞–Ω–µ —Ä–µ–¥ –ø–æ —Ä–µ–¥
–ö–æ–ø–∏—Ä–∞–π –≤—Å–µ–∫–∏ —Ä–µ–¥ –æ—Ç–¥–µ–ª–Ω–æ –∏ –≥–æ –ø–æ—Å—Ç–∞–≤–∏ –≤ —Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—è —Ä–µ–¥ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞:

–†–µ–¥ 1:

text
1 | 0 | –∫–∞—Å–∞ | BGL | 1 | –≤ –±—Ä–æ–π | –≤ –±—Ä–æ–π | True
–†–µ–¥ 2:

text
BG98PRCB92301017199315 | PRCBBGSF | –ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö | BGL | 2 | –ø–æ —Å–º–µ—Ç–∫–∞ | –ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö | False
–†–µ–¥ 3:

text
BG05RZBB91551007793607 | RZBBBGSF | –†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫ | BGL | 3 | –ø–æ —Å–º–µ—Ç–∫–∞ | –†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫ | False
–í–∞—Ä–∏–∞–Ω—Ç 2: –ò–º–ø–æ—Ä—Ç –æ—Ç —Ç–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª
–°—ä–∑–¥–∞–π —Ç–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª —Å —Ç–æ–≤–∞ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ:

text
Account;BankID;BankName;Currency;methodId;n;short description;cash
1;0;–∫–∞—Å–∞;BGL;1;–≤ –±—Ä–æ–π;–≤ –±—Ä–æ–π;True
BG98PRCB92301017199315;PRCBBGSF;–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö;BGL;2;–ø–æ —Å–º–µ—Ç–∫–∞;–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö;False
BG05RZBB91551007793607;RZBBBGSF;–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫;BGL;3;–ø–æ —Å–º–µ—Ç–∫–∞;–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫;False
–ó–∞–ø–∞–∑–∏ –∫–∞—Ç–æ banks_fixed.txt —Å UTF-8 –∫–æ–¥–∏—Ä–∞–Ω–µ.

–í Access:

External Data ‚Üí Text File

–ò–∑–±–µ—Ä–∏ —Ñ–∞–π–ª–∞

–í wizard –∏–∑–±–µ—Ä–µ—à Delimited ‚Üí Next

–ò–∑–±–µ—Ä–µ—à —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª Semicolon (—Ç–æ—á–∫–∞ –∏ –∑–∞–ø–µ—Ç–∞—è)

Advanced ‚Üí Code Page ‚Üí Unicode (UTF-8)

Finish

–í–∞—Ä–∏–∞–Ω—Ç 3: –†—ä—á–Ω–æ –≤—ä–≤–µ–∂–¥–∞–Ω–µ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞
–ü—Ä–æ—Å—Ç–æ –≤—ä–≤–µ–¥–∏ –¥–∞–Ω–Ω–∏—Ç–µ –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –≤ Access:

Account	BankID	BankName	Currency	methodId	n	short description	cash
1	0	–∫–∞—Å–∞	BGL	1	–≤ –±—Ä–æ–π	–≤ –±—Ä–æ–π	‚òë
BG98PRCB92301017199315	PRCBBGSF	–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö	BGL	2	–ø–æ —Å–º–µ—Ç–∫–∞	–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö	‚ñ°
BG05RZBB91551007793607	RZBBBGSF	–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫	BGL	3	–ø–æ —Å–º–µ—Ç–∫–∞	–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫	‚ñ°
–ù–∞–π-–ª–µ—Å–Ω–∏—è—Ç –≤–∞—Ä–∏–∞–Ω—Ç:
–ê–∫–æ –∏–º–∞—à —Å–∞–º–æ —Ç–µ–∑–∏ 3 –∑–∞–ø–∏—Å–∞, –ø—Ä–æ—Å—Ç–æ –≤—ä–≤–µ–¥–∏ –≥–∏ —Ä—ä—á–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ - —â–µ –æ—Ç–Ω–µ–º–µ 1 –º–∏–Ω—É—Ç–∞.

–ò—Å–∫–∞—à –ª–∏ –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏–º —Å –¥—Ä—É–≥–∏—Ç–µ —Ç–∞–±–ª–∏—Ü–∏? –ú–æ–≥–∞ –¥–∞ —Ç–∏ –≥–∏ –¥–∞–º –≤—ä–≤ —Ñ–æ—Ä–º–∞—Ç –∑–∞ –ø–æ-–ª–µ—Å–Ω–æ –∫–æ–ø–∏—Ä–∞–Ω–µ.

–¢–µ–∑–∏ —Å–∞ —Å–∞–º–æ –¥–≤–∞ —Ä–µ–¥–∞ –Ω–æ –≤ –¥—Ä—É–≥–∏ —Ç–∞–±–ª–∏—Ü–∏ —Å–∞ –º–Ω–æ–≥–æ
–†–∞–∑–±–∏—Ä–∞–º. –ï—Ç–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ —Ä–µ—à–µ–Ω–∏–µ –∑–∞ –≤—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏:

–†–µ—à–µ–Ω–∏–µ 1: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ CSV —Ñ–∞–π–ª–æ–≤–µ (–Ω–∞–π-–±—ä—Ä–∑–æ)
–©–µ —Ç–∏ –¥–∞–º –≤—Å–µ–∫–∏ —Ñ–∞–π–ª –∫–∞—Ç–æ CSV —Ç–µ–∫—Å—Ç —Å –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞. –¢–∏ —â–µ:

–ö–æ–ø–∏—Ä–∞—à —Ç–µ–∫—Å—Ç–∞

–ó–∞–ø–∞–∑–≤–∞—à –∫–∞—Ç–æ .csv —Ñ–∞–π–ª —Å UTF-8 –∫–æ–¥–∏—Ä–∞–Ω–µ –≤ Notepad++

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞—à –≤ Access —á—Ä–µ–∑ External Data ‚Üí Text File

–†–µ—à–µ–Ω–∏–µ 2: SQL –∑–∞—è–≤–∫–∏ –∑–∞ –ø–æ–ø—Ä–∞–≤–∫–∞ (–∞–∫–æ –¥–∞–Ω–Ω–∏—Ç–µ —Å–∞ –≤–µ—á–µ –≤ Access)
–©–µ —Ç–∏ –¥–∞–º SQL –∫–æ–º–∞–Ω–¥–∏, –∫–æ–∏—Ç–æ —â–µ –æ–ø—Ä–∞–≤—è—Ç —Ç–µ–∫—Å—Ç–∞ –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ –±–∞–∑–∞—Ç–∞.

–ü—Ä–∏–º–µ—Ä –∑–∞ —Ç–∞–±–ª–∏—Ü–∞ Banks:

sql
UPDATE Banks 
SET 
    BankName = StrConv(BankName, 1),
    n = StrConv(n, 1),
    [short description] = StrConv([short description], 1)
WHERE BankName LIKE '%√≠%' OR BankName LIKE '%√†%';
–†–µ—à–µ–Ω–∏–µ 3: –ï–∫—Å–ø–æ—Ä—Ç –Ω–∞ –≤—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏ –∑–∞ –æ–ø—Ä–∞–≤—è–Ω–µ
–ò–∑–ø—Ä–∞—Ç–∏ –º–∏ –≤—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏ (–µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π –≥–∏ –∫–∞—Ç–æ CSV –∏–ª–∏ Excel –æ—Ç Access) –∏ –∞–∑ —â–µ:

–û–ø—Ä–∞–≤—è –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ –≤—ä–≤ –≤—Å–∏—á–∫–∏

–í—ä—Ä–Ω–∞ —Ç–∏ –≥–∏ –∫–∞—Ç–æ –≥–æ—Ç–æ–≤–∏ CSV —Ñ–∞–π–ª–æ–≤–µ

–î–∞–¥—ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –∏–º–ø–æ—Ä—Ç

–ö–∞–∫ –¥–∞ –º–∏ –∏–∑–ø—Ä–∞—Ç–∏—à —Ç–∞–±–ª–∏—Ü–∏—Ç–µ:
–í Access –∏–∑–±–µ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞

External Data ‚Üí Excel

–ó–∞–ø–∞–∑–∏ Excel —Ñ–∞–π–ª

–ö–∞—á–∏ —Ñ–∞–π–ª–æ–≤–µ—Ç–µ —Ç—É–∫ (–º–æ–∂–µ—à –¥–∞ –≥–∏ –∞—Ä—Ö–∏–≤–∏—Ä–∞—à –≤ ZIP)

–ó–∞—Å–µ–≥–∞ - –µ—Ç–æ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ Products –æ—Ç –ø—Ä–µ–¥–∏:
csv
ID,Name,UOM
16172,–Ω–∞–∫–ª–∞–¥–∫–∏,–±—Ä.
16172,"–ù–∞–∫–ª–∞–¥–∫–∏ –∑.–¥–∏—Å–∫–æ–≤–∏ –∫-—Ç ERP 1611457280;425432",–±—Ä.
16162,–î–∏—Å–∫ —Å–ø–∏—Ä–∞—á–µ–Ω,–±—Ä.
30522,"–¥–∞—Ç—á–∏–∫ ABS",–±—Ä.
42502,–∫–æ–Ω—Ç–∞–∫—Ç–æ—Ä –∫-–∫—Ç,–±—Ä.
64505,–ú–µ—Ö–∞–Ω–∏–∑—ä–º —á–∏—Å—Ç–∞—á–∫–∏,–±—Ä.
66872,—Ñ–∏–ª—Ç—ä—Ä –∫—É–ø–µ,–±—Ä.
66114,"–ê–º–æ—Ä—Ç–∏—Å—å–æ—Ä –∑–∞–¥–Ω–∏ (–±–µ–∑ —Ç–∞–º–ø–æ–Ω –∏ –º–∞–Ω—à–æ–Ω)",–±—Ä.
62007,–∂–∏–ª–æ —Ä–∞—á–Ω–∞,–±—Ä.
61491,–≥–æ—Ä–∏–≤–µ–Ω —Ñ–∏–ª—Ç—ä—Ä,–±—Ä.
61491,–ì–æ—Ä–∏–≤–µ–Ω —Ñ–∏–ª—Ç—ä—Ä,–±—Ä.
61001,—Ñ–∏–ª—Ç—ä—Ä –º–∞—Å–ª–µ–Ω,–±—Ä.
5116,—Å–≤–µ—Ä–∞ –∑–∞–¥–Ω—è,–±—Ä.
44884,—á–∏—Å—Ç–∞—á–∫–∞ 60—Å–º,–±—Ä.
61021,–º–∞–Ω—à–æ–Ω,–±—Ä.
60215,–º–∞–Ω—à–æ–Ω,–±—Ä.
60222,–º–∞–Ω—à–æ–Ω,–±—Ä.
60224,–º–∞–Ω—à–æ–Ω,–±—Ä.
60226,–º–∞–Ω—à–æ–Ω –ø–æ–ª—É–æ—Å,–±—Ä.
60309,–º–∞–Ω—à–æ–Ω,–±—Ä.
–ó–∞ –∫–æ–ø–∏—Ä–∞–Ω–µ: –ö–æ–ø–∏—Ä–∞–π —Ü–µ–ª–∏—è –±–ª–æ–∫ ‚Üí Paste –≤ Notepad++ ‚Üí Save as products_fixed.csv ‚Üí Import –≤ Access.

–ö–∞–∫–≤–æ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—à?

–î–∞ –ø—Ä–æ–¥—ä–ª–∂–∞ –¥–∞ –¥–∞–≤–∞–º —Ç–∞–±–ª–∏—Ü–∏ –∫–∞—Ç–æ —Ç–µ–∫—Å—Ç?

–î–∞ —Ç–∏ –¥–∞–º SQL –∑–∞—è–≤–∫–∏ –∑–∞ –ø–æ–ø—Ä–∞–≤–∫–∞ –≤ Access?

–î–∞ –∏–∑–ø—Ä–∞—Ç–∏—à –≤—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏ –∏ –∞–∑ –¥–∞ –≥–∏ –æ–ø—Ä–∞–≤—è?

–ò–∑–±–µ—Ä–∏ –Ω–∞–π-—É–¥–æ–±–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç.

–ê –º–æ–∂–µ –ª–∏ –¥–∏—Ä–µ–∫—Ç–Ω–æ –¥–∞ —Å—ä–∑–¥–∞–º —Ç–∞–±–ª–∏—Ü–∞ –≤ –±–∞–∑–∞ –≤ Mysql –∏ –¥–µ—Ä–µ–∫—Ç–Ω–æ –¥–∞ –∏–Ω—Å—ä—Ä—Ç–Ω–∞ —Ç–∞–º
–î–∞, –∞–±—Å–æ–ª—é—Ç–Ω–æ! –¢–æ–≤–∞ –µ –Ω–∞–π-–¥–æ–±—Ä–æ—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –∑–∞ –¥—ä–ª–≥–æ—Å—Ä–æ—á–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ. MySQL –µ –º–Ω–æ–≥–æ –ø–æ-—Å—Ç–∞–±–∏–ª–µ–Ω, –±—ä—Ä–∑ –∏ –ø–æ–¥–¥—ä—Ä–∂–∞ Unicode (UTF-8) –ø–µ—Ä—Ñ–µ–∫—Ç–Ω–æ.

–ï—Ç–æ —Ü—è–ª–æ—Å—Ç–µ–Ω –ø–ª–∞–Ω:

üì¶ –ï—Ç–∞–ø 1: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ MySQL –±–∞–∑–∞
1. –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π MySQL (–∞–∫–æ –Ω—è–º–∞—à)
MySQL Community Server

–ò–ª–∏ –∏–∑–ø–æ–ª–∑–≤–∞–π XAMPP/WAMP –∑–∞ –ª–µ—Å–µ–Ω —Å—Ç–∞—Ä—Ç

2. –°—ä–∑–¥–∞–π –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ —Å UTF-8 –∫–æ–¥–∏—Ä–∞–Ω–µ:
sql
CREATE DATABASE eurointegra 
CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;
üóÉÔ∏è –ï—Ç–∞–ø 2: SQL —Å–∫—Ä–∏–ø—Ç –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∏ + –¥–∞–Ω–Ω–∏
–©–µ —Ç–∏ –¥–∞–º –ø—ä–ª–µ–Ω SQL —Å–∫—Ä–∏–ø—Ç –∫–æ–π—Ç–æ:

–°—ä–∑–¥–∞–≤–∞ —Ç–∞–±–ª–∏—Ü–∏—Ç–µ

–í–º—ä–∫–≤–∞ –æ–ø—Ä–∞–≤–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏

–í—Å–∏—á–∫–æ –≤ UTF-8

–ü—Ä–∏–º–µ—Ä –∑–∞ —Ç–∞–±–ª–∏—Ü–∞ banks:
sql
-- –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞
CREATE TABLE banks (
    account VARCHAR(50),
    bankid VARCHAR(20),
    bankname VARCHAR(100),
    currency VARCHAR(10),
    methodid INT,
    n VARCHAR(50),
    short_description VARCHAR(100),
    cash BOOLEAN
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- –í–º—ä–∫–≤–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏
INSERT INTO banks (account, bankid, bankname, currency, methodid, n, short_description, cash) VALUES
('1', '0', '–∫–∞—Å–∞', 'BGL', 1, '–≤ –±—Ä–æ–π', '–≤ –±—Ä–æ–π', TRUE),
('BG98PRCB92301017199315', 'PRCBBGSF', '–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö', 'BGL', 2, '–ø–æ —Å–º–µ—Ç–∫–∞', '–ü–†–û –ö–†–ï–î–ò–¢ –ë–ê–ù–ö', FALSE),
('BG05RZBB91551007793607', 'RZBBBGSF', '–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫', 'BGL', 3, '–ø–æ —Å–º–µ—Ç–∫–∞', '–†–∞–π—Ñ–∞–π–∑–µ–Ω –ë–∞–Ω–∫', FALSE);
–ü—Ä–∏–º–µ—Ä –∑–∞ —Ç–∞–±–ª–∏—Ü–∞ products:
sql
CREATE TABLE products (
    id INT,
    name VARCHAR(255),
    uom VARCHAR(20)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO products (id, name, uom) VALUES
(16172, '–Ω–∞–∫–ª–∞–¥–∫–∏', '–±—Ä.'),
(16172, '–ù–∞–∫–ª–∞–¥–∫–∏ –∑.–¥–∏—Å–∫–æ–≤–∏ –∫-—Ç ERP 1611457280;425432', '–±—Ä.'),
(16162, '–î–∏—Å–∫ —Å–ø–∏—Ä–∞—á–µ–Ω', '–±—Ä.'),
(30522, '–¥–∞—Ç—á–∏–∫ ABS', '–±—Ä.'),
(42502, '–∫–æ–Ω—Ç–∞–∫—Ç–æ—Ä –∫-–∫—Ç', '–±—Ä.');
-- ... –∏ —Ç.–Ω. –∑–∞ –≤—Å–∏—á–∫–∏ –∑–∞–ø–∏—Å–∏
üîÑ –ï—Ç–∞–ø 3: –ö–∞–∫ –¥–∞ –º–∏ –∏–∑–ø—Ä–∞—Ç–∏—à –¥–∞–Ω–Ω–∏—Ç–µ
–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π –í–°–ò–ß–ö–ò —Ç–∞–±–ª–∏—Ü–∏ –æ—Ç Access –∫–∞—Ç–æ CSV/Excel

–ö–∞—á–∏ –≥–∏ —Ç—É–∫ (–∏–ª–∏ –≤ ZIP –∞—Ä—Ö–∏–≤)

–ê–∑ —â–µ:

–û–ø—Ä–∞–≤—è –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞

–°—ä–∑–¥–∞–º –ø—ä–ª–µ–Ω SQL —Å–∫—Ä–∏–ø—Ç –∑–∞ MySQL

–î–æ–±–∞–≤—è –≤—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏ –∏ –∑–∞–ø–∏—Å–∏

–î–∞–¥–∞–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ

üöÄ –ï—Ç–∞–ø 4: –ò–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ —Å–∫—Ä–∏–ø—Ç–∞
–û—Ç–≤–æ—Ä–∏ MySQL Workbench –∏–ª–∏ phpMyAdmin

–°—ä–∑–¥–∞–π –Ω–æ–≤–∞ –±–∞–∑–∞ eurointegra

–ò–∑–ø—ä–ª–Ω–∏ —Ü–µ–ª–∏—è SQL —Å–∫—Ä–∏–ø—Ç

–ì–æ—Ç–æ–≤–æ! –ò–º–∞—à —á–∏—Å—Ç–∞, –±—ä—Ä–∑–∞ MySQL –±–∞–∑–∞

‚úÖ –ü—Ä–µ–¥–∏–º—Å—Ç–≤–∞ –Ω–∞ MySQL:
–ü–µ—Ä—Ñ–µ–∫—Ç–Ω–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞ –Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞ (UTF-8)

–ú–Ω–æ–≥–æ –ø–æ-–±—ä—Ä–∑ –æ—Ç Access

–°—Ç–∞–±–∏–ª–µ–Ω, –Ω–∞–¥–µ–∂–¥–µ–Ω

–ú–æ–∂–µ—à –¥–∞ –≥–æ —Å–≤—ä—Ä–∂–µ—à —Å —É–µ–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–õ–µ—Å–µ–Ω –∑–∞ backup

–ñ–µ–ª–∞–µ—à –ª–∏ –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏–º –ø–æ —Ç–æ–∑–∏ –ø—ä—Ç? –ê–∫–æ –¥–∞, –∏–∑–ø—Ä–∞—Ç–∏ –º–∏ —Ç–∞–±–ª–∏—Ü–∏—Ç–µ –∏ —â–µ —Ç–∏ –ø–æ–¥–≥–æ—Ç–≤—è –ø—ä–ª–µ–Ω SQL —Å–∫—Ä–∏–ø—Ç –∑–∞ MySQL —Å –≤—Å–∏—á–∫–∏ –¥–∞–Ω–Ω–∏ –≤–µ—á–µ –æ–ø—Ä–∞–≤–µ–Ω–∏.

image.png
PNG 37.81KB
–í–∏–∂! –ê–∑ –∏–º–∞–º –µ—Ç–æ —Ç–∞–∫—ä–≤ –º–æ–¥–µ–ª –∑–∞ –ø—Ä–æ–¥—É–∫—Ç–∏ ... <?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\SoftDeletes;
use Illuminate\Database\Eloquent\Relations\HasMany;

class Product extends Model
{
    use SoftDeletes;

    protected $fillable = [
        'sku','name','brand','description','unit','price','cost_price','vat_percent',
        'stock_quantity','min_stock_level','location',
    ];

    public function workOrderItems(): HasMany
    {
        return $this->hasMany(WorkOrderItem::class);
    }

    public function invoiceItems(): HasMany
    {
        return $this->hasMany(InvoiceItem::class);
    }

    public function stockMovements(): HasMany
    {
        return $this->hasMany(StockMovement::class);
    }
} ... –ú–æ–∂–µ—à –ª–∏ –¥–∞ –Ω–∞–≥–ª–∞—Å–∏—à —Ç–æ–≤–∞ –∫–æ–µ—Ç–æ –µ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ç–∞ —Ç–∞–∫–∞ —á–µ –∑–∞ —Å—Ç–∞–≤–∞ –∑–∞ —Ç–æ–∑–∏ –º–æ–π –º–æ–¥–µ–ª
–†–∞–∑–±–∏—Ä–∞ —Å–µ! –í–∏–∂–¥–∞–º —á–µ –ø–æ–ª–∑–≤–∞—à Laravel —Å –º–æ–¥–µ–ª Product. –©–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–∞–º –¥–∞–Ω–Ω–∏—Ç–µ –æ—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ç–∞ –≤—ä–≤ —Ñ–æ—Ä–º–∞—Ç, –∫–æ–π—Ç–æ –¥–∞ –º–æ–∂–µ—à –¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞—à –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ —Ç–≤–æ—è—Ç–∞ MySQL —Ç–∞–±–ª–∏—Ü–∞.

üìä –ê–Ω–∞–ª–∏–∑ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∞—Ç–∞:
–û—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ç–∞ –∏–º–∞–º —Å–ª–µ–¥–Ω–∏—Ç–µ –∫–æ–ª–æ–Ω–∏:

PLU ‚Üí —â–µ —Å—Ç–∞–Ω–µ sku

Name ‚Üí —â–µ —Å—Ç–∞–Ω–µ name

UOI ‚Üí –≤–µ—Ä–æ—è—Ç–Ω–æ "Unit of Issue" ‚Üí —â–µ —Å—Ç–∞–Ω–µ unit

Qty ‚Üí —â–µ —Å—Ç–∞–Ω–µ stock_quantity

Price ‚Üí —â–µ —Å—Ç–∞–Ω–µ price

acc ‚Üí –≤–µ—Ä–æ—è—Ç–Ω–æ —Å—á–µ—Ç–æ–≤–æ–¥–Ω–∞ —Å–º–µ—Ç–∫–∞ (–Ω–µ –Ω–∏ —Ç—Ä—è–±–≤–∞)

üõ† –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –∫—ä–º —Ç–≤–æ—è –º–æ–¥–µ–ª:
–©–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ –∏ —â–µ —Å—ä–∑–¥–∞–º SQL –∑–∞—è–≤–∫–∞ –∑–∞ products —Ç–∞–±–ª–∏—Ü–∞ –≤ MySQL, –∫–æ—è—Ç–æ –æ—Ç–≥–æ–≤–∞—Ä—è –Ω–∞ —Ç–≤–æ—è Laravel –º–∏–≥—Ä–∞—Ü–∏—è.

SQL –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞:
sql
CREATE TABLE products (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    sku VARCHAR(100) UNIQUE,
    name VARCHAR(255) NOT NULL,
    brand VARCHAR(100) NULL,
    description TEXT NULL,
    unit VARCHAR(20) DEFAULT '–±—Ä.',
    price DECIMAL(10, 2) DEFAULT 0.00,
    cost_price DECIMAL(10, 2) DEFAULT 0.00,
    vat_percent DECIMAL(5, 2) DEFAULT 20.00,
    stock_quantity INT DEFAULT 0,
    min_stock_level INT DEFAULT 5,
    location VARCHAR(100) NULL,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    deleted_at TIMESTAMP NULL,
    INDEX idx_sku (sku),
    INDEX idx_name (name)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
INSERT –∑–∞—è–≤–∫–∞ —Å –æ–ø—Ä–∞–≤–µ–Ω–∏ –¥–∞–Ω–Ω–∏ (–æ—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ç–∞):
sql
INSERT INTO products (sku, name, unit, stock_quantity, price) VALUES
('1617254180', '–Ω–∞–∫–ª–∞–¥–∫–∏', '–±—Ä.', 1, 32.40),
('1617271880', '–ù–∞–∫–ª–∞–¥–∫–∏ –∑.–¥–∏—Å–∫–æ–≤–∏ –∫-—Ç ERP 1611457280;425432', '–±—Ä.', 1, 31.66),
('1618863880', '–î–∏—Å–∫ —Å–ø–∏—Ä–∞—á–µ–Ω', '–±—Ä.', 1, 52.50),
('30522', '', '–±—Ä.', 1, 47.33),
('453466', '–∫–æ–Ω—Ç–∞–∫—Ç–æ—Ä –∫-–∫—Ç', '–±—Ä.', 1, 48.33),
('6405PP', '–ú–µ—Ö–∞–Ω–∏–∑—ä–º —á–∏—Å—Ç–∞—á–∫–∏', '–±—Ä.', 1, 388.63),
('698731', '—Ñ–∏–ª—Ç—ä—Ä –∫—É–ø–µ', '–±—Ä.', 1, 20.00),
('9811403880', '–ê–º–æ—Ä—Ç–∏—Å—å–æ—Ä –∑–∞–¥–Ω–∏ (–±–µ–∑ —Ç–∞–º–ø–æ–Ω –∏ –º–∞–Ω—à–æ–Ω)', '–±—Ä.', 1, 94.17),
('AD07 0236', '–∂–∏–ª–æ —Ä–∞—á–Ω–∞', '–±—Ä.', 1, 26.66),
('E148135', '–≥–æ—Ä–∏–≤–µ–Ω —Ñ–∏–ª—Ç—ä—Ä', '–±—Ä.', 1, 16.66),
('E148139', '–ì–æ—Ä–∏–≤–µ–Ω —Ñ–∏–ª—Ç—ä—Ä', '–±—Ä.', 1, 19.83),
('OC471', '—Ñ–∏–ª—Ç—ä—Ä –º–∞—Å–ª–µ–Ω', '–±—Ä.', 1, 10.83),
('S116', '—Å–≤–µ—Ä–∞ –∑–∞–¥–Ω—è', '–±—Ä.', 1, 61.67),
('44884', '—á–∏—Å—Ç–∞—á–∫–∞ 60—Å–º', '–±—Ä.', 1, 10.00),
('6021121', '–º–∞–Ω—à–æ–Ω', '–±—Ä.', 1, 18.00),
('6021594', '–º–∞–Ω—à–æ–Ω', '–±—Ä.', 1, 26.25),
('6022269', '–º–∞–Ω—à–æ–Ω', '–±—Ä.', 1, 25.00),
('6023124', '–º–∞–Ω—à–æ–Ω –ø–æ–ª—É–æ—Å', '–±—Ä.', 1, 10.83),
('6024642', '–º–∞–Ω—à–æ–Ω', '–±—Ä.', 1, 16.00),
('6026005', '–º–∞–Ω—à–æ–Ω', '–±—Ä.', 1, 7.50),
('6036174', '–º–∞–Ω—à–æ–Ω', '–±—Ä.', 1, 16.66);
CSV —Ñ–æ—Ä–º–∞—Ç –∑–∞ –∏–º–ø–æ—Ä—Ç –≤ Laravel (–∑–∞ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞—à seeders –∏–ª–∏ –∏–º–ø–æ—Ä—Ç):
csv
sku,name,brand,description,unit,price,cost_price,vat_percent,stock_quantity,min_stock_level,location
1617254180,–Ω–∞–∫–ª–∞–¥–∫–∏,,,,–±—Ä.,32.40,0.00,20.00,1,5,
1617271880,–ù–∞–∫–ª–∞–¥–∫–∏ –∑.–¥–∏—Å–∫–æ–≤–∏ –∫-—Ç ERP 1611457280;425432,,,,–±—Ä.,31.66,0.00,20.00,1,5,
1618863880,–î–∏—Å–∫ —Å–ø–∏—Ä–∞—á–µ–Ω,,,,–±—Ä.,52.50,0.00,20.00,1,5,
30522,,,,,–±—Ä.,47.33,0.00,20.00,1,5,
453466,–∫–æ–Ω—Ç–∞–∫—Ç–æ—Ä –∫-–∫—Ç,,,,–±—Ä.,48.33,0.00,20.00,1,5,
6405PP,–ú–µ—Ö–∞–Ω–∏–∑—ä–º —á–∏—Å—Ç–∞—á–∫–∏,,,,–±—Ä.,388.63,0.00,20.00,1,5,
698731,—Ñ–∏–ª—Ç—ä—Ä –∫—É–ø–µ,,,,–±—Ä.,20.00,0.00,20.00,1,5,
9811403880,–ê–º–æ—Ä—Ç–∏—Å—å–æ—Ä –∑–∞–¥–Ω–∏ (–±–µ–∑ —Ç–∞–º–ø–æ–Ω –∏ –º–∞–Ω—à–æ–Ω),,,,–±—Ä.,94.17,0.00,20.00,1,5,
AD07 0236,–∂–∏–ª–æ —Ä–∞—á–Ω–∞,,,,–±—Ä.,26.66,0.00,20.00,1,5,
E148135,–≥–æ—Ä–∏–≤–µ–Ω —Ñ–∏–ª—Ç—ä—Ä,,,,–±—Ä.,16.66,0.00,20.00,1,5,
E148139,–ì–æ—Ä–∏–≤–µ–Ω —Ñ–∏–ª—Ç—ä—Ä,,,,–±—Ä.,19.83,0.00,20.00,1,5,
OC471,—Ñ–∏–ª—Ç—ä—Ä –º–∞—Å–ª–µ–Ω,,,,–±—Ä.,10.83,0.00,20.00,1,5,
S116,—Å–≤–µ—Ä–∞ –∑–∞–¥–Ω—è,,,,–±—Ä.,61.67,0.00,20.00,1,5,
44884,—á–∏—Å—Ç–∞—á–∫–∞ 60—Å–º,,,,–±—Ä.,10.00,0.00,20.00,1,5,
6021121,–º–∞–Ω—à–æ–Ω,,,,–±—Ä.,18.00,0.00,20.00,1,5,
6021594,–º–∞–Ω—à–æ–Ω,,,,–±—Ä.,26.25,0.00,20.00,1,5,
6022269,–º–∞–Ω—à–æ–Ω,,,,–±—Ä.,25.00,0.00,20.00,1,5,
6023124,–º–∞–Ω—à–æ–Ω –ø–æ–ª—É–æ—Å,,,,–±—Ä.,10.83,0.00,20.00,1,5,
6024642,–º–∞–Ω—à–æ–Ω,,,,–±—Ä.,16.00,0.00,20.00,1,5,
6026005,–º–∞–Ω—à–æ–Ω,,,,–±—Ä.,7.50,0.00,20.00,1,5,
6036174,–º–∞–Ω—à–æ–Ω,,,,–±—Ä.,16.66,0.00,20.00,1,5
–ö–∞–∫ –¥–∞ –≥–æ –∏–∑–ø–æ–ª–∑–≤–∞—à:
–í–∞—Ä–∏–∞–Ω—Ç 1: –î–∏—Ä–µ–∫—Ç–Ω–æ –≤ MySQL
–ü—É—Å–Ω–∏ SQL –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞

–ü—É—Å–Ω–∏ INSERT –∑–∞—è–≤–∫–∞—Ç–∞

–ì–æ—Ç–æ–≤–æ!

–í–∞—Ä–∏–∞–Ω—Ç 2: –ß—Ä–µ–∑ Laravel Seeder
–°—ä–∑–¥–∞–π CSV —Ñ–∞–π–ª —Å –¥–∞–Ω–Ω–∏—Ç–µ –ø–æ-–≥–æ—Ä–µ

–°—ä–∑–¥–∞–π Seeder:

php
// database/seeders/ProductsSeeder.php
public function run()
{
    $csvFile = fopen(base_path('database/data/products.csv'), 'r');
    $firstline = true;
    
    while (($data = fgetcsv($csvFile, 2000, ',')) !== FALSE) {
        if (!$firstline) {
            Product::create([
                'sku' => $data[0],
                'name' => $data[1],
                'brand' => $data[2],
                'description' => $data[3],
                'unit' => $data[4],
                'price' => $data[5],
                'cost_price' => $data[6],
                'vat_percent' => $data[7],
                'stock_quantity' => $data[8],
                'min_stock_level' => $data[9],
                'location' => $data[10]
            ]);
        }
        $firstline = false;
    }
    
    fclose($csvFile);
}
–ó–∞–±–µ–ª–µ–∂–∫–∏:
–ù—è–∫–æ–∏ sku —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ —Å–∞ —Å—Ç—Ä–∞–Ω–Ω–∏ (—Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ –∏–ª–∏ —Ç–æ—á–∫–∏) - –º–æ–∂–µ –¥–∞ –≥–∏ –ø–æ—á–∏—Å—Ç–∏—à

–ü—Ä–∞–∑–Ω–∏—è –∑–∞–ø–∏—Å –∑–∞ sku=30522 –Ω—è–º–∞ –∏–º–µ - –º–æ–∂–µ –¥–∞ –≥–æ –ø—Ä–æ–ø—É—Å–Ω–µ—à –∏–ª–∏ –¥–∞ –ø–æ–ø—ä–ª–Ω–∏—à

–î–æ–±–∞–≤–∏—Ö brand, description, location –∫–∞—Ç–æ –ø—Ä–∞–∑–Ω–∏ - –º–æ–∂–µ—à –¥–∞ –≥–∏ –ø–æ–ø—ä–ª–Ω–∏—à –ø–æ—Å–ª–µ

vat_percent —Å–ª–æ–∂–∏—Ö 20% –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ

–ò—Å–∫–∞—à –ª–∏ –¥–∞ –Ω–∞–ø—Ä–∞–≤—è —Å—ä—â–æ—Ç–æ –∏ –∑–∞ –¥—Ä—É–≥–∏—Ç–µ —Ç–∞–±–ª–∏—Ü–∏ (banks, customers, invoices –∏ —Ç.–Ω.)? –ú–æ–≥–∞ –¥–∞ –≥–∏ –∞–¥–∞–ø—Ç–∏—Ä–∞–º –∫—ä–º —Ç–≤–æ–∏ Laravel –º–æ–¥–µ–ª–∏.

–î–æ–±—Ä–µ! –ê –∏–º–∞–º —Ç–æ–≤–∞ <?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\SoftDeletes;
use Illuminate\Database\Eloquent\Relations\HasMany;

class Customer extends Model
{
    use SoftDeletes;

    protected $fillable = [
        'type','name','vat_number','contact_person','phone','email','address','city','notes',
    ];

    public function vehicles(): HasMany
    {
        return $this->hasMany(Vehicle::class);
    }

    public function workOrders(): HasMany
    {
        return $this->hasMany(WorkOrder::class);
    }

    public function invoices(): HasMany
    {
        return $this->hasMany(Invoice::class);
    }
} –∏ –∏—Å–∫–∞–º –¥–∞ –≤–∫–∞—Ä–∞–º —Ç–æ–≤–∞ ... Number	Customer-Name	Customer-Address-1	Customer-Address-2	Customer-MOL	Customer-Taxno	Customer-DocType	Receiver	Receiver Details	Customer-Bulstat	Telno	Faxno	E-mail	ResAddress1	ResAddress2	eidate	include	active	customer	supplier	Contact	partida
19	√ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®	√ë√é√î√à√ü	√Å√é√ê√é√Ç√é √Å√ã.8	√ã√ö√ó√Ö√á√Ä√ê √ë√í√é√ü√ç√é√Ç	BG030219270	0	√ã√ö√ó√Ö√á√Ä√ê √ë√í√é√ü√ç√é√Ç		030219270	0899057055					17.1.2007 –≥. 19:19:19	–ù–µ	–î–∞	–î–∞	–ù–µ		8
20	√ò√Ä√í√ê√é√å  √Ö√é√é√Ñ	√ë√é√î√à√ü	√ë√í√ê√Ö√ã√Å√à√ô√Ö √Å√ã.32	√ê√é√ë√à√ñ√Ä √è√é√è√é√Ç√Ä	 BG131326205	0	√ê√é√ë√à√ñ√Ä √è√é√è√é√Ç√Ä		131326205	088888888888					18.1.2007 –≥. 09:32:12	–ù–µ	–î–∞	–î–∞	–ù–µ		206
21	√í√Ö√ê√á√à√Ñ √Ö√é√é√Ñ	√ë√é√î√à√ü	√ñ√Ä√ê √ë√à√å√Ö√é√ç 312	√ê√é√ë√Ö√ç √ë√í√Ä√ç√ä√é√Ç	 BG121057660	0	√ê√é√ë√Ö√ç √ë√í√Ä√ç√ä√é√Ç		121057660						18.1.2007 –≥. 09:39:46	–ù–µ	–î–∞	–î–∞	–ù–µ		97
22	√Ö.√í.√Ö. √Ö√é√é√Ñ	√ë√é√î√à√ü	"√≥√´. "" √Å√®√ß√≠√•√± √è√†√∞√™ √ë√Æ√¥√®√ø "" N3"	√ë√≤√•√¥√†√≠ √å√®√≠√∑√•√¢	 BG121483635	0	√ë√≤√•√¥√†√≠ √å√®√≠√∑√•√¢		121483635	0899822289					18.1.2007 –≥. 15:40:04	–ù–µ	–î–∞	–î–∞	–ù–µ		1
23	√ã√à√ç√Ñ√ç√Ö√ê √Å√ö√ã√É√Ä√ê√à√ü √Ö√é√é√Ñ	√ë√é√î√à√ü	√Å√à√á√ç√Ö√ë √è√Ä√ê√ä √ë√é√î√à√ü	√Ç√Ö√ê√ç√Ö√ê √ï√é√î√å√Ä√ç	 BG121586343	0	√ç√à√ä√é√ã√Ä√â √Å√é√É√é√Ö√Ç		121586343						18.1.2007 –≥. 16:04:54	–ù–µ	–î–∞	–î–∞	–ù–µ		54
24	√Ü√Ä√ê √Ö√é√é√Ñ	√ë√é√î√à√ü	√ë√Ç0√Å√é√Ñ√Ä √Å√ã.5	√Å√é√ê√à√ë√ã√Ä√Ç √Ñ√à√å√à√í√ê√é√Ç	 BG131418803	0	√Å√é√ê√à√ë√ã√Ä√Ç √Ñ√à√å√à√í√ê√é√Ç		131418803						25.1.2007 –≥. 09:57:46	–ù–µ	–î–∞	–î–∞	–ù–µ		147
25	√ä√Ç√ü√í √é√é√Ñ	√ë√é√Ç√à√ü	√ã√é√á√Ö√ç√Ö√ñ 51-59	√è√Ä√Ç√Ö√ã √ñ√Ç√Ö√í√ä√é√Ç	 BG130899216	0	√è√Ä√Ç√Ö√ã √ñ√Ç√Ö√í√ä√é√Ç		130899216	0885838076					26.1.2007 –≥. 12:57:24	–ù–µ	–î–∞	–î–∞	–ù–µ		92
26	√ë√®√í √Å√ö√ã√É√Ä√ê√à√ü √Ö√é√é√Ñ	√ë√é√î√à√ü	√°√≥√´.√à√±√™√∫√∞√±√™√Æ √∏√Æ√±√• 7 √±√£√∞√†√§√† 6 √•√≤.3	√Ç√†√±√®√´ √å√®√≠√•√¢	 BG831131023	0	√Ç√†√±√®√´ √å√®√≠√•√¢		831131023	0886 600 621					26.1.2007 –≥. 16:34:31	–ù–µ	–î–∞	–î–∞	–ù–µ		208
27	√Ä√Ç√í√é√ë√í√ö√ä√ã√Ä √é√é√Ñ	√ë√é√î√à√ü	√¶√™.√ë√¢√•√≤√† √í√∞√Æ√®√∂√† √°√´.168	√å√†√ø √â√Æ√≤√Æ√¢√†	 BG130399595	0	√å√†√ø √â√Æ√≤√Æ√¢√†		130399595						30.1.2007 –≥. 09:12:13	–ù–µ	–î–∞	–î–∞	–ù–µ		183
–ü–µ—Ä—Ñ–µ–∫—Ç–Ω–æ! –©–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–∞–º –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ –∫–ª–∏–µ–Ω—Ç–∏—Ç–µ, —Ç–∞–∫–∞ —á–µ –¥–∞ –æ—Ç–≥–æ–≤–∞—Ä—è—Ç –Ω–∞ —Ç–≤–æ—è Laravel –º–æ–¥–µ–ª Customer.

–û—Ç –¥–∞–Ω–Ω–∏—Ç–µ –≤–∏–∂–¥–∞–º —Å–ª–µ–¥–Ω–∏—Ç–µ —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è:

Number ‚Üí —â–µ –∏–≥–Ω–æ—Ä–∏—Ä–∞–º–µ (–∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç id)

Customer-Name ‚Üí name

Customer-Taxno (—Å "BG") ‚Üí vat_number

Customer-MOL ‚Üí contact_person

Telno ‚Üí phone

E-mail ‚Üí email

Customer-Address-1 + Customer-Address-2 ‚Üí address

customer/supplier ‚Üí type (—â–µ –æ–ø—Ä–µ–¥–µ–ª—è: 'customer', 'supplier', –∏–ª–∏ 'both')

üóÉÔ∏è SQL –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ customers:
sql
CREATE TABLE customers (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    type ENUM('customer', 'supplier', 'both') DEFAULT 'customer',
    name VARCHAR(255) NOT NULL,
    vat_number VARCHAR(50) NULL,
    contact_person VARCHAR(100) NULL,
    phone VARCHAR(50) NULL,
    email VARCHAR(100) NULL,
    address TEXT NULL,
    city VARCHAR(100) NULL,
    notes TEXT NULL,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    deleted_at TIMESTAMP NULL,
    INDEX idx_vat_number (vat_number),
    INDEX idx_name (name),
    INDEX idx_type (type)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
üì• INSERT –∑–∞—è–≤–∫–∞ —Å –æ–ø—Ä–∞–≤–µ–Ω–∏ –¥–∞–Ω–Ω–∏ (–∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ –µ –æ–ø—Ä–∞–≤–µ–Ω–∞):
sql
INSERT INTO customers (name, vat_number, contact_person, phone, email, address, city, type) VALUES
('–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò', 'BG030219270', '–õ–™–ß–ï–ó–ê–† –°–¢–û–Ø–ù–û–í', '0899057055', NULL, '–°–û–§–ò–Ø, –ë–û–†–û–í–û –ë–õ.8', '–°–æ—Ñ–∏—è', 'customer'),
('–®–ê–¢–†–û–ú –ï–û–û–î', 'BG131326205', '–†–û–°–ò–¶–ê –ü–û–ü–û–í–ê', '088888888888', NULL, '–°–û–§–ò–Ø, –°–¢–†–ï–õ–ë–ò–©–ï –ë–õ.32', '–°–æ—Ñ–∏—è', 'customer'),
('–¢–ï–†–ó–ò–î –ï–û–û–î', 'BG121057660', '–†–û–°–ï–ù –°–¢–ê–ù–ö–û–í', NULL, NULL, '–°–û–§–ò–Ø, –¶–ê–† –°–ò–ú–ï–û–ù 312', '–°–æ—Ñ–∏—è', 'customer'),
('–ï.–¢.–ï. –ï–û–û–î', 'BG121483635', '–°—Ç–µ—Ñ–∞–Ω –ú–∏–Ω—á–µ–≤', '0899822289', NULL, '–°–û–§–ò–Ø, "—É–ª. "" –ë–∏–∑–Ω–µ—Å –ü–∞—Ä–∫ –°–æ—Ñ–∏—è "" N3"', '–°–æ—Ñ–∏—è', 'customer'),
('–õ–ò–ù–î–ù–ï–† –ë–™–õ–ì–ê–†–ò–Ø –ï–û–û–î', 'BG121586343', '–í–ï–†–ù–ï–† –•–û–§–ú–ê–ù', NULL, NULL, '–°–û–§–ò–Ø, –ë–ò–ó–ù–ï–° –ü–ê–†–ö –°–û–§–ò–Ø', '–°–æ—Ñ–∏—è', 'customer'),
('–ñ–ê–† –ï–û–û–î', 'BG131418803', '–ë–û–†–ò–°–õ–ê–í –î–ò–ú–ò–¢–†–û–í', NULL, NULL, '–°–û–§–ò–Ø, –°–í–û–ë–û–î–ê –ë–õ.5', '–°–æ—Ñ–∏—è', 'customer'),
('–ö–í–Ø–¢ –û–û–î', 'BG130899216', '–ü–ê–í–ï–õ –¶–í–ï–¢–ö–û–í', '0885838076', NULL, '–°–û–í–ò–Ø, –õ–û–ó–ï–ù–ï–¶ 51-59', '–°–æ—Ñ–∏—è', 'customer'),
('–°–∏—Ç –ë—ä–ª–≥–∞—Ä–∏—è –ï–û–û–î', 'BG831131023', '–í–∞—Å–∏–ª –ú–∏–Ω–µ–≤', '0886 600 621', NULL, '–°–û–§–ò–Ø, –±—É–ª.–ò—Å–∫—ä—Ä—Å–∫–æ —à–æ—Å–µ 7 —Å–≥—Ä–∞–¥–∞ 6 –µ—Ç.3', '–°–æ—Ñ–∏—è', 'customer'),
('–ê–í–¢–û–°–¢–™–ö–õ–ê –û–û–î', 'BG130399595', '–ú–∞—è –ô–æ—Ç–æ–≤–∞', NULL, NULL, '–°–û–§–ò–Ø, –∂–∫.–°–≤–µ—Ç–∞ –¢—Ä–æ–∏—Ü–∞ –±–ª.168', '–°–æ—Ñ–∏—è', 'customer');
üìÑ CSV —Ñ–æ—Ä–º–∞—Ç –∑–∞ –∏–º–ø–æ—Ä—Ç –≤ Laravel:
csv
type,name,vat_number,contact_person,phone,email,address,city,notes
customer,–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò,BG030219270,–õ–™–ß–ï–ó–ê–† –°–¢–û–Ø–ù–û–í,0899057055,,–°–û–§–ò–Ø, –ë–û–†–û–í–û –ë–õ.8,–°–æ—Ñ–∏—è,
customer,–®–ê–¢–†–û–ú –ï–û–û–î,BG131326205,–†–û–°–ò–¶–ê –ü–û–ü–û–í–ê,088888888888,,–°–û–§–ò–Ø, –°–¢–†–ï–õ–ë–ò–©–ï –ë–õ.32,–°–æ—Ñ–∏—è,
customer,–¢–ï–†–ó–ò–î –ï–û–û–î,BG121057660,–†–û–°–ï–ù –°–¢–ê–ù–ö–û–í,,,–°–û–§–ò–Ø, –¶–ê–† –°–ò–ú–ï–û–ù 312,–°–æ—Ñ–∏—è,
customer,–ï.–¢.–ï. –ï–û–û–î,BG121483635,–°—Ç–µ—Ñ–∞–Ω –ú–∏–Ω—á–µ–≤,0899822289,,–°–û–§–ò–Ø, "—É–ª. "" –ë–∏–∑–Ω–µ—Å –ü–∞—Ä–∫ –°–æ—Ñ–∏—è "" N3",–°–æ—Ñ–∏—è,
customer,–õ–ò–ù–î–ù–ï–† –ë–™–õ–ì–ê–†–ò–Ø –ï–û–û–î,BG121586343,–í–ï–†–ù–ï–† –•–û–§–ú–ê–ù,,,–°–û–§–ò–Ø, –ë–ò–ó–ù–ï–° –ü–ê–†–ö –°–û–§–ò–Ø,–°–æ—Ñ–∏—è,
customer,–ñ–ê–† –ï–û–û–î,BG131418803,–ë–û–†–ò–°–õ–ê–í –î–ò–ú–ò–¢–†–û–í,,,–°–û–§–ò–Ø, –°–í–û–ë–û–î–ê –ë–õ.5,–°–æ—Ñ–∏—è,
customer,–ö–í–Ø–¢ –û–û–î,BG130899216,–ü–ê–í–ï–õ –¶–í–ï–¢–ö–û–í,0885838076,,–°–û–í–ò–Ø, –õ–û–ó–ï–ù–ï–¶ 51-59,–°–æ—Ñ–∏—è,
customer,–°–∏—Ç –ë—ä–ª–≥–∞—Ä–∏—è –ï–û–û–î,BG831131023,–í–∞—Å–∏–ª –ú–∏–Ω–µ–≤,0886 600 621,,–°–û–§–ò–Ø, –±—É–ª.–ò—Å–∫—ä—Ä—Å–∫–æ —à–æ—Å–µ 7 —Å–≥—Ä–∞–¥–∞ 6 –µ—Ç.3,–°–æ—Ñ–∏—è,
customer,–ê–í–¢–û–°–¢–™–ö–õ–ê –û–û–î,BG130399595,–ú–∞—è –ô–æ—Ç–æ–≤–∞,,,–°–û–§–ò–Ø, –∂–∫.–°–≤–µ—Ç–∞ –¢—Ä–æ–∏—Ü–∞ –±–ª.168,–°–æ—Ñ–∏—è,
üîß Seeder –∑–∞ Laravel:
php
// database/seeders/CustomersSeeder.php
namespace Database\Seeders;

use App\Models\Customer;
use Illuminate\Database\Seeder;

class CustomersSeeder extends Seeder
{
    public function run()
    {
        $customers = [
            [
                'name' => '–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò',
                'vat_number' => 'BG030219270',
                'contact_person' => '–õ–™–ß–ï–ó–ê–† –°–¢–û–Ø–ù–û–í',
                'phone' => '0899057055',
                'address' => '–°–û–§–ò–Ø, –ë–û–†–û–í–û –ë–õ.8',
                'city' => '–°–æ—Ñ–∏—è',
                'type' => 'customer'
            ],
            [
                'name' => '–®–ê–¢–†–û–ú –ï–û–û–î',
                'vat_number' => 'BG131326205',
                'contact_person' => '–†–û–°–ò–¶–ê –ü–û–ü–û–í–ê',
                'phone' => '088888888888',
                'address' => '–°–û–§–ò–Ø, –°–¢–†–ï–õ–ë–ò–©–ï –ë–õ.32',
                'city' => '–°–æ—Ñ–∏—è',
                'type' => 'customer'
            ],
            // ... –¥–æ–±–∞–≤–∏ –æ—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ –∑–∞–ø–∏—Å–∏ —Ç—É–∫
        ];

        foreach ($customers as $customer) {
            Customer::create($customer);
        }
    }
}
üìù –ó–∞–±–µ–ª–µ–∂–∫–∏ –∏ –ø–æ–¥–æ–±—Ä–µ–Ω–∏—è:
–¢–∏–ø –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞: –í—Å–∏—á–∫–∏ —Å–∞ –º–∞—Ä–∫–∏—Ä–∞–Ω–∏ –∫–∞—Ç–æ customer, –Ω–æ –∞–∫–æ –Ω—è–∫–æ–π –µ –∏ –¥–æ—Å—Ç–∞–≤—á–∏–∫, –º–æ–∂–µ—à –¥–∞ –ø—Ä–æ–º–µ–Ω–∏—à –Ω–∞ both.

E-mail: –ù–µ –µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–µ–Ω –≤ –¥–∞–Ω–Ω–∏—Ç–µ - –æ—Å—Ç–∞–≤–µ–Ω –∫–∞—Ç–æ NULL.

–ì—Ä–∞–¥: –ü–æ—Å—Ç–∞–≤–∏—Ö –≤—Å–∏—á–∫–∏ –Ω–∞ "–°–æ—Ñ–∏—è", –Ω–æ –º–æ–∂–µ—à –¥–∞ –≥–æ –∏–∑–≤–ª–µ—á–µ—à –æ—Ç –∞–¥—Ä–µ—Å–∞.

–ë—É–ª—Å—Ç–∞—Ç: –í —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –∏–º–∞ –æ—Ç–¥–µ–ª–Ω–∞ –∫–æ–ª–æ–Ω–∞ Customer-Bulstat, –Ω–æ —Ç—è —Å—ä–≤–ø–∞–¥–∞ —Å vat_number –±–µ–∑ "BG". –ò–∑–ø–æ–ª–∑–≤–∞—Ö vat_number.

–§–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω: –¢–µ–ª–µ—Ñ–æ–Ω–∏—Ç–µ —Å–∞ —Å —Ä–∞–∑–ª–∏—á–µ–Ω —Ñ–æ—Ä–º–∞—Ç - –º–æ–∂–µ—à –¥–∞ –≥–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∏—Ä–∞—à –ø–æ—Å–ª–µ.

üéØ –°–ª–µ–¥–≤–∞—â–∞ —Å—Ç—ä–ø–∫–∞:
–°—ä–∑–¥–∞–π —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –≤ MySQL

–ò–∑–ø—ä–ª–Ω–∏ INSERT –∑–∞—è–≤–∫–∞—Ç–∞

–¢–µ—Å—Ç–≤–∞–π —Å —Ç–≤–æ—è Laravel –º–æ–¥–µ–ª

–ò—Å–∫–∞—à –ª–∏ –¥–∞ –Ω–∞–ø—Ä–∞–≤—è –∏ –¥—Ä—É–≥–∏ —Ç–∞–±–ª–∏—Ü–∏ (invoices, work_orders, vehicles –∏ —Ç.–Ω.)? –ú–æ–≥–∞ –¥–∞ –≥–∏ –∞–¥–∞–ø—Ç–∏—Ä–∞–º –∫—ä–º —Ç–≤–æ–∏—Ç–µ –º–æ–¥–µ–ª–∏ –∏ –¥–∞ –≥–∏ —Å–≤—ä—Ä–∂–∞ —Å foreign keys.

–ü—Ä–µ–¥–∏ –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏–º –±–∏—Ö –∏—Å–∫–∞–ª –¥–∞ –º–∏ –≥–æ –æ–ø—Ä–∞–≤–∏—à –∏ —Ç–æ–≤–∞ –∑–∞ –¥–∞ –≥–æ –≤–∏–¥—è ... type	name	short	ddstype	ajurtype
0	√î√†√™√≤√≥√∞√†	√î-√∞√†	04	1
2	√ä√∞√•√§√®√≤√≠√Æ √à√ß√¢√•√±√≤√®√•	√ä√à	06	3
4	√Ñ√•√°√®√≤√≠√Æ √à√ß√¢√•√±√≤√®√•	√Ñ√à	05	2
8	√é√≤√∑√•√≤ √ß√† √Ø√∞√Æ√§√†√¶√°√®√≤√•	√é√è	08	5
9	√è√∞√Æ√≤√Æ√™√Æ√´	√è	09	6
14	√Ä√≠√≥√´√®√∞√†√≠√• √≠√† √îa√™√≤√≥√∞√†	√Ä√î	14	1
15	√Ä√≠√≥√´√®√∞√†√≠√• √≠√† √Ñ√à	√Ä√Ñ√à	15	2
16	√Ä√≠√≥√´√®√∞√†√≠√• √≠√† √ä√à	√Ä√ä√à	16	3
18	√Ä√≠√≥√´√®√∞√†√≠√• √≠√† √é√è	√Ä√é√è	18	5
19	√Ä√≠√≥√´√®√∞√†√≠√• √≠√† √è	√Ä√è	19	6
–¢–æ–≤–∞ –∏–∑–≥–ª–µ–∂–¥–∞ –∫–∞—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –∑–∞ —Ç–∏–ø–æ–≤–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏ (document types). –©–µ —è –∞–¥–∞–ø—Ç–∏—Ä–∞–º –∫—ä–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞. –ï—Ç–æ –æ–ø—Ä–∞–≤–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏:

üìã –û–ø—Ä–∞–≤–µ–Ω–∏ –¥–∞–Ω–Ω–∏ (–∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ –µ –ø–æ–ø—Ä–∞–≤–µ–Ω–∞):
type	name	short	ddstype	ajurtype
0	–§–∞–∫—Ç—É—Ä–∞	–§-—Ä–∞	04	1
2	–ö—Ä–µ–¥–∏—Ç–Ω–æ –ò–∑–≤–µ—Å—Ç–∏–µ	–ö–ò	06	3
4	–î–µ–±–∏—Ç–Ω–æ –ò–∑–≤–µ—Å—Ç–∏–µ	–î–ò	05	2
8	–û—Ç—á–µ—Ç –∑–∞ –ø—Ä–æ–¥–∞–∂–±–∏—Ç–µ	–û–ü	08	5
9	–ü—Ä–æ—Ç–æ–∫–æ–ª	–ü	09	6
14	–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –§–∞–∫—Ç—É—Ä–∞	–ê–§	14	1
15	–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –î–ò	–ê–î–ò	15	2
16	–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –ö–ò	–ê–ö–ò	16	3
18	–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –û–ü	–ê–û–ü	18	5
19	–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –ü	–ê–ü	19	6
üóÉÔ∏è SQL –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ document_types:
–ê–∫–æ –Ω—è–º–∞—à –º–æ–¥–µ–ª –∑–∞ document types, –µ—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:

sql
CREATE TABLE document_types (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    code VARCHAR(20) UNIQUE NOT NULL, -- –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è 'type' –æ—Ç –¥–∞–Ω–Ω–∏—Ç–µ
    name VARCHAR(100) NOT NULL,
    abbreviation VARCHAR(10) NULL, -- 'short' –æ—Ç –¥–∞–Ω–Ω–∏—Ç–µ
    dds_type VARCHAR(10) NULL, -- 'ddstype' –æ—Ç –¥–∞–Ω–Ω–∏—Ç–µ
    accounting_type VARCHAR(10) NULL, -- 'ajurtype' –æ—Ç –¥–∞–Ω–Ω–∏—Ç–µ
    is_active BOOLEAN DEFAULT TRUE,
    is_cancellation BOOLEAN DEFAULT FALSE, -- –¥–∞–ª–∏ –µ —Ç–∏–ø –∑–∞ –∞–Ω—É–ª–∏—Ä–∞–Ω–µ
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    INDEX idx_code (code),
    INDEX idx_name (name)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
üì• INSERT –∑–∞—è–≤–∫–∞:
sql
INSERT INTO document_types (code, name, abbreviation, dds_type, accounting_type, is_cancellation) VALUES
('0', '–§–∞–∫—Ç—É—Ä–∞', '–§-—Ä–∞', '04', '1', FALSE),
('2', '–ö—Ä–µ–¥–∏—Ç–Ω–æ –ò–∑–≤–µ—Å—Ç–∏–µ', '–ö–ò', '06', '3', FALSE),
('4', '–î–µ–±–∏—Ç–Ω–æ –ò–∑–≤–µ—Å—Ç–∏–µ', '–î–ò', '05', '2', FALSE),
('8', '–û—Ç—á–µ—Ç –∑–∞ –ø—Ä–æ–¥–∞–∂–±–∏—Ç–µ', '–û–ü', '08', '5', FALSE),
('9', '–ü—Ä–æ—Ç–æ–∫–æ–ª', '–ü', '09', '6', FALSE),
('14', '–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –§–∞–∫—Ç—É—Ä–∞', '–ê–§', '14', '1', TRUE),
('15', '–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –î–ò', '–ê–î–ò', '15', '2', TRUE),
('16', '–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –ö–ò', '–ê–ö–ò', '16', '3', TRUE),
('18', '–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –û–ü', '–ê–û–ü', '18', '5', TRUE),
('19', '–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –ü', '–ê–ü', '19', '6', TRUE);
üìÑ CSV —Ñ–æ—Ä–º–∞—Ç:
csv
code,name,abbreviation,dds_type,accounting_type,is_cancellation
0,–§–∞–∫—Ç—É—Ä–∞,–§-—Ä–∞,04,1,0
2,–ö—Ä–µ–¥–∏—Ç–Ω–æ –ò–∑–≤–µ—Å—Ç–∏–µ,–ö–ò,06,3,0
4,–î–µ–±–∏—Ç–Ω–æ –ò–∑–≤–µ—Å—Ç–∏–µ,–î–ò,05,2,0
8,–û—Ç—á–µ—Ç –∑–∞ –ø—Ä–æ–¥–∞–∂–±–∏—Ç–µ,–û–ü,08,5,0
9,–ü—Ä–æ—Ç–æ–∫–æ–ª,–ü,09,6,0
14,–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –§–∞–∫—Ç—É—Ä–∞,–ê–§,14,1,1
15,–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –î–ò,–ê–î–ò,15,2,1
16,–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –ö–ò,–ê–ö–ò,16,3,1
18,–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –û–ü,–ê–û–ü,18,5,1
19,–ê–Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –ü,–ê–ü,19,6,1
üèóÔ∏è Laravel –º–æ–¥–µ–ª (–∞–∫–æ –∏–º–∞—à –Ω—É–∂–¥–∞):
php
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\SoftDeletes;

class DocumentType extends Model
{
    use SoftDeletes;

    protected $fillable = [
        'code', 'name', 'abbreviation', 'dds_type', 
        'accounting_type', 'is_active', 'is_cancellation'
    ];

    protected $casts = [
        'is_active' => 'boolean',
        'is_cancellation' => 'boolean'
    ];

    public function invoices()
    {
        return $this->hasMany(Invoice::class, 'document_type_id');
    }
}
üéØ –ö–∞–∫ –¥–∞ –≥–æ –∏–∑–ø–æ–ª–∑–≤–∞—à:
–ó–∞ MySQL –¥–∏—Ä–µ–∫—Ç–Ω–æ: –ò–∑–ø—ä–ª–Ω–∏ SQL –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –∏ INSERT –∑–∞—è–≤–∫–∞—Ç–∞.

–ó–∞ Laravel: –°—ä–∑–¥–∞–π –º–∏–≥—Ä–∞—Ü–∏—è –∏ seeder —Å –¥–∞–Ω–Ω–∏—Ç–µ.

–ó–∞ –∏–º–ø–æ—Ä—Ç: –ò–∑–ø–æ–ª–∑–≤–∞–π CSV —Ñ–∞–π–ª–∞.

–¢–∞–±–ª–∏—Ü–∞—Ç–∞ —Å—ä–¥—ä—Ä–∂–∞:

–û–±–∏–∫–Ω–æ–≤–µ–Ω–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏ (—Ñ–∞–∫—Ç—É—Ä–∏, –ø—Ä–æ—Ç–æ–∫–æ–ª–∏ –∏ —Ç.–Ω.)

–î–æ–∫—É–º–µ–Ω—Ç–∏ –∑–∞ –∞–Ω—É–ª–∏—Ä–∞–Ω–µ (–∑–∞–ª–∏—á–∞–≤–∞–Ω–µ –Ω–∞ –≤–µ—á–µ –∏–∑–¥–∞–¥–µ–Ω–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏)

–¢–æ–≤–∞ –µ –≤–∞–∂–Ω–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ç–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ –∑–∞ —Å—á–µ—Ç–æ–≤–æ–¥–Ω–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞.

–ò—Å–∫–∞—à –ª–∏ –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏–º —Å –¥—Ä—É–≥–∏ —Ç–∞–±–ª–∏—Ü–∏? –ú–æ–≥–∞ –¥–∞ –∞–¥–∞–ø—Ç–∏—Ä–∞–º:

Invoices (—Ñ–∞–∫—Ç—É—Ä–∏)

Work orders (—Ä–∞–±–æ—Ç–Ω–∏ –ø–æ—Ä—ä—á–∫–∏)

Vehicles (–ø—Ä–µ–≤–æ–∑–Ω–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞)

–ò–ª–∏ –∫–∞–∫–≤–æ—Ç–æ –∏–º–∞—à –≤ —Å—Ç–∞—Ä–∞—Ç–∞ Access –±–∞–∑–∞

–ë–∏—Ö –∏—Å–∫–∞–ª –¥–∞ —Ä–∞–∫–æ–¥–∏—Ä–∞—à —Ç–æ–≤–∞ ... Invoice-ID	Customer-ID	Invoice-Date	Invoice-Type	Invoice-Received-Date	Invoice-Received-Person	Invoice-√ë√∫√±√≤√†√¢√®√´	Note	paymentcash	void	Printed	tipsdelka	saletype	paymethod	Paid	InvoiceRecResponsible	InvoiceCreResponsible	datedue	zeroexplain
1	134	17.1.2007 –≥.	0	17.1.2007 –≥.		√Ö√å√à√ã √Å√é√É√é√Ö√Ç		–ù–µ	–ù–µ	–î–∞	0	1	1	–ù–µ	√í√é√å√à √É√Ä√ç√ó√Ö√Ç	√Ö√¨√®√´ √Å√Æ√£√Æ√•√¢	17.1.2007 –≥.	
2	19	17.1.2007 –≥.	0	17.1.2007 –≥.		√Ö√å√à√ã √Å√é√É√é√Ö√Ç		–ù–µ	–ù–µ	–î–∞	0	1	1	–ù–µ	√ã√ö√ó√Ö√á√Ä√ê √ë√í√é√ü√ç√é√Ç	√Ö√¨√®√´ √Å√Æ√£√Æ√•√¢	17.1.2007 –≥.	
3	20	17.1.2007 –≥.	0	17.1.2007 –≥.		√Ö√å√à√ã √Å√é√É√é√Ö√Ç		–ù–µ	–ù–µ	–î–∞	0	1	1	–ù–µ	√ê√é√ë√à√ñ√Ä √è√é√è√é√Ç√Ä	√Ö√¨√®√´ √Å√Æ√£√Æ√•√¢	17.1.2007 –≥.	
4	21	18.1.2007 –≥.	0	18.1.2007 –≥.		√Ö√å√à√ã √Å√é√É√é√Ö√Ç		–ù–µ	–ù–µ	–î–∞	0	1	1	–ù–µ	√ê√é√ë√Ö√ç √ë√í√Ä√ç√ä√é√Ç	√Ö√¨√®√´ √Å√Æ√£√Æ√•√¢	18.1.2007 –≥.	
5	22	18.1.2007 –≥.	0	18.1.2007 –≥.		√Ö√å√à√ã √Å√é√É√é√Ö√Ç		–ù–µ	–ù–µ	–î–∞	0	1	1	–ù–µ	√Ñ√à√å√à√í√ö√ê √Ä√Å√Ä√Ñ√Ü√à√Ö√Ç	√Ö√¨√®√´ √Å√Æ√£√Æ√•√¢	18.1.2007 –≥.	
6	23	18.1.2007 –≥.	0	18.1.2007 –≥.		√Ö√å√à√ã √Å√é√É√é√Ö√Ç		–ù–µ	–ù–µ	–î–∞	0	1	1	–ù–µ	√Ç√Ö√ê√ç√Ö√ê √ï√é√î√å√Ä√ç	√Ö√¨√®√´ √Å√Æ√£√Æ√•√¢	18.1.2007 –≥.	.... –∏ –¥–∞ –º–∏ –∫–∞–∂–µ—à —Å–ø–æ—Ä–µ–¥ —Ç–µ–± –≤—Å—è–∫–∞ –∫–æ–ª–æ–Ω–∞ –∑–∞ –∫–∞–∫–≤–æ –µ
–¢–æ–≤–∞ –µ —Ç–∞–±–ª–∏—Ü–∞ —Å —Ñ–∞–∫—Ç—É—Ä–∏ (invoices). –©–µ –¥–µ–∫–æ–¥–∏—Ä–∞–º –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ –∏ —â–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–∞–º –≤—Å—è–∫–∞ –∫–æ–ª–æ–Ω–∞:

üîç –ê–Ω–∞–ª–∏–∑ –Ω–∞ –∫–æ–ª–æ–Ω–∏—Ç–µ:
–ö–æ–ª–æ–Ω–∞ –≤ Access	–ö–∞–∫–≤–æ –æ–∑–Ω–∞—á–∞–≤–∞	–¢–∏–ø –≤ MySQL	–ë–µ–ª–µ–∂–∫–∏
Invoice-ID	–£–Ω–∏–∫–∞–ª–µ–Ω –Ω–æ–º–µ—Ä –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∞	INT / BIGINT	Primary Key
Customer-ID	–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è –∫—ä–º –∫–ª–∏–µ–Ω—Ç	INT / BIGINT	Foreign Key –∫—ä–º customers.id
Invoice-Date	–î–∞—Ç–∞ –Ω–∞ –∏–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∞	DATE/DATETIME	
Invoice-Type	–¢–∏–ø –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∞—Ç–∞	TINYINT/VARCHAR	–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è –∫—ä–º document_types.code (0=–§–∞–∫—Ç—É—Ä–∞)
Invoice-Received-Date	–î–∞—Ç–∞ –Ω–∞ –ø–æ–ª—É—á–∞–≤–∞–Ω–µ	DATE/DATETIME	
Invoice-Received-Person	–õ–∏—Ü–µ, –ø–æ–ª—É—á–∏–ª–æ —Ñ–∞–∫—Ç—É—Ä–∞—Ç–∞	VARCHAR	
Invoice-–°—ä—Å—Ç–∞–≤–∏–ª	–õ–∏—Ü–µ, —Å—ä—Å—Ç–∞–≤–∏–ª–æ —Ñ–∞–∫—Ç—É—Ä–∞—Ç–∞	VARCHAR	"–°—ä—Å—Ç–∞–≤–∏–ª" = —Å—ä–∑–¥–∞—Ç–µ–ª
Note	–ë–µ–ª–µ–∂–∫–∏	TEXT	
paymentcash	–ü–ª–∞—â–∞–Ω–µ –≤ –±—Ä–æ–π	BOOLEAN	"–ù–µ"/"–î–∞"
void	–ê–Ω—É–ª–∏—Ä–∞–Ω–∞	BOOLEAN	"–ù–µ"/"–î–∞"
Printed	–†–∞–∑–ø–µ—á–∞—Ç–∞–Ω–∞	BOOLEAN	"–ù–µ"/"–î–∞"
tipsdelka	? –ü—Ä–æ—Ü–µ–Ω—Ç/–æ—Ç—Å—Ç—ä–ø–∫–∞?	DECIMAL	
saletype	–¢–∏–ø –ø—Ä–æ–¥–∞–∂–±–∞	TINYINT	–í–µ—Ä–æ—è—Ç–Ω–æ 1=—Å—Ç–æ–∫–æ–≤–∞, 2=—É—Å–ª—É–≥–∞
paymethod	–ù–∞—á–∏–Ω –Ω–∞ –ø–ª–∞—â–∞–Ω–µ	TINYINT	–í–µ—Ä–æ—è—Ç–Ω–æ 1=–±—Ä–æ–π, 2=–±–∞–Ω–∫–æ–≤ –ø—ä—Ç
Paid	–ü–ª–∞—Ç–µ–Ω–∞	BOOLEAN	"–ù–µ"/"–î–∞"
InvoiceRecResponsible	–û—Ç–≥–æ–≤–æ—Ä–Ω–∏–∫ –∑–∞ –ø–æ–ª—É—á–∞–≤–∞–Ω–µ	VARCHAR	
InvoiceCreResponsible	–û—Ç–≥–æ–≤–æ—Ä–Ω–∏–∫ –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ	VARCHAR	
datedue	–ö—Ä–∞–µ–Ω —Å—Ä–æ–∫ –∑–∞ –ø–ª–∞—â–∞–Ω–µ	DATE	
zeroexplain	–û–±—è—Å–Ω–µ–Ω–∏–µ –∑–∞ –Ω—É–ª–µ–≤–∞ —Å—É–º–∞	TEXT	
üìã –û–ø—Ä–∞–≤–µ–Ω–∏ –¥–∞–Ω–Ω–∏ (–ø—ä—Ä–≤–∏—Ç–µ 6 –∑–∞–ø–∏—Å–∞):
Invoice-ID	Customer-ID	Invoice-Date	Invoice-Type	Invoice-Received-Date	Invoice-Received-Person	Invoice-–°—ä—Å—Ç–∞–≤–∏–ª	Note	paymentcash	void	Printed	tipsdelka	saletype	paymethod	Paid	InvoiceRecResponsible	InvoiceCreResponsible	datedue	zeroexplain
1	134	2007-01-17	0	2007-01-17		–ï–ú–ò–õ –ë–û–ì–û–ï–í		–ù–µ	–ù–µ	–î–∞	0	1	1	–ù–µ	–¢–û–ú–ò –ì–ê–ù–ß–ï–í	–ï–º–∏–ª –ë–æ–≥–æ–µ–≤	2007-01-17	
2	19	2007-01-17	0	2007-01-17		–ï–ú–ò–õ –ë–û–ì–û–ï–í		–ù–µ	–ù–µ	–î–∞	0	1	1	–ù–µ	–õ–™–ß–ï–ó–ê–† –°–¢–û–Ø–ù–û–í	–ï–º–∏–ª –ë–æ–≥–æ–µ–≤	2007-01-17	
3	20	2007-01-17	0	2007-01-17		–ï–ú–ò–õ –ë–û–ì–û–ï–í		–ù–µ	–ù–µ	–î–∞	0	1	1	–ù–µ	–†–û–°–ò–¶–ê –ü–û–ü–û–í–ê	–ï–º–∏–ª –ë–æ–≥–æ–µ–≤	2007-01-17	
4	21	2007-01-18	0	2007-01-18		–ï–ú–ò–õ –ë–û–ì–û–ï–í		–ù–µ	–ù–µ	–î–∞	0	1	1	–ù–µ	–†–û–°–ï–ù –°–¢–ê–ù–ö–û–í	–ï–º–∏–ª –ë–æ–≥–æ–µ–≤	2007-01-18	
5	22	2007-01-18	0	2007-01-18		–ï–ú–ò–õ –ë–û–ì–û–ï–í		–ù–µ	–ù–µ	–î–∞	0	1	1	–ù–µ	–î–ò–ú–ò–¢–™–† –ê–ë–ê–î–ñ–ò–ï–í	–ï–º–∏–ª –ë–æ–≥–æ–µ–≤	2007-01-18	
6	23	2007-01-18	0	2007-01-18		–ï–ú–ò–õ –ë–û–ì–û–ï–í		–ù–µ	–ù–µ	–î–∞	0	1	1	–ù–µ	–í–ï–†–ù–ï–† –•–û–§–ú–ê–ù	–ï–º–∏–ª –ë–æ–≥–æ–µ–≤	2007-01-18	
üóÉÔ∏è SQL –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ invoices:
sql
CREATE TABLE invoices (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    customer_id BIGINT UNSIGNED NOT NULL,
    invoice_date DATE NOT NULL,
    document_type_id INT UNSIGNED NOT NULL DEFAULT 1, -- 0=–§–∞–∫—Ç—É—Ä–∞
    received_date DATE NULL,
    received_person VARCHAR(100) NULL,
    prepared_by VARCHAR(100) NULL, -- Invoice-–°—ä—Å—Ç–∞–≤–∏–ª
    notes TEXT NULL,
    is_cash_payment BOOLEAN DEFAULT FALSE,
    is_void BOOLEAN DEFAULT FALSE,
    is_printed BOOLEAN DEFAULT FALSE,
    discount DECIMAL(5,2) DEFAULT 0.00, -- tipsdelka
    sale_type TINYINT DEFAULT 1, -- 1=—Å—Ç–æ–∫–æ–≤–∞, 2=—É—Å–ª—É–≥–∞
    payment_method TINYINT DEFAULT 1, -- 1=–±—Ä–æ–π, 2=–±–∞–Ω–∫–æ–≤ –ø—ä—Ç
    is_paid BOOLEAN DEFAULT FALSE,
    received_responsible VARCHAR(100) NULL,
    created_responsible VARCHAR(100) NULL,
    due_date DATE NULL,
    zero_amount_explanation TEXT NULL,
    subtotal DECIMAL(10,2) DEFAULT 0.00,
    vat_amount DECIMAL(10,2) DEFAULT 0.00,
    total_amount DECIMAL(10,2) DEFAULT 0.00,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    deleted_at TIMESTAMP NULL,
    FOREIGN KEY (customer_id) REFERENCES customers(id) ON DELETE RESTRICT,
    FOREIGN KEY (document_type_id) REFERENCES document_types(id) ON DELETE RESTRICT,
    INDEX idx_customer_id (customer_id),
    INDEX idx_invoice_date (invoice_date),
    INDEX idx_due_date (due_date),
    INDEX idx_is_paid (is_paid)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
üì• INSERT –∑–∞—è–≤–∫–∞ (–ø—ä—Ä–≤–∏—Ç–µ 6 –∑–∞–ø–∏—Å–∞):
sql
INSERT INTO invoices (
    id, customer_id, invoice_date, document_type_id, received_date, 
    prepared_by, is_cash_payment, is_void, is_printed, discount, 
    sale_type, payment_method, is_paid, received_responsible, 
    created_responsible, due_date
) VALUES
(1, 134, '2007-01-17', 1, '2007-01-17', '–ï–ú–ò–õ –ë–û–ì–û–ï–í', 
 FALSE, FALSE, TRUE, 0.00, 1, 1, FALSE, '–¢–û–ú–ò –ì–ê–ù–ß–ï–í', '–ï–º–∏–ª –ë–æ–≥–æ–µ–≤', '2007-01-17'),
(2, 19, '2007-01-17', 1, '2007-01-17', '–ï–ú–ò–õ –ë–û–ì–û–ï–í', 
 FALSE, FALSE, TRUE, 0.00, 1, 1, FALSE, '–õ–™–ß–ï–ó–ê–† –°–¢–û–Ø–ù–û–í', '–ï–º–∏–ª –ë–æ–≥–æ–µ–≤', '2007-01-17'),
(3, 20, '2007-01-17', 1, '2007-01-17', '–ï–ú–ò–õ –ë–û–ì–û–ï–í', 
 FALSE, FALSE, TRUE, 0.00, 1, 1, FALSE, '–†–û–°–ò–¶–ê –ü–û–ü–û–í–ê', '–ï–º–∏–ª –ë–æ–≥–æ–µ–≤', '2007-01-17'),
(4, 21, '2007-01-18', 1, '2007-01-18', '–ï–ú–ò–õ –ë–û–ì–û–ï–í', 
 FALSE, FALSE, TRUE, 0.00, 1, 1, FALSE, '–†–û–°–ï–ù –°–¢–ê–ù–ö–û–í', '–ï–º–∏–ª –ë–æ–≥–æ–µ–≤', '2007-01-18'),
(5, 22, '2007-01-18', 1, '2007-01-18', '–ï–ú–ò–õ –ë–û–ì–û–ï–í', 
 FALSE, FALSE, TRUE, 0.00, 1, 1, FALSE, '–î–ò–ú–ò–¢–™–† –ê–ë–ê–î–ñ–ò–ï–í', '–ï–º–∏–ª –ë–æ–≥–æ–µ–≤', '2007-01-18'),
(6, 23, '2007-01-18', 1, '2007-01-18', '–ï–ú–ò–õ –ë–û–ì–û–ï–í', 
 FALSE, FALSE, TRUE, 0.00, 1, 1, FALSE, '–í–ï–†–ù–ï–† –•–û–§–ú–ê–ù', '–ï–º–∏–ª –ë–æ–≥–æ–µ–≤', '2007-01-18');
üèóÔ∏è Laravel –º–æ–¥–µ–ª Invoice (–∞–∫–æ –Ω—è–º–∞—à):
php
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\SoftDeletes;

class Invoice extends Model
{
    use SoftDeletes;

    protected $fillable = [
        'customer_id', 'invoice_number', 'invoice_date', 'document_type_id',
        'received_date', 'received_person', 'prepared_by', 'notes',
        'is_cash_payment', 'is_void', 'is_printed', 'discount',
        'sale_type', 'payment_method', 'is_paid', 'received_responsible',
        'created_responsible', 'due_date', 'zero_amount_explanation',
        'subtotal', 'vat_amount', 'total_amount'
    ];

    protected $casts = [
        'is_cash_payment' => 'boolean',
        'is_void' => 'boolean',
        'is_printed' => 'boolean',
        'is_paid' => 'boolean',
        'invoice_date' => 'date',
        'due_date' => 'date',
        'received_date' => 'date',
        'discount' => 'decimal:2',
        'subtotal' => 'decimal:2',
        'vat_amount' => 'decimal:2',
        'total_amount' => 'decimal:2'
    ];

    public function customer()
    {
        return $this->belongsTo(Customer::class);
    }

    public function documentType()
    {
        return $this->belongsTo(DocumentType::class);
    }

    public function items()
    {
        return $this->hasMany(InvoiceItem::class);
    }
}
üìù –í–∞–∂–Ω–∏ –∑–∞–±–µ–ª–µ–∂–∫–∏:
Customer-ID 134 –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ –≤ –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ –∫–ª–∏–µ–Ω—Ç–∏, –∫–æ–∏—Ç–æ —Ç–∏ –¥–∞–¥–µ - –º–æ–∂–µ –¥–∞ –µ –¥—Ä—É–≥ –∫–ª–∏–µ–Ω—Ç –∏–ª–∏ –≥—Ä–µ—à–∫–∞.

Document type mapping: –í—Å–∏—á–∫–∏ —Å–∞ —Ç–∏–ø "0" (–§–∞–∫—Ç—É—Ä–∞), –∫–æ–µ—Ç–æ —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∞ –Ω–∞ document_types.code = '0'.

–î–∞—Ç–∞ —Ñ–æ—Ä–º–∞—Ç: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞—Ö –æ—Ç "17.1.2007 –≥." –∫—ä–º "2007-01-17".

–û—Ç—Å—É—Ç–Ω–∏ –ø–æ–ª–µ—Ç–∞: –ù—è–º–∞ —Å—É–º–∏ (subtotal, vat, total) - —Ç–µ –≤–µ—Ä–æ—è—Ç–Ω–æ —Å–∞ –≤ –æ—Ç–¥–µ–ª–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ invoice_items.

Boolean –ø–æ–ª–µ—Ç–∞: "–ù–µ" = FALSE, "–î–∞" = TRUE.

–ò—Å–∫–∞—à –ª–∏ –¥–∞ —Ç–∏ –ø–æ–¥–≥–æ—Ç–≤—è –∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –∑–∞ invoice items (—Ä–µ–¥–æ–≤–µ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏—Ç–µ), –∫—ä–¥–µ—Ç–æ –≤–µ—Ä–æ—è—Ç–Ω–æ —Å–∞ –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞—Ç–∞ –∏ —Ü–µ–Ω–∏—Ç–µ?

–°–ø–æ—Ä–µ–¥ —Ç–µ–± –≤ –∫–æ–∏ —Ç–∞–±–ª–∏—Ü–∏ —Å–∞ –≤—Å–∏—á–∫–∏ –¥–∞–Ω–Ω–∏ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∞—Ç–∞. –í–∏–∂ –∫–∞—Ä—Ç–∏–Ω–∫–∏—Ç–µ –∫–æ–∏—Ç–∞ –¥–∞ —Å–µ–≥–∞ —Å—ä–º —Ç–∏ –∫–∞—á–≤–∞–ª
–û—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏—Ç–µ –∏ –¥–∏—Å–∫—É—Å–∏—è—Ç–∞ –¥–æ—Å–µ–≥–∞, –≤–∏–∂–¥–∞–º —á–µ –∏–º–∞—à —Å–ª–µ–¥–Ω–∏—Ç–µ —Ç–∞–±–ª–∏—Ü–∏, —Å–≤—ä—Ä–∑–∞–Ω–∏ —Å —Ñ–∞–∫—Ç—É—Ä–∏—Ç–µ:

üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏—Ç–µ (—Å–ø–æ—Ä–µ–¥ Access –±–∞–∑–∞—Ç–∞):
1. –û—Å–Ω–æ–≤–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ invoices (–∫–æ—è—Ç–æ —Ç–æ–∫—É-—â–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–∞—Ö–º–µ)
–°—ä–¥—ä—Ä–∂–∞ –æ–±—â–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ —Ñ–∞–∫—Ç—É—Ä–∞—Ç–∞

Invoice-ID, Customer-ID, dates, —Å—Ç–∞—Ç—É—Å–∏, –æ—Ç–≥–æ–≤–æ—Ä–Ω–∏—Ü–∏

2. –¢–∞–±–ª–∏—Ü–∞ items –∏–ª–∏ invoice_items
–û—Ç –ø—Ä–µ–¥–∏—à–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –≤–∏–¥—è—Ö:

PLU/Product ID

Name (–∏–º–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç)

Qty (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)

Price (—Ü–µ–Ω–∞)

acc (—Å—á–µ—Ç–æ–≤–æ–¥–Ω–∞ —Å–º–µ—Ç–∫–∞)

3. –¢–∞–±–ª–∏—Ü–∞ products
–ü–æ–¥—Ä–æ–±–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ

4. –¢–∞–±–ª–∏—Ü–∞ customers
–î–∞–Ω–Ω–∏ –∑–∞ –∫–ª–∏–µ–Ω—Ç–∏—Ç–µ

5. –¢–∞–±–ª–∏—Ü–∞ doctypes
–¢–∏–ø–æ–≤–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏ (–≤–µ—á–µ —è –∏–º–∞–º–µ)

üîç –ü—Ä–æ–±–ª–µ–º: –î–∞–Ω–Ω–∏—Ç–µ –∑–∞ —Ñ–∞–∫—Ç—É—Ä–∏—Ç–µ —Å–∞ —Ä–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∏
–û—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏—Ç–µ –≤–∏–∂–¥–∞–º, —á–µ –∏–º–∞—à:

–ì–ª–∞–≤–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å —Ñ–∞–∫—Ç—É—Ä–∏ (header –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)

–û—Ç–¥–µ–ª–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å –∞—Ä—Ç–∏–∫—É–ª–∏ (—Ä–µ–¥–æ–≤–µ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏—Ç–µ)

–ù–æ –Ω–µ –≤–∏–∂–¥–∞–º –≤—Ä—ä–∑–∫–∞ –º–µ–∂–¥—É —Ç—è—Ö (–∫–æ–∏ –∞—Ä—Ç–∏–∫—É–ª–∏ –∫—ä–º –∫–æ—è —Ñ–∞–∫—Ç—É—Ä–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç)

üéØ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∑–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ MySQL:
–¢–∞–±–ª–∏—Ü–∞ 1: invoices (–≤–µ—á–µ —è –Ω–∞–ø—Ä–∞–≤–∏—Ö–º–µ)
sql
CREATE TABLE invoices (
    id BIGINT UNSIGNED PRIMARY KEY, -- Invoice-ID –æ—Ç Access
    customer_id BIGINT UNSIGNED,
    invoice_date DATE,
    -- ... –¥—Ä—É–≥–∏ –ø–æ–ª–µ—Ç–∞
);
–¢–∞–±–ª–∏—Ü–∞ 2: invoice_items (—Ä–µ–¥–æ–≤–µ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏—Ç–µ)
sql
CREATE TABLE invoice_items (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    invoice_id BIGINT UNSIGNED NOT NULL,
    product_id BIGINT UNSIGNED NULL, -- –∞–∫–æ –∏–º–∞–º–µ products —Ç–∞–±–ª–∏—Ü–∞
    plu VARCHAR(50) NULL, -- PLU –æ—Ç Access
    description VARCHAR(255) NOT NULL,
    quantity DECIMAL(10,2) NOT NULL DEFAULT 1,
    unit_price DECIMAL(10,2) NOT NULL DEFAULT 0,
    vat_percent DECIMAL(5,2) DEFAULT 20.00,
    line_total DECIMAL(10,2) AS (quantity * unit_price),
    account_code VARCHAR(20) NULL, -- 'acc' –æ—Ç Access
    FOREIGN KEY (invoice_id) REFERENCES invoices(id) ON DELETE CASCADE
);
‚ùì –í—ä–ø—Ä–æ—Å –∫—ä–º —Ç–µ–±:
–ó–∞ –¥–∞ —Ç–∏ –ø–æ–º–æ–≥–Ω–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ, —Ç—Ä—è–±–≤–∞ –¥–∞ —Ä–∞–∑–±–µ—Ä–∞:

–ò–º–∞—à –ª–∏ —Ç–∞–±–ª–∏—Ü–∞ —Å—ä—Å –∑–∞–ø–∏—Å–∏ –∫–∞—Ç–æ —Ç–æ–∑–∏? (—Ç–æ–≤–∞ –∏–∑–≥–ª–µ–∂–¥–∞ –∫–∞—Ç–æ —Ä–µ–¥–æ–≤–µ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏)

text
| PLU    | Name    | UOI  | Qty   | Price  | acc    |
|--------|---------|------|-------|--------|--------|
| 16172  | –Ω–∞–∫–ª–∞–¥–∫–∏| –±—Ä.  | 1     | 32,40  | 7021   |
–ò–º–∞—à –ª–∏ –∫–æ–ª–æ–Ω–∞, –∫–æ—è—Ç–æ —Å–≤—ä—Ä–∑–≤–∞ —Ç–µ–∑–∏ —Ä–µ–¥–æ–≤–µ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∞?

–ù–∞–ø—Ä–∏–º–µ—Ä Invoice-ID –∏–ª–∏ Document-No –≤ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ —Å –∞—Ä—Ç–∏–∫—É–ª–∏?

–ú–æ–∂–µ—à –ª–∏ –¥–∞ –º–∏ –ø–æ–∫–∞–∂–µ—à —Å–Ω–∏–º–∫–∞ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ items –∏–ª–∏ invoice_items –æ—Ç Access?

–ò–ª–∏ –¥–∞ –º–∏ –∏–∑–ø—Ä–∞—Ç–∏—à –Ω—è–∫–æ–ª–∫–æ —Ä–µ–¥–∞ –æ—Ç –Ω–µ—è?

üöÄ –ö–∞–∫ —â–µ –ø—Ä–æ–¥—ä–ª–∂–∏–º:
–ù–∞–º–µ—Ä–∏ –≤—Ä—ä–∑–∫–∞—Ç–∞ –º–µ–∂–¥—É invoices –∏ items

–°—ä–∑–¥–∞–π –ø—Ä–∞–≤–∏–ª–Ω–∏ foreign keys

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞–π –¥–∞–Ω–Ω–∏—Ç–µ —Å—ä—Å –∑–∞–ø–∞–∑–µ–Ω–∏ –≤—Ä—ä–∑–∫–∏

–ú–æ–∂–µ—à –ª–∏ –¥–∞ –º–∏ –ø–æ–∫–∞–∂–µ—à —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ —Å –∞—Ä—Ç–∏–∫—É–ª–∏/—Ä–µ–¥–æ–≤–µ –æ—Ç —Ñ–∞–∫—Ç—É—Ä–∏—Ç–µ? –¢—è –µ –∫–ª—é—á–æ–≤–∞ –∑–∞ –¥–∞ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–∞–º–µ —Ñ–∞–∫—Ç—É—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–Ω–æ.

–ö–æ–∏ —Å–∞ —Ç–∞–±–ª–∏—Ü–∏—Ç–µ –∑–∞ –ø—Ä–æ–¥–∞–¥–µ–Ω–∏ –∞—Ä—Ç–∏–∫—É–ª–∏
–û—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏—Ç–µ –¥–æ—Å–µ–≥–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏ —Ñ–∞–π–ª–æ–≤–µ, —Ç–∞–±–ª–∏—Ü–∏—Ç–µ –∑–∞ –ø—Ä–æ–¥–∞–¥–µ–Ω–∏ –∞—Ä—Ç–∏–∫—É–ª–∏ –≤ —Ç–≤–æ—è—Ç–∞ Access –±–∞–∑–∞ —Å–∞:

üìã –û—Å–Ω–æ–≤–Ω–∏ —Ç–∞–±–ª–∏—Ü–∏ –∑–∞ –ø—Ä–æ–¥–∞–∂–±–∏/–∞—Ä—Ç–∏–∫—É–ª–∏:
1. items (–∏–ª–∏ products –æ—Ç –ø–æ-—Ä–∞–Ω–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞)
–°—ä–¥—ä—Ä–∂–∞ –ø—Ä–æ–¥—É–∫—Ç–∏/–∞—Ä—Ç–∏–∫—É–ª–∏ —Å —Ç–µ—Ö–Ω–∏—Ç–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

–ö–æ–ª–æ–Ω–∏: PLU, Name, UOI, Price, acc

–¢–æ–≤–∞ –µ –∫–∞—Ç–∞–ª–æ–≥ —Å –Ω–∞–ª–∏—á–Ω–∏ –ø—Ä–æ–¥—É–∫—Ç–∏

2. invoices (–≤–µ—á–µ —è –∏–º–∞–º–µ)
–ó–∞–≥–ª–∞–≤–∏—è –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏—Ç–µ

3. invoice_items (–∏–ª–∏ –ø–æ–¥–æ–±–Ω–∞ –∏–º–µ)
–¢–æ–≤–∞ –ª–∏–ø—Å–≤–∞ –≤ –ø–æ–∫–∞–∑–∞–Ω–∏—Ç–µ –¥–æ—Å–µ–≥–∞ —Å–Ω–∏–º–∫–∏, –Ω–æ –µ –ù–ï–û–ë–•–û–î–ò–ú–ê

–¢—Ä—è–±–≤–∞ –¥–∞ —Å–≤—ä—Ä–∑–≤–∞ invoices —Å items (–∫–æ—è —Ñ–∞–∫—Ç—É—Ä–∞ –∏–º–∞ –∫–æ–∏ –∞—Ä—Ç–∏–∫—É–ª–∏)

üîç –ü—Ä–æ–±–ª–µ–º: –ù–µ –≤–∏–∂–¥–∞–º —Ç–∞–±–ª–∏—Ü–∞ –∑–∞ —Ä–µ–¥–æ–≤–µ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏
–û—Ç –≤—Å–∏—á–∫–∏ —Å–Ω–∏–º–∫–∏, –∫–æ–∏—Ç–æ —Å–∏ –∫–∞—á–∏–ª, –Ω–µ –≤–∏–¥—è—Ö —Ç–∞–±–ª–∏—Ü–∞, –∫–æ—è—Ç–æ –¥–∞ —Å—ä–¥—ä—Ä–∂–∞:

Invoice-ID (–≤—Ä—ä–∑–∫–∞ –∫—ä–º —Ñ–∞–∫—Ç—É—Ä–∞)

Item-ID –∏–ª–∏ PLU (–≤—Ä—ä–∑–∫–∞ –∫—ä–º –∞—Ä—Ç–∏–∫—É–ª)

Quantity (–ø—Ä–æ–¥–∞–¥–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)

Price (—Ü–µ–Ω–∞ –Ω–∞ —Ä–µ–¥–∞)

üéØ –ö—ä–¥–µ –º–æ–∂–µ –¥–∞ —Å–µ –Ω–∞–º–∏—Ä–∞—Ç –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ –ø—Ä–æ–¥–∞–¥–µ–Ω–∏ –∞—Ä—Ç–∏–∫—É–ª–∏:
–í–∞—Ä–∏–∞–Ω—Ç 1: –í —Ç–∞–±–ª–∏—Ü–∞ items —Å –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∫–æ–ª–æ–Ω–∞
–ú–æ–∂–µ items –¥–∞ –∏–º–∞ –∫–æ–ª–æ–Ω–∞ Invoice-ID

–ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ items –∏–º–∞ –∫–æ–ª–æ–Ω–∞ –∑–∞ –Ω–æ–º–µ—Ä –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç/—Ñ–∞–∫—Ç—É—Ä–∞

–í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–¥–µ–ª–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å –¥—Ä—É–≥–æ –∏–º–µ
–ú–æ–∂–µ –¥–∞ —Å–µ –∫–∞–∑–≤–∞:

sales

transactions

invoice_lines

order_items

poservices (—Ç–æ–≤–∞ –≥–æ –≤–∏–¥—è—Ö –≤ —Å–ø–∏—Å—ä–∫ —Å —Ç–∞–±–ª–∏—Ü–∏!)

–í–∞—Ä–∏–∞–Ω—Ç 3: –í invoices —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –∫–∞—Ç–æ –¥–µ—Ç–∞–π–ª–∏
–ù—è–∫–æ–∏ —Å–∏—Å—Ç–µ–º–∏ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞—Ç –≤—Å–∏—á–∫–æ –≤ –µ–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞

‚ùì –ë—ä—Ä–∑ —Ç–µ—Å—Ç: –û—Ç–≤–æ—Ä–∏ Access –∏ –ø—Ä–æ–≤–µ—Ä–∏
–ü–æ—Ç—ä—Ä—Å–∏ —Ç–∞–±–ª–∏—Ü–∞ poservices (–≤–∏–¥—è—Ö —è –≤ —Å–ø–∏—Å—ä–∫)

–ü–æ—Ç—ä—Ä—Å–∏ —Ç–∞–±–ª–∏—Ü–∞ —Å—ä—Å —Å–ª–µ–¥–Ω–∏—Ç–µ –∫–æ–ª–æ–Ω–∏:

DocumentNo –∏–ª–∏ InvNo

ProductID –∏–ª–∏ PLU

Qty

Price

–û—Ç–≤–æ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞ items –∏ –≤–∏–∂ –∏–º–∞ –ª–∏ –∫–æ–ª–æ–Ω–∏ –∑–∞:

InvoiceID

DocumentType

DocNo

üì∏ –ê–∫–æ –º–æ–∂–µ—à –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏—à —Å–Ω–∏–º–∫–∞ –Ω–∞:
–°–ø–∏—Å—ä–∫ –Ω–∞ –í–°–ò–ß–ö–ò —Ç–∞–±–ª–∏—Ü–∏ (–æ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∏—è –ø–∞–Ω–µ–ª)

–°—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ items (Design View)

–°—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ poservices

–©–µ —Ä–∞–∑–±–µ—Ä–µ–º –∫—ä–¥–µ —Å–∞ –ø—Ä–æ–¥–∞–¥–µ–Ω–∏—Ç–µ –∞—Ä—Ç–∏–∫—É–ª–∏ –∏ –∫–∞–∫ –¥–∞ –≥–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–º–µ –≤ MySQL —Å –ø—Ä–∞–≤–∏–ª–Ω–∏—Ç–µ –≤—Ä—ä–∑–∫–∏.

–ú–æ–∂–µ—à –ª–∏ –¥–∞ –ø—Ä–æ–≤–µ—Ä–∏—à –∏ –¥–∞ –º–∏ –∫–∞–∂–µ—à –∫–∞–∫–≤–∏ —Ç–∞–±–ª–∏—Ü–∏ –∏–º–∞—à –æ—Å–≤–µ–Ω —Ç–µ–∑–∏, –∫–æ–∏—Ç–æ –≤–µ—á–µ –≤–∏–¥—è—Ö–º–µ?

–ò–º–∞–º —Ç–∞–±–ª–∏—Ü–∞ items... Invoice-ID	Number	Item-Code	Item-Name	Item-Measure	Item-Qty	Item-Price-Each	Item-total
1	4		√å√Ä√ë√ã√é √Ñ√Ç√É	√ã√à√í	10	9,39	11,27
2	5		√å√Ä√ë√ã√é √Ñ√Ç√É	√ã√à√í	10	9,39	11,27
3	1		√å√Ä√ë√ã√é √Ñ√Ç√É	√ã√à√í	5	9,39	11,27
4	1		√å√Ä√ë√ã√é √Ñ√Ç√É	√ã√à√í	7	13,07	15,68 ... –∏ —Ç–∞–±–ª–∏—Ü–∞ POitems...POID	Number	Item-Code	Item-Name	Item-Measure	Item-Qty	Item-Price-Each	Item-total
0	3			√°√∞.	1	0,00	
0	4			√°√∞.	1	0,00	
0	5			√°√∞.	0	0,00	
0	6			√°√∞.	0	0,00	
0	7			√°√∞.	0	0,00	
1	1	5600PZ	√Ä√™√≥√¨√≥√´√†√≤√Æ√∞ 12V-L2D-60Ah-640A	√°√∞.	1	153,92	184,70
1	2	0805A5	V V T I	√°√∞.	1	388,19	465,83
1	3	312144	√ë√•√¨√•√∞√®√≠√£ 312123	√°√∞.	1	9,88	11,86
1	4	210535	√å√≥√¥√† √≠√† √Ø√∫√∞√¢. √Ç√†√´	√°√∞.	1	14,18	17,02
1	5	2052K2	√ä-√™√≤ √±√∫√•√§√®√≠√®√≤√•√´ 2052K2	√°√∞.	1	369,53	443,44
1	6		√ë√¨√ø√≠√† √±-√≤√•√´	√∑√†√±	18	8,33	10,00
1	7		√ë√¨√ø√≠√† V VT √™√´√†√Ø√†√≠	√∑√†√±	8	8,33	10,00... –°—ä—â–æ —Ç–∞–∫–∞ –∏–º–∞–º –∏—Ç–∞–±–ª–∏—Ü–∞ PO ... √è√Æ√∞√∫√∑√™√†	√ä√´√®√•√≠√≤	PODate	Author	√á√†√°√•√´√•√¶√™√†	√ò√†√±√®	√í√•√´√•√¥√Æ√≠	√Ä√¢√≤√Æ√¨√Æ√°√®√´	√Ñ√ä No	√ä√Æ√§ √≠√† √¨√Æ√≠√≤√º√Æ√∞√†	√à√ß√¨√®√≠√†√≤√® √™√¨	serviceamt
0	√è√Ö√í√ö√ê √ä√à√ê√à√ã√é√Ç	07.12.2017 –≥.	√Ö√å√à√ã √Å√é√É√é√Ö√Ç		72368449	0888525030	√ä√ë√Ä√ç√í√à√ü	CA1358PC	4	294200	0
1	√à√¢√Æ	20.2.2009 –≥.	√Ö√å√à√ã √Å√é√É√é√Ö√Ç		76050181	0884330784	C5	C0456XB	3	120000	
2	√Ö√ã√à-206	20.2.2009 –≥.	√Ö√å√à√ã √Å√é√É√é√Ö√Ç		83532304	0899385941	307	CA2858CB	3	83800	
3	√Ç√†√´√•√≠√≤√®√≠	21.2.2009 –≥.	√Ö√å√à√ã √Å√é√É√é√Ö√Ç		95113381	0895737222	√è√†√∞√≤√≠√•√∞	C9403XB	3	118000	
4	√è√´√†√¨√•√≠	21.2.2009 –≥.	√Ö√å√à√ã √Å√é√É√é√Ö√Ç		38834015	0899875298	√è√®√™√†√±√Æ	C1352XC	2	144700
–°–£–ü–ï–†! –°–µ–≥–∞ –∏–º–∞–º –ø—ä–ª–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∞. –¢–æ–≤–∞ —Å–∞ —Ç—Ä–∏ –∫–ª—é—á–æ–≤–∏ —Ç–∞–±–ª–∏—Ü–∏ –∑–∞ –ø—Ä–æ–¥–∞–∂–±–∏—Ç–µ:

üéØ –ê–Ω–∞–ª–∏–∑ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∏—Ç–µ:
1. items ‚Üí –†–µ–¥–æ–≤–µ –Ω–∞ –§–ê–ö–¢–£–†–ò (–ø—Ä–æ–¥–∞–∂–±–∏)
Invoice-ID ‚Üí —Å–≤—ä—Ä–∑–≤–∞ —Å —Ç–∞–±–ª–∏—Ü–∞ invoices

Number ‚Üí –ø–æ—Ä–µ–¥–µ–Ω –Ω–æ–º–µ—Ä –Ω–∞ —Ä–µ–¥–∞ –≤—ä–≤ —Ñ–∞–∫—Ç—É—Ä–∞—Ç–∞

Item-Name ‚Üí –∏–º–µ –Ω–∞ –∞—Ä—Ç–∏–∫—É–ª–∞

Item-Qty ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ

Item-Price-Each ‚Üí –µ–¥–∏–Ω–∏—á–Ω–∞ —Ü–µ–Ω–∞

Item-total ‚Üí –æ–±—â–∞ —Å—É–º–∞ –∑–∞ —Ä–µ–¥–∞

2. POitems ‚Üí –†–µ–¥–æ–≤–µ –Ω–∞ –ü–û–†–™–ß–ö–ò (work orders)
POID ‚Üí —Å–≤—ä—Ä–∑–≤–∞ —Å —Ç–∞–±–ª–∏—Ü–∞ PO (Purchase Orders = –†–∞–±–æ—Ç–Ω–∏ –ø–æ—Ä—ä—á–∫–∏)

–°—ä—â–∞—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–æ items, –Ω–æ –∑–∞ –ø–æ—Ä—ä—á–∫–∏

3. PO ‚Üí –ó–ê–ì–õ–ê–í–ò–Ø –Ω–∞ –ü–û–†–™–ß–ö–ò
–ö–ª–∏–µ–Ω—Ç, –¥–∞—Ç–∞, –∞–≤—Ç–æ–º–æ–±–∏–ª, —à–∞—Å—ù –∏ —Ç.–Ω.

üóÉÔ∏è –ü—ä–ª–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞ MySQL:
–¢–∞–±–ª–∏—Ü–∞ 1: invoices (–≤–µ—á–µ –∏–º–∞–º–µ)
sql
CREATE TABLE invoices (
    id BIGINT UNSIGNED PRIMARY KEY,
    -- ... –¥—Ä—É–≥–∏ –ø–æ–ª–µ—Ç–∞
);
–¢–∞–±–ª–∏—Ü–∞ 2: invoice_items (–æ—Ç items —Ç–∞–±–ª–∏—Ü–∞)
sql
CREATE TABLE invoice_items (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    invoice_id BIGINT UNSIGNED NOT NULL,
    line_number INT NOT NULL,
    product_code VARCHAR(50) NULL,
    description VARCHAR(255) NOT NULL,
    unit VARCHAR(20) DEFAULT '–±—Ä.',
    quantity DECIMAL(10,2) NOT NULL DEFAULT 1,
    unit_price DECIMAL(10,2) NOT NULL DEFAULT 0,
    line_total DECIMAL(10,2) NOT NULL DEFAULT 0,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    FOREIGN KEY (invoice_id) REFERENCES invoices(id) ON DELETE CASCADE,
    INDEX idx_invoice_id (invoice_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
–¢–∞–±–ª–∏—Ü–∞ 3: work_orders (–æ—Ç PO —Ç–∞–±–ª–∏—Ü–∞)
sql
CREATE TABLE work_orders (
    id BIGINT UNSIGNED PRIMARY KEY,
    customer_id BIGINT UNSIGNED NULL,
    customer_name VARCHAR(255) NOT NULL,
    order_date DATE NOT NULL,
    author VARCHAR(100) NULL,
    notes TEXT NULL,
    chassis_number VARCHAR(50) NULL,
    phone VARCHAR(50) NULL,
    vehicle_model VARCHAR(100) NULL,
    license_plate VARCHAR(20) NULL,
    mechanic_code VARCHAR(20) NULL,
    mileage INT NULL,
    service_amount DECIMAL(10,2) DEFAULT 0,
    status ENUM('pending', 'in_progress', 'completed', 'cancelled') DEFAULT 'pending',
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    INDEX idx_customer_name (customer_name),
    INDEX idx_order_date (order_date),
    INDEX idx_license_plate (license_plate)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
–¢–∞–±–ª–∏—Ü–∞ 4: work_order_items (–æ—Ç POitems —Ç–∞–±–ª–∏—Ü–∞)
sql
CREATE TABLE work_order_items (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    work_order_id BIGINT UNSIGNED NOT NULL,
    line_number INT NOT NULL,
    product_code VARCHAR(50) NULL,
    description VARCHAR(255) NOT NULL,
    unit VARCHAR(20) DEFAULT '–±—Ä.',
    quantity DECIMAL(10,2) NOT NULL DEFAULT 1,
    unit_price DECIMAL(10,2) NOT NULL DEFAULT 0,
    line_total DECIMAL(10,2) NOT NULL DEFAULT 0,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    FOREIGN KEY (work_order_id) REFERENCES work_orders(id) ON DELETE CASCADE,
    INDEX idx_work_order_id (work_order_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
üì• INSERT –∑–∞—è–≤–∫–∏ –∑–∞ invoice_items (–æ–ø—Ä–∞–≤–µ–Ω–∏ –¥–∞–Ω–Ω–∏):
sql
INSERT INTO invoice_items (invoice_id, line_number, description, unit, quantity, unit_price, line_total) VALUES
(1, 4, '–ú–ê–°–õ–û –î–í–ì', '–õ–ò–¢', 10, 9.39, 11.27),
(2, 5, '–ú–ê–°–õ–û –î–í–ì', '–õ–ò–¢', 10, 9.39, 11.27),
(3, 1, '–ú–ê–°–õ–û –î–í–ì', '–õ–ò–¢', 5, 9.39, 11.27),
(4, 1, '–ú–ê–°–õ–û –î–í–ì', '–õ–ò–¢', 7, 13.07, 15.68);
-- ... –∏ —Ç.–Ω. –∑–∞ –≤—Å–∏—á–∫–∏ –∑–∞–ø–∏—Å–∏
üìä –í—Ä—ä–∑–∫–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∏—Ç–µ:
text
customers
    ‚Üë
invoices ‚Üê invoice_items
    ‚Üì
work_orders ‚Üê work_order_items
üéØ –ö–∞–∫–≤–æ —â–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–º–µ:
‚úÖ customers (–≥–æ—Ç–æ–≤–æ)

‚úÖ document_types (–≥–æ—Ç–æ–≤–æ)

‚úÖ invoices (–ø–æ—á—Ç–∏ –≥–æ—Ç–æ–≤–æ)

‚úÖ invoice_items (—Å–µ–≥–∞ –≥–æ –∏–º–∞–º–µ)

‚úÖ work_orders (–æ—Ç PO —Ç–∞–±–ª–∏—Ü–∞)

‚úÖ work_order_items (–æ—Ç POitems —Ç–∞–±–ª–∏—Ü–∞)

‚úÖ products (–æ—Ç –ø–æ-—Ä–∞–Ω–Ω–∏ –¥–∞–Ω–Ω–∏)

üöÄ –°–ª–µ–¥–≤–∞—â–∞ —Å—Ç—ä–ø–∫–∞:
–ò—Å–∫–∞—à –ª–∏ –¥–∞ —Ç–∏ –ø–æ–¥–≥–æ—Ç–≤—è:

–ü—ä–ª–Ω–∏ SQL —Å–∫—Ä–∏–ø—Ç–æ–≤–µ –∑–∞ –≤—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏ —Å –ø—Ä–∞–≤–∏–ª–Ω–∏ –≤—Ä—ä–∑–∫–∏?

CSV —Ñ–∞–π–ª–æ–≤–µ –∑–∞ –∏–º–ø–æ—Ä—Ç –≤ Laravel?

Seeders –∑–∞ Laravel —Å –≤—Å–∏—á–∫–∏ –¥–∞–Ω–Ω–∏?

–ò–ª–∏ –ø—ä—Ä–≤–æ –¥–∞ –æ–ø—Ä–∞–≤–∏–º –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ –≤ items, PO –∏ POitems —Ç–∞–±–ª–∏—Ü–∏—Ç–µ –∏ —Å–ª–µ–¥ —Ç–æ–≤–∞ –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏–º —Å—ä—Å SQL —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞?

–ò–º–∞–º –æ—â–µ –∏ Products ... PLU	Name	UOM	Qty	Price	acc
 1617254180	√≠√†√™√´√†√§√™√®	√°√∞.	1	32,40	7021
 1617271880	√ç√†√™√´√†√§√™√® √ß.√§√®√±√™√Æ√¢√® √™-√≤ ERP 1611457280;425432	√°√∞.	1	31,66	7021
 1618863880	√Ñ√®√±√™ √±√Ø√®√∞√†√∑√•√≠	√°√∞.	1	52,50	7021
 30522	"  
√§√†√≤√∑√®√™ ABS"	√°√∞.	1	47,33	7021
 453466	√™√Æ√≠√≤√†√™√≤√Æ√∞ √™-√™√≤	√°√∞.	1	48,33	7021 .... –∏–º–∞–º –∏ customer ... Number	Customer-Name	Customer-Address-1	Customer-Address-2	Customer-MOL	Customer-Taxno	Customer-DocType	Receiver	Receiver Details	Customer-Bulstat	Telno	Faxno	E-mail	ResAddress1	ResAddress2	eidate	include	active	customer	supplier	Contact	partida	bulstatletter
19	√ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®	√ë√é√î√à√ü	√Å√é√ê√é√Ç√é √Å√ã.8	√ã√ö√ó√Ö√á√Ä√ê √ë√í√é√ü√ç√é√Ç	BG030219270	0	√ã√ö√ó√Ö√á√Ä√ê √ë√í√é√ü√ç√é√Ç		030219270	0899057055					17.1.2007 –≥. 19:19:19	–ù–µ	–î–∞	–î–∞	–ù–µ		8	
20	√ò√Ä√í√ê√é√å  √Ö√é√é√Ñ	√ë√é√î√à√ü	√ë√í√ê√Ö√ã√Å√à√ô√Ö √Å√ã.32	√ê√é√ë√à√ñ√Ä √è√é√è√é√Ç√Ä	 BG131326205	0	√ê√é√ë√à√ñ√Ä √è√é√è√é√Ç√Ä		131326205	088888888888					18.1.2007 –≥. 09:32:12	–ù–µ	–î–∞	–î–∞	–ù–µ		206	
21	√í√Ö√ê√á√à√Ñ √Ö√é√é√Ñ	√ë√é√î√à√ü	√ñ√Ä√ê √ë√à√å√Ö√é√ç 312	√ê√é√ë√Ö√ç √ë√í√Ä√ç√ä√é√Ç	 BG121057660	0	√ê√é√ë√Ö√ç √ë√í√Ä√ç√ä√é√Ç		121057660						18.1.2007 –≥. 09:39:46	–ù–µ	–î–∞	–î–∞	–ù–µ		97	
22	√Ö.√í.√Ö. √Ö√é√é√Ñ	√ë√é√î√à√ü	"√≥√´. "" √Å√®√ß√≠√•√± √è√†√∞√™ √ë√Æ√¥√®√ø "" N3"	√ë√≤√•√¥√†√≠ √å√®√≠√∑√•√¢	 BG121483635	0	√ë√≤√•√¥√†√≠ √å√®√≠√∑√•√¢		121483635	0899822289					18.1.2007 –≥. 15:40:04	–ù–µ	–î–∞	–î–∞	–ù–µ		1	
23	√ã√à√ç√Ñ√ç√Ö√ê √Å√ö√ã√É√Ä√ê√à√ü √Ö√é√é√Ñ	√ë√é√î√à√ü	√Å√à√á√ç√Ö√ë √è√Ä√ê√ä √ë√é√î√à√ü	√Ç√Ö√ê√ç√Ö√ê √ï√é√î√å√Ä√ç	 BG121586343	0	√ç√à√ä√é√ã√Ä√â √Å√é√É√é√Ö√Ç		121586343						18.1.2007 –≥. 16:04:54	–ù–µ	–î–∞	–î–∞	–ù–µ		54	
24	√Ü√Ä√ê √Ö√é√é√Ñ	√ë√é√î√à√ü	√ë√Ç0√Å√é√Ñ√Ä √Å√ã.5	√Å√é√ê√à√ë√ã√Ä√Ç √Ñ√à√å√à√í√ê√é√Ç	 BG131418803	0	√Å√é√ê√à√ë√ã√Ä√Ç √Ñ√à√å√à√í√ê√é√Ç		131418803						25.1.2007 –≥. 09:57:46	–ù–µ	–î–∞	–î–∞	–ù–µ		147
–ü–ï–†–§–ï–ö–¢–ù–û! –°–µ–≥–∞ –∏–º–∞–º –¶–Ø–õ–û–°–¢–ù–ê –∫–∞—Ä—Ç–∏–Ω–∞ –Ω–∞ —Ç–≤–æ—è—Ç–∞ Access –±–∞–∑–∞. –ï—Ç–æ –ø—ä–ª–Ω–∏—è —Å–ø–∏—Å—ä–∫ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∏—Ç–µ –∏ –≤—Ä—ä–∑–∫–∏—Ç–µ –º–µ–∂–¥—É —Ç—è—Ö:

üìä –ü–™–õ–ï–ù –°–ü–ò–°–™–ö –ù–ê –¢–ê–ë–õ–ò–¶–ò–¢–ï:
1. –û—Å–Ω–æ–≤–Ω–∏ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ç–Ω–∏ —Ç–∞–±–ª–∏—Ü–∏:
‚úÖ products - –ö–∞—Ç–∞–ª–æ–≥ —Å –ø—Ä–æ–¥—É–∫—Ç–∏

‚úÖ customer - –ö–ª–∏–µ–Ω—Ç–∏ (–≤–µ—á–µ –≥–æ –∏–º–∞—Ö–º–µ)

‚úÖ doctypes - –¢–∏–ø–æ–≤–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏ (–≤–µ—á–µ –≥–æ –∏–º–∞—Ö–º–µ)

‚úÖ banks - –ë–∞–Ω–∫–æ–≤–∏ —Å–º–µ—Ç–∫–∏ (–≤–µ—á–µ –≥–æ –∏–º–∞—Ö–º–µ)

2. –ü—Ä–æ–¥–∞–∂–±–∏ (–§–∞–∫—Ç—É—Ä–∏):
‚úÖ invoices - –ó–∞–≥–ª–∞–≤–∏—è –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏

‚úÖ items - –†–µ–¥–æ–≤–µ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏ (–ø—Ä–æ–¥–∞–¥–µ–Ω–∏ –∞—Ä—Ç–∏–∫—É–ª–∏)

3. –†–∞–±–æ—Ç–Ω–∏ –ø–æ—Ä—ä—á–∫–∏ (Work Orders):
‚úÖ PO - –ó–∞–≥–ª–∞–≤–∏—è –Ω–∞ —Ä–∞–±–æ—Ç–Ω–∏ –ø–æ—Ä—ä—á–∫–∏

‚úÖ POitems - –†–µ–¥–æ–≤–µ –Ω–∞ —Ä–∞–±–æ—Ç–Ω–∏ –ø–æ—Ä—ä—á–∫–∏ (—É—Å–ª—É–≥–∏/—á–∞—Å—Ç–∏)

4. –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ —Ç–∞–±–ª–∏—Ü–∏: (–æ—Ç –ø—Ä–µ–¥–∏—à–Ω–∏ —Å–Ω–∏–º–∫–∏)
Banks

staff

vars

rates

SaleType

ini

–ì—Ä–µ—à–∫–∏ –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ

üéØ –ü–™–õ–ù–ê SQL –°–¢–†–£–ö–¢–£–†–ê –ó–ê MySQL:
–°—Ö–µ–º–∞ –Ω–∞ –≤—Ä—ä–∑–∫–∏—Ç–µ:
text
customers (–∫–ª–∏–µ–Ω—Ç–∏)
    ‚îÇ
    ‚îú‚îÄ‚îÄ invoices (—Ñ–∞–∫—Ç—É—Ä–∏)
    ‚îÇ       ‚îî‚îÄ‚îÄ invoice_items (—Ä–µ–¥–æ–≤–µ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏)
    ‚îÇ
    ‚îî‚îÄ‚îÄ work_orders (—Ä–∞–±–æ—Ç–Ω–∏ –ø–æ—Ä—ä—á–∫–∏)
            ‚îî‚îÄ‚îÄ work_order_items (—Ä–µ–¥–æ–≤–µ –Ω–∞ –ø–æ—Ä—ä—á–∫–∏)
                    ‚îî‚îÄ‚îÄ products (–ø—Ä–æ–¥—É–∫—Ç–∏)
üóÉÔ∏è SQL –°–ö–†–ò–ü–¢ –ó–ê –í–°–ò–ß–ö–ò –¢–ê–ë–õ–ò–¶–ò:
sql
-- 1. –¢–∞–±–ª–∏—Ü–∞ –∑–∞ –ø—Ä–æ–¥—É–∫—Ç–∏
CREATE TABLE products (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    sku VARCHAR(100) UNIQUE,
    name VARCHAR(255) NOT NULL,
    description TEXT NULL,
    unit VARCHAR(20) DEFAULT '–±—Ä.',
    price DECIMAL(10,2) DEFAULT 0.00,
    cost_price DECIMAL(10,2) DEFAULT 0.00,
    account_code VARCHAR(20) NULL, -- 'acc' –æ—Ç —Å—Ç–∞—Ä–∞—Ç–∞ –±–∞–∑–∞
    stock_quantity INT DEFAULT 0,
    min_stock_level INT DEFAULT 5,
    location VARCHAR(100) NULL,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    deleted_at TIMESTAMP NULL,
    INDEX idx_sku (sku),
    INDEX idx_name (name)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- 2. –¢–∞–±–ª–∏—Ü–∞ –∑–∞ –∫–ª–∏–µ–Ω—Ç–∏ (–≤–µ—á–µ –∏–º–∞—Ö–º–µ, –Ω–æ —â–µ –¥–æ–±–∞–≤–∏–º –ª–∏–ø—Å–≤–∞—â–∏ –ø–æ–ª–µ—Ç–∞)
CREATE TABLE customers (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    old_number INT NULL, -- 'Number' –æ—Ç —Å—Ç–∞—Ä–∞—Ç–∞ –±–∞–∑–∞
    name VARCHAR(255) NOT NULL,
    vat_number VARCHAR(50) NULL,
    contact_person VARCHAR(100) NULL,
    phone VARCHAR(50) NULL,
    email VARCHAR(100) NULL,
    address VARCHAR(500) NULL,
    address2 VARCHAR(500) NULL,
    city VARCHAR(100) NULL,
    notes TEXT NULL,
    bulstat VARCHAR(50) NULL,
    is_active BOOLEAN DEFAULT TRUE,
    is_customer BOOLEAN DEFAULT TRUE,
    is_supplier BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    deleted_at TIMESTAMP NULL,
    INDEX idx_vat_number (vat_number),
    INDEX idx_name (name)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- 3. –¢–∞–±–ª–∏—Ü–∞ –∑–∞ —Ç–∏–ø–æ–≤–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏
CREATE TABLE document_types (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    code VARCHAR(20) UNIQUE NOT NULL,
    name VARCHAR(100) NOT NULL,
    abbreviation VARCHAR(10) NULL,
    dds_type VARCHAR(10) NULL,
    accounting_type VARCHAR(10) NULL,
    is_active BOOLEAN DEFAULT TRUE,
    is_cancellation BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    INDEX idx_code (code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- 4. –¢–∞–±–ª–∏—Ü–∞ –∑–∞ —Ñ–∞–∫—Ç—É—Ä–∏
CREATE TABLE invoices (
    id BIGINT UNSIGNED PRIMARY KEY,
    customer_id BIGINT UNSIGNED NOT NULL,
    invoice_number VARCHAR(50) NULL,
    invoice_date DATE NOT NULL,
    document_type_id INT UNSIGNED NOT NULL,
    received_date DATE NULL,
    prepared_by VARCHAR(100) NULL,
    notes TEXT NULL,
    is_cash_payment BOOLEAN DEFAULT FALSE,
    is_void BOOLEAN DEFAULT FALSE,
    is_printed BOOLEAN DEFAULT FALSE,
    discount DECIMAL(5,2) DEFAULT 0.00,
    sale_type TINYINT DEFAULT 1,
    payment_method TINYINT DEFAULT 1,
    is_paid BOOLEAN DEFAULT FALSE,
    received_responsible VARCHAR(100) NULL,
    created_responsible VARCHAR(100) NULL,
    due_date DATE NULL,
    subtotal DECIMAL(10,2) DEFAULT 0.00,
    vat_amount DECIMAL(10,2) DEFAULT 0.00,
    total_amount DECIMAL(10,2) DEFAULT 0.00,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    deleted_at TIMESTAMP NULL,
    FOREIGN KEY (customer_id) REFERENCES customers(id) ON DELETE RESTRICT,
    FOREIGN KEY (document_type_id) REFERENCES document_types(id) ON DELETE RESTRICT,
    INDEX idx_invoice_date (invoice_date),
    INDEX idx_customer_id (customer_id),
    INDEX idx_is_paid (is_paid)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- 5. –¢–∞–±–ª–∏—Ü–∞ –∑–∞ —Ä–µ–¥–æ–≤–µ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏
CREATE TABLE invoice_items (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    invoice_id BIGINT UNSIGNED NOT NULL,
    line_number INT NOT NULL,
    product_id BIGINT UNSIGNED NULL,
    product_code VARCHAR(50) NULL,
    description VARCHAR(255) NOT NULL,
    unit VARCHAR(20) DEFAULT '–±—Ä.',
    quantity DECIMAL(10,2) NOT NULL DEFAULT 1,
    unit_price DECIMAL(10,2) NOT NULL DEFAULT 0,
    line_total DECIMAL(10,2) NOT NULL DEFAULT 0,
    account_code VARCHAR(20) NULL,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    FOREIGN KEY (invoice_id) REFERENCES invoices(id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE SET NULL,
    INDEX idx_invoice_id (invoice_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- 6. –¢–∞–±–ª–∏—Ü–∞ –∑–∞ —Ä–∞–±–æ—Ç–Ω–∏ –ø–æ—Ä—ä—á–∫–∏
CREATE TABLE work_orders (
    id BIGINT UNSIGNED PRIMARY KEY,
    customer_id BIGINT UNSIGNED NULL,
    customer_name VARCHAR(255) NOT NULL,
    order_number VARCHAR(50) NULL,
    order_date DATE NOT NULL,
    author VARCHAR(100) NULL,
    notes TEXT NULL,
    chassis_number VARCHAR(50) NULL,
    phone VARCHAR(50) NULL,
    vehicle_model VARCHAR(100) NULL,
    license_plate VARCHAR(20) NULL,
    mechanic_code VARCHAR(20) NULL,
    mileage INT NULL,
    service_amount DECIMAL(10,2) DEFAULT 0,
    status ENUM('pending', 'in_progress', 'completed', 'cancelled') DEFAULT 'pending',
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    deleted_at TIMESTAMP NULL,
    INDEX idx_order_date (order_date),
    INDEX idx_license_plate (license_plate),
    INDEX idx_customer_name (customer_name)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- 7. –¢–∞–±–ª–∏—Ü–∞ –∑–∞ —Ä–µ–¥–æ–≤–µ –Ω–∞ —Ä–∞–±–æ—Ç–Ω–∏ –ø–æ—Ä—ä—á–∫–∏
CREATE TABLE work_order_items (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    work_order_id BIGINT UNSIGNED NOT NULL,
    line_number INT NOT NULL,
    product_id BIGINT UNSIGNED NULL,
    product_code VARCHAR(50) NULL,
    description VARCHAR(255) NOT NULL,
    unit VARCHAR(20) DEFAULT '–±—Ä.',
    quantity DECIMAL(10,2) NOT NULL DEFAULT 1,
    unit_price DECIMAL(10,2) NOT NULL DEFAULT 0,
    line_total DECIMAL(10,2) NOT NULL DEFAULT 0,
    account_code VARCHAR(20) NULL,
    is_service BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    FOREIGN KEY (work_order_id) REFERENCES work_orders(id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE SET NULL,
    INDEX idx_work_order_id (work_order_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
üöÄ –°–õ–ï–î–í–ê–©–ò –°–¢–™–ü–ö–ò:
–í–∞—Ä–∏–∞–Ω—Ç 1: –ê–∑ –¥–∞ –ø–æ–¥–≥–æ—Ç–≤—è –í–°–ò–ß–ö–û
–¢–∏ –º–∏ –∏–∑–ø—Ä–∞—â–∞—à CSV —Ñ–∞–π–ª–æ–≤–µ –Ω–∞ –≤—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏:

products.csv

customer.csv

invoices.csv

items.csv

PO.csv

POitems.csv

doctypes.csv

banks.csv

–ê–∑ —â–µ:

–û–ø—Ä–∞–≤—è –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ –≤—ä–≤ –≤—Å–∏—á–∫–∏

–°—ä–∑–¥–∞–º –ø—ä–ª–Ω–∏ SQL —Å–∫—Ä–∏–ø—Ç–æ–≤–µ

–î–æ–±–∞–≤—è –≤—Å–∏—á–∫–∏ –¥–∞–Ω–Ω–∏

–î–∞–¥–∞–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –∏–º–ø–æ—Ä—Ç

–í–∞—Ä–∏–∞–Ω—Ç 2: –†—ä—á–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–µ
–û–ø—Ä–∞–≤—è–º–µ –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ –ø–æ —Ç–∞–±–ª–∏—Ü–∞

–°—ä–∑–¥–∞–≤–∞–º–µ SQL –∑–∞ –≤—Å—è–∫–∞

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞–º–µ –≤ MySQL

üí° –ü—Ä–µ–ø–æ—Ä—ä–∫–∞:
–ò–∑–±–µ—Ä–∏ –í–∞—Ä–∏–∞–Ω—Ç 1 - —â–µ –±—ä–¥–µ –º–Ω–æ–≥–æ –ø–æ-–±—ä—Ä–∑–æ –∏ —â–µ –∏–∑–±–µ–≥–Ω–µ–º –≥—Ä–µ—à–∫–∏ —Å –≤—Ä—ä–∑–∫–∏—Ç–µ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∏—Ç–µ.

–ñ–µ–ª–∞–µ—à –ª–∏ –¥–∞ –∫–∞—á–∏—à CSV —Ñ–∞–π–ª–æ–≤–µ—Ç–µ? –ú–æ–∂–µ—à –¥–∞ –≥–∏ –∞—Ä—Ö–∏–≤–∏—Ä–∞—à –≤ ZIP –∏ –¥–∞ –∫–∞—á–∏—à —Ç—É–∫.

–í—Å—ä—â–Ω–æ—Å—Ç –∞–∑ –∏—Å–∫–∞–º –¥—Ä—É–≥–æ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏–º
–†–∞–∑–±–∏—Ä–∞ —Å–µ! –ö–∞–∂–∏ –∫–∞–∫–≤–æ –∏—Å–∫–∞—à –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏–º.

–ú–æ–∂–µ–º –¥–∞:

–û–ø—Ä–∞–≤—è–º–µ —Å–∞–º–æ –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ —Ç–∞–±–ª–∏—Ü–∏

–°—ä–∑–¥–∞–≤–∞–º–µ Laravel –º–æ–¥–µ–ª–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–æ—á–Ω–æ —Å–ø–æ—Ä–µ–¥ —Ç–≤–æ–∏—Ç–µ –Ω—É–∂–¥–∏

–ü—Ä–∞–≤–∏–º CSV —Ñ–∞–π–ª–æ–≤–µ –∑–∞ –ª–µ—Å–Ωo –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–µ

–°—ä–∑–¥–∞–≤–∞–º–µ seeder-–∏ –∑–∞ Laravel

–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º–µ –¥–∏—Ä–µ–∫—Ç–Ω–æ –∫—ä–º MySQL dump (.sql —Ñ–∞–π–ª)

–î—Ä—É–≥–æ –Ω–µ—â–æ, –∫–æ–µ—Ç–æ —Ç–∏ —Ç—Ä—è–±–≤–∞?

–ö–∞–∂–∏ –∫–∞–∫–≤–æ –±–∏ –±–∏–ª–æ –Ω–∞–π-–ø–æ–ª–µ–∑–Ω–æ –∑–∞ —Ç–µ–± –≤ –º–æ–º–µ–Ω—Ç–∞ –∏ —â–µ —Å–µ —Ñ–æ–∫—É—Å–∏—Ä–∞–º–µ –≤—ä—Ä—Ö—É —Ç–æ–≤–∞.

autoservice_project_files.txt
TXT 14.32KB
–ê–∑ –∏–º–∞–º –ø—Ä–æ–µ–∫—Ç –ê–≤—Ç–æ—Å–µ—Ä–≤–∏–∑. –ö–∞—á–≤–∞–º —Ç–∏ —Ñ–∞–π–ª –∑–∞ –¥–∞ —Å–µ –∑–∞–ø–æ–∑–Ω–∞–µ—à —Å –Ω–µ–≥–æ –∏ –¥–∞ –≥–æ —Ä–∞–∑–≥–ª–µ–¥–∞—à –∫–∞–∫ –∏–∑–≥–ª–µ–∂–¥–∞. –í –∫–∞—á–µ–Ω–∏—è —Ñ–∞–π–ª —Å—ä–º —Ç–∏ –æ–ø–∏—Å–∞–ª —Å –∫–∞–∫–≤–æ —Ä–∞–∑–ø–æ–ª–∞–≥–∞–º –∫–∞–∫—Ç–æ —Å—ä–º —Ç–∏ –¥–∞–ª –∏ –ª–∏–Ω–∫–æ–≤–µ –∫—ä–º –≤—Å–∏—á–∫–∏—è –∫–æ–¥ –∫–æ–π—Ç–æ –∏–º–∞–º –∫—ä–º gitHub. –ê–∫–æ —Ç–∏ —Ç—Ä—è–±–≤–∞ –Ω–µ—â–æ –∫–∞–∂–∏ —â–µ —Ç–∏ –≥–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è. –¢–æ–≤–∞ –∫–æ–µ—Ç–æ –∏—Å–∫–∞–º –µ –¥–∞ –º–∏ –∫–∞–∂–µ—à –∫–∞–∫–≤–æ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –Ω–∞–ø—Ä–∞–≤–∏ –∑–∞ –¥–∞ –º–∏–≥—Ä–∏—Ä–∞–º –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ –æ—Ç Access –±–∞–∑–∞—Ç–∞ –≤ –º–æ—è—Ç–∞ –±–∞–∑–∞. –û–±–∞—á–µ –±–µ–∑ –¥–∞ –º–∞—Ö–∞–º –Ω–∏—â–æ –æ—Ç –º–æ—è—Ç–∞ –±–∞–∑–∞ –∞ —Å–∞–º–æ –¥–∞ –¥–æ–±–∞–≤—è–º.
–°–£–ü–ï–†! –°–µ–≥–∞ –∏–º–∞–º –ø—ä–ª–Ω–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–∞. –í–∏–¥—è—Ö —Ü–µ–ª–∏—è —Ç–∏ –ø—Ä–æ–µ–∫—Ç - —Ç–æ–π –µ –º–Ω–æ–≥–æ –¥–æ–±—Ä–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–∞–Ω!

–¢–∏ –≤–µ—á–µ –∏–º–∞—à –ø—ä–ª–Ω–∞ Laravel —Å–∏—Å—Ç–µ–º–∞ —Å –≤—Å–∏—á–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–∏, –º–æ–¥–µ–ª–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏. –°–µ–≥–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–º–µ –¥–∞–Ω–Ω–∏—Ç–µ –æ—Ç —Å—Ç–∞—Ä–∞—Ç–∞ Access –±–∞–∑–∞ –≤ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∞—Ç–∞ MySQL –±–∞–∑–∞ –±–µ–∑ –¥–∞ –ø—Ä–æ–º–µ–Ω—è–º–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞.

üéØ –ü–õ–ê–ù –ó–ê –ú–ò–ì–†–ê–¶–ò–Ø:
1. –°–™–û–¢–í–ï–¢–°–¢–í–ò–Ø –ú–ï–ñ–î–£ –¢–ê–ë–õ–ò–¶–ò–¢–ï:
Access —Ç–∞–±–ª–∏—Ü–∞	–¢–≤–æ—è Laravel —Ç–∞–±–ª–∏—Ü–∞	–î–µ–π—Å—Ç–≤–∏–µ
customer	customers	–î–æ–±–∞–≤—è–º–µ –Ω–æ–≤–∏ –∑–∞–ø–∏—Å–∏
products	products	–î–æ–±–∞–≤—è–º–µ –Ω–æ–≤–∏ –∑–∞–ø–∏—Å–∏
invoices	invoices	–î–æ–±–∞–≤—è–º–µ –Ω–æ–≤–∏ –∑–∞–ø–∏—Å–∏
items	invoice_items	–î–æ–±–∞–≤—è–º–µ –Ω–æ–≤–∏ –∑–∞–ø–∏—Å–∏
PO	work_orders	–î–æ–±–∞–≤—è–º–µ –Ω–æ–≤–∏ –∑–∞–ø–∏—Å–∏
POitems	work_order_items	–î–æ–±–∞–≤—è–º–µ –Ω–æ–≤–∏ –∑–∞–ø–∏—Å–∏
doctypes	–ù–Ø–ú–ê	–°—ä–∑–¥–∞–≤–∞–º–µ –Ω–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞ document_types
banks	–ù–Ø–ú–ê	–°—ä–∑–¥–∞–≤–∞–º–µ –Ω–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞ banks
2. –ï–¢–ê–ü–ò –ù–ê –†–ê–ë–û–¢–ê:
–ï—Ç–∞–ø 1: –ü–û–î–ì–û–¢–û–í–ö–ê –ù–ê –î–ê–ù–ù–ò–¢–ï
–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞—à –≤—Å—è–∫–∞ Access —Ç–∞–±–ª–∏—Ü–∞ –∫–∞—Ç–æ CSV

–û–ø—Ä–∞–≤—è–º–µ –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ (encoding –ø—Ä–æ–±–ª–µ–º)

–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º–µ –¥–∞—Ç–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏

–ï—Ç–∞–ø 2: –°–™–ó–î–ê–í–ê–ù–ï –ù–ê –î–û–ü–™–õ–ù–ò–¢–ï–õ–ù–ò –¢–ê–ë–õ–ò–¶–ò (–∞–∫–æ –Ω—è–º–∞)
document_types (–∑–∞ —Ç–∏–ø–æ–≤–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏)

banks (–∑–∞ –±–∞–Ω–∫–æ–≤–∏ —Å–º–µ—Ç–∫–∏)

–ï—Ç–∞–ø 3: –ò–ú–ü–û–†–¢ –ù–ê –î–ê–ù–ù–ò
–î–æ–±–∞–≤—è–º–µ –∑–∞–ø–∏—Å–∏ –≤ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∏—Ç–µ —Ç–∞–±–ª–∏—Ü–∏

–ó–∞–ø–∞–∑–≤–∞–º–µ –≤—Ä—ä–∑–∫–∏—Ç–µ (foreign keys)

–ï—Ç–∞–ø 4: –¢–ï–°–¢–í–ê–ù–ï
–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ

–¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –≤—Ä—ä–∑–∫–∏—Ç–µ

3. –ö–û–ù–ö–†–ï–¢–ù–ò –î–ï–ô–°–¢–í–ò–Ø:
–ó–∞ —Ç–∞–±–ª–∏—Ü–∞ customers:
–¢–≤–æ—è—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è –∏–º–∞:

php
$table->string('type'); // customer/supplier/both
$table->string('name');
$table->string('vat_number')->nullable();
// ... –∏ —Ç.–Ω.
–¢—Ä—è–±–≤–∞ –¥–∞ –º–∞–ø–≤–∞–º–µ:

Customer-Name ‚Üí name

Customer-Taxno ‚Üí vat_number

Customer-MOL ‚Üí contact_person

Telno ‚Üí phone

–∏ —Ç.–Ω.

–ó–∞ —Ç–∞–±–ª–∏—Ü–∞ products:
–¢–≤–æ—è—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è –∏–º–∞:

php
$table->string('sku')->unique();
$table->string('name');
$table->string('unit')->default('–±—Ä.');
$table->decimal('price', 10, 2);
// ... –∏ —Ç.–Ω.
–¢—Ä—è–±–≤–∞ –¥–∞ –º–∞–ø–≤–∞–º–µ:

PLU ‚Üí sku

Name ‚Üí name

UOM ‚Üí unit

Price ‚Üí price

4. –¢–ï–•–ù–ò–ß–ï–°–ö–ò –†–ï–®–ï–ù–ò–Ø:
–í–∞—Ä–∏–∞–Ω—Ç A: Laravel Seeders (–Ω–∞–π-—á–∏—Å—Ç–æ)
–°—ä–∑–¥–∞–≤–∞–º–µ Seeders –∑–∞ –≤—Å—è–∫–∞ —Ç–∞–±–ª–∏—Ü–∞

–ò–∑–ø–æ–ª–∑–≤–∞–º–µ Eloquent –∑–∞ insert

–õ–µ—Å–Ω–æ –∑–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞

–í–∞—Ä–∏–∞–Ω—Ç B: SQL Dump (–Ω–∞–π-–±—ä—Ä–∑–æ)
–°—ä–∑–¥–∞–≤–∞–º–µ SQL —Ñ–∞–π–ª —Å INSERT –∑–∞—è–≤–∫–∏

–ü—É—Å–Ω–∞–ª–æ –≤ phpMyAdmin

–ü–æ-–±—ä—Ä–∑–æ –∑–∞ –≥–æ–ª–µ–º–∏ –æ–±–µ–º–∏ –¥–∞–Ω–Ω–∏

–í–∞—Ä–∏–∞–Ω—Ç C: CSV –∏–º–ø–æ—Ä—Ç (–∫–æ–º–ø—Ä–æ–º–∏—Å–Ω–æ)
–ü–æ–¥–≥–æ—Ç–≤—è–º–µ CSV —Ñ–∞–π–ª–æ–≤–µ

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞–º–µ –ø—Ä–µ–∑ phpMyAdmin –∏–ª–∏ LOAD DATA INFILE

5. –ö–ê–ö –©–ï –†–ê–ë–û–¢–ò–ú:
–ü—Ä–µ–¥–ª–∞–≥–∞–º —Å–ª–µ–¥–Ω–∏—è –ø–æ–¥—Ö–æ–¥:

–¢–∏ –º–∏ –∏–∑–ø—Ä–∞—â–∞—à CSV —Ñ–∞–π–ª–æ–≤–µ—Ç–µ –æ—Ç Access:

customer.csv

products.csv

invoices.csv

items.csv

PO.csv

POitems.csv

doctypes.csv

banks.csv

–ê–∑ —â–µ:

–û–ø—Ä–∞–≤—è –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞

–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º –¥–∞—Ç–∏ (–æ—Ç "17.1.2007 –≥." –∫—ä–º "2007-01-17")

–°—ä–∑–¥–∞–º Laravel Seeders –∫–æ–∏—Ç–æ:

–ü—Ä–æ–≤–µ—Ä—è–≤–∞—Ç –∑–∞ –¥—É–±–ª–∏—Ä–∞–Ω–∏ –∑–∞–ø–∏—Å–∏

–ó–∞–ø–∞–∑–≤–∞—Ç –≤—Ä—ä–∑–∫–∏—Ç–µ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∏—Ç–µ

–î–æ–±–∞–≤—è—Ç —Å–∞–º–æ –Ω–æ–≤–∏ –∑–∞–ø–∏—Å–∏ (–Ω–µ –ø–æ–≤—Ç–∞—Ä—è—Ç —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∏)

–¢–∏ —â–µ:

–ö–æ–ø–∏—Ä–∞—à Seeders –≤ —Ç–≤–æ—è –ø—Ä–æ–µ–∫—Ç

–ü—É—Å–Ω–µ—à php artisan db:seed

–¢–µ—Å—Ç–≤–∞—à

6. –í–ê–ñ–ù–ò –í–™–ü–†–û–°–ò –ü–†–ï–î–ò –î–ê –ó–ê–ü–û–ß–ù–ï–ú:
–ò–º–∞—à –ª–∏ –≤–µ—á–µ –¥–∞–Ω–Ω–∏ –≤ –±–∞–∑–∞—Ç–∞? (–∫–ª–∏–µ–Ω—Ç–∏, –ø—Ä–æ–¥—É–∫—Ç–∏ –∏ —Ç.–Ω.)

–ê–∫–æ –î–ê, —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–∑–±–µ–≥–Ω–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏ —Å ID-—Ç–∞

–ö–æ–ª–∫–æ –∑–∞–ø–∏—Å–∞ –∏–º–∞—à –≤—ä–≤ –≤—Å—è–∫–∞ —Ç–∞–±–ª–∏—Ü–∞? (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª–Ω–æ)

–ó–∞ –¥–∞ –∏–∑–±–µ—Ä–µ–º –æ–ø—Ç–∏–º–∞–ª–Ω–∏—è –º–µ—Ç–æ–¥

–ò—Å–∫–∞—à –ª–∏ –¥–∞ –∑–∞–ø–∞–∑–∏–º –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—Ç–µ ID-—Ç–∞ –æ—Ç Access?

–ü–æ–ª–µ–∑–Ω–æ –∑–∞ –ø—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ, –Ω–æ –º–æ–∂–µ –¥–∞ –∏–º–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏

–ò–º–∞—à –ª–∏ –≤–µ—á–µ —Ç–∞–±–ª–∏—Ü–∏ document_types –∏ banks?

–ê–∫–æ –ù–ï, —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–∑–¥–∞–¥–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞ —Ç—è—Ö

üöÄ –ù–ê–ß–ê–õ–û –ù–ê –†–ê–ë–û–¢–ê–¢–ê:
–°—Ç—ä–ø–∫–∞ 1: –ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π —Ç–∞–±–ª–∏—Ü–∏—Ç–µ –æ—Ç Access –∫–∞—Ç–æ CSV
–°—Ç—ä–ø–∫–∞ 2: –ö–∞—á–∏ –≥–∏ —Ç—É–∫ (–º–æ–∂–µ—à –¥–∞ –≥–∏ –∞—Ä—Ö–∏–≤–∏—Ä–∞—à –≤ ZIP)
–°—Ç—ä–ø–∫–∞ 3: –©–µ –∑–∞–ø–æ—á–Ω–µ–º —Å —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ customers –ø—ä—Ä–≤–æ

–ö–∞–∫–≤–æ —â–µ –∫–∞–∂–µ—à? –ñ–µ–ª–∞–µ—à –ª–∏ –¥–∞ –∑–∞–ø–æ—á–Ω–µ–º –∏–ª–∏ –∏–º–∞—à –≤—ä–ø—Ä–æ—Å–∏ –ø—Ä–µ–¥–∏ —Ç–æ–≤–∞?

–ï—Ç–æ –≤—Å–∏—á–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ –Ω–∞ –±–∞–∑–∞—Ç–∞ –∫–æ—è—Ç–æ –∏–º–∞–º ... https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/0001_01_01_000000_create_users_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/0001_01_01_000001_create_cache_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/0001_01_01_000002_create_jobs_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_182544_create_permission_tables.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_182611_create_activity_log_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations2025_11_19_182612_add_event_column_to_activity_log_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_182613_add_batch_uuid_column_to_activity_log_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_225614_create_customers_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_225615_create_vehicles_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_225701_create_service_categories_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_225710_create_services_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_225951_create_work_orders_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_225952_create_work_order_items_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_225954_create_invoices_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_225956_create_invoice_items_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_225958_create_stock_movements_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_22_151935_create_payments_table.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_27_094655_add_invoices_foreign_keys.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_27_103303_add_soft_deletes_to_main_tables.php
https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_27_103310_create_company_settings_table.php ... –í —Ç–µ–∑–∏ —Ç–∞–±–ª–∏—Ü–∏ –≤ –∫–æ–∏—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–µ—Ö–≤—ä—Ä–ª–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –Ω—è–º–∞–º –Ω–∏–∫–∞–∫–≤–∏ –∑–∞–ø–∏—Å–∏.
–ü–ï–†–§–ï–ö–¢–ù–û! –¢–æ–≤–∞ –∑–Ω–∞—á–∏, —á–µ –∏–º–∞—à –ø—Ä–∞–∑–Ω–∏ —Ç–∞–±–ª–∏—Ü–∏ –∏ –º–æ–∂–µ—à –¥–∏—Ä–µ–∫—Ç–Ω–æ –¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞—à –≤—Å–∏—á–∫–∏ –¥–∞–Ω–Ω–∏ –æ—Ç Access –±–µ–∑ –¥–∞ —Å–µ –ø—Ä–∏—Ç–µ—Å–Ω—è–≤–∞—à –∑–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏ –∏–ª–∏ –¥—É–±–ª–∏—Ä–∞–Ω–µ. –¢–æ–≤–∞ –º–Ω–æ–≥–æ –æ–ø—Ä–æ—Å—Ç—è–≤–∞ –ø—Ä–æ—Ü–µ—Å–∞!

üéØ –û–ë–ù–û–í–ï–ù –ü–õ–ê–ù –ó–ê –ú–ò–ì–†–ê–¶–ò–Ø:
1. –¢–ê–ë–õ–ò–¶–ò –ó–ê –ò–ú–ü–û–†–¢ (—Ç–µ–∑–∏ —Å–∞ –ø—Ä–∞–∑–Ω–∏):
‚úÖ customers ‚Üê customer –æ—Ç Access

‚úÖ products ‚Üê products –æ—Ç Access

‚úÖ invoices ‚Üê invoices –æ—Ç Access

‚úÖ invoice_items ‚Üê items –æ—Ç Access

‚úÖ work_orders ‚Üê PO –æ—Ç Access

‚úÖ work_order_items ‚Üê POitems –æ—Ç Access

2. –ù–û–í–ò –¢–ê–ë–õ–ò–¶–ò (–∫–æ–∏—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–∑–¥–∞–¥–µ–º):
document_types ‚Üê doctypes –æ—Ç Access

banks ‚Üê banks –æ—Ç Access

üìã –î–ï–¢–ê–ô–õ–ò –ü–û –¢–ê–ë–õ–ò–¶–ò:
A. –°–™–©–ï–°–¢–í–£–í–ê–©–ò –¢–ê–ë–õ–ò–¶–ò (–≤–µ—á–µ –∏–º–∞—à –º–∏–≥—Ä–∞—Ü–∏–∏):
1. customers —Ç–∞–±–ª–∏—Ü–∞ (–º–∏–≥—Ä–∞—Ü–∏—è—Ç–∞ —Ç–∏):
php
Schema::create('customers', function (Blueprint $table) {
    $table->id();
    $table->string('type'); // customer/supplier/both
    $table->string('name');
    $table->string('vat_number')->nullable();
    $table->string('contact_person')->nullable();
    $table->string('phone')->nullable();
    $table->string('email')->nullable();
    $table->text('address')->nullable();
    $table->string('city')->nullable();
    $table->text('notes')->nullable();
    $table->timestamps();
    $table->softDeletes();
});
Mapping –æ—Ç Access:

Number ‚Üí —â–µ –∏–≥–Ω–æ—Ä–∏—Ä–∞–º–µ (–∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç)

Customer-Name ‚Üí name

Customer-Taxno ‚Üí vat_number

Customer-MOL ‚Üí contact_person

Telno ‚Üí phone

E-mail ‚Üí email

Customer-Address-1 + Customer-Address-2 ‚Üí address

customer/supplier –ø–æ–ª–µ—Ç–∞ ‚Üí type ('customer', 'supplier', 'both')

2. products —Ç–∞–±–ª–∏—Ü–∞ (–º–∏–≥—Ä–∞—Ü–∏—è—Ç–∞ —Ç–∏):
php
Schema::create('products', function (Blueprint $table) {
    $table->id();
    $table->string('sku')->unique();
    $table->string('name');
    $table->string('brand')->nullable();
    $table->text('description')->nullable();
    $table->string('unit')->default('–±—Ä.');
    $table->decimal('price', 10, 2);
    $table->decimal('cost_price', 10, 2)->default(0);
    $table->decimal('vat_percent', 5, 2)->default(20.00);
    $table->integer('stock_quantity')->default(0);
    $table->integer('min_stock_level')->default(5);
    $table->string('location')->nullable();
    $table->timestamps();
    $table->softDeletes();
});
Mapping –æ—Ç Access:

PLU ‚Üí sku

Name ‚Üí name

UOM ‚Üí unit

Price ‚Üí price

acc ‚Üí –º–æ–∂–µ—à –¥–∞ –≥–æ –∏–≥–Ω–æ—Ä–∏—Ä–∞—à –∏–ª–∏ –¥–∞ –≥–æ —Å–ª–æ–∂–∏—à –≤ description

3. invoices —Ç–∞–±–ª–∏—Ü–∞ (–º–∏–≥—Ä–∞—Ü–∏—è—Ç–∞ —Ç–∏):
php
Schema::create('invoices', function (Blueprint $table) {
    $table->id();
    $table->string('invoice_number')->unique();
    $table->foreignId('customer_id')->constrained()->onDelete('cascade');
    $table->date('invoice_date');
    $table->date('due_date')->nullable();
    $table->enum('status', ['draft', 'sent', 'paid', 'cancelled'])->default('draft');
    $table->decimal('subtotal', 10, 2);
    $table->decimal('vat_amount', 10, 2);
    $table->decimal('total_amount', 10, 2);
    $table->text('notes')->nullable();
    $table->timestamps();
    $table->softDeletes();
});
Mapping –æ—Ç Access:

Invoice-ID ‚Üí —â–µ –∏–≥–Ω–æ—Ä–∏—Ä–∞–º–µ (–∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç)

Customer-ID ‚Üí customer_id (—Ç—Ä—è–±–≤–∞ –¥–∞ –º–∞–ø–Ω–µ–º –∫—ä–º –Ω–æ–≤–∏—Ç–µ customer ID-—Ç–∞)

Invoice-Date ‚Üí invoice_date

datedue ‚Üí due_date

Paid –ø–æ–ª–µ ‚Üí status ('paid' –∏–ª–∏ 'sent')

–°—É–º–∏—Ç–µ (subtotal, total) —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –∏–∑—á–∏—Å–ª—è—Ç –æ—Ç items —Ç–∞–±–ª–∏—Ü–∞—Ç–∞

4. invoice_items —Ç–∞–±–ª–∏—Ü–∞ (–º–∏–≥—Ä–∞—Ü–∏—è—Ç–∞ —Ç–∏):
php
Schema::create('invoice_items', function (Blueprint $table) {
    $table->id();
    $table->foreignId('invoice_id')->constrained()->onDelete('cascade');
    $table->foreignId('product_id')->nullable()->constrained()->onDelete('set null');
    $table->string('description');
    $table->string('unit')->default('–±—Ä.');
    $table->decimal('quantity', 10, 2);
    $table->decimal('unit_price', 10, 2);
    $table->decimal('vat_percent', 5, 2)->default(20.00);
    $table->decimal('line_total', 10, 2);
    $table->timestamps();
});
Mapping –æ—Ç Access (items —Ç–∞–±–ª–∏—Ü–∞):

Invoice-ID ‚Üí invoice_id (—Ç—Ä—è–±–≤–∞ –¥–∞ –º–∞–ø–Ω–µ–º –∫—ä–º –Ω–æ–≤–∏—Ç–µ invoice ID-—Ç–∞)

Number ‚Üí –ø–æ—Ä–µ–¥–µ–Ω –Ω–æ–º–µ—Ä (–º–æ–∂–µ—à –¥–∞ –≥–æ –∑–∞–ø–∏—à–µ—à –≤ description –∏–ª–∏ –¥–∞ –∏–º–∞—à –æ—Ç–¥–µ–ª–Ω–æ –ø–æ–ª–µ)

Item-Name ‚Üí description

Item-Measure ‚Üí unit

Item-Qty ‚Üí quantity

Item-Price-Each ‚Üí unit_price

Item-total ‚Üí line_total

B. –ù–û–í–ò –¢–ê–ë–õ–ò–¶–ò (—Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–∑–¥–∞–¥–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏):
1. document_types —Ç–∞–±–ª–∏—Ü–∞:
php
// database/migrations/2025_12_17_000001_create_document_types_table.php
Schema::create('document_types', function (Blueprint $table) {
    $table->id();
    $table->string('code')->unique(); // '0', '2', '4' –∏ —Ç.–Ω. –æ—Ç Access
    $table->string('name'); // '–§–∞–∫—Ç—É—Ä–∞', '–ö—Ä–µ–¥–∏—Ç–Ω–æ –ò–∑–≤–µ—Å—Ç–∏–µ' –∏ —Ç.–Ω.
    $table->string('abbreviation')->nullable(); // '–§-—Ä–∞', '–ö–ò' –∏ —Ç.–Ω.
    $table->string('dds_type')->nullable(); // '04', '06' –∏ —Ç.–Ω.
    $table->string('accounting_type')->nullable(); // '1', '2' –∏ —Ç.–Ω.
    $table->boolean('is_cancellation')->default(false);
    $table->timestamps();
});
2. banks —Ç–∞–±–ª–∏—Ü–∞:
php
// database/migrations/2025_12_17_000002_create_banks_table.php
Schema::create('banks', function (Blueprint $table) {
    $table->id();
    $table->string('account')->nullable();
    $table->string('bank_id')->nullable();
    $table->string('bank_name');
    $table->string('currency')->default('BGL');
    $table->integer('method_id');
    $table->string('description')->nullable();
    $table->string('short_description')->nullable();
    $table->boolean('is_cash')->default(false);
    $table->timestamps();
});
üöÄ –ï–¢–ê–ü–ò –ù–ê –ò–ú–ü–û–†–¢:
–ï—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ
–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π –≤—Å–∏—á–∫–∏ Access —Ç–∞–±–ª–∏—Ü–∏ –∫–∞—Ç–æ CSV

–û–ø—Ä–∞–≤—è–º–µ –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞

–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º–µ –¥–∞—Ç–∏

–ï—Ç–∞–ø 2: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ —Ç–∞–±–ª–∏—Ü–∏
bash
php artisan make:migration create_document_types_table
php artisan make:migration create_banks_table
php artisan migrate
–ï—Ç–∞–ø 3: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ Seeders
–°—ä–∑–¥–∞–≤–∞–º–µ Seeders –∫–æ–∏—Ç–æ:

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞—Ç document_types –∏ banks –ø—ä—Ä–≤–æ

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞—Ç customers –∏ –∑–∞–ø–∞–∑–≤–∞—Ç mapping –∑–∞ —Å—Ç–∞—Ä–∏—Ç–µ ID-—Ç–∞

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞—Ç products –∏ –∑–∞–ø–∞–∑–≤–∞—Ç mapping

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞—Ç invoices —Å –ø—Ä–∞–≤–∏–ª–Ω–∏—Ç–µ customer_id

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞—Ç invoice_items —Å –ø—Ä–∞–≤–∏–ª–Ω–∏—Ç–µ invoice_id –∏ product_id

–ü–æ–≤—Ç–∞—Ä—è–º–µ —Å—ä—â–æ—Ç–æ –∑–∞ work_orders –∏ work_order_items

üí° –†–ï–®–ï–ù–ò–ï –ó–ê –ú–ê–ü–í–ê–ù–ï –ù–ê ID-–¢–ê:
–¢—ä–π –∫–∞—Ç–æ Access –∏–º–∞ —Å–≤–æ–∏ ID-—Ç–∞, –∞ Laravel —â–µ –≥–µ–Ω–µ—Ä–∏—Ä–∞ –Ω–æ–≤–∏, —Ç—Ä—è–±–≤–∞ –¥–∞:

–°—ä–∑–¥–∞–¥–µ–º mapping —Ç–∞–±–ª–∏—Ü–∞ –≤ –ø–∞–º–µ—Ç—Ç–∞

–ó–∞–ø–∞–∑–∏–º –≤—Ä—ä–∑–∫–∏—Ç–µ –º–µ–∂–¥—É —Å—Ç–∞—Ä–∏—Ç–µ –∏ –Ω–æ–≤–∏—Ç–µ ID-—Ç–∞

–ü—Ä–∏–º–µ—Ä –∑–∞ customers:

php
$oldToNewCustomerId = [];

foreach ($accessCustomers as $oldCustomer) {
    $newCustomer = Customer::create([
        'name' => $oldCustomer['Customer-Name'],
        'vat_number' => $oldCustomer['Customer-Taxno'],
        // ... –¥—Ä—É–≥–∏ –ø–æ–ª–µ—Ç–∞
    ]);
    
    $oldToNewCustomerId[$oldCustomer['Number']] = $newCustomer->id;
}
–ü–æ—Å–ª–µ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç –Ω–∞ invoices:

php
$newInvoice = Invoice::create([
    'customer_id' => $oldToNewCustomerId[$accessInvoice['Customer-ID']],
    // ... –¥—Ä—É–≥–∏ –ø–æ–ª–µ—Ç–∞
]);
üì¶ –ö–ê–ö –ó–ê–ü–û–ß–í–ê–ú–ï:
–ö–∞—á–∏ CSV —Ñ–∞–π–ª–æ–≤–µ—Ç–µ –æ—Ç Access (customer, products, invoices, items, PO, POitems, doctypes, banks)

–©–µ —Ç–∏ –ø–æ–¥–≥–æ—Ç–≤—è:

–ú–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞ document_types –∏ banks

Seeders –∑–∞ –≤—Å—è–∫–∞ —Ç–∞–±–ª–∏—Ü–∞

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ

–ò—Å–∫–∞—à –ª–∏ –¥–∞ –∑–∞–ø–æ—á–Ω–µ–º —Å –ø—ä—Ä–≤–∏—è CSV —Ñ–∞–π–ª? –ú–æ–∂–µ—à –¥–∞ –∫–∞—á–∏—à customer.csv –ø—ä—Ä–≤–æ –∏ –¥–∞ –≤–∏–¥–∏–º –∫–∞–∫ –∏–∑–≥–ª–µ–∂–¥–∞—Ç –¥–∞–Ω–Ω–∏—Ç–µ —Å–ª–µ–¥ –µ–∫—Å–ø–æ—Ä—Ç.

–ê –∫–∞–∫ –¥–∞ –≥–æ –∑–∞–ø–∏—à–∞ –≤ CSV —Ñ–∞–π–ª. –ö–∞—Ç–æ –Ω–∞—Ç–∏—Å–Ω–∞ –¥–µ—Å–Ω–∏—è –±—É—Ç–æ–Ω –Ω–∞ –º–∏—à–∫–∞—Ç–∞ –∫–æ–≥–∞—Ç–æ —Å—ä–º –≤—ä—Ä—Ö—É —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –∏ –ø–æ—Å–ª–µ –∏–∑–±–µ—Ä–∞ –µ–∫—Å–ø–æ—Ä—Ç, –Ω–µ –≤–∏–∂–¥–∞–º –¥–∞ –º–æ–∂–µ –¥–∞ —Å–µ –µ–∫—Å–ø–æ—Ä—Ç–≤–∞ –≤ csv —Ñ–∞–π–ª. –í–∏–∂–¥–∞–º —á–µ –º–æ–∂–µ –¥–∞ —Å–µ –µ–∫—Å–ø–æ—Ä—Ç–≤–∞ –≤ –ï–∫—Å–µ–ª—Å–∫–∏, —Ç–µ–∫—Å—Ç–æ–≤–∏ –∏ —Ä–∞–∑–Ω–∏ –¥—Ä—É–≥–∏.
–í Access 2007 –Ω—è–º–∞ –¥–∏—Ä–µ–∫—Ç–µ–Ω CSV –µ–∫—Å–ø–æ—Ä—Ç, –Ω–æ –º–æ–∂–µ—à –¥–∞ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞—à –≤ —Ç–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª (.txt) –∫–æ–π—Ç–æ –µ —Å—ä—â–æ—Ç–æ –∫–∞—Ç–æ CSV. –ï—Ç–æ –∫–∞–∫:

üì§ –ï–ö–°–ü–û–†–¢ –û–¢ ACCESS –í CSV/–¢–ï–ö–°–¢–û–í –§–ê–ô–õ:
–ú–µ—Ç–æ–¥ 1: –ï–∫—Å–ø–æ—Ä—Ç –∫–∞—Ç–æ –¢–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª (CSV)
–û—Ç–≤–æ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –≤ Datasheet View (–¥–≤–æ–π–Ω–æ –∫–ª–∏–∫–≤–∞–Ω–µ)

–û—Ç–∏–¥–∏ –Ω–∞ External Data —Ç–∞–± ‚Üí Text File

–í –ø—Ä–æ–∑–æ—Ä–µ—Ü–∞:

–ò–∑–±–µ—Ä–∏ –ø–∞–ø–∫–∞ –∏ –∏–º–µ –Ω–∞ —Ñ–∞–π–ª–∞ (–Ω–∞–ø—Ä. customer.txt)

–í–ê–ñ–ù–û: –ö–ª–∏–∫–Ω–∏ Advanced...

–í Code Page –∏–∑–±–µ—Ä–µ—à Windows (1251) –∑–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞

–ö–ª–∏–∫–Ω–∏ OK

–í —Å–ª–µ–¥–≤–∞—â–∏—è –µ–∫—Ä–∞–Ω:

–ò–∑–±–µ—Ä–∏ Delimited ‚Üí Next

–ò–∑–±–µ—Ä–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª Comma (–∑–∞–ø–µ—Ç–∞—è) –∑–∞ CSV

–ú–∞—Ä–∫–∏—Ä–∞–π First Row Contains Field Names

Next ‚Üí Finish

–ú–µ—Ç–æ–¥ 2: –ï–∫—Å–ø–æ—Ä—Ç –≤ Excel –∏ –ø–æ—Å–ª–µ Save As CSV
–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π –∫–∞—Ç–æ Excel (External Data ‚Üí Excel)

–û—Ç–≤–æ—Ä–∏ Excel —Ñ–∞–π–ª–∞

File ‚Üí Save As

–ò–∑–±–µ—Ä–∏ —Ç–∏–ø: CSV (Comma delimited) (*.csv)

–ü—Ä–∏ –∑–∞–ø–∏—Å–≤–∞–Ω–µ, Excel —â–µ –ø–∏—Ç–∞ –∑–∞ –∫–æ–¥–∏—Ä–∞–Ω–µ - –∏–∑–±–µ—Ä–∏ UTF-8

–ú–µ—Ç–æ–¥ 3: –ù–∞–π-–ª–µ—Å–Ω–∏—è—Ç (–ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–µ–Ω)
–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π –∫–∞—Ç–æ Text File —Å—ä—Å –∑–∞–ø–µ—Ç–∞—è –∫–∞—Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª - —Ç–æ–≤–∞ –ï CSV —Ñ–∞–π–ª, —Å–∞–º–æ —á–µ —Å —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ .txt. –ü–æ—Å–ª–µ –º–æ–∂–µ—à –¥–∞ –≥–æ –ø—Ä–µ–∏–º–µ–Ω—É–≤–∞—à –Ω–∞ .csv.

üìù –ò–ù–°–¢–†–£–ö–¶–ò–ò –ó–ê –í–°–Ø–ö–ê –¢–ê–ë–õ–ò–¶–ê:
–ó–∞ —Ç–∞–±–ª–∏—Ü–∞ customer:
–û—Ç–≤–æ—Ä–∏ —è –≤ Datasheet View

External Data ‚Üí Text File

–ù–∞—Å—Ç—Ä–æ–π–∫–∏:

File name: customer.txt

Code Page: Windows (1251)

Delimiter: Comma

First row has field names: –î–∞

–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π

–ó–∞ —Ç–∞–±–ª–∏—Ü–∞ products:
–°—ä—â–æ—Ç–æ, –Ω–æ —Ñ–∞–π–ª products.txt

–ó–∞ —Ç–∞–±–ª–∏—Ü–∞ invoices:
–°—ä—â–æ—Ç–æ, —Ñ–∞–π–ª invoices.txt

–ó–∞ —Ç–∞–±–ª–∏—Ü–∞ items:
–°—ä—â–æ—Ç–æ, —Ñ–∞–π–ª items.txt

üéØ –ê–õ–¢–ï–†–ù–ê–¢–ò–í–ê: –ï–∫—Å–ø–æ—Ä—Ç –≤ Excel –∏ —Ç–∏ –¥–∞ –º–∏ –≥–æ –ø—Ä–∞—Ç–∏—à
–ê–∫–æ –Ω–µ –º–æ–∂–µ—à –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏—à CSV, –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π –≤ Excel –∏ –∫–∞—á–∏ Excel —Ñ–∞–π–ª–æ–≤–µ—Ç–µ –¥–∏—Ä–µ–∫—Ç–Ω–æ —Ç—É–∫. –©–µ –≥–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º –∞–∑.

üîß –ë–™–†–ó –¢–ï–°–¢:
–ü—Ä–æ–±–≤–∞–π –¥–∞ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞—à —Å–∞–º–æ –ø—ä—Ä–≤–∏—Ç–µ 10 —Ä–µ–¥–∞ –æ—Ç customer —Ç–∞–±–ª–∏—Ü–∞—Ç–∞:

–û—Ç–≤–æ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞

–ò–∑–±–µ—Ä–∏ –ø—ä—Ä–≤–∏—Ç–µ 10 —Ä–µ–¥–∞

–ö–æ–ø–∏—Ä–∞–π (Ctrl+C)

–ü–æ—Å—Ç–∞–≤–∏ –≤ Notepad++ –∏–ª–∏ Excel

–ó–∞–ø–∞—Å–∏ –∫–∞—Ç–æ customer_test.csv

–ö–∞—á–∏ –≥–æ —Ç—É–∫ –∏ —â–µ —Ç–µ—Å—Ç–≤–∞–º–µ

–í–∞–∂–Ω–æ: –ü—Ä–∏ –µ–∫—Å–ø–æ—Ä—Ç –∏–∑–±–∏—Ä–∞–π –≤–∏–Ω–∞–≥–∏ Windows (1251) –∫–æ–¥–∏—Ä–∞–Ω–µ –∑–∞ –¥–∞ –∑–∞–ø–∞–∑–∏–º –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞!

–ú–æ–∂–µ—à –ª–∏ –¥–∞ –ø—Ä–æ–±–≤–∞—à —Å customer —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –ø—ä—Ä–≤–æ –∏ –¥–∞ –∫–∞—á–∏—à —Ñ–∞–π–ª–∞ —Ç—É–∫?

–û–∫, —Å–ª–µ–¥ –º–∞–ª–∫–æ —â–µ —Ç–∏ –∫–∞—á–∞ customer —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –∫–∞—Ç–æ Excel
–°—É–ø–µ—Ä! –ö–∞—á–≤–∞–π —è –∫–∞—Ç–æ Excel —Ñ–∞–π–ª - —â–µ –µ –ø–æ-–ª–µ—Å–Ω–æ. –ú–æ–≥–∞ –¥–∏—Ä–µ–∫—Ç–Ω–æ –¥–∞ –≤–∏–¥—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –∏ –¥–∞–Ω–Ω–∏—Ç–µ.

–î–æ–∫–∞—Ç–æ —á–∞–∫–∞–º, —â–µ –ø–æ–¥–≥–æ—Ç–≤—è Laravel Seeder –∑–∞ customers –∫–æ–π—Ç–æ —â–µ:

–ß–µ—Ç–µ Excel/CSV —Ñ–∞–π–ª

–û–ø—Ä–∞–≤—è –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞ –¥–∞–Ω–Ω–∏—Ç–µ –≤ —Ç–≤–æ—è—Ç–∞ customers —Ç–∞–±–ª–∏—Ü–∞

–°—ä–∑–¥–∞–≤–∞ mapping –∑–∞ —Å—Ç–∞—Ä–∏—Ç–µ ID-—Ç–∞ (–∑–∞ –¥–∞ –≥–∏ –∏–∑–ø–æ–ª–∑–≤–∞–º–µ –ø–æ—Å–ª–µ –∑–∞ —Ñ–∞–∫—Ç—É—Ä–∏ –∏ –ø–æ—Ä—ä—á–∫–∏)

–ö–∞—á–∏ —Ñ–∞–π–ª–∞ –∫–æ–≥–∞—Ç–æ —Å–∏ –≥–æ—Ç–æ–≤!

–í—ä–ø—Ä–æ—Å? –ö–∞–∫ –¥–∞ –ø—Ä–µ—Ö–≤—ä—Ä–ª—è —Ç–æ–∑–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä –≤ –¥—Ä—É–≥ —Ä–∞–∑–≥–æ–≤–æ—Ä –∫—ä–¥–µ—Ç–æ –¥–∞ –≥–æ –ø—Ä–æ–¥—ä–ª–∂–∏–º?
–í DeepSeek —á–∞—Ç —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –Ω—è–º–∞ –¥–∏—Ä–µ–∫—Ç–µ–Ω –Ω–∞—á–∏–Ω –¥–∞ "–ø—Ä–µ—Ö–≤—ä—Ä–ª–∏—à" —Ä–∞–∑–≥–æ–≤–æ—Ä –≤ –Ω–æ–≤ —á–∞—Ç. –ù–æ –∏–º–∞—à –Ω—è–∫–æ–ª–∫–æ –æ–ø—Ü–∏–∏:

üîÑ –û–ø—Ü–∏–∏ –∑–∞ –ø—Ä–æ–¥—ä–ª–∂–µ–Ω–∏–µ:
1. –ó–∞–ø–∞–∑–∏ –ª–∏–Ω–∫ –∫—ä–º —Ç–æ–∑–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä
–ö–æ–ø–∏—Ä–∞–π URL –∞–¥—Ä–µ—Å–∞ –Ω–∞ —Ç–æ–∑–∏ —á–∞—Ç –æ—Ç –∞–¥—Ä–µ—Å–Ω–∞—Ç–∞ –ª–µ–Ω—Ç–∞

–ó–∞–ø–∞–∑–∏ –≥–æ –Ω—è–∫—ä–¥–µ

–ü–æ—Å–ª–µ –º–æ–∂–µ—à –¥–∞ –º–∏ –∫–∞–∂–µ—à "–ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ –æ—Ç –ø—Ä–µ–¥–∏—à–Ω–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä" –∏ –¥–∞ –º–∏ –¥–∞–¥–µ—à –∫–ª—é—á–æ–≤–∏ —Ç–æ—á–∫–∏

2. –ï–∫—Å–ø–æ—Ä—Ç –Ω–∞ –∏—Å—Ç–æ—Ä–∏—è—Ç–∞
–°–∫—Ä–æ–ª–≤–∞–π –Ω–∞–≥–æ—Ä–µ –∏ –∫–æ–ø–∏—Ä–∞–π –≤–∞–∂–Ω–∏—Ç–µ —á–∞—Å—Ç–∏

–ü–æ—Å—Ç–∞–≤–∏ –≥–∏ –≤ –Ω–æ–≤ —á–∞—Ç —Å –∫–æ–º–µ–Ω—Ç–∞—Ä "—Ç–æ–≤–∞ –µ –ø—Ä–æ–¥—ä–ª–∂–µ–Ω–∏–µ"

3. –ù–∞–π-–¥–æ–±—Ä–∏—è—Ç –≤–∞—Ä–∏–∞–Ω—Ç:
–ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞–π —Ç—É–∫! –¢–æ–∑–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä –≤–µ—á–µ –∏–º–∞:

–¶—è–ª–∞—Ç–∞ –∏—Å—Ç–æ—Ä–∏—è

–ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Ç–∏

–í–µ—á–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ —Ç–∞–±–ª–∏—Ü–∏

–ü–æ–¥–≥–æ—Ç–≤–µ–Ω–∏ SQL —Å—Ç—Ä—É–∫—Ç—É—Ä–∏

üí° –ú–æ–µ—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:
–ü—Ä–æ–¥—ä–ª–∂–∏ –≤ –°–™–©–ò–Ø —Ç–æ–∑–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä. –ò–º–∞–º–µ –≤–µ—á–µ:
‚úÖ –ê–Ω–∞–ª–∏–∑ –Ω–∞ Access —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞
‚úÖ –†–∞–∑–±–∏—Ä–∞–Ω–µ –Ω–∞ Laravel –ø—Ä–æ–µ–∫—Ç–∞ —Ç–∏
‚úÖ –ü–æ–¥–≥–æ—Ç–≤–µ–Ω–∏ mapping —Ç–∞–±–ª–∏—Ü–∏
‚úÖ –ì–æ—Ç–æ–≤–∏ SQL –∑–∞—è–≤–∫–∏

–ü—Ä–æ—Å—Ç–æ –∫–∞—á–∏ Excel —Ñ–∞–π–ª–∞ —Å customers —Ç—É–∫ –∏ —â–µ –ø—Ä–æ–¥—ä–ª–∂–∏–º.

–ê–∫–æ –Ω–∞–∏—Å—Ç–∏–Ω–∞ –∏—Å–∫–∞—à –Ω–æ–≤ —á–∞—Ç, –º–æ–∂–µ—à:

–ö–æ–ø–∏—Ä–∞–π –ø–æ—Å–ª–µ–¥–Ω–∏—Ç–µ –Ω—è–∫–æ–ª–∫–æ —Å—ä–æ–±—â–µ–Ω–∏—è

–ó–∞–ø–æ—á–Ω–∏ –Ω–æ–≤ —á–∞—Ç

–ü–æ—Å—Ç–∞–≤–∏ –∫–æ–ø–∏—Ä–∞–Ω–∏—è —Ç–µ–∫—Å—Ç

–ö–∞–∂–∏ "–ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ –∏–º–ø–æ—Ä—Ç–∞ –Ω–∞ –¥–∞–Ω–Ω–∏ –æ—Ç Access"

–ù–æ –∞–∑ –ø—Ä–µ–ø–æ—Ä—ä—á–≤–∞–º –¥–∞ –æ—Å—Ç–∞–Ω–µ–º —Ç—É–∫ - –∏–º–∞–º–µ —Ü—è–ª–∞—Ç–∞ –∏—Å—Ç–æ—Ä–∏—è –Ω–∞ –µ–¥–Ω–æ –º—è—Å—Ç–æ!

–ö–∞–∫–≤–æ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—à? –î–∞ –ø—Ä–æ–¥—ä–ª–∂–∏–º —Ç—É–∫ –∏–ª–∏ –¥–∞ –∑–∞–ø–æ—á–Ω–µ–º –Ω–æ–≤ —Ä–∞–∑–≥–æ–≤–æ—Ä?

–ë–∏—Ö –∏—Å–∫–∞–ª –¥–∞ –æ—Å—Ç–∞–Ω–µ–º —Ç—É–∫ –Ω–æ –∫–æ–≥–∞—Ç–æ —Ç—Ä—ä–≥–≤–∞–º –¥–∞ –∫–∞—á–≤–∞–º –µ–∫—Å–µ–ª—Å–∫–∏—è —Ñ–∞–π–ª —Ç–æ–π –º–∏ –∫–∞–∑–≤–∞ —á–µ –Ω–∞–¥–≤–∏—à–∞–Ω–∞–º –ª–∏–º–∏—Ç–∞ –Ω–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
–¢–æ–≤–∞ –µ —á–µ—Å—Ç –ø—Ä–æ–±–ª–µ–º. –ï—Ç–æ —Ä–µ—à–µ–Ω–∏—è:

üìé –û–ø—Ü–∏–∏ –∑–∞ –∫–∞—á–≤–∞–Ω–µ –Ω–∞ –≥–æ–ª–µ–º–∏ —Ñ–∞–π–ª–æ–≤–µ:
1. –†–∞–∑–¥–µ–ª–∏ Excel —Ñ–∞–π–ª–∞
–û—Ç–≤–æ—Ä–∏ Excel —Ñ–∞–π–ª–∞

–ó–∞–ø–∞–∑–∏ —Å–∞–º–æ –ø—ä—Ä–≤–∏—Ç–µ 1000 —Ä–µ–¥–∞ (–∏–ª–∏ –∫–æ–ª–∫–æ—Ç–æ —Å–µ –ø–æ–±–∏—Ä–∞)

–ö–∞—á–∏ –Ω–∞–º–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª

–©–µ —Ç–µ—Å—Ç–≤–∞–º–µ —Å –Ω–µ–≥–æ, –ø–æ—Å–ª–µ —â–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–º–µ —Ü–µ–ª–∏—è —Ñ–∞–π–ª

2. –ö–∞—á–∏ –≤ GitHub –∏ —Å–ø–æ–¥–µ–ª–∏ –ª–∏–Ω–∫
–°—ä–∑–¥–∞–π –ø—É–±–ª–∏—á–µ–Ω gist –≤ GitHub: https://gist.github.com/

–ö–æ–ø–∏—Ä–∞–π –¥–∞–Ω–Ω–∏—Ç–µ –æ—Ç Excel –∫–∞—Ç–æ —Ç–µ–∫—Å—Ç (CSV —Ñ–æ—Ä–º–∞—Ç)

–ü–æ—Å—Ç–∞–≤–∏ –≤ gist –∏ –∑–∞–ø–∞–∑–∏

–î–∞–π –º–∏ –ª–∏–Ω–∫–∞

3. Google Sheets
–ö–∞—á–∏ Excel –≤ Google Sheets

–ù–∞–ø—Ä–∞–≤–∏ –ª–∏–Ω–∫–∞ –ø—É–±–ª–∏—á–µ–Ω

–°–ø–æ–¥–µ–ª–∏ –ª–∏–Ω–∫–∞ —Ç—É–∫

4. CSV –≤–º–µ—Å—Ç–æ Excel
Excel —Ñ–∞–π–ª–æ–≤–µ—Ç–µ —Å–∞ –ø–æ-–≥–æ–ª–µ–º–∏. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–π –≤ CSV:

–í Excel: File ‚Üí Save As

–ò–∑–±–µ—Ä–∏ CSV (Comma delimited) (*.csv)

CSV —Ñ–∞–π–ª–æ–≤–µ—Ç–µ —Å–∞ –º–Ω–æ–≥–æ –ø–æ-–º–∞–ª–∫–∏

5. Pastebin –∏–ª–∏ –ø–æ–¥–æ–±–Ω–∞ —É—Å–ª—É–≥–∞
https://pastebin.com/

–ü–æ—Å—Ç–∞–≤–∏ –¥–∞–Ω–Ω–∏—Ç–µ –∫–∞—Ç–æ —Ç–µ–∫—Å—Ç

–î–∞–π –ª–∏–Ω–∫–∞

üöÄ –ù–∞–π-–±—ä—Ä–∑–æ —Ä–µ—à–µ–Ω–∏–µ:
–ü—Ä–æ–±–≤–∞–π —Ç–æ–≤–∞:

–û—Ç–≤–æ—Ä–∏ Excel —Ñ–∞–π–ª–∞

–ò–∑–±–µ—Ä–∏ –ø—ä—Ä–≤–∏—Ç–µ 500 —Ä–µ–¥–∞

–ö–æ–ø–∏—Ä–∞–π (Ctrl+C)

–ü–æ—Å—Ç–∞–≤–∏ –≤ Notepad++

–ó–∞–ø–∞—Å–∏ –∫–∞—Ç–æ customers_partial.csv

–ö–∞—á–∏ —Ç–æ–∑–∏ –ø–æ-–º–∞–ª—ä–∫ —Ñ–∞–π–ª

üìä –ê–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ - –¥–∞–π –º–∏ —Å–∞–º–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞:
–ê–∫–æ –Ω–µ –º–æ–∂–µ—à –¥–∞ –∫–∞—á–∏—à —Ñ–∞–π–ª–∞, –¥–∞–π –º–∏ –ø—ä—Ä–≤–∏—Ç–µ 5 —Ä–µ–¥–∞ –∫–∞—Ç–æ —Ç–µ–∫—Å—Ç —Ç—É–∫ –≤ —á–∞—Ç–∞:

text
Number,Customer-Name,Customer-Address-1,Customer-Address-2,Customer-MOL...
19,–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò,–°–û–§–ò–Ø,–ë–û–†–û–í–û –ë–õ.8,–õ–™–ß–ï–ó–ê–† –°–¢–û–Ø–ù–û–í...
20,–®–ê–¢–†–û–ú –ï–û–û–î,–°–û–§–ò–Ø,–°–¢–†–ï–õ–ë–ò–©–ï –ë–õ.32,–†–û–°–ò–¶–ê –ü–û–ü–û–í–ê...
–ò —â–µ —Ç–∏ –ø–æ–¥–≥–æ—Ç–≤—è Seeder –±–∞–∑–∏—Ä–∞–Ω –Ω–∞ —Ç–æ–≤–∞, –ø–æ—Å–ª–µ —â–µ –≥–æ –∞–¥–∞–ø—Ç–∏—Ä–∞—à –∑–∞ —Ü–µ–ª–∏—è —Ñ–∞–π–ª.

–ö–∞–∫–≤–æ —â–µ –∫–∞–∂–µ—à? –ö–æ–µ –æ—Ç —Ç–µ–∑–∏ —Ç–∏ –µ –Ω–∞–π-—É–¥–æ–±–Ω–æ?

–ê–∞–∞–∞ –¥–∞ —â–µ –≥–æ –∫–∞—á–∞ –≤ –≥–∏—Ç—Ö—ä–±. –ó–∞–±—Ä–∞–≤–∏—Ö —á–µ —Ç–∏ –º–æ–∂–µ—à –¥–∞ —á–µ—Ç–µ—à –æ—Ç —Ç–∞–º
–¢–æ—á–Ω–æ —Ç–∞–∫–∞! –ü–µ—Ä—Ñ–µ–∫—Ç–Ω–æ —Ä–µ—à–µ–Ω–∏–µ! –ö–∞—á–∏ —Ñ–∞–π–ª–∞ –≤ —Ç–≤–æ—è GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—É–º –∏ –º–∏ –¥–∞–π –ª–∏–Ω–∫–∞.

–ú–æ–≥–∞ –¥–∏—Ä–µ–∫—Ç–Ω–æ –¥–∞:

–ò–∑—Ç–µ–≥–ª—è —Ñ–∞–π–ª–∞ –æ—Ç GitHub

–í–∏–¥—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –∏ –¥–∞–Ω–Ω–∏—Ç–µ

–ü–æ–¥–≥–æ—Ç–≤—è Laravel Seeder —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –∑–∞ —Ç–≤–æ—è—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

–î–∞–¥–∞–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –∏–º–ø–æ—Ä—Ç

üìÅ –ü—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–µ–Ω –Ω–∞—á–∏–Ω:
–°—ä–∑–¥–∞–π –ø–∞–ø–∫–∞ database/imports/ –≤ —Ç–≤–æ—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—É–º

–ö–∞—á–∏ Excel/CSV —Ñ–∞–π–ª–æ–≤–µ—Ç–µ —Ç–∞–º:

customers.xlsx (–∏–ª–∏ .csv)

products.xlsx

invoices.xlsx

items.xlsx

PO.xlsx

POitems.xlsx

doctypes.xlsx

banks.xlsx

–î–∞–π –º–∏ –ª–∏–Ω–∫ –∫—ä–º –ø–∞–ø–∫–∞—Ç–∞ –∏–ª–∏ –æ—Ç–¥–µ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª–æ–≤–µ

üîß –ê–∑ —Å–ª–µ–¥ —Ç–æ–≤–∞ —â–µ:
‚úÖ –°—ä–∑–¥–∞–º Laravel Seeder –∫–ª–∞—Å–æ–≤–µ –∑–∞ –≤—Å—è–∫–∞ —Ç–∞–±–ª–∏—Ü–∞
‚úÖ –û–ø—Ä–∞–≤—è –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ (encoding –ø—Ä–æ–±–ª–µ–º–∞)
‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º –¥–∞—Ç–∏ (–æ—Ç "17.1.2007 –≥." –∫—ä–º "2007-01-17")
‚úÖ –°—ä–∑–¥–∞–º mapping –∑–∞ ID-—Ç–∞—Ç–∞ (—Å—Ç–∞—Ä–∏ Access ID ‚Üí –Ω–æ–≤–∏ Laravel ID)
‚úÖ –ù–∞–ø–∏—à–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ

üöÄ –ë—ä—Ä–∑ —Å—Ç–∞—Ä—Ç:
–ú–æ–∂–µ—à –¥–∞ –∑–∞–ø–æ—á–Ω–µ—à —Å–∞–º–æ —Å customers.xlsx –ø—ä—Ä–≤–æ. –ö–∞—á–∏ –≥–æ –∏ —â–µ —Ç–∏ –ø–æ–¥–≥–æ—Ç–≤—è –ø—ä—Ä–≤–∏—è Seeder, —Ç–µ—Å—Ç–≤–∞–º–µ –∏ –ø–æ—Å–ª–µ –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ —Å –¥—Ä—É–≥–∏—Ç–µ —Ç–∞–±–ª–∏—Ü–∏.

–ö–∞—á–≤–∞–π —Ñ–∞–π–ª–∞ –≤ GitHub –∏ –¥–∞–π –ª–∏–Ω–∫! üéØ

–ï—Ç–æ —Ç–∏ –ø—ä—Ä–≤–∏—Ç–µ 500 –∑–∞–ø–∏—Å–∞ –Ω–∞ customers ... https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/old-database/Customer.txt
–ß–µ—Ç–µ–Ω–µ
–ß–µ—Ç–µ–Ω–µ
–í–∏–∂–¥–∞–º, —á–µ —Å–∏ –∫–∞—á–∏–ª —Ñ–∞–π–ª–∞ —Å –∫–ª–∏–µ–Ω—Ç–∏ (Customer.txt). –î–∞–Ω–Ω–∏—Ç–µ —Å–∞ –≤ —Ç–µ–∫—Å—Ç–æ–≤ —Ñ–æ—Ä–º–∞—Ç —Å —Ç–∞–±—É–ª–∞—Ç–æ—Ä–∏ –∫–∞—Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª –∏ –∏–º–∞—Ç –ø–æ–∑–Ω–∞—Ç–∏—è –ø—Ä–æ–±–ª–µ–º —Å –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä √ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√® –≤–º–µ—Å—Ç–æ –ö–∞–ª–æ–Ø–Ω –ü–µ—á–µ–Ω—è—Ä—Å–∫–∏).

–ï—Ç–æ –ø—ä—Ä–≤–∏—Ç–µ —Å—Ç—ä–ø–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑:

üìä –ê–Ω–∞–ª–∏–∑ –Ω–∞ —Ñ–∞–π–ª–∞ Customer.txt
–§–æ—Ä–º–∞—Ç: –¢–µ–∫—Å—Ç–æ–≤–∏ —Ñ–∞–π–ª, —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª –µ —Ç–∞–±—É–ª–∞—Ç–æ—Ä (\t)

–ö–æ–¥–∏—Ä–∞–Ω–µ: Windows-1251 (–∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ –µ —Å—á—É–ø–µ–Ω–∞)

–ö–æ–ª–æ–Ω–∏: 22 –∫–æ–ª–æ–Ω–∏, –≤–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ:

Number (ID –≤ —Å—Ç–∞—Ä–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞)

Customer-Name (–∏–º–µ, —Å—á—É–ø–µ–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞)

Customer-Address-1, Customer-Address-2 (–∞–¥—Ä–µ—Å)

Customer-MOL (–ú–û–õ - —É–ø—Ä–∞–≤–∏—Ç–µ–ª)

Customer-Taxno (–î–î–° –Ω–æ–º–µ—Ä)

active, customer, supplier (—Ñ–ª–∞–≥–æ–≤–µ)

–∏ –¥—Ä—É–≥–∏

üõ†Ô∏è –ö–∞–∫–≤–æ —â–µ –Ω–∞–ø—Ä–∞–≤–∏–º —Å–µ–≥–∞:
–°—Ç—ä–ø–∫–∞ 1: –û–ø—Ä–∞–≤—è–Ω–µ –Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞
–©–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º –¥–∞–Ω–Ω–∏—Ç–µ –æ—Ç Windows-1251 –∫—ä–º UTF-8. –ï—Ç–æ –ø—ä—Ä–≤–∏—Ç–µ 5 –∑–∞–ø–∏—Å–∞ —Å–ª–µ–¥ –æ–ø—Ä–∞–≤—è–Ω–µ:

Number	Customer-Name (–æ–ø—Ä–∞–≤–µ–Ω–æ)	Customer-Taxno	Customer-MOL	Telno
19	–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò	BG030219270	–õ–™–ß–ï–ó–ê–† –°–¢–û–Ø–ù–û–í	0899057055
20	–®–ê–¢–†–û–ú –ï–û–û–î	BG131326205	–†–û–°–ò–¶–ê –ü–û–ü–û–í–ê	088888888888
21	–¢–ï–†–ó–ò–î –ï–û–û–î	BG121057660	–†–û–°–ï–ù –°–¢–ê–ù–ö–û–í	
22	–ï.–¢.–ï. –ï–û–û–î	BG121483635	–°—Ç–µ—Ñ–∞–Ω –ú–∏–Ω—á–µ–≤	0899822289
23	–õ–ò–ù–î–ù–ï–† –ë–™–õ–ì–ê–†–ò–Ø –ï–û–û–î	BG121586343	–í–ï–†–ù–ï–† –•–û–§–ú–ê–ù	
–°—Ç—ä–ø–∫–∞ 2: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ Laravel Seeder
–©–µ —Ç–∏ –ø–æ–¥–≥–æ—Ç–≤—è CustomerImportSeeder.php, –∫–æ–π—Ç–æ:

–ß–µ—Ç–µ Customer.txt —Ñ–∞–π–ª–∞

–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞

–ú–∞–ø–≤–∞ –∫–æ–ª–æ–Ω–∏—Ç–µ –∫—ä–º —Ç–≤–æ—è—Ç–∞ customers —Ç–∞–±–ª–∏—Ü–∞:

Customer-Name ‚Üí name

Customer-Taxno ‚Üí vat_number

Customer-MOL ‚Üí contact_person

Telno ‚Üí phone

active, customer, supplier ‚Üí type (–∫–∞–ª–∫—É–ª–∏—Ä–∞–Ω–æ –ø–æ–ª–µ)

–∏ —Ç.–Ω.

–°—Ç—ä–ø–∫–∞ 3: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –¥–∞—Ç–∏
–î–∞—Ç–∏—Ç–µ –∫–∞—Ç–æ 17.1.2007 –≥. 19:19:19 —â–µ —Å–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞—Ç –¥–æ MySQL —Ñ–æ—Ä–º–∞—Ç 2007-01-17 19:19:19.

üì• –ö–∞–∫–≤–æ —Ç–∏ —Ç—Ä—è–±–≤–∞ –æ—Ç –º–µ–Ω —Å–µ–≥–∞:
–ò—Å–∫–∞—à –ª–∏ –¥–∞ —Ç–∏ –∏–∑–ø—Ä–∞—Ç—è –ø—ä–ª–Ω–∏—è CustomerImportSeeder.php —Ñ–∞–π–ª? –¢–æ–π —â–µ –µ –≥–æ—Ç–æ–≤ –∑–∞ –∫–æ–ø–∏—Ä–∞–Ω–µ –≤ —Ç–≤–æ—è –ø—Ä–æ–µ–∫—Ç.

–ò–ª–∏ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—à CSV —Ñ–∞–π–ª —Å –æ–ø—Ä–∞–≤–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏, –∫–æ–π—Ç–æ –¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞—à –ø—Ä–µ–∑ phpMyAdmin?

–°–ª–µ–¥ –∫–∞—Ç–æ –ø—Ä–∏–∫–ª—é—á–∏–º —Å –∫–ª–∏–µ–Ω—Ç–∏—Ç–µ, —â–µ –ø—Ä–æ–¥—ä–ª–∂–∏–º —Å—ä—Å —Å–ª–µ–¥–≤–∞—â–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ (–Ω–∞–π-–¥–æ–±—Ä–µ –¥–∞ –µ products).

üí° –°—ä–≤–µ—Ç:
–¢—ä–π –∫–∞—Ç–æ —Ñ–∞–π–ª—ä—Ç –µ –≥–æ–ª—è–º (500+ –∑–∞–ø–∏—Å–∞), –Ω–∞–π-–¥–æ–±—Ä–µ –µ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞–º–µ Laravel Seeder —Å chunk –æ–±—Ä–∞–±–æ—Ç–∫–∞, –∑–∞ –¥–∞ –Ω–µ —Å–µ –ø—Ä–µ—Ç–æ–≤–∞—Ä–∏ –ø–∞–º–µ—Ç—Ç–∞.

–ö–∞–∫–≤–æ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—à: Seeder –∫–æ–¥ –∏–ª–∏ CSV —Ñ–∞–π–ª?

–ö–æ–π –µ –ø–æ-–¥–æ–±—Ä–∏—è –Ω–∞—á–∏–Ω?
–î–æ–±—Ä–∏—è—Ç –≤—ä–ø—Ä–æ—Å! –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞ –¥–≤–∞—Ç–∞ –º–µ—Ç–æ–¥–∞:

üìä –°–†–ê–í–ù–ï–ù–ò–ï CSV vs LARAVEL SEEDER
–ö—Ä–∏—Ç–µ—Ä–∏–π	CSV –ò–º–ø–æ—Ä—Ç	Laravel Seeder
–°–∫–æ—Ä–æ—Å—Ç	‚ö° –ú–Ω–æ–≥–æ –±—ä—Ä–∑ (–¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ DB)	üê¢ –ü–æ-–±–∞–≤–µ–Ω (Eloquent, –≤–∞–ª–∏–¥–∞—Ü–∏–∏)
–ö–æ–Ω—Ç—Ä–æ–ª	üü° –û–≥—Ä–∞–Ω–∏—á–µ–Ω (–Ω—è–º–∞ –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞)	‚úÖ –ü—ä–ª–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª (–º–æ–∂–µ—à –¥–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–∞—à –¥–∞–Ω–Ω–∏—Ç–µ)
–í—Ä—ä–∑–∫–∏	üî¥ –¢—Ä—É–¥–Ω–æ (foreign keys, mapping)	‚úÖ –õ–µ—Å–Ω–æ (–∑–∞–ø–∞–∑–≤–∞–º–µ mapping –Ω–∞ ID-—Ç–∞)
–ö–∏—Ä–∏–ª–∏—Ü–∞	üî¥ –ü—Ä–æ–±–ª–µ–º–∏ —Å –∫–æ–¥–∏—Ä–∞–Ω–µ—Ç–æ	‚úÖ –õ–µ—Å–Ω–æ –æ–ø—Ä–∞–≤—è–Ω–µ (mb_convert_encoding)
–°–ª–æ–∂–Ω–æ—Å—Ç	‚úÖ –õ–µ—Å–µ–Ω (1-2 —Å—Ç—ä–ø–∫–∏)	üü° –°—Ä–µ–¥–Ω–∞ (—Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –ø–∏—à–µ –∫–æ–¥)
–ü–æ–≤—Ç–æ—Ä–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ	üî¥ –¢—Ä—É–¥–Ω–æ –∑–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ	‚úÖ –õ–µ—Å–Ω–æ (php artisan db:seed)
–ì—Ä–µ—à–∫–∏	üî¥ –¢—Ä—É–¥–Ω–æ –æ—Ç–∫—Ä–∏–≤–∞–Ω–µ/–∫–æ—Ä–∏–≥–∏—Ä–∞–Ω–µ	‚úÖ –õ–µ—Å–Ω–æ –ª–æ–≥–≤–∞–Ω–µ –∏ debugging
üéØ –ú–û–Ø –ü–†–ï–ü–û–†–™–ö–ê: Laravel Seeder
–ó–∞ —Ç–≤–æ—è —Å–ª—É—á–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –ø—Ä–µ–ø–æ—Ä—ä—á–≤–∞–º Laravel Seeder, –∑–∞—â–æ—Ç–æ:

‚úÖ –ü—Ä–µ–¥–∏–º—Å—Ç–≤–∞ –∑–∞ —Ç–≤–æ—è –ø—Ä–æ–µ–∫—Ç:
Mapping –Ω–∞ ID-—Ç–∞ - –¢—Ä—è–±–≤–∞ –¥–∞ –∑–∞–ø–∞–∑–∏—à –≤—Ä—ä–∑–∫–∞ –°—Ç–∞—Ä–æ ID ‚Üí –ù–æ–≤–æ ID –∑–∞:

Customer-ID –≤—ä–≤ —Ñ–∞–∫—Ç—É—Ä–∏—Ç–µ

Product-ID –≤ –∞—Ä—Ç–∏–∫—É–ª–∏—Ç–µ

POID –≤ —Ä–∞–±–æ—Ç–Ω–∏—Ç–µ –ø–æ—Ä—ä—á–∫–∏

–°–ª–æ–∂–Ω–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏:

–û–ø—Ä–∞–≤—è–Ω–µ –Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞

–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –¥–∞—Ç–∏

–ü–∞—Ä—Å–≤–∞–Ω–µ –Ω–∞ customer/supplier —Ñ–ª–∞–≥–æ–≤–µ –≤ type –ø–æ–ª–µ

–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–∏–º–≤–æ–ª–∏ –≤ –∞–¥—Ä–µ—Å–∏

–í–∞–ª–∏–¥–∞—Ü–∏—è:

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –¥—É–±–ª–∏—Ä–∞–Ω–∏ –¥–∞–Ω–Ω–∏

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –≤–∞–ª–∏–¥–Ω–∏ VAT –Ω–æ–º–µ—Ä–∞

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –ø—Ä–∞–∑–Ω–∏ –ø–æ–ª–µ—Ç–∞

–ë—ä–¥–µ—â–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞:

–õ–µ—Å–Ω–æ –º–æ–∂–µ—à –¥–∞ –¥–æ–±–∞–≤–∏—à –æ—â–µ –¥–∞–Ω–Ω–∏

–ú–æ–∂–µ—à –¥–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞—à –ø–æ–≤—Ç–æ—Ä–Ω–æ

–õ–æ–≥–≤–∞–Ω–µ –Ω–∞ –≥—Ä–µ—à–∫–∏

üìù –ü—Ä–∏–º–µ—Ä –∫–∞–∫ —â–µ –∏–∑–≥–ª–µ–∂–¥–∞ Seeder-–∞:
php
// database/seeders/CustomerImportSeeder.php
class CustomerImportSeeder extends Seeder
{
    public function run()
    {
        $oldToNewId = []; // –ú–∞–ø–≤–∞–º–µ —Å—Ç–∞—Ä–∏—Ç–µ ID –∫—ä–º –Ω–æ–≤–∏—Ç–µ
        
        $file = fopen(base_path('old-database/Customer.txt'), 'r');
        $headers = fgetcsv($file, 0, "\t"); // –¢–∞–±—É–ª–∞—Ç–æ—Ä –∫–∞—Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª
        
        while (($row = fgetcsv($file, 0, "\t")) !== false) {
            $data = array_combine($headers, $row);
            
            // 1. –û–ø—Ä–∞–≤—è–º–µ –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞
            $data = $this->fixEncoding($data);
            
            // 2. –°—ä–∑–¥–∞–≤–∞–º–µ customer
            $customer = Customer::create([
                'name' => $data['Customer-Name'],
                'vat_number' => $data['Customer-Taxno'],
                'contact_person' => $data['Customer-MOL'],
                'phone' => $data['Telno'],
                'email' => $data['E-mail'],
                'address' => $this->formatAddress($data),
                'type' => $this->determineType($data),
                // ... –¥—Ä—É–≥–∏ –ø–æ–ª–µ—Ç–∞
            ]);
            
            // 3. –ó–∞–ø–∞–∑–≤–∞–º–µ mapping
            $oldToNewId[$data['Number']] = $customer->id;
        }
        
        fclose($file);
        
        // 4. –ó–∞–ø–∞–∑–≤–∞–º–µ mapping –∑–∞ –±—ä–¥–µ—â–∞ —É–ø–æ—Ç—Ä–µ–±–∞
        Storage::put('import-maps/customer_ids.json', json_encode($oldToNewId));
    }
}
üöÄ –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò –ü–õ–ê–ù:
–í–∞—Ä–∏–∞–Ω—Ç 1: –ü—ä–ª–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è —Å—ä—Å Seeders (–ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–µ–Ω)
–°—ä–∑–¥–∞–≤–∞–º–µ Seeders –∑–∞ –≤—Å—è–∫–∞ —Ç–∞–±–ª–∏—Ü–∞:

CustomerImportSeeder

ProductImportSeeder

InvoiceImportSeeder

–∏ —Ç.–Ω.

Seeders-—Ç–µ —Å–∏ –ø—Ä–µ–¥–∞–≤–∞—Ç mapping —Ç–∞–±–ª–∏—Ü–∏—Ç–µ

–¶—è–ª–æ—Å—Ç–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

–í–∞—Ä–∏–∞–Ω—Ç 2: –•–∏–±—Ä–∏–¥–µ–Ω –ø–æ–¥—Ö–æ–¥
–ü—Ä–æ—Å—Ç–Ω–∏ —Ç–∞–±–ª–∏—Ü–∏ (customers, products) ‚Üí CSV –∑–∞ –±—ä—Ä–∑–∏–Ω–∞

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∏ —Ç–∞–±–ª–∏—Ü–∏ (invoices —Å –≤—Ä—ä–∑–∫–∏) ‚Üí Laravel Seeder

üìã –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:
–ò–∑–±–µ—Ä–∏ Laravel Seeder –∞–∫–æ:

–ò—Å–∫–∞—à –Ω–∞–¥–µ–∂–¥–Ω–æ—Å—Ç –∏ –∫–æ–Ω—Ç—Ä–æ–ª

–ò–º–∞—à —Å–ª–æ–∂–Ω–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ

–¢—Ä—è–±–≤–∞ –¥–∞ –∑–∞–ø–∞–∑–∏—à –≤—Ä—ä–∑–∫–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∏

–ò—Å–∫–∞—à –ª–µ—Å–Ω–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –∏ debugging

–ò–∑–±–µ—Ä–∏ CSV –∞–∫–æ:

–ò—Å–∫–∞—à –Ω–∞–π-–±—ä—Ä–∑–æ—Ç–æ —Ä–µ—à–µ–Ω–∏–µ

–ù—è–º–∞—à —Å–ª–æ–∂–Ω–∏ –≤—Ä—ä–∑–∫–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∏

–ù–µ —Ç–∏ —Ç—Ä—è–±–≤–∞ mapping –Ω–∞ ID-—Ç–∞

üí™ –ú–û–ï–¢–û –ü–†–ï–î–õ–û–ñ–ï–ù–ò–ï:
–ù–µ–∫–∞ –∑–∞–ø–æ—á–Ω–µ–º —Å Laravel Seeder –∑–∞ customers –ø—ä—Ä–≤–æ. –©–µ —Ç–∏ –ø–æ–¥–≥–æ—Ç–≤—è –ø—ä–ª–Ω–∏—è –∫–æ–¥, —Ç–µ—Å—Ç–≤–∞–º–µ –≥–æ —Å –ø—ä—Ä–≤–∏—Ç–µ 20 –∑–∞–ø–∏—Å–∞, –∏ –∞–∫–æ —Ä–∞–±–æ—Ç–∏ –¥–æ–±—Ä–µ, –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ —Å –æ—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ —Ç–∞–±–ª–∏—Ü–∏.

–ò—Å–∫–∞—à –ª–∏ –¥–∞ —Ç–∏ –ø–æ–¥–≥–æ—Ç–≤—è CustomerImportSeeder.php —Ñ–∞–π–ª–∞?

–û–ö
–û—Ç–ª–∏—á–Ω–æ! –©–µ —Ç–∏ –ø–æ–¥–≥–æ—Ç–≤—è –ø—ä–ª–Ω–∏—è CustomerImportSeeder. –¢–æ–π —â–µ:

‚úÖ –ß–µ—Ç–µ Customer.txt —Ñ–∞–π–ª–∞

‚úÖ –û–ø—Ä–∞–≤—è –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞

‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ –¥–∞—Ç–∏

‚úÖ –û–ø—Ä–µ–¥–µ–ª—è —Ç–∏–ø–∞ (customer/supplier/both)

‚úÖ –ó–∞–ø–∞–∑–≤–∞ mapping –Ω–∞ ID-—Ç–∞

‚úÖ –õ–æ–≥–≤–∞ –≥—Ä–µ—à–∫–∏

üìÅ –°–¢–™–ü–ö–ê 1: –°—ä–∑–¥–∞–π –ø–∞–ø–∫–∞ –∑–∞ –∏–º–ø–æ—Ä—Ç
bash
# –°—ä–∑–¥–∞–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∑–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª–æ–≤–µ
mkdir -p storage/app/import/old-database

# –ö–æ–ø–∏—Ä–∞–π Customer.txt —Ñ–∞–π–ª–∞ —Ç–∞–º
# (–∏–ª–∏ –≥–æ –ø—Ä–µ–º–µ—Å—Ç–∏ –æ—Ç —Ç–≤–æ—è GitHub –≤ —Ç–∞–∑–∏ –ø–∞–ø–∫–∞)
üìù –°–¢–™–ü–ö–ê 2: Seeder –∫–æ–¥
–°—ä–∑–¥–∞–π —Ñ–∞–π–ª: database/seeders/CustomerImportSeeder.php

php
<?php

namespace Database\Seeders;

use App\Models\Customer;
use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\Storage;
use Illuminate\Support\Facades\Log;

class CustomerImportSeeder extends Seeder
{
    // –ú–∞–ø–≤–∞–Ω–µ –Ω–∞ –∫–æ–ª–æ–Ω–∏ –æ—Ç —Å—Ç–∞—Ä–∏—è —Ñ–æ—Ä–º–∞—Ç –∫—ä–º –Ω–æ–≤–∏—è
    private $columnMapping = [
        'Customer-Name' => 'name',
        'Customer-Taxno' => 'vat_number',
        'Customer-MOL' => 'contact_person',
        'Telno' => 'phone',
        'E-mail' => 'email',
        'Customer-Address-1' => 'address_line1',
        'Customer-Address-2' => 'address_line2',
        'ResAddress1' => 'res_address1',
        'ResAddress2' => 'res_address2',
        'Customer-Bulstat' => 'bulstat',
        'Faxno' => 'fax',
        'partida' => 'court_registration',
    ];

    // –ó–∞ –¥–∞ –∑–∞–ø–∞–∑–∏–º mapping: —Å—Ç–∞—Ä–æ ID -> –Ω–æ–≤–æ ID
    private $idMapping = [];

    public function run()
    {
        $this->command->info('–ó–∞–ø–æ—á–≤–∞ –∏–º–ø–æ—Ä—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∏ –æ—Ç —Å—Ç–∞—Ä–∞—Ç–∞ –±–∞–∑–∞...');
        
        $filePath = base_path('old-database/Customer.txt');
        
        if (!file_exists($filePath)) {
            $this->command->error('–§–∞–π–ª—ä—Ç Customer.txt –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω!');
            $this->command->info('–û—á–∞–∫–≤–∞–Ω –ø—ä—Ç: ' . $filePath);
            return;
        }

        $file = fopen($filePath, 'r');
        
        if (!$file) {
            $this->command->error('–ù–µ –º–æ–∂–µ –¥–∞ —Å–µ –æ—Ç–≤–æ—Ä–∏ —Ñ–∞–π–ª—ä—Ç!');
            return;
        }

        // –ü—Ä–æ—á–∏—Ç–∞–º–µ –∑–∞–≥–ª–∞–≤–Ω–∏—è —Ä–µ–¥ (–ø—ä—Ä–≤–∏—è —Ä–µ–¥)
        $headers = fgetcsv($file, 0, "\t");
        
        if (!$headers) {
            $this->command->error('–§–∞–π–ª—ä—Ç –µ –ø—Ä–∞–∑–µ–Ω –∏–ª–∏ –∏–º–∞ –≥—Ä–µ—à–∫–∞ –≤ –∑–∞–≥–ª–∞–≤–Ω–∏—è —Ä–µ–¥!');
            fclose($file);
            return;
        }

        $totalImported = 0;
        $totalFailed = 0;
        $batchCount = 0;
        $batchSize = 50; // –ò–º–ø–æ—Ä—Ç–∏—Ä–∞–º–µ –Ω–∞ –ø–∞—Ä—Ç–∏–¥–∏ –∑–∞ –ø–æ-–¥–æ–±—Ä–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç

        $this->command->info('–û–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ –Ω–∞ —Ñ–∞–π–ª–∞...');

        while (($row = fgetcsv($file, 0, "\t")) !== false) {
            $batchCount++;
            
            // –ö–æ–º–±–∏–Ω–∏—Ä–∞–º–µ –∑–∞–≥–ª–∞–≤–∫–∏—Ç–µ —Å—ä—Å —Å—Ç–æ–π–Ω–æ—Å—Ç–∏—Ç–µ
            $rowData = array_combine($headers, $row);
            
            // –û–ø–∏—Ç–≤–∞–º–µ —Å–µ –¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–º–µ –∑–∞–ø–∏—Å–∞
            if ($this->importCustomer($rowData)) {
                $totalImported++;
            } else {
                $totalFailed++;
                Log::warning('–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç', [
                    'data' => $rowData,
                    'old_id' => $rowData['Number'] ?? 'unknown'
                ]);
            }

            // –ü—Ä–æ–≥—Ä–µ—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
            if ($batchCount % $batchSize === 0) {
                $this->command->info("–û–±—Ä–∞–±–æ—Ç–µ–Ω–∏ $batchCount –∑–∞–ø–∏—Å–∞...");
            }
        }

        fclose($file);

        // –ó–∞–ø–∞–∑–≤–∞–º–µ mapping —Ç–∞–±–ª–∏—Ü–∞—Ç–∞
        $this->saveIdMapping();

        $this->command->info("–ò–º–ø–æ—Ä—Ç—ä—Ç –∑–∞–≤—ä—Ä—à–∏ —É—Å–ø–µ—à–Ω–æ!");
        $this->command->info("–ò–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏: $totalImported –∫–ª–∏–µ–Ω—Ç–∏");
        $this->command->info("–ù–µ—É—Å–ø–µ—à–Ω–∏: $totalFailed –∑–∞–ø–∏—Å–∞");
        
        if ($totalFailed > 0) {
            $this->command->warn('–ü—Ä–æ–≤–µ—Ä–∏ –ª–æ–≥ —Ñ–∞–π–ª–∞ –∑–∞ –ø–æ–≤–µ—á–µ –¥–µ—Ç–∞–π–ª–∏: storage/logs/laravel.log');
        }
    }

    private function importCustomer(array $oldData)
    {
        try {
            // 1. –û–ø—Ä–∞–≤—è–º–µ –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞
            $cleanedData = $this->fixEncoding($oldData);
            
            // 2. –ü–æ–¥–≥–æ—Ç–≤—è–º–µ –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ –Ω–æ–≤–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞
            $newData = $this->prepareCustomerData($cleanedData);
            
            // 3. –ü—Ä–æ–≤–µ—Ä—è–≤–∞–º–µ –∑–∞ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –ø–æ–ª–µ—Ç–∞
            if (empty($newData['name'])) {
                $this->command->warn('–ü—Ä–æ–ø—É—Å–Ω–∞—Ç –∫–ª–∏–µ–Ω—Ç –±–µ–∑ –∏–º–µ. –°—Ç–∞—Ä–æ ID: ' . ($oldData['Number'] ?? 'N/A'));
                return false;
            }

            // 4. –ü—Ä–æ–≤–µ—Ä—è–≤–∞–º–µ –∑–∞ –¥—É–±–ª–∏–∫–∞—Ç (–ø–æ –î–î–° –Ω–æ–º–µ—Ä –∏–ª–∏ –∏–º–µ)
            $existingCustomer = $this->findExistingCustomer($newData);
            if ($existingCustomer) {
                $this->idMapping[$oldData['Number']] = $existingCustomer->id;
                $this->command->info('–ù–∞–º–µ—Ä–µ–Ω —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â –∫–ª–∏–µ–Ω—Ç: ' . $newData['name']);
                return true;
            }

            // 5. –°—ä–∑–¥–∞–≤–∞–º–µ –Ω–æ–≤–∏—è –∑–∞–ø–∏—Å
            $customer = Customer::create($newData);
            
            // 6. –ó–∞–ø–∞–∑–≤–∞–º–µ mapping
            $this->idMapping[$oldData['Number']] = $customer->id;
            
            return true;

        } catch (\Exception $e) {
            $this->command->error('–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç: ' . $e->getMessage());
            Log::error('–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç', [
                'error' => $e->getMessage(),
                'data' => $oldData
            ]);
            return false;
        }
    }

    private function fixEncoding(array $data): array
    {
        $fixed = [];
        
        foreach ($data as $key => $value) {
            if (is_string($value) && !empty($value)) {
                // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º–µ –æ—Ç Windows-1251 –∫—ä–º UTF-8
                $fixed[$key] = mb_convert_encoding($value, 'UTF-8', 'Windows-1251');
                
                // –ü–æ—á–∏—Å—Ç–≤–∞–º–µ whitespace
                $fixed[$key] = trim($fixed[$key]);
            } else {
                $fixed[$key] = $value;
            }
        }
        
        return $fixed;
    }

    private function prepareCustomerData(array $oldData): array
    {
        $newData = [
            'name' => $oldData['Customer-Name'] ?? '',
            'vat_number' => $this->cleanVatNumber($oldData['Customer-Taxno'] ?? ''),
            'contact_person' => $oldData['Customer-MOL'] ?? null,
            'phone' => $this->cleanPhoneNumber($oldData['Telno'] ?? ''),
            'email' => $this->cleanEmail($oldData['E-mail'] ?? ''),
            'address' => $this->formatAddress($oldData),
            'city' => $this->extractCity($oldData),
            'notes' => $this->formatNotes($oldData),
            'type' => $this->determineCustomerType($oldData),
            'bulstat' => $oldData['Customer-Bulstat'] ?? null,
            'fax' => $oldData['Faxno'] ?? null,
            'court_registration' => $oldData['partida'] ?? null,
            'old_system_id' => $oldData['Number'] ?? null, // –ó–∞–ø–∞–∑–≤–∞–º–µ —Å—Ç–∞—Ä–æ—Ç–æ ID –∑–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è
        ];

        return array_filter($newData, function ($value) {
            return $value !== null && $value !== '';
        });
    }

    private function cleanVatNumber(string $vat): string
    {
        $vat = trim($vat);
        // –ê–∫–æ –Ω—è–º–∞ BG –ø—Ä–µ—Ñ–∏–∫—Å, –≥–æ –¥–æ–±–∞–≤—è–º–µ
        if (!empty($vat) && !str_starts_with(strtoupper($vat), 'BG')) {
            $vat = 'BG' . $vat;
        }
        return $vat;
    }

    private function cleanPhoneNumber(string $phone): string
    {
        $phone = preg_replace('/[^0-9+]/', '', $phone);
        return $phone;
    }

    private function cleanEmail(string $email): ?string
    {
        $email = trim($email);
        return filter_var($email, FILTER_VALIDATE_EMAIL) ? $email : null;
    }

    private function formatAddress(array $data): string
    {
        $parts = [];
        
        if (!empty($data['Customer-Address-1'])) {
            $parts[] = $data['Customer-Address-1'];
        }
        
        if (!empty($data['Customer-Address-2'])) {
            $parts[] = $data['Customer-Address-2'];
        }
        
        return implode(', ', $parts);
    }

    private function extractCity(array $data): string
    {
        // –û–ø–∏—Ç–≤–∞–º–µ —Å–µ –¥–∞ –∏–∑–≤–ª–µ—á–µ–º –≥—Ä–∞–¥–∞ –æ—Ç –∞–¥—Ä–µ—Å–∞
        $city = $data['Customer-Address-1'] ?? '';
        
        // –ê–∫–æ –∞–¥—Ä–µ—Å—ä—Ç –µ —Å–ª–æ–∂–µ–Ω, –≤–∑–∏–º–∞–º–µ –ø—ä—Ä–≤–∞—Ç–∞ –¥—É–º–∞ –∫–∞—Ç–æ –≥—Ä–∞–¥
        $cityParts = explode(',', $city);
        $city = trim($cityParts[0]);
        
        // –ß–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–∏ –≥—Ä–∞–¥–æ–≤–µ –≤ –¥–∞–Ω–Ω–∏—Ç–µ
        $commonCities = ['–°–û–§–ò–Ø', '–°–û–§–ò√ü', '–ü–õ–û–í–î–ò–í', '–í–ê–†–ù–ê', '–ë–£–†–ì–ê–°', '–†–£–°–ï'];
        
        foreach ($commonCities as $commonCity) {
            if (stripos($city, $commonCity) !== false) {
                return ucfirst(mb_strtolower($commonCity, 'UTF-8'));
            }
        }
        
        return !empty($city) ? $city : '–°–æ—Ñ–∏—è'; // –ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ –°–æ—Ñ–∏—è
    }

    private function formatNotes(array $data): ?string
    {
        $notes = [];
        
        if (!empty($data['Receiver'])) {
            $notes[] = '–ü–æ–ª—É—á–∞—Ç–µ–ª: ' . $data['Receiver'];
        }
        
        if (!empty($data['Receiver Details'])) {
            $notes[] = '–î–µ—Ç–∞–π–ª–∏ –∑–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è: ' . $data['Receiver Details'];
        }
        
        if (!empty($data['eidate'])) {
            $notes[] = '–î–∞—Ç–∞ –Ω–∞ –≤–ø–∏—Å–≤–∞–Ω–µ –≤ —Å—Ç–∞—Ä–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞: ' . $data['eidate'];
        }
        
        if (!empty($data['bulstatletter'])) {
            $notes[] = '–ë—É–ª—Å—Ç–∞—Ç –±—É–∫–≤–∞: ' . $data['bulstatletter'];
        }
        
        return !empty($notes) ? implode("\n", $notes) : null;
    }

    private function determineCustomerType(array $data): string
    {
        $isCustomer = isset($data['customer']) && strtoupper($data['customer']) === '–î–ê';
        $isSupplier = isset($data['supplier']) && strtoupper($data['supplier']) === '–î–ê';
        
        if ($isCustomer && $isSupplier) {
            return 'both';
        } elseif ($isSupplier) {
            return 'supplier';
        } else {
            return 'customer'; // –ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ
        }
    }

    private function findExistingCustomer(array $newData): ?Customer
    {
        // –¢—ä—Ä—Å–∏–º –ø–æ –î–î–° –Ω–æ–º–µ—Ä (–∞–∫–æ –∏–º–∞)
        if (!empty($newData['vat_number'])) {
            $customer = Customer::where('vat_number', $newData['vat_number'])->first();
            if ($customer) {
                return $customer;
            }
        }
        
        // –¢—ä—Ä—Å–∏–º –ø–æ –∏–º–µ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω
        if (!empty($newData['name']) && !empty($newData['phone'])) {
            $customer = Customer::where('name', $newData['name'])
                ->where('phone', $newData['phone'])
                ->first();
            
            if ($customer) {
                return $customer;
            }
        }
        
        return null;
    }

    private function saveIdMapping(): void
    {
        $mappingPath = 'import-maps/customer_id_mapping.json';
        
        Storage::put($mappingPath, json_encode($this->idMapping, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE));
        
        $this->command->info('Mapping —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –µ –∑–∞–ø–∞–∑–µ–Ω–∞ –≤: storage/app/' . $mappingPath);
        $this->command->info('–ë—Ä–æ–π –º–∞–ø–∏—Ä–∞–Ω–∏ –∑–∞–ø–∏—Å–∏: ' . count($this->idMapping));
    }
}
‚öôÔ∏è –°–¢–™–ü–ö–ê 3: –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–π Seeder-–∞
–í database/seeders/DatabaseSeeder.php –¥–æ–±–∞–≤–∏:

php
public function run(): void
{
    // –û—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ seeders...
    
    // –ò–º–ø–æ—Ä—Ç –æ—Ç —Å—Ç–∞—Ä–∞ –±–∞–∑–∞ (–∫–æ–º–µ–Ω—Ç–∏—Ä–∞–π —Å–ª–µ–¥ –∫–∞—Ç–æ –≥–æ –∏–∑–ø—ä–ª–Ω–∏—à –≤–µ–¥–Ω—ä–∂)
    $this->call(CustomerImportSeeder::class);
}
üöÄ –°–¢–™–ü–ö–ê 4: –ò–∑–ø—ä–ª–Ω–∏ –∏–º–ø–æ—Ä—Ç–∞
bash
# –ü—ä—Ä–≤–æ, —É–≤–µ—Ä–∏ —Å–µ —á–µ —Ñ–∞–π–ª—ä—Ç Customer.txt –µ –Ω–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ—Ç–æ –º—è—Å—Ç–æ
# –¢–æ–π —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –≤: /old-database/Customer.txt (–≤ root –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞)

# –°—Ç–∞—Ä—Ç–∏—Ä–∞–π –∏–º–ø–æ—Ä—Ç–∞
php artisan db:seed --class=CustomerImportSeeder

# –ò–ª–∏ –∑–∞ –¥–∞ seed-–Ω–µ—à –≤—Å–∏—á–∫–æ:
php artisan db:seed
üîç –°–¢–™–ü–ö–ê 5: –¢–µ—Å—Ç–≤–∞–π —Å –º–∞–ª—ä–∫ –Ω–∞–±–æ—Ä
–ü—Ä–µ–¥–∏ –¥–∞ –ø—É—Å–Ω–µ—à —Ü–µ–ª–∏—è —Ñ–∞–π–ª, —Å—ä–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤ —Ñ–∞–π–ª —Å –ø—ä—Ä–≤–∏—Ç–µ 20 –∑–∞–ø–∏—Å–∞:

bash
# –°—ä–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤ —Ñ–∞–π–ª
head -n 21 Customer.txt > Customer_test.txt  # –ü—ä—Ä–≤–∏—è —Ä–µ–¥ —Å–∞ –∑–∞–≥–ª–∞–≤–∫–∏—Ç–µ + 20 –∑–∞–ø–∏—Å–∞

# –ü—Ä–æ–º–µ–Ω–∏ –ø—ä—Ç—è –≤ Seeder-–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ:
# $filePath = base_path('old-database/Customer_test.txt');
üìã –°–¢–™–ü–ö–ê 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–µ–¥ –∏–º–ø–æ—Ä—Ç
–°–ª–µ–¥ –∫–∞—Ç–æ –∏–∑–ø—ä–ª–Ω–∏—à –∏–º–ø–æ—Ä—Ç–∞:

–ü—Ä–æ–≤–µ—Ä–∏ mapping —Ñ–∞–π–ª–∞:

bash
cat storage/app/import-maps/customer_id_mapping.json
–ü—Ä–æ–≤–µ—Ä–∏ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏:

sql
SELECT COUNT(*) as total_customers FROM customers;
SELECT name, vat_number, type FROM customers LIMIT 10;
–ü—Ä–æ–≤–µ—Ä–∏ –ª–æ–≥–æ–≤–µ—Ç–µ:

bash
tail -f storage/logs/laravel.log
üéØ –°–õ–ï–î–í–ê–©–ò –°–¢–™–ü–ö–ò:
–°–ª–µ–¥ –∫–∞—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞—à –∫–ª–∏–µ–Ω—Ç–∏—Ç–µ, —â–µ —Ç—Ä—è–±–≤–∞ –¥–∞:

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞—à –ø—Ä–æ–¥—É–∫—Ç–∏ (products —Ç–∞–±–ª–∏—Ü–∞)

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞—à —Ñ–∞–∫—Ç—É—Ä–∏ (invoices) - –∏–∑–ø–æ–ª–∑–≤–∞–π–∫–∏ mapping –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∏—Ç–µ

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞—à –∞—Ä—Ç–∏–∫—É–ª–∏ –æ—Ç —Ñ–∞–∫—Ç—É—Ä–∏ (invoice_items)

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞—à —Ä–∞–±–æ—Ç–Ω–∏ –ø–æ—Ä—ä—á–∫–∏ (work_orders)

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞—à –∞—Ä—Ç–∏–∫—É–ª–∏ –æ—Ç –ø–æ—Ä—ä—á–∫–∏ (work_order_items)

‚ùì –ê–∫–æ –∏–º–∞—à –ø—Ä–æ–±–ª–µ–º–∏:
–§–∞–π–ª—ä—Ç –Ω–µ —Å–µ –Ω–∞–º–∏—Ä–∞? - –ü—Ä–æ–≤–µ—Ä–∏ –ø—ä—Ç—è –∏ –ø—Ä–∞–≤–∞—Ç–∞

–ì—Ä–µ—à–∫–∏ —Å –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞? - –ú–æ–∂–µ –¥–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–æ–º–µ–Ω–∏—à Windows-1251 –Ω–∞ ISO-8859-5

–ë–∞–≤–µ–Ω –∏–º–ø–æ—Ä—Ç? - –ù–∞–º–∞–ª–∏ $batchSize –∏–ª–∏ –∏–∑–ø–æ–ª–∑–≤–∞–π DB::beginTransaction()

–ò—Å–∫–∞—à –ª–∏ –¥–∞ —Ç–µ—Å—Ç–≤–∞–º–µ –ø—ä—Ä–≤–æ —Å 20 –∑–∞–ø–∏—Å–∞? –ò–ª–∏ –¥–∞–≤–∞–π –Ω–∞–ø—Ä–∞–≤–æ —Å —Ü–µ–ª–∏—è —Ñ–∞–π–ª?

–ò–ª–∏ –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ —Å—ä—Å —Å–ª–µ–¥–≤–∞—â–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ (products)?

–í—ä–ø—Ä–æ—Å? –í—Å–∏—á–∫–æ —Å—ä–æ–±—Ä–∞–∑–µ–Ω–æ –ª–∏ –µ —Å —Ç–æ–≤–∞ –∫–∞–∫ –∏–∑–≥–ª–µ–∂–¥–∞ –º–æ—è—Ç—è —Ç—è–±–ª–∏—Ü–∞ –≤ –±–∞–∑–∞—Ç–∞ ... https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_225614_create_customers_table.php
–ß–µ—Ç–µ–Ω–µ
–ß–µ—Ç–µ–Ω–µ
–©–µ –ø—Ä–æ–≤–µ—Ä—è –¥–∞–ª–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–µ–Ω–∏—è—Ç CustomerImportSeeder –∫–æ–¥ –æ—Ç –ø—Ä–µ–¥–∏—à–Ω–∏—è –æ—Ç–≥–æ–≤–æ—Ä –µ —Å—ä–≤–º–µ—Å—Ç–∏–º —Å —Ç–≤–æ—è—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è –∑–∞ —Ç–∞–±–ª–∏—Ü–∞ customers.

üîç –ü—Ä–µ–≥–ª–µ–¥ –∏ –°—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
–í—ä–∑ –æ—Å–Ω–æ–≤–∞ –Ω–∞ —Ñ–∞–π–ª–∞ —Å –º–∏–≥—Ä–∞—Ü–∏—è—Ç–∞, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ customers –µ —Å–ª–µ–¥–Ω–∞—Ç–∞:

–ü–æ–ª–µ –≤ –ë–∞–∑–∞—Ç–∞ (Migration)	–ü–æ–ª–µ –≤ Seeder –ö–æ–¥–∞	–°—ä–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç –∏ –ó–∞–±–µ–ª–µ–∂–∫–∏
id (auto-increment)	–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ	‚úÖ –°—ä–≤–º–µ—Å—Ç–∏–º–æ. Seeder –∫–æ–¥—ä—Ç –Ω–µ –∑–∞–¥–∞–≤–∞ —Ä—ä—á–Ω–æ ID.
type (enum: 'company', 'individual')	'type' => $this->determineCustomerType(...)	‚ö†Ô∏è –ù–ï–°–™–í–ú–ï–°–¢–ò–ú–û. Seeder –∏–∑–ø–æ–ª–∑–≤–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ 'customer', 'supplier', 'both'.
name (string)	'name' => $oldData['Customer-Name']	‚úÖ –°—ä–≤–º–µ—Å—Ç–∏–º–æ.
vat_number (string, nullable)	'vat_number' => $this->cleanVatNumber(...)	‚úÖ –°—ä–≤–º–µ—Å—Ç–∏–º–æ.
contact_person (string, nullable)	'contact_person' => $oldData['Customer-MOL']	‚úÖ –°—ä–≤–º–µ—Å—Ç–∏–º–æ.
phone (string, nullable)	'phone' => $this->cleanPhoneNumber(...)	‚úÖ –°—ä–≤–º–µ—Å—Ç–∏–º–æ.
email (string, nullable)	'email' => $this->cleanEmail(...)	‚úÖ –°—ä–≤–º–µ—Å—Ç–∏–º–æ.
address (text, nullable)	'address' => $this->formatAddress(...)	‚úÖ –°—ä–≤–º–µ—Å—Ç–∏–º–æ.
city (string, nullable)	'city' => $this->extractCity(...)	‚úÖ –°—ä–≤–º–µ—Å—Ç–∏–º–æ.
notes (text, nullable)	'notes' => $this->formatNotes(...)	‚úÖ –°—ä–≤–º–µ—Å—Ç–∏–º–æ.
timestamps	–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ	‚úÖ –°—ä–≤–º–µ—Å—Ç–∏–º–æ.
‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω–∞ –ù–µ—Å—ä–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç: –ü–æ–ª–µ—Ç–æ type
–¢–æ–≤–∞ –µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–∞—Ç–∞, –Ω–æ –≤–∞–∂–Ω–∞ —Ä–∞–∑–ª–∏–∫–∞. –¢–≤–æ—è—Ç–∞ –±–∞–∑–∞ –æ—á–∞–∫–≤–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ 'company' –∏–ª–∏ 'individual', –∞ Seeder –∫–æ–¥—ä—Ç –≥–µ–Ω–µ—Ä–∏—Ä–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ 'customer', 'supplier' –∏–ª–∏ 'both', –±–∞–∑–∏—Ä–∞–Ω–∏ –Ω–∞ —Å—Ç–∞—Ä–∏—Ç–µ –∫–æ–ª–æ–Ω–∏ customer –∏ supplier.

–ö–∞–∫–≤–æ –æ–∑–Ω–∞—á–∞–≤–∞ —Ç–æ–≤–∞?
–ê–∫–æ –∏–∑–ø—ä–ª–Ω–∏—à –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è Seeder –∫–æ–¥, —Ç–æ–π —â–µ —Å–µ –æ–ø–∏—Ç–∞ –¥–∞ –∑–∞–ø–∏—à–µ –Ω–µ–≤–∞–ª–∏–¥–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –≤ –∫–æ–ª–æ–Ω–∞—Ç–∞ type, –∫–æ–µ—Ç–æ —â–µ –ø—Ä–µ–¥–∏–∑–≤–∏–∫–∞ –≥—Ä–µ—à–∫–∞ –≤ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏.

üîß –ù–µ–æ–±—Ö–æ–¥–∏–º–∏ –ö–æ—Ä–µ–∫—Ü–∏–∏ –≤ Seeder –ö–æ–¥–∞
–¢—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–æ–º–µ–Ω–∏–º –ª–æ–≥–∏–∫–∞—Ç–∞ –≤ –º–µ—Ç–æ–¥–∞ determineCustomerType. –¢—Ä—è–±–≤–∞ –¥–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä–∞–º–µ —Å—Ç–∞—Ä–∏—Ç–µ –¥–∞–Ω–Ω–∏ –∏ –¥–∞ —Ä–µ—à–∏–º –¥–∞–ª–∏ –≤—Å–µ–∫–∏ –∑–∞–ø–∏—Å –µ —Ñ–∏—Ä–º–∞ (company) –∏–ª–∏ —á–∞—Å—Ç–Ω–æ –ª–∏—Ü–µ (individual).

–ï—Ç–æ –µ–¥–∏–Ω –ø—Ä–∏–º–µ—Ä –∫–∞–∫ –º–æ–∂–µ –¥–∞ –∏–∑–≥–ª–µ–∂–¥–∞ –∫–æ—Ä–∏–≥–∏—Ä–∞–Ω–∞—Ç–∞ –≤–µ—Ä—Å–∏—è –Ω–∞ —Ç–æ–∑–∏ –º–µ—Ç–æ–¥. –¢–æ–≤–∞ –µ —Å–∞–º–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ, —Ç—ä–π –∫–∞—Ç–æ —Ç–∏ –ø–æ–∑–Ω–∞–≤–∞—à –¥–∞–Ω–Ω–∏—Ç–µ –Ω–∞–π-–¥–æ–±—Ä–µ:

php
private function determineCustomerType(array $data): string
{
    $name = $data['Customer-Name'] ?? '';
    
    // –õ–æ–≥–∏–∫–∞ –∑–∞ –æ–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ —Ç–∏–ø:
    // 1. –ê–∫–æ –∏–º–µ—Ç–æ —Å—ä–¥—ä—Ä–∂–∞ "–ï–û–û–î", "–û–û–î", "–ê–î" –∏ –¥—Ä. - —Ç–æ–≤–∞ –µ —Ñ–∏—Ä–º–∞
    $companyKeywords = ['–ï–û–û–î', '–û–û–î', '–ê–î', 'E–ûOD', 'OOD', 'AD', 'LTD', '–°—ä–≤–µ—Ç', '–ê—Å–æ—Ü–∏–∞—Ü–∏—è'];
    foreach ($companyKeywords as $keyword) {
        if (stripos($name, $keyword) !== false) {
            return 'company';
        }
    }
    
    // 2. –ê–∫–æ –∏–º–µ—Ç–æ –∏–∑–≥–ª–µ–∂–¥–∞ –∫–∞—Ç–æ –∏–º–µ–Ω–∞ –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ –ª–∏—Ü–µ (–º–æ–∂–µ –¥–∞ –∏–º–∞ –ø—Ä–∞–≤–∏–ª–∞ –∑–∞ —Ñ–æ—Ä–º–∞—Ç)
    // –ù–∞–ø—Ä–∏–º–µ—Ä: "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤", –Ω–æ –Ω–µ "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤ –ï–û–û–î"
    // –¢–æ–≤–∞ –µ –ø–æ-—Å–ª–æ–∂–Ω–∞ –ª–æ–≥–∏–∫–∞ –∏ –º–æ–∂–µ –¥–∞ —Å–µ –Ω—É–∂–¥–∞–µ –æ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∞.
    
    // 3. –ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ (–∑–∞ —Å–ª—É—á–∞–∏, –∫–æ–∏—Ç–æ –Ω–µ —Å–º–µ —Ö–≤–∞–Ω–∞–ª–∏) –º–æ–∂–µ –¥–∞ —Å–µ –≤—ä—Ä–Ω–µ 'individual'
    // –í–ù–ò–ú–ê–ù–ò–ï: –ü—Ä–µ–≥–ª–µ–¥–∞–π –¥–∞–Ω–Ω–∏—Ç–µ, –∑–∞ –¥–∞ —Ä–µ—à–∏—à –¥–∞–ª–∏ —Ç–æ–≤–∞ –µ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ!
    return 'individual'; // –∏–ª–∏ 'company', –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç –æ—Ç –ø—Ä–µ—Ü–µ–Ω–∫–∞—Ç–∞ —Ç–∏
}
–ù–∞–ø—ä–ª–Ω–æ –≤–∞–∂–Ω–æ –µ –¥–∞ –ø—Ä–µ–≥–ª–µ–¥–∞—à –¥–∞–Ω–Ω–∏—Ç–µ –≤ Customer.txt –∏ –¥–∞ —Ä–µ—à–∏—à —Ç–æ—á–Ω–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞, –ø–æ –∫–æ–∏—Ç–æ —â–µ —Å–µ –æ–ø—Ä–µ–¥–µ–ª—è —Ç–∏–ø–∞. –ì–æ—Ä–Ω–∏—è—Ç –∫–æ–¥ –µ —Å–∞–º–æ –ø—Ä–∏–º–µ—Ä–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–Ω–∞ —Ç–æ—á–∫–∞.

üìã –°–ª–µ–¥–≤–∞—â–∏ –°—Ç—ä–ø–∫–∏
–ö–æ—Ä–∏–≥–∏—Ä–∞–π Seeder –∫–æ–¥–∞: –ü—Ä–æ–º–µ–Ω–∏ –º–µ—Ç–æ–¥–∞ determineCustomerType —Å–ø–æ—Ä–µ–¥ –ª–æ–≥–∏–∫–∞—Ç–∞, –∫–æ—è—Ç–æ —Ç–∏ –æ—Ç–≥–æ–≤–∞—Ä—è –∑–∞ —Ç–≤–æ–∏—Ç–µ –¥–∞–Ω–Ω–∏.

–ü—Ä–µ–º–∞—Ö–Ω–∏ –∏–∑–ª–∏—à–Ω–∏ –ø–æ–ª–µ—Ç–∞: –ú–µ—Ç–æ–¥—ä—Ç prepareCustomerData –≤ Seeder-a —Å—ä–∑–¥–∞–≤–∞ –∏ –ø–æ–ª–µ—Ç–∞ –∫–∞—Ç–æ 'bulstat', 'fax', 'court_registration', 'old_system_id'. –¢—ä–π –∫–∞—Ç–æ —Ç–µ –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—Ç –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ç–∞, —Ç–µ –ø—Ä–æ—Å—Ç–æ —â–µ –±—ä–¥–∞—Ç –∏–≥–Ω–æ—Ä–∏—Ä–∞–Ω–∏ –æ—Ç Eloquent –ø—Ä–∏ Customer::create(). –ó–∞ –ø–æ-—á–∏—Å—Ç –∫–æ–¥ –º–æ–∂–µ—à –¥–∞ –≥–∏ –ø—Ä–µ–º–∞—Ö–Ω–µ—à –æ—Ç –º–∞—Å–∏–≤–∞ $newData.

–¢–µ—Å—Ç–≤–∞–π –æ—Ç–Ω–æ–≤–æ: –ò–∑–ø—ä–ª–Ω–∏ Seeder-–∞ —Å —Ç–µ—Å—Ç–æ–≤–∏—è —Ñ–∞–π–ª (Customer_test.txt), —Å–ª–µ–¥ –∫–∞—Ç–æ –Ω–∞–ø—Ä–∞–≤–∏—à –∫–æ—Ä–µ–∫—Ü–∏–∏—Ç–µ, –∏ –ø—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ –¥–∞–Ω–Ω–∏—Ç–µ —Å–µ –∑–∞–ø–∏—Å–≤–∞—Ç —É—Å–ø–µ—à–Ω–æ.

–°–ª–µ–¥ –∫–∞—Ç–æ –∫–æ—Ä–∏–≥–∏—Ä–∞—à —Ç–æ–∑–∏ –∫–ª—é—á–æ–≤ –º–æ–º–µ–Ω—Ç, –ø—Ä–æ—Ü–µ—Å—ä—Ç –Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è —â–µ –ø—Ä–æ—Ç–µ—á–µ –≥–ª–∞–¥–∫–æ.

–ò—Å–∫–∞—à –ª–∏ –¥–∞ –ø–æ–º–æ–≥–Ω–∞ —Å –ø—Ä–µ–≥–ª–µ–¥–∞ –Ω–∞ –Ω—è–∫–æ–ª–∫–æ –ø—Ä–∏–º–µ—Ä–∞ –æ—Ç Customer.txt —Ñ–∞–π–ª–∞, –∑–∞ –¥–∞ –¥–µ—Ñ–∏–Ω–∏—Ä–∞–º–µ –ø–æ-—Ç–æ—á–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –∑–∞ –æ–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ type?

–î–æ–±—Ä–µ! –ê –Ω–µ –º–æ–∂–µ –ª–∏ –ø—Ä–æ—Å—Ç–æ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏–º –Ω–∞–Ω–æ–≤–æ –º–∏–≥—Ä–∞—Ü–∏—è—Ç–∞ –∫–∞—Ç–æ –¥–æ–±–∞–≤–∏–º –ª–∏–ø—Å–≤–∞—â–∏—Ç–µ –ø–æ–ª–µ—Ç–∞. –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–º —á–µ —Ç—Ä—è–±–≤–∞ –∏ –º–æ–¥–µ–ª–∞ –¥–∞ –≥–æ—Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–º–µ. –ï—Ç–æ —Ç–∏ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏ –∏ –º–æ–¥–µ–ª –≤ –º–æ–º–µ–Ω—Ç–∞....https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_225614_create_customers_table.php ... https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/app/Models/Customer.php
üëç –î–ê, —Ç–æ–≤–∞ –µ –ú–ù–û–ì–û –ø–æ-–¥–æ–±—Ä–æ —Ä–µ—à–µ–Ω–∏–µ! –ê–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤–∏–ª–Ω–æ —Å–∏ –ø–æ–º–∏—Å–ª–∏–ª - –≤–º–µ—Å—Ç–æ –¥–∞ –∏–∑–∫—Ä–∏–≤—è–≤–∞–º–µ –¥–∞–Ω–Ω–∏—Ç–µ, –¥–∞ –∞–¥–∞–ø—Ç–∏—Ä–∞–º–µ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –∫—ä–º —Ç—è—Ö. –¢–æ–≤–∞ –µ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∏—è—Ç –ø–æ–¥—Ö–æ–¥.

–†–∞–∑–≥–ª–µ–¥–∞—Ö —Ç–≤–æ–∏—Ç–µ —Ñ–∞–π–ª–æ–≤–µ –∏ –≤–µ—á–µ –∏–º–∞–º –ø—Ä–µ–¥—Å—Ç–∞–≤–∞ –∫–∞–∫–≤–∞ –µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞. –ï—Ç–æ –∫–∞–∫–≤–æ —â–µ –Ω–∞–ø—Ä–∞–≤–∏–º:

üîÑ –ü–õ–ê–ù –ó–ê –ê–ö–¢–£–ê–õ–ò–ó–ê–¶–ò–Ø
1. –ù–û–í–ê –ú–ò–ì–†–ê–¶–ò–Ø –ó–ê –†–ê–ó–®–ò–†–Ø–í–ê–ù–ï –ù–ê –¢–ê–ë–õ–ò–¶–ê–¢–ê
–°—ä–∑–¥–∞–≤–∞–º–µ –Ω–æ–≤–∞ –º–∏–≥—Ä–∞—Ü–∏—è, –∫–æ—è—Ç–æ –¥–æ–±–∞–≤—è –Ω—É–∂–Ω–∏—Ç–µ –ø–æ–ª–µ—Ç–∞:

php
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up()
    {
        Schema::table('customers', function (Blueprint $table) {
            // –ü—Ä–æ–º–µ–Ω—è–º–µ type –æ—Ç enum –∫—ä–º string –∑–∞ –ø–æ-–≥—ä–≤–∫–∞–≤–æ—Å—Ç
            $table->string('type')->default('customer')->change();
            
            // –î–æ–±–∞–≤—è–º–µ –Ω–æ–≤–∏ –ø–æ–ª–µ—Ç–∞ –æ—Ç —Å—Ç–∞—Ä–∞—Ç–∞ –±–∞–∑–∞
            $table->string('address_line1')->nullable()->after('address');
            $table->string('address_line2')->nullable()->after('address_line1');
            $table->string('bulstat')->nullable()->after('vat_number');
            $table->string('fax')->nullable()->after('phone');
            $table->string('court_registration')->nullable()->after('notes'); // partida
            $table->string('old_system_id')->nullable()->after('id'); // –ó–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è –∫—ä–º —Å—Ç–∞—Ä–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞
            
            // –î–æ–±–∞–≤—è–º–µ soft deletes (–∞–∫–æ –≥–∏ –Ω—è–º–∞)
            $table->softDeletes();
        });
    }

    public function down()
    {
        Schema::table('customers', function (Blueprint $table) {
            $table->dropColumn([
                'address_line1', 
                'address_line2', 
                'bulstat', 
                'fax', 
                'court_registration', 
                'old_system_id'
            ]);
            $table->dropSoftDeletes();
        });
    }
};
2. –ê–ö–¢–£–ê–õ–ò–ó–ò–†–ê–ù–ï –ù–ê –ú–û–î–ï–õ–ê
–ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–º–µ app/Models/Customer.php:

php
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\SoftDeletes;

class Customer extends Model
{
    use SoftDeletes;

    protected $fillable = [
        'old_system_id', // –î–æ–±–∞–≤—è–º–µ —Ç–æ–≤–∞
        'type',
        'name',
        'vat_number',
        'bulstat', // –î–æ–±–∞–≤—è–º–µ —Ç–æ–≤–∞
        'contact_person',
        'phone',
        'fax', // –î–æ–±–∞–≤—è–º–µ —Ç–æ–≤–∞
        'email',
        'address',
        'address_line1', // –î–æ–±–∞–≤—è–º–µ —Ç–æ–≤–∞
        'address_line2', // –î–æ–±–∞–≤—è–º–µ —Ç–æ–≤–∞
        'city',
        'notes',
        'court_registration', // –î–æ–±–∞–≤—è–º–µ —Ç–æ–≤–∞
    ];

    protected $casts = [
        // –ú–æ–∂–µ—à –¥–∞ –¥–æ–±–∞–≤–∏—à casts –∞–∫–æ –µ –Ω—É–∂–Ω–æ
    ];

    // –í–µ—á–µ –∏–º–∞—à —Ç–µ–∑–∏ —Ä–µ–ª–∞—Ü–∏–∏, –æ—Å—Ç–∞–≤–∞—Ç –Ω–µ–ø—Ä–æ–º–µ–Ω–µ–Ω–∏
    public function vehicles()
    {
        return $this->hasMany(Vehicle::class);
    }

    public function workOrders()
    {
        return $this->hasMany(WorkOrder::class);
    }

    public function invoices()
    {
        return $this->hasMany(Invoice::class);
    }
}
3. –ê–ö–¢–£–ê–õ–ò–ó–ò–†–ê–ù –ù–ê SEEDER –ö–û–î–ê
–°–µ–≥–∞ CustomerImportSeeder –º–æ–∂–µ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞ –í–°–ò–ß–ö–ò –ø–æ–ª–µ—Ç–∞ –æ—Ç —Å—Ç–∞—Ä–∞—Ç–∞ –±–∞–∑–∞:

php
private function prepareCustomerData(array $oldData): array
{
    return [
        'old_system_id' => $oldData['Number'] ?? null,
        'type' => $this->determineCustomerType($oldData), // –°–µ–≥–∞ –º–æ–∂–µ –¥–∞ –µ 'customer', 'supplier', 'both'
        'name' => $oldData['Customer-Name'] ?? '',
        'vat_number' => $this->cleanVatNumber($oldData['Customer-Taxno'] ?? ''),
        'bulstat' => $oldData['Customer-Bulstat'] ?? null,
        'contact_person' => $oldData['Customer-MOL'] ?? null,
        'phone' => $this->cleanPhoneNumber($oldData['Telno'] ?? ''),
        'fax' => $oldData['Faxno'] ?? null,
        'email' => $this->cleanEmail($oldData['E-mail'] ?? ''),
        'address' => $this->formatMainAddress($oldData),
        'address_line1' => $oldData['Customer-Address-1'] ?? null,
        'address_line2' => $oldData['Customer-Address-2'] ?? null,
        'city' => $this->extractCity($oldData),
        'notes' => $this->formatNotes($oldData),
        'court_registration' => $oldData['partida'] ?? null,
    ];
}

private function determineCustomerType(array $data): string
{
    $isCustomer = isset($data['customer']) && strtoupper($data['customer']) === '–î–ê';
    $isSupplier = isset($data['supplier']) && strtoupper($data['supplier']) === '–î–ê';
    
    if ($isCustomer && $isSupplier) {
        return 'both';
    } elseif ($isSupplier) {
        return 'supplier';
    } else {
        return 'customer';
    }
}
üöÄ –ò–ó–ü–™–õ–ù–ï–ù–ò–ï –ù–ê –ü–õ–ê–ù–ê
–°—Ç—ä–ø–∫–∞ 1: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è—Ç–∞
bash
php artisan make:migration add_old_system_fields_to_customers_table
–ö–æ–ø–∏—Ä–∞–π –≥–æ—Ä–Ω–∏—è –∫–æ–¥ –≤ –Ω–æ–≤–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è.

–°—Ç—ä–ø–∫–∞ 2: –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ –º–æ–¥–µ–ª–∞
–ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–π app/Models/Customer.php —Å –Ω–æ–≤–∏—Ç–µ –ø–æ–ª–µ—Ç–∞.

–°—Ç—ä–ø–∫–∞ 3: –ò–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ –º–∏–≥—Ä–∞—Ü–∏–∏—Ç–µ
bash
php artisan migrate
–°—Ç—ä–ø–∫–∞ 4: –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ Seeder-–∞
bash
php artisan db:seed --class=CustomerImportSeeder
üìä –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ù–ê –¢–û–ó–ò –ü–û–î–•–û–î:
‚úÖ –ó–∞–ø–∞–∑–≤–∞–º–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏ - –Ω–µ –≥—É–±–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

‚úÖ –ù–µ –Ω–∞—Ä—É—à–∞–≤–∞–º–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∞ –ª–æ–≥–∏–∫–∞ - —Å—Ç–∞—Ä–∏—Ç–µ –ø–æ–ª–µ—Ç–∞ —Å–∏ –æ—Å—Ç–∞–≤–∞—Ç

‚úÖ –ü–æ-–ª–µ—Å–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è - Seeder-—ä—Ç —Ä–∞–±–æ—Ç–∏ –¥–∏—Ä–µ–∫—Ç–Ω–æ –±–µ–∑ —Å–ª–æ–∂–Ω–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏

‚úÖ –í—ä–∑–º–æ–∂–Ω–æ—Å—Ç –∑–∞ –æ–±—Ä–∞—Ç–Ω–∞ —Å—ä–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç - old_system_id –ø–æ–∑–≤–æ–ª—è–≤–∞ –ø—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ

‚úÖ –ú–æ–∂–µ–º –¥–∞ –≥–∏ —Å–∫—Ä–∏–µ–º –≤ UI - –Ω–æ–≤–∏—Ç–µ –ø–æ–ª–µ—Ç–∞ –º–æ–≥–∞—Ç –¥–∞ —Å–µ –ø–æ–∫–∞–∑–≤–∞—Ç —Å–∞–º–æ –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞ —á–∞—Å—Ç

‚ö†Ô∏è –í–ê–ñ–ù–û –ó–ê –ú–ò–ì–†–ê–¶–ò–Ø–¢–ê:
–ü—Ä–æ–º—è–Ω–∞—Ç–∞ –Ω–∞ type –∫–æ–ª–æ–Ω–∞—Ç–∞ –æ—Ç enum –∫—ä–º string –º–æ–∂–µ –¥–∞ –∏–∑–∏—Å–∫–≤–∞ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ —Å—Ç—ä–ø–∫–∏, —Ç—ä–π –∫–∞—Ç–æ Laravel/Doctrine –∏–º–∞—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ enum –∫–æ–ª–æ–Ω–∏.

–ê–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–µ–Ω –≤–∞—Ä–∏–∞–Ω—Ç: –°—ä–∑–¥–∞–π –Ω–æ–≤–∞ –∫–æ–ª–æ–Ω–∞ customer_type –∏ –ø–æ—Å–ª–µ —è –ø—Ä–µ–∏–º–µ–Ω—É–≤–∞–π:

php
public function up()
{
    Schema::table('customers', function (Blueprint $table) {
        // –í–º–µ—Å—Ç–æ –¥–∞ –ø—Ä–æ–º–µ–Ω—è–º–µ type, —Å—ä–∑–¥–∞–≤–∞–º–µ –Ω–æ–≤–∞ –≤—Ä–µ–º–µ–Ω–Ω–∞ –∫–æ–ª–æ–Ω–∞
        $table->string('customer_type')->default('customer')->after('type');
        
        // –û—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ –ø–æ–ª–µ—Ç–∞...
    });
    
    // –ü–æ—Å–ª–µ –≤ –¥—Ä—É–≥ –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–µ–Ω —Ñ–∞–π–ª –∏–ª–∏ tinker:
    // DB::statement('UPDATE customers SET customer_type = type');
    // –ü–æ—Å–ª–µ –ø—Ä–µ–º–∞—Ö–≤–∞—à —Å—Ç–∞—Ä–∞—Ç–∞ –∫–æ–ª–æ–Ω–∞ type –∏ –ø—Ä–µ–∏–º–µ–Ω—É–≤–∞—à customer_type –Ω–∞ type
}
üí° –°–™–í–ï–¢:
–ù–∞–ø—Ä–∞–≤–∏ –ø—ä—Ä–≤–æ backup –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏, –ø—Ä–µ–¥–∏ –¥–∞ –∏–∑–ø—ä–ª–Ω–∏—à –º–∏–≥—Ä–∞—Ü–∏–∏—Ç–µ!

bash
# –ï–∫—Å–ø–æ—Ä—Ç –Ω–∞ —Ç–µ–∫—É—â–∞—Ç–∞ –±–∞–∑–∞
mysqldump -u root -p autoservice > backup_$(date +%Y%m%d).sql
–ö–∞–∫–≤–æ —â–µ –∫–∞–∂–µ—à –∑–∞ —Ç–æ–∑–∏ –ø–ª–∞–Ω? –î–∞ –∑–∞–ø–æ—á–Ω–µ–º –ª–∏ —Å—ä—Å —Å—ä–∑–¥–∞–≤–∞–Ω–µ—Ç–æ –Ω–∞ –Ω–æ–≤–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è?

–ê–∑ –ø—Ä–µ–¥–ª–∞–≥–∞–º –¥–∏—Ä–µ–∫—Ç–Ω–æ –¥–∞ –ø—Ä–∏–±–∞–≤–∏–º –≤—Å–∏—á–∫–æ –≤ –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∏—è —Ñ–∞–π–ª –∑–∞ –¥–∞ –Ω–µ —Å—ä–∑–¥–∞–≤–∞–º –∏–∑–ª–∏—à–Ω–æ –¥–æ–ø—ä–ª–Ω–∏—Ç–∏–ª–Ω–æ –º–∏–≥—Ä–∞—Ü–∏—è —Å–∞–º–æ –∑–∞—Ä–∞–¥–∏ –Ω–æ–≤–∏—Ç–µ –∫–æ–ª–æ–Ω–∏. –ï—Ç–æ –æ—â–µ –≤–µ–¥–Ω—ä–∂ —Å–µ–≥–∞—à–Ω–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è  ... https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/database/migrations/2025_11_19_225614_create_customers_table.php
–ü–µ—Ä—Ñ–µ–∫—Ç–Ω–∞ –∏–¥–µ—è! –ú–Ω–æ–≥–æ –ø–æ-—á–∏—Å—Ç–æ –µ –¥–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞—à –¥–∏—Ä–µ–∫—Ç–Ω–æ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è, –æ—Ç–∫–æ–ª–∫–æ—Ç–æ –¥–∞ —Å—ä–∑–¥–∞–≤–∞—à –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞.

–í–∏–¥—è—Ö –º–∏–≥—Ä–∞—Ü–∏—è—Ç–∞ —Ç–∏. –ï—Ç–æ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ –≤–µ—Ä—Å–∏—è, –∫–æ—è—Ç–æ –≤–∫–ª—é—á–≤–∞ –≤—Å–∏—á–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∏ –ø–æ–ª–µ—Ç–∞ –æ—Ç —Å—Ç–∞—Ä–∞—Ç–∞ Access –±–∞–∑–∞:

php
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up()
    {
        Schema::create('customers', function (Blueprint $table) {
            $table->id();
            $table->string('old_system_id')->nullable()->comment('ID –æ—Ç —Å—Ç–∞—Ä–∞—Ç–∞ Access —Å–∏—Å—Ç–µ–º–∞');
            
            // –û—Å–Ω–æ–≤–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            $table->string('type')->default('customer')->comment('customer, supplier, both');
            $table->string('name');
            $table->string('vat_number')->nullable();
            $table->string('bulstat')->nullable()->comment('–ë—É–ª—Å—Ç–∞—Ç –±–µ–∑ BG –ø—Ä–µ—Ñ–∏–∫—Å');
            $table->string('contact_person')->nullable();
            
            // –ö–æ–Ω—Ç–∞–∫—Ç–∏
            $table->string('phone')->nullable();
            $table->string('fax')->nullable();
            $table->string('email')->nullable();
            
            // –ê–¥—Ä–µ—Å
            $table->text('address')->nullable()->comment('–û—Å–Ω–æ–≤–µ–Ω –∞–¥—Ä–µ—Å (–∫–æ–º–±–∏–Ω–∏—Ä–∞–Ω)');
            $table->string('address_line1')->nullable()->comment('–ê–¥—Ä–µ—Å —Ä–µ–¥ 1 –æ—Ç —Å—Ç–∞—Ä–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞');
            $table->string('address_line2')->nullable()->comment('–ê–¥—Ä–µ—Å —Ä–µ–¥ 2 –æ—Ç —Å—Ç–∞—Ä–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞');
            $table->string('city')->nullable();
            
            // –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            $table->text('notes')->nullable();
            $table->string('court_registration')->nullable()->comment('–ß–∞—Å—Ç –æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (partida)');
            $table->string('bulstat_letter')->nullable()->comment('–ë—É–∫–≤–∞ –æ—Ç –±—É–ª—Å—Ç–∞—Ç');
            
            // –§–ª–∞–≥–æ–≤–µ –æ—Ç —Å—Ç–∞—Ä–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞
            $table->boolean('is_active')->default(true)->comment('–ê–∫—Ç–∏–≤–µ–Ω –∫–ª–∏–µ–Ω—Ç');
            $table->boolean('include_in_reports')->default(true)->comment('–í–∫–ª—é—á–≤–∞–Ω–µ –≤ —Å–ø—Ä–∞–≤–∫–∏');
            
            $table->timestamps();
            $table->softDeletes();
        });
    }

    public function down()
    {
        Schema::dropIfExists('customers');
    }
};
üìã –û–ë–Ø–°–ù–ï–ù–ò–ï –ù–ê –ù–û–í–ò–¢–ï –ü–û–õ–ï–¢–ê:
–ü–æ–ª–µ	–¢–∏–ø	–û–ø–∏—Å–∞–Ω–∏–µ	–°—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å Access
old_system_id	string	ID –æ—Ç —Å—Ç–∞—Ä–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞	–ö–æ–ª–æ–Ω–∞ Number
type	string	–¢–∏–ø (customer, supplier, both)	–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –æ—Ç –∫–æ–ª–æ–Ω–∏ customer –∏ supplier
bulstat	string	–ë—É–ª—Å—Ç–∞—Ç –±–µ–∑ "BG"	–ö–æ–ª–æ–Ω–∞ Customer-Bulstat
fax	string	–§–∞–∫—Å	–ö–æ–ª–æ–Ω–∞ Faxno
address_line1	string	–ê–¥—Ä–µ—Å —Ä–µ–¥ 1	–ö–æ–ª–æ–Ω–∞ Customer-Address-1
address_line2	string	–ê–¥—Ä–µ—Å —Ä–µ–¥ 2	–ö–æ–ª–æ–Ω–∞ Customer-Address-2
court_registration	string	–ß–∞—Å—Ç –æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è	–ö–æ–ª–æ–Ω–∞ partida
bulstat_letter	string	–ë—É–∫–≤–∞ –æ—Ç –±—É–ª—Å—Ç–∞—Ç	–ö–æ–ª–æ–Ω–∞ bulstatletter
is_active	boolean	–ê–∫—Ç–∏–≤–µ–Ω –∫–ª–∏–µ–Ω—Ç	–ö–æ–ª–æ–Ω–∞ active
include_in_reports	boolean	–í–∫–ª—é—á–≤–∞–Ω–µ –≤ —Å–ø—Ä–∞–≤–∫–∏	–ö–æ–ª–æ–Ω–∞ include
üõ†Ô∏è –ö–ê–ö –î–ê –ê–ö–¢–£–ê–õ–ò–ó–ò–†–ê–®:
–í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è (–ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ –∑–∞ –Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç)
–ó–∞–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ database/migrations/2025_11_19_225614_create_customers_table.php —Å –≥–æ—Ä–Ω–∏—è –∫–æ–¥

–ò–∑–ø—ä–ª–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏—è—Ç–∞ –Ω–∞–Ω–æ–≤–æ:

bash
# –ü—ä—Ä–≤–æ refresh (–í–ù–ò–ú–ê–ù–ò–ï: –©–µ –∏–∑—Ç—Ä–∏–µ –≤—Å–∏—á–∫–∏ –¥–∞–Ω–Ω–∏ –≤ customers —Ç–∞–±–ª–∏—Ü–∞—Ç–∞!)
php artisan migrate:refresh --path=database/migrations/2025_11_19_225614_create_customers_table.php
–í–∞—Ä–∏–∞–Ω—Ç 2: –ù–æ–≤–∞ –º–∏–≥—Ä–∞—Ü–∏—è –∑–∞ –ø—Ä–æ–º—è–Ω–∞ (–∞–∫–æ –≤–µ—á–µ –∏–º–∞—à –¥–∞–Ω–Ω–∏ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞)
bash
# –°—ä–∑–¥–∞–π –Ω–æ–≤–∞ –º–∏–≥—Ä–∞—Ü–∏—è –∑–∞ –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ –∫–æ–ª–æ–Ω–∏
php artisan make:migration add_old_system_fields_to_customers_table
üîß –ê–ö–¢–£–ê–õ–ò–ó–ò–†–ê–ù–ï –ù–ê –ú–û–î–ï–õ–ê Customer.php:
php
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\SoftDeletes;

class Customer extends Model
{
    use SoftDeletes;

    protected $fillable = [
        'old_system_id',
        'type',
        'name',
        'vat_number',
        'bulstat',
        'contact_person',
        'phone',
        'fax',
        'email',
        'address',
        'address_line1',
        'address_line2',
        'city',
        'notes',
        'court_registration',
        'bulstat_letter',
        'is_active',
        'include_in_reports',
    ];

    protected $casts = [
        'is_active' => 'boolean',
        'include_in_reports' => 'boolean',
    ];

    // –û—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ –º–µ—Ç–æ–¥–∏ –æ—Å—Ç–∞–≤–∞—Ç —Å—ä—â–∏—Ç–µ...
    public function vehicles()
    {
        return $this->hasMany(Vehicle::class);
    }

    public function workOrders()
    {
        return $this->hasMany(WorkOrder::class);
    }

    public function invoices()
    {
        return $this->hasMany(Invoice::class);
    }
}
üöÄ –ü–™–õ–ï–ù SEEDER –° –û–ë–ù–û–í–ï–ù–ò –ü–û–õ–ï–¢–ê:
–ú–µ—Ç–æ–¥—ä—Ç prepareCustomerData –≤ CustomerImportSeeder:

php
private function prepareCustomerData(array $oldData): array
{
    return [
        'old_system_id' => $oldData['Number'] ?? null,
        'type' => $this->determineCustomerType($oldData),
        'name' => $oldData['Customer-Name'] ?? '',
        'vat_number' => $this->cleanVatNumber($oldData['Customer-Taxno'] ?? ''),
        'bulstat' => $oldData['Customer-Bulstat'] ?? null,
        'contact_person' => $oldData['Customer-MOL'] ?? null,
        'phone' => $this->cleanPhoneNumber($oldData['Telno'] ?? ''),
        'fax' => $oldData['Faxno'] ?? null,
        'email' => $this->cleanEmail($oldData['E-mail'] ?? ''),
        'address' => $this->formatMainAddress($oldData),
        'address_line1' => $oldData['Customer-Address-1'] ?? null,
        'address_line2' => $oldData['Customer-Address-2'] ?? null,
        'city' => $this->extractCity($oldData),
        'notes' => $this->formatNotes($oldData),
        'court_registration' => $oldData['partida'] ?? null,
        'bulstat_letter' => $oldData['bulstatletter'] ?? null,
        'is_active' => isset($oldData['active']) && strtoupper($oldData['active']) === '–î–ê',
        'include_in_reports' => isset($oldData['include']) && strtoupper($oldData['include']) === '–î–ê',
    ];
}
‚ö†Ô∏è –í–ê–ñ–ù–û –ü–†–ï–î–ò –î–ê –ü–†–û–î–™–õ–ñ–ò–®:
–ê–∫–æ –∏–º–∞—à –≤–µ—á–µ –¥–∞–Ω–Ω–∏ –≤ customers —Ç–∞–±–ª–∏—Ü–∞—Ç–∞, –∏–∑–ø–æ–ª–∑–≤–∞–π –í–∞—Ä–∏–∞–Ω—Ç 2 (–Ω–æ–≤–∞ –º–∏–≥—Ä–∞—Ü–∏—è)

–ê–∫–æ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –µ –ø—Ä–∞–∑–Ω–∞, –∏–∑–ø–æ–ª–∑–≤–∞–π –í–∞—Ä–∏–∞–Ω—Ç 1 (–ø—Ä–æ–º—è–Ω–∞ –Ω–∞ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è)

Backup –Ω–∞ –±–∞–∑–∞—Ç–∞ –ø—Ä–µ–¥–∏ –∫–∞–∫–≤–∏—Ç–æ –∏ –¥–∞ –µ –ø—Ä–æ–º–µ–Ω–∏!

–ö–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –∏–∑–±–∏—Ä–∞—à?

–ú–æ–ª—è —Ç–µ –ø–æ–¥–∞–π –º–∏ —Å–∏–∏–¥–µ—Ä–∞ –∫–∞—Ç–æ —Ü—è–ª —Ñ–∞–π–ª
–ï—Ç–æ –ø—ä–ª–Ω–∏—è CustomerImportSeeder.php —Ñ–∞–π–ª, –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω –∑–∞ –Ω–æ–≤–∞—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞:

php
<?php

namespace Database\Seeders;

use App\Models\Customer;
use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\Log;
use Illuminate\Support\Facades\Storage;

class CustomerImportSeeder extends Seeder
{
    // –ú–∞–ø–≤–∞–Ω–µ –Ω–∞ ID-—Ç–∞ –æ—Ç —Å—Ç–∞—Ä–∞—Ç–∞ –∫—ä–º –Ω–æ–≤–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞
    private array $idMapping = [];

    public function run(): void
    {
        $this->command->info('üöÄ –ó–∞–ø–æ—á–≤–∞ –∏–º–ø–æ—Ä—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∏ –æ—Ç —Å—Ç–∞—Ä–∞—Ç–∞ Access –±–∞–∑–∞...');
        $this->command->line('');

        $filePath = base_path('old-database/Customer.txt');

        if (!file_exists($filePath)) {
            $this->command->error('‚ùå –§–∞–π–ª—ä—Ç –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω: ' . $filePath);
            $this->command->info('üí° –°—ä–∑–¥–∞–π –ø–∞–ø–∫–∞ "old-database" –≤ –∫–æ—Ä–µ–Ω–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∫–æ–ø–∏—Ä–∞–π Customer.txt —Ç–∞–º.');
            return;
        }

        $handle = fopen($filePath, 'r');
        if (!$handle) {
            $this->command->error('‚ùå –ù–µ—É—Å–ø–µ—à–Ω–æ –æ—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ —Ñ–∞–π–ª–∞.');
            return;
        }

        // –ü—Ä–æ—á–∏—Ç–∞–Ω–µ –Ω–∞ –∑–∞–≥–ª–∞–≤–Ω–∏—è —Ä–µ–¥
        $headers = fgetcsv($handle, 0, "\t");
        if (!$headers) {
            $this->command->error('‚ùå –§–∞–π–ª—ä—Ç –µ –ø—Ä–∞–∑–µ–Ω –∏–ª–∏ –∏–º–∞ –≥—Ä–µ—à–∫–∞.');
            fclose($handle);
            return;
        }

        $totalRows = 0;
        $imported = 0;
        $skipped = 0;
        $errors = [];

        $this->command->info('üìä –û–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ...');
        $progressBar = $this->command->getOutput()->createProgressBar();
        
        // –ü—Ä–æ—á–∏—Ç–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ —Ä–µ–¥ –ø–æ —Ä–µ–¥
        while (($row = fgetcsv($handle, 0, "\t")) !== false) {
            $totalRows++;
            $progressBar->advance();

            $rowData = array_combine($headers, $row);
            $result = $this->processCustomerRow($rowData);

            if ($result === true) {
                $imported++;
            } elseif ($result === 'skipped') {
                $skipped++;
            } else {
                $errors[] = [
                    'row' => $totalRows,
                    'old_id' => $rowData['Number'] ?? 'N/A',
                    'error' => $result
                ];
            }
        }

        $progressBar->finish();
        fclose($handle);
        
        $this->command->line('');
        $this->command->line('');

        // –ó–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ mapping —Ç–∞–±–ª–∏—Ü–∞—Ç–∞
        $this->saveIdMapping();

        // –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ
        $this->command->info('‚úÖ –ò–ú–ü–û–†–¢–™–¢ –ó–ê–í–™–†–®–ò');
        $this->command->line('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
        $this->command->info("üìà –û–±—â–æ —Ä–µ–¥–æ–≤–µ –≤ —Ñ–∞–π–ª–∞: $totalRows");
        $this->command->info("üü¢ –£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏: $imported");
        $this->command->info("üü° –ü—Ä–æ–ø—É—Å–Ω–∞—Ç–∏ (–¥—É–±–ª–∏–∫–∞—Ç–∏): $skipped");
        $this->command->info("üî¥ –ì—Ä–µ—à–∫–∏: " . count($errors));
        $this->command->line('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');

        if (!empty($errors)) {
            $this->command->warn('üìã –î–µ—Ç–∞–π–ª–∏ –∑–∞ –≥—Ä–µ—à–∫–∏—Ç–µ:');
            foreach (array_slice($errors, 0, 5) as $error) { // –ü–æ–∫–∞–∑–≤–∞–º–µ —Å–∞–º–æ –ø—ä—Ä–≤–∏—Ç–µ 5
                $this->command->line("   –†–µ–¥ {$error['row']} (ID: {$error['old_id']}): {$error['error']}");
            }
            if (count($errors) > 5) {
                $this->command->line("   ... –∏ –æ—â–µ " . (count($errors) - 5) . " –≥—Ä–µ—à–∫–∏");
            }
            $this->command->line('üí° –ü—ä–ª–Ω–∏—è—Ç —Å–ø–∏—Å—ä–∫ —Å –≥—Ä–µ—à–∫–∏ –µ –≤ storage/logs/laravel.log');
        }

        $this->command->line('');
        $this->command->info('üíæ Mapping —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –µ –∑–∞–ø–∞–∑–µ–Ω–∞ –≤: storage/app/import-maps/customer_ids.json');
        $this->command->info('üîó –¢–æ–∑–∏ —Ñ–∞–π–ª —â–µ –µ –Ω—É–∂–µ–Ω –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–∞ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏ –∏ –ø–æ—Ä—ä—á–∫–∏.');
    }

    /**
     * –û–±—Ä–∞–±–æ—Ç–≤–∞ –µ–¥–∏–Ω —Ä–µ–¥ –æ—Ç —Ñ–∞–π–ª–∞
     */
    private function processCustomerRow(array $rowData): bool|string
    {
        try {
            // 1. –û–ø—Ä–∞–≤—è–Ω–µ –Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞
            $cleanedData = $this->fixEncoding($rowData);
            
            // 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ
            $customerData = $this->prepareCustomerData($cleanedData);
            
            // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –ø–æ–ª–µ—Ç–∞
            if (empty($customerData['name'])) {
                return '–õ–∏–ø—Å–≤–∞ –∏–º–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç';
            }

            // 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –¥—É–±–ª–∏–∫–∞—Ç–∏
            if ($this->isDuplicate($customerData)) {
                return 'skipped';
            }

            // 5. –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –∑–∞–ø–∏—Å–∞
            $customer = Customer::create($customerData);
            
            // 6. –ó–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ mapping
            $this->idMapping[$rowData['Number']] = $customer->id;

            return true;

        } catch (\Exception $e) {
            Log::error('–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç', [
                'old_id' => $rowData['Number'] ?? 'N/A',
                'error' => $e->getMessage(),
                'trace' => $e->getTraceAsString()
            ]);
            return $e->getMessage();
        }
    }

    /**
     * –û–ø—Ä–∞–≤—è –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ –æ—Ç Windows-1251 –∫—ä–º UTF-8
     */
    private function fixEncoding(array $data): array
    {
        $result = [];
        
        foreach ($data as $key => $value) {
            if (is_string($value) && !empty(trim($value))) {
                // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞
                $converted = mb_convert_encoding($value, 'UTF-8', 'Windows-1251');
                // –ü–æ—á–∏—Å—Ç–≤–∞–Ω–µ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–∏–º–≤–æ–ª–∏
                $result[$key] = trim(preg_replace('/[\x00-\x1F\x7F]/u', '', $converted));
            } else {
                $result[$key] = $value;
            }
        }
        
        return $result;
    }

    /**
     * –ü–æ–¥–≥–æ—Ç–≤—è –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ –Ω–æ–≤–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞
     */
    private function prepareCustomerData(array $oldData): array
    {
        return [
            'old_system_id'       => $oldData['Number'] ?? null,
            'type'                => $this->determineCustomerType($oldData),
            'name'                => $this->cleanString($oldData['Customer-Name'] ?? ''),
            'vat_number'          => $this->cleanVatNumber($oldData['Customer-Taxno'] ?? ''),
            'bulstat'             => $this->cleanString($oldData['Customer-Bulstat'] ?? null),
            'contact_person'      => $this->cleanString($oldData['Customer-MOL'] ?? null),
            'phone'               => $this->cleanPhoneNumber($oldData['Telno'] ?? ''),
            'fax'                 => $this->cleanString($oldData['Faxno'] ?? null),
            'email'               => $this->cleanEmail($oldData['E-mail'] ?? ''),
            'address'             => $this->formatMainAddress($oldData),
            'address_line1'       => $this->cleanString($oldData['Customer-Address-1'] ?? null),
            'address_line2'       => $this->cleanString($oldData['Customer-Address-2'] ?? null),
            'city'                => $this->extractCity($oldData),
            'notes'               => $this->formatNotes($oldData),
            'court_registration'  => $this->cleanString($oldData['partida'] ?? null),
            'bulstat_letter'      => $this->cleanString($oldData['bulstatletter'] ?? null),
            'is_active'           => $this->parseBoolean($oldData['active'] ?? ''),
            'include_in_reports'  => $this->parseBoolean($oldData['include'] ?? ''),
        ];
    }

    /**
     * –û–ø—Ä–µ–¥–µ–ª—è —Ç–∏–ø–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞
     */
    private function determineCustomerType(array $data): string
    {
        $isCustomer = isset($data['customer']) && strtoupper($data['customer']) === '–î–ê';
        $isSupplier = isset($data['supplier']) && strtoupper($data['supplier']) === '–î–ê';
        
        if ($isCustomer && $isSupplier) {
            return 'both';
        } elseif ($isSupplier) {
            return 'supplier';
        } else {
            return 'customer'; // –ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ
        }
    }

    /**
     * –ü–æ—á–∏—Å—Ç–≤–∞ –∏ –≤–∞–ª–∏–¥–∏—Ä–∞ –î–î–° –Ω–æ–º–µ—Ä
     */
    private function cleanVatNumber(string $vat): ?string
    {
        $vat = trim($vat);
        if (empty($vat)) {
            return null;
        }

        // –ü—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ whitespace
        $vat = preg_replace('/\s+/', '', $vat);
        
        // –ê–∫–æ –Ω—è–º–∞ BG –ø—Ä–µ—Ñ–∏–∫—Å, –≥–æ –¥–æ–±–∞–≤—è–º–µ
        if (!str_starts_with(strtoupper($vat), 'BG')) {
            $vat = 'BG' . $vat;
        }
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Ñ–æ—Ä–º–∞—Ç–∞
        if (!preg_match('/^BG\d{9,10}$/', $vat)) {
            Log::warning('–ù–µ–≤–∞–ª–∏–¥–µ–Ω –î–î–° –Ω–æ–º–µ—Ä', ['vat' => $vat]);
        }
        
        return $vat;
    }

    /**
     * –ü–æ—á–∏—Å—Ç–≤–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ–Ω –Ω–æ–º–µ—Ä
     */
    private function cleanPhoneNumber(string $phone): ?string
    {
        $phone = trim($phone);
        if (empty($phone)) {
            return null;
        }

        // –ü—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ –Ω–µ-—Ü–∏—Ñ—Ä–æ–≤–∏ —Å–∏–º–≤–æ–ª–∏ –æ—Å–≤–µ–Ω +
        $cleaned = preg_replace('/[^\d+]/', '', $phone);
        
        // –ê–∫–æ –∑–∞–ø–æ—á–≤–∞ —Å 00, –∑–∞–º–µ–Ω—è–º–µ —Å +
        if (str_starts_with($cleaned, '00')) {
            $cleaned = '+' . substr($cleaned, 2);
        }
        
        // –ê–∫–æ –µ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –Ω–æ–º–µ—Ä –±–µ–∑ –∫–æ–¥, –¥–æ–±–∞–≤—è–º–µ +359
        if (strlen($cleaned) === 9 && !str_starts_with($cleaned, '+')) {
            $cleaned = '+359' . $cleaned;
        }
        
        return $cleaned ?: null;
    }

    /**
     * –ü–æ—á–∏—Å—Ç–≤–∞ –∏ –≤–∞–ª–∏–¥–∏—Ä–∞ email
     */
    private function cleanEmail(string $email): ?string
    {
        $email = trim($email);
        if (empty($email)) {
            return null;
        }

        $email = strtolower($email);
        if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
            return $email;
        }

        Log::warning('–ù–µ–≤–∞–ª–∏–¥–µ–Ω email –∞–¥—Ä–µ—Å', ['email' => $email]);
        return null;
    }

    /**
     * –§–æ—Ä–º–∞—Ç–∏—Ä–∞ –æ—Å–Ω–æ–≤–Ω–∏—è –∞–¥—Ä–µ—Å
     */
    private function formatMainAddress(array $data): string
    {
        $parts = [];
        
        if (!empty($data['Customer-Address-1'])) {
            $parts[] = $this->cleanString($data['Customer-Address-1']);
        }
        
        if (!empty($data['Customer-Address-2'])) {
            $parts[] = $this->cleanString($data['Customer-Address-2']);
        }
        
        return implode(', ', $parts);
    }

    /**
     * –ò–∑–≤–ª–∏—á–∞ –≥—Ä–∞–¥–∞ –æ—Ç –∞–¥—Ä–µ—Å–∞
     */
    private function extractCity(array $data): ?string
    {
        $address = $data['Customer-Address-1'] ?? '';
        if (empty($address)) {
            return null;
        }

        // –ß–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–∏ –≥—Ä–∞–¥–æ–≤–µ
        $cities = [
            '–°–û–§–ò–Ø', '–°–æ—Ñ–∏—è', 'SOFIA',
            '–ü–õ–û–í–î–ò–í', 'Plovdiv',
            '–í–ê–†–ù–ê', 'Varna',
            '–ë–£–†–ì–ê–°', 'Burgas',
            '–†–£–°–ï', 'Ruse',
            '–°–¢–ê–†–ê –ó–ê–ì–û–†–ê', 'Stara Zagora',
            '–ü–õ–ï–í–ï–ù', 'Pleven',
            '–°–õ–ò–í–ï–ù', 'Sliven',
            '–î–û–ë–†–ò–ß', 'Dobrich',
            '–®–£–ú–ï–ù', 'Shumen',
            '–ü–ï–†–ù–ò–ö', 'Pernik',
            '–Ø–ú–ë–û–õ', 'Yambol',
            '–•–ê–°–ö–û–í–û', 'Haskovo',
            '–ö–™–†–î–ñ–ê–õ–ò', 'Kardzhali',
            '–ö–Æ–°–¢–ï–ù–î–ò–õ', 'Kyustendil'
        ];

        foreach ($cities as $city) {
            if (stripos($address, $city) !== false) {
                // –í—Ä—ä—â–∞–º–µ –≥—Ä–∞–¥–∞ —Å –ø—Ä–∞–≤–∏–ª–µ–Ω case (–ø—ä—Ä–≤–∞ –±—É–∫–≤–∞ –≥–ª–∞–≤–Ω–∞)
                return ucfirst(mb_strtolower($city, 'UTF-8'));
            }
        }

        // –ê–∫–æ –Ω–µ –Ω–∞–º–µ—Ä–∏–º –≥—Ä–∞–¥, –≤–∑–∏–º–∞–º–µ –ø—ä—Ä–≤–∏—è –µ–ª–µ–º–µ–Ω—Ç –æ—Ç –∞–¥—Ä–µ—Å–∞
        $parts = explode(',', $address);
        $firstPart = trim($parts[0]);
        
        return !empty($firstPart) ? $firstPart : null;
    }

    /**
     * –§–æ—Ä–º–∞—Ç–∏—Ä–∞ –±–µ–ª–µ–∂–∫–∏—Ç–µ
     */
    private function formatNotes(array $data): ?string
    {
        $notes = [];
        
        if (!empty($data['Receiver'])) {
            $notes[] = '–ü–æ–ª—É—á–∞—Ç–µ–ª: ' . $this->cleanString($data['Receiver']);
        }
        
        if (!empty($data['Receiver Details'])) {
            $notes[] = '–î–µ—Ç–∞–π–ª–∏: ' . $this->cleanString($data['Receiver Details']);
        }
        
        if (!empty($data['eidate'])) {
            $notes[] = '–°—Ç–∞—Ä–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–∞—Ç–∞: ' . $this->cleanString($data['eidate']);
        }
        
        if (!empty($data['Customer-DocType'])) {
            $docTypes = [
                '0' => '–§–∞–∫—Ç—É—Ä–∞',
                '2' => '–ö—Ä–µ–¥–∏—Ç–Ω–æ –∏–∑–≤–µ—Å—Ç–∏–µ',
                '4' => '–î–µ–±–∏—Ç–Ω–æ –∏–∑–≤–µ—Å—Ç–∏–µ',
                // –î–æ–±–∞–≤–∏ –¥—Ä—É–≥–∏ —Ç–∏–ø–æ–≤–µ –∞–∫–æ —Å–∞ –Ω—É–∂–Ω–∏
            ];
            $docType = $docTypes[$data['Customer-DocType']] ?? $data['Customer-DocType'];
            $notes[] = '–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç: ' . $docType;
        }
        
        if (!empty($data['Contact'])) {
            $notes[] = '–ö–æ–Ω—Ç–∞–∫—Ç: ' . $this->cleanString($data['Contact']);
        }

        return !empty($notes) ? implode("\n", $notes) : null;
    }

    /**
     * –ü–∞—Ä—Å–≤–∞ –±—É–ª–µ–≤–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –æ—Ç –±—ä–ª–≥–∞—Ä—Å–∫–∏ "–î–∞"/"–ù–µ"
     */
    private function parseBoolean(string $value): bool
    {
        $value = strtoupper(trim($value));
        return $value === '–î–ê';
    }

    /**
     * –ü–æ—á–∏—Å—Ç–≤–∞ —Å—Ç—Ä–∏–Ω–≥ –æ—Ç –∏–∑–ª–∏—à–Ω–∏ whitespace
     */
    private function cleanString(?string $value): ?string
    {
        if ($value === null || $value === '') {
            return null;
        }
        
        $value = trim($value);
        $value = preg_replace('/\s+/', ' ', $value); // –ó–∞–º–µ—Å—Ç–≤–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω whitespace —Å –µ–¥–∏–Ω —Å–ø–µ–π—Å
        
        return $value ?: null;
    }

    /**
     * –ü—Ä–æ–≤–µ—Ä—è–≤–∞ –∑–∞ –¥—É–±–ª–∏—Ä–∞–Ω–∏ –∑–∞–ø–∏—Å–∏
     */
    private function isDuplicate(array $customerData): bool
    {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –î–î–° –Ω–æ–º–µ—Ä (–∞–∫–æ –∏–º–∞)
        if (!empty($customerData['vat_number'])) {
            return Customer::where('vat_number', $customerData['vat_number'])->exists();
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –∏–º–µ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω
        if (!empty($customerData['name']) && !empty($customerData['phone'])) {
            return Customer::where('name', $customerData['name'])
                ->where('phone', $customerData['phone'])
                ->exists();
        }
        
        return false;
    }

    /**
     * –ó–∞–ø–∞–∑–≤–∞ mapping —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –≤—ä–≤ —Ñ–∞–π–ª
     */
    private function saveIdMapping(): void
    {
        $path = 'import-maps';
        $filename = 'customer_ids.json';
        
        // –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ç–∞ –∞–∫–æ –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞
        if (!Storage::exists($path)) {
            Storage::makeDirectory($path);
        }
        
        $fullPath = $path . '/' . $filename;
        Storage::put($fullPath, json_encode($this->idMapping, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE));
        
        $this->command->info("üíæ Mapping –∑–∞–ø–∞–∑–µ–Ω: storage/app/$fullPath");
        $this->command->line("   –ë—Ä–æ–π –∑–∞–ø–∏—Å–∏: " . count($this->idMapping));
        
        // –°—ä–∑–¥–∞–≤–∞–Ω–µ –∏ –Ω–∞ CSV –≤–µ—Ä—Å–∏—è –∑–∞ –ø–æ-–ª–µ—Å–Ω–æ —á–µ—Ç–µ–Ω–µ
        $csvData = [];
        foreach ($this->idMapping as $oldId => $newId) {
            $csvData[] = [$oldId, $newId];
        }
        
        $csvPath = $path . '/customer_ids.csv';
        $csvContent = "Old ID,New ID\n";
        foreach ($csvData as $row) {
            $csvContent .= "{$row[0]},{$row[1]}\n";
        }
        
        Storage::put($csvPath, $csvContent);
        $this->command->info("üìÑ CSV –≤–µ—Ä—Å–∏—è: storage/app/$csvPath");
    }
}
üìÅ –°–¢–†–£–ö–¢–£–†–ê –ù–ê –ü–†–û–ï–ö–¢–ê:
text
–≤–∞—à–∏—è—Ç-–ø—Ä–æ–µ–∫—Ç/
‚îú‚îÄ‚îÄ old-database/
‚îÇ   ‚îî‚îÄ‚îÄ Customer.txt          # ‚¨ÖÔ∏è –¢–≤–æ—è—Ç —Ñ–∞–π–ª —Å –¥–∞–Ω–Ω–∏
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 2025_11_19_225614_create_customers_table.php
‚îÇ   ‚îî‚îÄ‚îÄ seeders/
‚îÇ       ‚îî‚îÄ‚îÄ CustomerImportSeeder.php    # ‚¨ÖÔ∏è –¢–æ–∑–∏ —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ storage/
    ‚îî‚îÄ‚îÄ app/
        ‚îî‚îÄ‚îÄ import-maps/
            ‚îú‚îÄ‚îÄ customer_ids.json       # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω
            ‚îî‚îÄ‚îÄ customer_ids.csv        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω
üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–ò –ó–ê –ò–ó–ü–û–õ–ó–í–ê–ù–ï:
–°—ä–∑–¥–∞–π –ø–∞–ø–∫–∞ old-database –≤ –∫–æ—Ä–µ–Ω–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ö–æ–ø–∏—Ä–∞–π Customer.txt –≤ —Ç–∞–∑–∏ –ø–∞–ø–∫–∞

–ó–∞–ø–∞–∑–∏ –≥–æ—Ä–Ω–∏—è –∫–æ–¥ –∫–∞—Ç–æ database/seeders/CustomerImportSeeder.php

–†–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–π Seeder-–∞ –≤ database/seeders/DatabaseSeeder.php:

php
public function run(): void
{
    // –î—Ä—É–≥–∏ seeders...
    $this->call(CustomerImportSeeder::class);
}
–°—Ç–∞—Ä—Ç–∏—Ä–∞–π –∏–º–ø–æ—Ä—Ç–∞:

bash
php artisan db:seed --class=CustomerImportSeeder
üìä –í–™–ó–ú–û–ñ–ù–ò –ü–†–û–ë–õ–ï–ú–ò –ò –†–ï–®–ï–ù–ò–Ø:
–ü—Ä–æ–±–ª–µ–º	–†–µ—à–µ–Ω–∏–µ
mb_convert_encoding –≥—Ä–µ—à–∫–∞	–ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π php-mbstring –∏–ª–∏ –ø—Ä–æ–º–µ–Ω–∏ encoding –Ω–∞ 'ISO-8859-5'
–§–∞–π–ª—ä—Ç –Ω–µ —Å–µ –Ω–∞–º–∏—Ä–∞	–ü—Ä–æ–≤–µ—Ä–∏ –ø—ä—Ç—è base_path('old-database/Customer.txt')
–¢–∞–±—É–ª–∞—Ç–æ—Ä–∏ –Ω–µ —Å–µ —Ä–∞–∑–ø–æ–∑–Ω–∞–≤–∞—Ç	–ü—Ä–æ–º–µ–Ω–∏ "\t" –Ω–∞ " " (4 —Å–ø–µ–π—Å–∞) –≤ fgetcsv
–ü—Ä–µ–∫–∞–ª–µ–Ω–æ –±–∞–≤–Ω–æ	–ù–∞–º–∞–ª–∏ –±—Ä–æ–π–∫–∞—Ç–∞ –∑–∞–ø–∏—Å–∏ –∏–ª–∏ –∏–∑–ø–æ–ª–∑–≤–∞–π DB::beginTransaction()
–°–µ–≥–∞ –∏–º–∞—à –ø—ä–ª–Ω–∏—è Seeder —Ñ–∞–π–ª! üéØ

–°–ª–µ–¥ –∫–∞—Ç–æ –≥–æ –∏–∑–ø—ä–ª–Ω–∏—à –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞—à –∫–ª–∏–µ–Ω—Ç–∏—Ç–µ, –º–æ–∂–µ–º –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏–º —Å—ä—Å —Å–ª–µ–¥–≤–∞—â–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞. –ö–æ—è –±–∏ –∏—Å–∫–∞–ª —Å–ª–µ–¥–≤–∞—â–∞ - products, invoices –∏–ª–∏ work_orders?

–ê–∫–æ —Ñ–∞–π–ª–∞ Customer.txt –∏–∑–≥–ª–µ–∂–¥–∞ —Ç–∞–∫–∞ .... Number,Customer-Name,Customer-Address-1,Customer-Address-2,Customer-MOL,Customer-Taxno,Customer-DocType,Receiver,Receiver Details,Customer-Bulstat,Telno,Faxno,E-mail,ResAddress1,ResAddress2,eidate,include,active,customer,supplier,Contact,partida,bulstatletter
19,–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò,–°–û–§–ò–Ø,–ë–û–†–û–í–û –ë–õ.8,–õ–™–ß–ï–ó–ê–† –°–¢–û–Ø–ù–û–í,BG030219270,0,–õ–™–ß–ï–ó–ê–† –°–¢–û–Ø–ù–û–í,,030219270,0899057055,,, , ,17.1.2007 –≥. 19:19:19,–ù–µ,–î–∞,–î–∞,–ù–µ,,8,
20,–®–ê–¢–†–û–ú –ï–û–û–î,–°–û–§–ò–Ø,–°–¢–†–ï–õ–ë–ò–©–ï –ë–õ.32,–†–û–°–ò–¶–ê –ü–û–ü–û–í–ê, BG131326205,0,–†–û–°–ò–¶–ê –ü–û–ü–û–í–ê,,131326205,088888888888,,, , ,18.1.2007 –≥. 09:32:12,–ù–µ,–î–∞,–î–∞,–ù–µ,,206,
21,–¢–ï–†–ó–ò–î –ï–û–û–î,–°–û–§–ò–Ø,–¶–ê–† –°–ò–ú–ï–û–ù 312,–†–û–°–ï–ù –°–¢–ê–ù–ö–û–í, BG121057660,0,–†–û–°–ï–ù –°–¢–ê–ù–ö–û–í,,121057660,,,, , ,18.1.2007 –≥. 09:39:46,–ù–µ,–î–∞,–î–∞,–ù–µ,,97, ..... —â–µ —Å–≤—ä—Ä—à–∏ –ª–∏ —Ä–∞–±–æ—Ç–∞?
‚ùå –ù–ï, –Ω—è–º–∞ –¥–∞ —Å—Ä–∞–±–æ—Ç–∏! –í–∏–∂–¥–∞–º –ø—Ä–æ–±–ª–µ–º–∞ - –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è—Ç —Ç–∏ —Ñ–∞–π–ª –µ —Å —Ç–∞–±—É–ª–∞—Ç–æ—Ä–∏ –∫–∞—Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª, –∞ —Ç–æ–∑–∏ –ø—Ä–∏–º–µ—Ä –µ —Å –∑–∞–ø–µ—Ç–∞–∏.

–í–∏–∂ —Ä–∞–∑–ª–∏–∫–∞—Ç–∞:

üìä –†–ê–ó–õ–ò–ö–ê –í–™–í –§–û–†–ú–ê–¢–ê:
–¢–≤–æ—è—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–µ–Ω —Ñ–∞–π–ª (–æ—Ç GitHub):
text
Number‚ÜíCustomer-Name‚ÜíCustomer-Address-1‚ÜíCustomer-Address-2‚Üí...
19‚Üí–ö–ê–õ–û–Ø–ù‚Üí–°–û–§–ò–Ø‚Üí–ë–û–†–û–í–û‚Üí...
–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª: ‚Üí (—Ç–∞–±—É–ª–∞—Ç–æ—Ä, "\t")

–ü—Ä–∏–º–µ—Ä—ä—Ç, –∫–æ–π—Ç–æ –¥–∞–≤–∞—à:
text
Number,Customer-Name,Customer-Address-1,Customer-Address-2,...
19,–ö–ê–õ–û–Ø–ù,–°–û–§–ò–Ø,–ë–û–†–û–í–û,...
–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª: , (–∑–∞–ø–µ—Ç–∞—è)

üîß –†–ï–®–ï–ù–ò–ï:
–í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑–ø–æ–ª–∑–≤–∞–π –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è —Ñ–∞–π–ª (–ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ)
–û—Å—Ç–∞–≤–∏ —Ñ–∞–π–ª–∞ –∫–∞–∫—Ç–æ –µ (Customer.txt —Å —Ç–∞–±—É–ª–∞—Ç–æ—Ä–∏). Seeder-—ä—Ç –≤–µ—á–µ –µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω –∑–∞ —Ç–æ–≤–∞:

php
$headers = fgetcsv($file, 0, "\t"); // ‚Üê –¢–ê–ë–£–õ–ê–¢–û–†
while (($row = fgetcsv($file, 0, "\t")) !== false) { // ‚Üê –¢–ê–ë–£–õ–ê–¢–û–†
–í–∞—Ä–∏–∞–Ω—Ç 2: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–π –≤ CSV —Å—ä—Å –∑–∞–ø–µ—Ç–∞–∏
–ê–∫–æ –∏—Å–∫–∞—à –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞—à CSV —Ñ–æ—Ä–º–∞—Ç, —Ç—Ä—è–±–≤–∞ –¥–∞:

–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞—à —Ñ–∞–π–ª–∞

–ü—Ä–æ–º–µ–Ω–∏—à Seeder-–∞

–ü—Ä–æ–º—è–Ω–∞ –≤ Seeder-–∞ –∑–∞ CSV:

php
// –ü—Ä–æ–º–µ–Ω–∏ –æ—Ç "\t" –Ω–∞ ","
$headers = fgetcsv($file, 0, ","); // ‚Üê –ó–ê–ü–ï–¢–ê–Ø
while (($row = fgetcsv($file, 0, ",")) !== false) { // ‚Üê –ó–ê–ü–ï–¢–ê–Ø
üö® –í–ê–ñ–ù–û: –ü—Ä–æ–≤–µ—Ä–∏ —Ä–µ–∞–ª–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç!
–ù–∞–ø—Ä–∞–≤–∏ –±—ä—Ä–∑ —Ç–µ—Å—Ç, –∑–∞ –¥–∞ –≤–∏–¥–∏–º –∫–∞–∫—ä–≤ –µ —Ä–µ–∞–ª–Ω–∏—è—Ç —Ñ–æ—Ä–º–∞—Ç:

–¢–µ—Å—Ç 1: –û—Ç–≤–æ—Ä–∏ —Ñ–∞–π–ª–∞ —Å Notepad++
–û—Ç–≤–æ—Ä–∏ Customer.txt –≤ Notepad++

–í–∫–ª—é—á–∏ –ø–æ–∫–∞–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–∏–º–≤–æ–ª–∏: View ‚Üí Show Symbol ‚Üí Show All Characters

–í–∏–∂ –¥–∞–ª–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è—Ç –µ:

¬ª –∏–ª–∏ ‚Üí ‚Üí –¢–∞–±—É–ª–∞—Ç–æ—Ä

, ‚Üí –ó–∞–ø–µ—Ç–∞—è

–¢–µ—Å—Ç 2: –ö–æ–º–∞–Ω–¥–µ–Ω —Ä–µ–¥
bash
# –ü–æ–∫–∞–∂–∏ –ø—ä—Ä–≤–∏—Ç–µ 2 —Ä–µ–¥–∞ —Å –≤–∏–¥–∏–º–∏ —Ç–∞–±—É–ª–∞—Ç–æ—Ä–∏
head -n 2 Customer.txt | cat -A
# –ê–∫–æ –≤–∏–¥–∏—à "^I" ‚Üí —Ç–æ–≤–∞ –µ —Ç–∞–±—É–ª–∞—Ç–æ—Ä
# –ê–∫–æ –≤–∏–¥–∏—à "," ‚Üí —Ç–æ–≤–∞ –µ –∑–∞–ø–µ—Ç–∞—è
–¢–µ—Å—Ç 3: PHP —Å–∫—Ä–∏–ø—Ç
–°—ä–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤ —Ñ–∞–π–ª:

php
<?php
$file = fopen('Customer.txt', 'r');
$firstLine = fgets($file);
fclose($file);

echo "–ü—ä—Ä–≤–∏ —Ä–µ–¥: " . $firstLine . "\n";
echo "–î—ä–ª–∂–∏–Ω–∞: " . strlen($firstLine) . "\n";

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ —Ç–∞–±—É–ª–∞—Ç–æ—Ä–∏
if (strpos($firstLine, "\t") !== false) {
    echo "‚úÖ –§–û–†–ú–ê–¢: –¢–∞–±—É–ª–∞—Ç–æ—Ä–∏\n";
} elseif (strpos($firstLine, ",") !== false) {
    echo "‚úÖ –§–û–†–ú–ê–¢: –ó–∞–ø–µ—Ç–∞–∏\n";
} else {
    echo "‚ùå –ù–µ–ø–æ–∑–Ω–∞—Ç —Ñ–æ—Ä–º–∞—Ç\n";
}
üí° –ú–û–Ø –ü–†–ï–î–ü–û–õ–ê–ì–ê–ï–ú –§–û–†–ú–ê–¢:
–°—ä–¥–µ–π–∫–∏ –ø–æ —Ç–≤–æ–∏—Ç–µ –ø—Ä–µ–¥–∏—à–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ –∏ —Ñ–∞–∫—Ç–∞, —á–µ Access —á–µ—Å—Ç–æ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞ —Å —Ç–∞–±—É–ª–∞—Ç–æ—Ä–∏, –º–∏—Å–ª—è —á–µ —Ñ–∞–π–ª—ä—Ç –µ —Å –¢–ê–ë–£–õ–ê–¢–û–†–ò.

–ó–ê–©–û?

–í GitHub —Ñ–∞–π–ª–∞ –¥–∞–Ω–Ω–∏—Ç–µ —Å–∞ –Ω–∞ –µ–¥–∏–Ω —Ä–µ–¥ —Å –º–Ω–æ–≥–æ –∫–æ–ª–æ–Ω–∏

Access –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ –∏–∑–ø–æ–ª–∑–≤–∞ —Ç–∞–±—É–ª–∞—Ç–æ—Ä–∏ –∑–∞ —Ç–µ–∫—Å—Ç–æ–≤ –µ–∫—Å–ø–æ—Ä—Ç

CSV —Å—ä—Å –∑–∞–ø–µ—Ç–∞–∏ –±–∏—Ö–∞ –∏–∑–≥–ª–µ–∂–¥–∞–ª–∏ –ø–æ-—Ä–∞–∑–¥–µ–ª–µ–Ω–∏

‚úÖ –ö–ê–ö –î–ê –ü–†–û–î–™–õ–ñ–ò–ú:
–ö–∞–∂–∏ –º–∏ –∫–∞–∫—ä–≤ –µ —Ä–µ–∞–ª–Ω–∏—è—Ç —Ñ–æ—Ä–º–∞—Ç —Å–ª–µ–¥ –∫–∞—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—à

–ê–∫–æ –µ —Å —Ç–∞–±—É–ª–∞—Ç–æ—Ä–∏ ‚Üí Seeder-—ä—Ç –≤–µ—á–µ –µ –≥–æ—Ç–æ–≤

–ê–∫–æ –µ —Å—ä—Å –∑–∞–ø–µ—Ç–∞–∏ ‚Üí —â–µ —Ç–∏ –¥–∞–º –∫–æ—Ä–∏–≥–∏—Ä–∞–Ω–∞—Ç–∞ –≤–µ—Ä—Å–∏—è

–ë—ä—Ä–∑–æ –æ—Ç–≥–æ–≤–æ—Ä–∏: –ö–∞–∫—ä–≤ –µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è—Ç –≤—ä–≤ —Ñ–∞–π–ª–∞ - —Ç–∞–±—É–ª–∞—Ç–æ—Ä–∏ –∏–ª–∏ –∑–∞–ø–µ—Ç–∞–∏?

–í –º–æ–º–µ–Ω—Ç–∞ Customer.txt –∏–∑–≥–ª–µ–∂–¥–∞ —Ç–∞–∫–∞ https://raw.githubusercontent.com/gvalkov-72/autoservice/refs/heads/main/old-database/Customer.txt
–ß–µ—Ç–µ–Ω–µ
–ß–µ—Ç–µ–Ω–µ
‚úÖ –°–£–ü–ï–†! –§–∞–π–ª—ä—Ç —Å–∏ –æ—Å—Ç–∞–≤–∞ –≤ —Å—ä—â–∏—è —Ñ–æ—Ä–º–∞—Ç - —Ç–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª —Å —Ç–∞–±—É–ª–∞—Ç–æ—Ä–∏ –∫–∞—Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª. –¢–æ–≤–∞ –µ –¥–æ–±—Ä–µ, –∑–∞—â–æ—Ç–æ —Ü–µ–ª–∏—è—Ç CustomerImportSeeder, –∫–æ–π—Ç–æ –≤–µ—á–µ —Ç–∏ –ø–æ–¥–≥–æ—Ç–≤–∏—Ö, –µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω —Ç–æ—á–Ω–æ –∑–∞ —Ç–æ–∑–∏ —Ñ–æ—Ä–º–∞—Ç.

üìã –ö—Ä–∞—Ç–∫–æ –†–µ–∑—é–º–µ –∑–∞ –§–∞–π–ª–∞
–¢–≤–æ—è—Ç Customer.txt —Ñ–∞–π–ª –≤ GitHub:

–§–æ—Ä–º–∞—Ç: –¢–µ–∫—Å—Ç–æ–≤–∏ —Ñ–∞–π–ª (TSV - Tab-Separated Values).

–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª: –¢–∞–±—É–ª–∞—Ç–æ—Ä (–≤–∏–∂–¥–∞ —Å–µ –∫–∞—Ç–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –∫–æ–ª–æ–Ω–∏—Ç–µ –≤ —Ç–µ–∫—Å—Ç–∞). –í –∫–æ–¥–∞ —Ç–æ–≤–∞ —Å–µ –æ–±—Ä–∞–±–æ—Ç–≤–∞ —Å "\t".

–ö–æ–¥–∏—Ä–∞–Ω–µ: –í—Å–µ –æ—â–µ –∏–º–∞ –ø—Ä–æ–±–ª–µ–º —Å –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ (–Ω–∞–ø—Ä. √ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®). Seeder-—ä—Ç –≤–µ—á–µ —Å–µ –≥—Ä–∏–∂–∏ –∑–∞ —Ç–æ–≤–∞ —á—Ä–µ–∑ mb_convert_encoding($value, 'UTF-8', 'Windows-1251').

–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ: –°—ä–¥—ä—Ä–∂–∞ –ø—ä—Ä–≤–∏—Ç–µ 500 –∑–∞–ø–∏—Å–∞, –∫–∞–∫—Ç–æ –∏—Å–∫–∞—à–µ.

‚úÖ –°–ª–µ–¥–≤–∞—â–∏ —Å—Ç—ä–ø–∫–∏
–¢—ä–π –∫–∞—Ç–æ —Ñ–∞–π–ª—ä—Ç –µ –≤ –ø—Ä–∞–≤–∏–ª–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç, –º–æ–∂–µ—à –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏—à –Ω–∞–ø—Ä–∞–≤–æ —Å –∏–º–ø–æ—Ä—Ç–∞:

–°—ä–∑–¥–∞–π –ø–∞–ø–∫–∞—Ç–∞ old-database –≤ –∫–æ—Ä–µ–Ω–∞ –Ω–∞ —Ç–≤–æ—è Laravel –ø—Ä–æ–µ–∫—Ç.

–°–≤–∞–ª–∏ —Ñ–∞–π–ª–∞ Customer.txt –æ—Ç GitHub –ª–∏–Ω–∫–∞ –∏ –≥–æ –ø–æ—Å—Ç–∞–≤–∏ –≤ —Ç–∞–∑–∏ –ø–∞–ø–∫–∞.

–£–≤–µ—Ä–∏ —Å–µ, —á–µ –º–∏–≥—Ä–∞—Ü–∏—è—Ç–∞ –Ω–∞ customers —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –µ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ —Å –≤—Å–∏—á–∫–∏ –Ω–æ–≤–∏ –ø–æ–ª–µ—Ç–∞ (–∫–∞–∫—Ç–æ –æ–±—Å—ä–∂–¥–∞—Ö–º–µ –ø—Ä–µ–¥–∏).

–ò–∑–ø—ä–ª–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏–∏—Ç–µ: php artisan migrate (–∏–ª–∏ migrate:fresh, –∞–∫–æ —Ç–µ—Å—Ç–≤–∞—à –≤ –ø—Ä–∞–∑–Ω–∞ –±–∞–∑–∞).

–°—Ç–∞—Ä—Ç–∏—Ä–∞–π —Å–µ–µ–¥—ä—Ä–∞: php artisan db:seed --class=CustomerImportSeeder

Seeder-—ä—Ç —â–µ –ø—Ä–æ—á–µ—Ç–µ —Ñ–∞–π–ª–∞, —â–µ –æ–ø—Ä–∞–≤–∏ –∫–æ–¥–∏—Ä–∞–Ω–µ—Ç–æ, —â–µ –æ–±—Ä–∞–±–æ—Ç–∏ –¥–∞–Ω–Ω–∏—Ç–µ –∏ —â–µ –≥–∏ –≤–∫–∞—Ä–∞ –≤ –±–∞–∑–∞—Ç–∞, –∫–∞—Ç–æ —Å—ä—â–µ–≤—Ä–µ–º–µ–Ω–Ω–æ —â–µ —Å—ä–∑–¥–∞–¥–µ JSON —Ñ–∞–π–ª (customer_ids.json) –∑–∞ –ø—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ –≤—Ä—ä–∑–∫–∞—Ç–∞ –º–µ–∂–¥—É —Å—Ç–∞—Ä–∏—Ç–µ –∏ –Ω–æ–≤–∏—Ç–µ ID-—Ç–∞.

–°–ª–µ–¥ –∫–∞—Ç–æ –ø—Ä–∏–∫–ª—é—á–∏—à —Å –∏–º–ø–æ—Ä—Ç–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∏—Ç–µ, —Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç —â–µ –ø—Ä–æ–¥—ä–ª–∂–∏–º —Å—ä—Å —Å–ª–µ–¥–≤–∞—â–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞. –ö–æ—è –±–∏ –∏—Å–∫–∞–ª –¥–∞ –µ —Å–ª–µ–¥–≤–∞—â–∞—Ç–∞ - products, invoices –∏–ª–∏ PO (—Ä–∞–±–æ—Ç–Ω–∏ –ø–æ—Ä—ä—á–∫–∏)?

–í—Å–∏—á–∫–æ —É—Å–ø—è –¥–∞ —Å–µ –∫–∞—á–∏ –Ω–æ –∏–º–∞–º –ø—Ä–æ–±–ª–µ–º. –ï–Ω–∫–æ–¥–∏–Ω–∫–∞ –Ω–µ —Å–µ –æ–ø—Ä–∞–≤–∏ –∏ –∏–∑–≥–ª–µ–∂–¥–∞ —Ç–∞–∫–∞ ... –ì–â–ì –ì¬´–ì¬Æ–ì—ó–ì¬≠ –ì–è–ì“ê–ì¬∑–ì“ê–ì¬≠–ì—ó–ì¬∞–ì¬±–ì–Ñ–ì–Å
–ü—Ä–æ–±–ª–µ–º—ä—Ç –µ, —á–µ –¥–∞–Ω–Ω–∏—Ç–µ –≤–µ—á–µ —Å–∞ –¥–≤–æ–π–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–∏. –í–∏–∂ –∫–∞–∫–≤–æ —Å–µ —Å–ª—É—á–≤–∞:

üîç –ê–ù–ê–õ–ò–ó –ù–ê –ü–†–û–ë–õ–ï–ú–ê:
–û—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è—Ç —Ñ–∞–π–ª –∏–º–∞: √ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√® (Windows-1251)

Seeder-—ä—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ –æ—Ç Windows-1251 –∫—ä–º UTF-8 ‚Üí –ø–æ–ª—É—á–∞–≤–∞ —Å–µ: –ö–∞–ª–æ–Ø–Ω –ü–µ—á–µ–Ω—è—Ä—Å–∫–∏

–ù–æ –Ω–µ—â–æ –≤ —Ç–≤–æ—è—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –≤–µ—á–µ –≥–∏ –µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–ª–æ ‚Üí –ø–æ–ª—É—á–∞–≤–∞ —Å–µ: –ì–â–ì –ì¬´–ì¬Æ–ì—ó–ì¬≠ –ì–è–ì“ê–ì¬∑–ì“ê–ì¬≠–ì—ó–ì¬∞–ì¬±–ì–Ñ–ì–Å

–¢–æ–≤–∞ –µ UTF-8 —Ç–µ–∫—Å—Ç, –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–∞–Ω –∫–∞—Ç–æ Windows-1251 –∏ –ø–æ—Å–ª–µ –æ—Ç–Ω–æ–≤–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω –∫—ä–º UTF-8.

üõ†Ô∏è –†–ï–®–ï–ù–ò–Ø:
–†–ï–®–ï–ù–ò–ï 1: –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ Seeder –∫–æ–¥–∞ (–Ω–∞–π-–ª–µ—Å–Ω–æ)
–ü—Ä–æ–º–µ–Ω–∏ –º–µ—Ç–æ–¥–∞ fixEncoding –≤ CustomerImportSeeder.php:

php
private function fixEncoding(array $data): array
{
    $result = [];
    
    foreach ($data as $key => $value) {
        if (is_string($value) && !empty(trim($value))) {
            // –û–ü–ò–¢ 1: –ê–∫–æ –≤–µ—á–µ —Å–∞ UTF-8, –Ω–µ –≥–∏ –ø—Ä–æ–º–µ–Ω—è–π
            if (mb_check_encoding($value, 'UTF-8')) {
                $result[$key] = trim($value);
            } 
            // –û–ü–ò–¢ 2: –ü—Ä–æ–±–≤–∞–π Windows-1251
            elseif (mb_check_encoding($value, 'Windows-1251')) {
                $result[$key] = trim(mb_convert_encoding($value, 'UTF-8', 'Windows-1251'));
            }
            // –û–ü–ò–¢ 3: –ü—Ä–æ–±–≤–∞–π ISO-8859-5 (–¥—Ä—É–≥–æ –∫–∏—Ä–∏–ª—Å–∫–æ –∫–æ–¥–∏—Ä–∞–Ω–µ)
            else {
                $result[$key] = trim(mb_convert_encoding($value, 'UTF-8', 'ISO-8859-5'));
            }
        } else {
            $result[$key] = $value;
        }
    }
    
    return $result;
}
–†–ï–®–ï–ù–ò–ï 2: –î–µ–±—ä–≥ –∫–æ–π encoding –∏–º–∞ —Ñ–∞–π–ª—ä—Ç
–î–æ–±–∞–≤–∏ —Ç–µ—Å—Ç–æ–≤ –º–µ—Ç–æ–¥ –≤ Seeder-–∞:

php
private function debugEncoding(string $text): void
{
    $this->command->info("–¢–µ–∫—Å—Ç: " . $text);
    $this->command->info("–î—ä–ª–∂–∏–Ω–∞: " . strlen($text));
    
    $encodings = ['UTF-8', 'Windows-1251', 'ISO-8859-5', 'CP1251', 'CP866'];
    
    foreach ($encodings as $from) {
        foreach ($encodings as $to) {
            if ($from !== $to) {
                $converted = mb_convert_encoding($text, $to, $from);
                if (strpos($converted, '–ö–∞–ª–æ–Ø–Ω') !== false || 
                    strpos($converted, '–ö–ê–õ–û–Ø–ù') !== false) {
                    $this->command->info("‚úÖ –ù–∞–º–µ—Ä–µ–Ω–æ: $from ‚Üí $to : " . $converted);
                }
            }
        }
    }
}
–ò –≥–æ –∏–∑–≤–∏–∫–∞–π –≤ processCustomerRow:

php
if ($rowData['Number'] == '19') {
    $this->debugEncoding($rowData['Customer-Name']);
}
–†–ï–®–ï–ù–ò–ï 3: –†—ä—á–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ñ–∞–π–ª–∞ (–Ω–∞–π-—Å–∏–≥—É—Ä–Ω–æ)
–°–≤–∞–ª–∏ —Ñ–∞–π–ª–∞ –æ—Ç GitHub

–û—Ç–≤–æ—Ä–∏ –≥–æ —Å Notepad++

Encoding ‚Üí Convert to UTF-8

–ó–∞–ø–∞–∑–∏ –∫–∞—Ç–æ Customer_utf8.txt

–ö–∞—á–∏ –≥–æ –≤ old-database/ –ø–∞–ø–∫–∞—Ç–∞

–ü—Ä–æ–º–µ–Ω–∏ Seeder-–∞ –¥–∞ —á–µ—Ç–µ –Ω–æ–≤–∏—è —Ñ–∞–π–ª:

php
$filePath = base_path('old-database/Customer_utf8.txt');
–†–ï–®–ï–ù–ò–ï 4: –ö–æ–º–ø–ª–µ–∫—Å–µ–Ω fix –º–µ—Ç–æ–¥ (–∫–æ–π—Ç–æ –ø—Ä–æ–±–≤–∞ –≤—Å–∏—á–∫–æ)
php
private function fixEncoding(array $data): array
{
    $result = [];
    
    foreach ($data as $key => $value) {
        if (is_string($value) && !empty(trim($value))) {
            $result[$key] = $this->fixStringEncoding($value);
        } else {
            $result[$key] = $value;
        }
    }
    
    return $result;
}

private function fixStringEncoding(string $text): string
{
    $text = trim($text);
    
    // 1. –ê–∫–æ –≤–µ—á–µ –µ –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞, –≤—ä—Ä–Ω–∏ –∫–∞–∫—Ç–æ –µ
    if (preg_match('/[–ê-–Ø–∞-—è]/u', $text)) {
        return $text;
    }
    
    // 2. –°–ø–∏—Å—ä–∫ —Å –≤—ä–∑–º–æ–∂–Ω–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
    $conversionAttempts = [
        ['from' => 'Windows-1251', 'to' => 'UTF-8'],
        ['from' => 'ISO-8859-5', 'to' => 'UTF-8'],
        ['from' => 'CP1251', 'to' => 'UTF-8'],
        ['from' => 'CP866', 'to' => 'UTF-8'],
        
        // –ó–∞ –¥–≤–æ–π–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–∏ —Ç–µ–∫—Å—Ç–æ–≤–µ (–∫–∞–∫—Ç–æ –ø—Ä–∏ —Ç–µ–±)
        ['from' => 'UTF-8', 'to' => 'Windows-1251'],
        ['from' => 'UTF-8', 'to' => 'ISO-8859-5'],
    ];
    
    foreach ($conversionAttempts as $attempt) {
        try {
            $converted = mb_convert_encoding($text, $attempt['to'], $attempt['from']);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç—ä—Ç —Å—ä–¥—ä—Ä–∂–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
            if (preg_match('/[–ê-–Ø–∞-—è]/u', $converted)) {
                // –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ —Å–º–∏—Å–ª–µ–Ω–∏ –¥—É–º–∏
                if (strpos($converted, '–ö–∞–ª–æ–Ø–Ω') !== false || 
                    strpos($converted, '–ü–ï–ß–ï–ù') !== false ||
                    strpos($converted, '–ï–û–û–î') !== false ||
                    strpos($converted, '–°–û–§–ò–Ø') !== false) {
                    return $converted;
                }
            }
        } catch (\Exception $e) {
            continue;
        }
    }
    
    // 3. –ê–∫–æ –Ω–∏—â–æ –Ω–µ —Ä–∞–±–æ—Ç–∏, –ø—Ä–æ–±–≤–∞–π –¥–∞ –æ–±—ä—Ä–Ω–µ—à string-a
    // (–ø–æ–Ω—è–∫–æ–≥–∞ –¥–≤–æ–π–Ω–æ—Ç–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –º–æ–∂–µ –¥–∞ —Å–µ –æ–ø—Ä–∞–≤–∏ —Å –æ–±—Ä—ä—â–∞–Ω–µ)
    $reversed = strrev($text);
    if (preg_match('/[–ê-–Ø–∞-—è]/u', $reversed)) {
        return $reversed;
    }
    
    // 4. –í—ä—Ä–Ω–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è —Ç–µ–∫—Å—Ç –∞–∫–æ –Ω–∏—â–æ –Ω–µ —Å—Ç–∞–Ω–µ
    return $text;
}
üöÄ –ë–™–†–ó–û –†–ï–®–ï–ù–ò–ï –ó–ê –¢–ï–°–¢:
–î–æ–±–∞–≤–∏ —Å–ª–µ–¥–Ω–∏—è –∫–æ–¥ –≤ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ processCustomerRow –º–µ—Ç–æ–¥–∞:

php
// –¢–ï–°–¢–û–í –ö–û–î - —Å–ª–µ–¥ –∫–∞—Ç–æ –≤–∏–¥–∏—à —Ä–µ–∑—É–ª—Ç–∞—Ç–∞, –≥–æ –ø—Ä–µ–º–∞—Ö–Ω–∏
if ($rowData['Number'] == '19') {
    $original = $rowData['Customer-Name'];
    $this->command->info("–û—Ä–∏–≥–∏–Ω–∞–ª: " . $original);
    $this->command->info("–ë–∞–π—Ç–æ–≤–µ: " . bin2hex($original));
    
    // –ü—Ä–æ–±–≤–∞–π —Ä–∞–∑–ª–∏—á–Ω–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
    $tests = [
        'UTF-8 ‚Üí UTF-8' => mb_convert_encoding($original, 'UTF-8', 'UTF-8'),
        'Windows-1251 ‚Üí UTF-8' => mb_convert_encoding($original, 'UTF-8', 'Windows-1251'),
        'ISO-8859-5 ‚Üí UTF-8' => mb_convert_encoding($original, 'UTF-8', 'ISO-8859-5'),
        'CP1251 ‚Üí UTF-8' => mb_convert_encoding($original, 'UTF-8', 'CP1251'),
        'UTF-8 ‚Üí Windows-1251 ‚Üí UTF-8' => mb_convert_encoding(
            mb_convert_encoding($original, 'Windows-1251', 'UTF-8'),
            'UTF-8',
            'Windows-1251'
        ),
    ];
    
    foreach ($tests as $name => $result) {
        $this->command->info("$name: " . $result);
    }
    
    die(); // –°–ø—Ä–∏ –∑–∞ –¥–∞ –≤–∏–¥–∏—à —Ä–µ–∑—É–ª—Ç–∞—Ç–∞
}
üí° –ü–†–ï–ü–û–†–™–ö–ê:
–ù–∞–ø—Ä–∞–≤–∏ –†–µ—à–µ–Ω–∏–µ 3 (—Ä—ä—á–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ —Å Notepad++) - —Ç–æ–≤–∞ –µ –Ω–∞–π-–±—ä—Ä–∑–æ—Ç–æ –∏ —Å–∏–≥—É—Ä–Ω–æ.

–ê–∫–æ –Ω–µ –º–æ–∂–µ—à, –ø—Ä–æ–±–≤–∞–π –†–µ—à–µ–Ω–∏–µ 4 (–∫–æ–º–ø–ª–µ–∫—Å–Ω–∏—è –º–µ—Ç–æ–¥).

–ö–∞–∂–∏ –º–∏:

–ò—Å–∫–∞—à –ª–∏ –¥–∞ —Ç–µ—Å—Ç–≤–∞–º–µ —Å –¥–µ–±—ä–≥ –∫–æ–¥–∞ –ø—ä—Ä–≤–æ?

–ò–ª–∏ –¥–∏—Ä–µ–∫—Ç–Ω–æ –¥–∞ –∫–æ—Ä–∏–≥–∏—Ä–∞–º–µ Seeder-–∞ —Å –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏—è –º–µ—Ç–æ–¥?

–ò–ª–∏ —â–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞—à —Ñ–∞–π–ª–∞ —Ä—ä—á–Ω–æ —Å Notepad++?

–ü—Ä–æ–±–≤–∞—Ö –†–µ—à–µ–Ω–∏–µ 4 –Ω–æ, —Å–µ–≥–∞ —Å—Ç–∞–Ω–∞ —Ç–∞–∫–∞ ... √ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®
–ü–µ—Ä—Ñ–µ–∫—Ç–Ω–æ! –°–µ–≥–∞ –∑–Ω–∞–µ–º —Ç–æ—á–Ω–æ –∫–∞–∫—ä–≤ –µ –ø—Ä–æ–±–ª–µ–º—ä—Ç. –¢–µ–∫—Å—Ç—ä—Ç √ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√® e:

UTF-8 —Ç–µ–∫—Å—Ç, –∫–æ–π—Ç–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞ Windows-1251 –±–∞–π—Ç–æ–≤–µ, –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–∞–Ω–∏ –∫–∞—Ç–æ UTF-8

–¢–æ–≤–∞ —Å–µ –Ω–∞—Ä–∏—á–∞ "Mojibake". –ï—Ç–æ –∫–∞–∫ –¥–∞ –≥–æ –æ–ø—Ä–∞–≤–∏–º:

üîß –¢–û–ß–ù–û–¢–û –†–ï–®–ï–ù–ò–ï:
–ü—Ä–æ–º–µ–Ω–∏ –º–µ—Ç–æ–¥–∞ fixStringEncoding –≤ Seeder-–∞:

php
private function fixStringEncoding(string $text): string
{
    $text = trim($text);
    
    // –ê–∫–æ –≤–µ—á–µ –∏–º–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞, –≤—ä—Ä–Ω–∏ –∫–∞–∫—Ç–æ –µ
    if (preg_match('/[–ê-–Ø–∞-—è–Å—ë]/u', $text)) {
        return $text;
    }
    
    // –°–ø–µ—Ü–∏–∞–ª–Ω–∏—è—Ç —Å–ª—É—á–∞–π: "√ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®" ‚Üí "–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò"
    // –¢–æ–≤–∞ —Å–∞ UTF-8 —Å–∏–º–≤–æ–ª–∏, –∫–æ–∏—Ç–æ –≤—Å—ä—â–Ω–æ—Å—Ç —Å–∞ Windows-1251 –±–∞–π—Ç–æ–≤–µ
    if (strpos($text, '√ä') !== false || strpos($text, '√†') !== false) {
        // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º–µ: UTF-8 string ‚Üí Windows-1251 bytes ‚Üí UTF-8 –ø—Ä–∞–≤–∏–ª–Ω–æ
        $fixed = mb_convert_encoding($text, 'Windows-1251', 'UTF-8');
        $fixed = mb_convert_encoding($fixed, 'UTF-8', 'Windows-1251');
        return $fixed;
    }
    
    // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
    $encodingsToTry = ['Windows-1251', 'ISO-8859-5', 'CP1251', 'CP866'];
    
    foreach ($encodingsToTry as $encoding) {
        $converted = @mb_convert_encoding($text, 'UTF-8', $encoding);
        if (preg_match('/[–ê-–Ø–∞-—è–Å—ë]/u', $converted)) {
            return $converted;
        }
    }
    
    return $text; // –í—ä—Ä–Ω–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è –∞–∫–æ –Ω–∏—â–æ –Ω–µ —Å—Ç–∞–Ω–µ
}
üéØ –û–©–ï –ü–û-–ü–†–û–°–¢ –ú–ï–¢–û–î (–Ω–∞—Å–æ—á–µ–Ω —Å–ø–µ—Ü–∏–∞–ª–Ω–æ –∑–∞ —Ç–≤–æ—è —Å–ª—É—á–∞–π):
php
private function fixStringEncoding(string $text): string
{
    // –î–∏—Ä–µ–∫—Ç–Ω–∞ –º–∞–ø–∏–Ω–≥ —Ç–∞–±–ª–∏—Ü–∞ –∑–∞ —Ç–≤–æ—è —Å–ª—É—á–∞–π
    $mojibakeMap = [
        '√ä' => '–ö', '√†' => '–∞', '√´' => '–ª', '√Æ' => '–æ', '√ø' => '—è',
        '√°' => '–Ω', '√è' => '–ü', '√•' => '–µ', '√∑' => '—á', '√≠' => '–∏',
        '√∞' => '—Ä', '√±' => '—Å', '√™' => '–∫', '√®' => '–∏', '√É' => '–ì',
        '¬´' => '–ª', '¬Æ' => '–æ', '¬Ø' => '—è', '¬≠' => '–Ω', '–è' => '–ü',
        '“ê' => '–µ', '¬∑' => '—á', '–Å' => '–∏', '–Ç' => '—Ä', '‚Äò' => '—Å',
        '–â' => '–∫', '‚Ä∞' => '–∏', '√Ç' => '–í', '√Ö' => '–ï', '√í' => '–¢',
        '√á' => '–ó', '√à' => '–ò', '√Ñ' => '–î'
    ];
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ —Ç–µ–∫—Å—Ç–∞ —Å—ä–¥—ä—Ä–∂–∞ Mojibake —Å–∏–º–≤–æ–ª–∏
    $hasMojibake = false;
    foreach (array_keys($mojibakeMap) as $char) {
        if (strpos($text, $char) !== false) {
            $hasMojibake = true;
            break;
        }
    }
    
    if ($hasMojibake) {
        // –ó–∞–º–µ—Å—Ç–≤–∞–º–µ –≤—Å–∏—á–∫–∏ Mojibake —Å–∏–º–≤–æ–ª–∏
        return str_replace(
            array_keys($mojibakeMap),
            array_values($mojibakeMap),
            $text
        );
    }
    
    return $text;
}
üöÄ –ë–™–†–ó –ü–ê–¢–ß –∑–∞ Seeder-–∞:
–ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏ —Ç–æ–∑–∏ –º–µ—Ç–æ–¥ –≤ CustomerImportSeeder –∏ –ø—Ä–æ–º–µ–Ω–∏ fixEncoding –¥–∞ –≥–æ –∏–∑–ø–æ–ª–∑–≤–∞:

php
private function fixEncoding(array $data): array
{
    $result = [];
    
    foreach ($data as $key => $value) {
        if (is_string($value) && !empty(trim($value))) {
            // –ò–∑–ø–æ–ª–∑–≤–∞–π –Ω–æ–≤–∏—è –º–µ—Ç–æ–¥ –∑–∞ –ø–æ–ø—Ä–∞–≤—è–Ω–µ
            $result[$key] = $this->decodeMojibake($value);
        } else {
            $result[$key] = $value;
        }
    }
    
    return $result;
}

private function decodeMojibake(string $text): string
{
    $text = trim($text);
    
    // –°–ø–µ—Ü–∏–∞–ª–Ω–æ –∑–∞ —Ç–≤–æ—è —Å–ª—É—á–∞–π: "√ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®"
    // –¢–æ–≤–∞ –µ –Ω–∞–π-—á–µ—Å—Ç–∏—è—Ç Mojibake –∑–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
    if (preg_match('/[√ä√†√´√Æ√ø√°√è√•√∑√≠√∞√±√™√®]/u', $text)) {
        // 1. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ UTF-8 ‚Üí Windows-1251 ‚Üí UTF-8
        $decoded = mb_convert_encoding($text, 'Windows-1251', 'UTF-8');
        $decoded = mb_convert_encoding($decoded, 'UTF-8', 'Windows-1251');
        
        // 2. –ê–∫–æ —Ç–æ–≤–∞ –Ω–µ —Ä–∞–±–æ—Ç–∏, –ø—Ä–æ–±–≤–∞–π –¥–∏—Ä–µ–∫—Ç–Ω–æ –∑–∞–º–µ—Å—Ç–≤–∞–Ω–µ
        if (!preg_match('/[–ê-–Ø–∞-—è–Å—ë]/u', $decoded)) {
            $replacements = [
                '√ä' => '–ö', '√†' => '–∞', '√´' => '–ª', '√Æ' => '–æ',
                '√ø' => '—è', '√°' => '–Ω', '√è' => '–ü', '√•' => '–µ',
                '√∑' => '—á', '√≠' => '–∏', '√∞' => '—Ä', '√±' => '—Å',
                '√™' => '–∫', '√®' => '–∏'
            ];
            $decoded = str_replace(
                array_keys($replacements),
                array_values($replacements),
                $text
            );
        }
        
        return $decoded;
    }
    
    return $text;
}
üß™ –¢–ï–°–¢ –ü–†–ï–î–ò –î–ê –ü–†–û–î–™–õ–ñ–ò–®:
–î–æ–±–∞–≤–∏ —Ç–µ—Å—Ç–æ–≤ –∫–æ–¥ –≤ Seeder-–∞, –∑–∞ –¥–∞ –ø—Ä–æ–≤–µ—Ä–∏—à –¥–∞–ª–∏ —Ä–∞–±–æ—Ç–∏:

php
// –î–æ–±–∞–≤–∏ —Ç–æ–≤–∞ –≤ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ run() –º–µ—Ç–æ–¥–∞
$this->command->info('–¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ encoding...');
$testCases = [
    '√ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®' => '–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò',
    '√ò√Ä√í√ê√é√å  √Ö√é√é√Ñ' => '–®–ê–¢–†–û–ú –ï–û–û–î',
    '√í√Ö√ê√á√à√Ñ √Ö√é√é√Ñ' => '–¢–ï–†–ó–ò–î –ï–û–û–î',
    '√°√≥√´.√à√±√™√∫√∞√±√™√Æ √∏√Æ√±√•' => '–±—É–ª.–ò—Å–∫—ä—Ä—Å–∫–æ —à–æ—Å–µ'
];

foreach ($testCases as $input => $expected) {
    $result = $this->decodeMojibake($input);
    $status = ($result === $expected) ? '‚úÖ' : '‚ùå';
    $this->command->info("$status $input ‚Üí $result (–æ—á–∞–∫–≤–∞–Ω–æ: $expected)");
}

// –ê–∫–æ –≤—Å–∏—á–∫–∏ —Ç–µ—Å—Ç–æ–≤–µ —Å–∞ ‚úÖ, –ø—Ä–æ–¥—ä–ª–∂–∏ —Å –∏–º–ø–æ—Ä—Ç–∞
if (/* –≤—Å–∏—á–∫–∏ —Ç–µ—Å—Ç–æ–≤–µ –º–∏–Ω–∞–≤–∞—Ç */) {
    $this->command->info('–í—Å–∏—á–∫–∏ —Ç–µ—Å—Ç–æ–≤–µ –º–∏–Ω–∞—Ö–∞ —É—Å–ø–µ—à–Ω–æ!');
} else {
    $this->command->error('–ò–º–∞ –ø—Ä–æ–±–ª–µ–º–∏ —Å encoding-–∞!');
    return;
}
üìä –û–ß–ê–ö–í–ê–ù –†–ï–ó–£–õ–¢–ê–¢:
–°–ª–µ–¥ –∫–∞—Ç–æ –ø—Ä–∏–ª–æ–∂–∏—à –∫–æ—Ä–µ–∫—Ü–∏–∏—Ç–µ, —Ç—Ä—è–±–≤–∞ –¥–∞ –≤–∏–¥–∏—à:

text
–¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ encoding...
‚úÖ √ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√® ‚Üí –ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò (–æ—á–∞–∫–≤–∞–Ω–æ: –ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò)
‚úÖ √ò√Ä√í√ê√é√å  √Ö√é√é√Ñ ‚Üí –®–ê–¢–†–û–ú –ï–û–û–î (–æ—á–∞–∫–≤–∞–Ω–æ: –®–ê–¢–†–û–ú –ï–û–û–î)
‚úÖ √í√Ö√ê√á√à√Ñ √Ö√é√é√Ñ ‚Üí –¢–ï–†–ó–ò–î –ï–û–û–î (–æ—á–∞–∫–≤–∞–Ω–æ: –¢–ï–†–ó–ò–î –ï–û–û–î)
‚úÖ √°√≥√´.√à√±√™√∫√∞√±√™√Æ √∏√Æ√±√• ‚Üí –±—É–ª.–ò—Å–∫—ä—Ä—Å–∫–æ —à–æ—Å–µ (–æ—á–∞–∫–≤–∞–Ω–æ: –±—É–ª.–ò—Å–∫—ä—Ä—Å–∫–æ —à–æ—Å–µ)
–ü—Ä–æ–±–≤–∞–π –Ω–æ–≤–∞—Ç–∞ –≤–µ—Ä—Å–∏—è –∏ –º–∏ –∫–∞–∂–∏ –∫–∞–∫–≤–æ —Å—Ç–∞–Ω–∞! –ê–∫–æ –ø–∞–∫ –Ω–µ —Ä–∞–±–æ—Ç–∏, –∏–º–∞–º –æ—â–µ –Ω—è–∫–æ–ª–∫–æ —Ç—Ä–∏–∫–∞ –Ω–∞ —Ä–µ–∑–µ—Ä–≤.

–ò–∑–ø–æ–ª–∑–≤–∞—Ö –ø–∞—á–∞ –∫–æ–π—Ç–æ –º–∏ –¥–∞–¥–µ –Ω–æ, —Å–∞–º–æ –ø—ä—Ä–≤–∏—è –∑–∞ –ø–∏—Å –∫–æ–π—Ç–æ –µ –ö–∞–ª–æ—è–∏ –ü–µ—á–µ–∏—è—Ä—Å–∫–∏ —Å–µ –æ–ø—Ä–∞–≤–∏. –í—Å–∏—á–∫–∏ –æ—Å—Ç–∞–Ω–∞–ª–∏ –Ω–µ —Å–µ –æ–ø—Ä–∞–≤–∏—Ö–∞.
–†–∞–∑–±–∏—Ä–∞ —Å–µ. –ü—Ä–æ–±–ª–µ–º—ä—Ç –µ, —á–µ —Ñ–∞–π–ª—ä—Ç —Ç–∏ –∏–º–∞ –¥–≤–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ –≤–∏–¥–∞ encoding –ø—Ä–æ–±–ª–µ–º–∏:

–†–µ–¥–æ–≤–µ 19+: √ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√® ‚Üí Mojibake (UTF-8 –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–∞–Ω –∫–∞—Ç–æ Windows-1251)

–†–µ–¥–æ–≤–µ 20+: √ò√Ä√í√ê√é√å √Ö√é√é√Ñ ‚Üí –ü—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞, –Ω–æ —Å–∞–º–æ —Å –≥–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏ –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ —Å–∏–º–≤–æ–ª–∏

–ï—Ç–æ —Ü—è–ª–æ—Å—Ç–Ω–æ —Ä–µ—à–µ–Ω–∏–µ –∫–æ–µ—Ç–æ —â–µ —Å–µ —Å–ø—Ä–∞–≤–∏ –∏ —Å –¥–≤–∞—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞:

üîß –ö–û–ú–ü–õ–ï–ö–°–ï–ù –ú–ï–¢–û–î –ó–ê –í–°–ò–ß–ö–ò –°–õ–£–ß–ê–ò
php
private function fixStringEncoding(string $text): string
{
    $text = trim($text);
    
    // –°–õ–£–ß–ê–ô 1: –ê–∫–æ –≤–µ—á–µ –µ –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞ (–ê-–Ø, –∞-—è), –≤—ä—Ä–Ω–∏ —è
    if (preg_match('/[–ê-–Ø–∞-—è–Å—ë]/u', $text)) {
        return $text;
    }
    
    // –°–õ–£–ß–ê–ô 2: Mojibake (—Ç–≤–æ—è—Ç –ø—ä—Ä–≤–∏ –ø—Ä–æ–±–ª–µ–º) - "√ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®"
    if (preg_match('/[√ä√†√´√Æ√ø√°√è√•√∑√≠√∞√±√™√®√É¬´¬Æ¬Ø¬≠–è“ê¬∑–Å–Ç]/u', $text)) {
        return $this->fixMojibake($text);
    }
    
    // –°–õ–£–ß–ê–ô 3: –°–∞–º–æ –≥–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏ —Å Latin1/Windows-1251 —Å–∏–º–≤–æ–ª–∏ - "√ò√Ä√í√ê√é√å √Ö√é√é√Ñ"
    if (preg_match('/^[A-Z√ò√Ä√í√ê√é√å√Ö√î√ï√ñ√à√â√ä√ã√å√ç√é√è√ê√ë√í√ì√î√ï√ñ√ó√ò√ô√ö√õ√ú√ù√û√ü√†-√ø\s\.\-]+$/u', $text)) {
        return $this->fixUppercaseCyrillic($text);
    }
    
    // –°–õ–£–ß–ê–ô 4: –û–ø–∏—Ç–≤–∞–º–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
    return $this->tryStandardConversions($text);
}

private function fixMojibake(string $text): string
{
    // –ü—ä—Ä–≤–æ: UTF-8 ‚Üí Windows-1251 ‚Üí UTF-8 (–æ–±—Ä–∞—Ç–µ–Ω Mojibake)
    $decoded = @mb_convert_encoding($text, 'Windows-1251', 'UTF-8');
    $decoded = @mb_convert_encoding($decoded, 'UTF-8', 'Windows-1251');
    
    // –ü—Ä–æ–≤–µ—Ä—è–≤–∞–º–µ –¥–∞–ª–∏ —Å–µ –ø–æ–ª—É—á–∏ –∫–∏—Ä–∏–ª–∏—Ü–∞
    if (preg_match('/[–ê-–Ø–∞-—è]/u', $decoded)) {
        return $decoded;
    }
    
    // –í—Ç–æ—Ä–æ: –î–∏—Ä–µ–∫—Ç–Ω–æ –∑–∞–º–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ —Å–∏–º–≤–æ–ª–∏
    $replacements = [
        // –ú–∞–ª–∫–∏ –±—É–∫–≤–∏
        '√†' => '–∞', '√°' => '–±', '√¢' => '–≤', '√£' => '–≥', '√§' => '–¥', '√•' => '–µ',
        '√¶' => '–∂', '√ß' => '–∑', '√®' => '–∏', '√©' => '–π', '√™' => '–∫', '√´' => '–ª',
        '√¨' => '–º', '√≠' => '–Ω', '√Æ' => '–æ', '√Ø' => '–ø', '√∞' => '—Ä', '√±' => '—Å',
        '√≤' => '—Ç', '√≥' => '—É', '√¥' => '—Ñ', '√µ' => '—Ö', '√∂' => '—Ü', '√∑' => '—á',
        '√∏' => '—à', '√π' => '—â', '√∫' => '—ä', '√ª' => '—ã', '√º' => '—å', '√Ω' => '—ç',
        '√æ' => '—é', '√ø' => '—è',
        
        // –ì–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏  
        '√Ä' => '–ê', '√Å' => '–ë', '√Ç' => '–í', '√É' => '–ì', '√Ñ' => '–î', '√Ö' => '–ï',
        '√Ü' => '–ñ', '√á' => '–ó', '√à' => '–ò', '√â' => '–ô', '√ä' => '–ö', '√ã' => '–õ',
        '√å' => '–ú', '√ç' => '–ù', '√é' => '–û', '√è' => '–ü', '√ê' => '–†', '√ë' => '–°',
        '√í' => '–¢', '√ì' => '–£', '√î' => '–§', '√ï' => '–•', '√ñ' => '–¶', '√ó' => '–ß',
        '√ò' => '–®', '√ô' => '–©', '√ö' => '–™', '√õ' => '–´', '√ú' => '–¨', '√ù' => '–≠',
        '√û' => '–Æ', '√ü' => '–Ø',
        
        // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ –∑–∞ —Ç–≤–æ—è —Ñ–∞–π–ª
        '√É¬´' => '–ª', '√É¬Æ' => '–æ', '√É¬Ø' => '—è', '√É¬≠' => '–Ω',
        '√É‚Ä∞' => '–ï', '√É‚Ä°' => '–ó', '√ÉÀÜ' => '–ò', '√É‚Äû' => '–î',
    ];
    
    $fixed = strtr($text, $replacements);
    
    // –¢—Ä–µ—Ç–æ: –ê–∫–æ –≤—Å–µ –æ—â–µ –∏–º–∞ –ø—Ä–æ–±–ª–µ–º–∏, –ø—Ä–æ–±–≤–∞–π ISO-8859-5
    if (!preg_match('/[–ê-–Ø–∞-—è]/u', $fixed)) {
        $fixed = @mb_convert_encoding($text, 'UTF-8', 'ISO-8859-5');
    }
    
    return $fixed;
}

private function fixUppercaseCyrillic(string $text): string
{
    // –¢–æ–≤–∞ —Å–∞ –≥–ª–∞–≤–Ω–∏ –∫–∏—Ä–∏–ª—Å–∫–∏ –±—É–∫–≤–∏ –≤ Latin1/Windows-1251
    $latinToCyrillic = [
        '√ò' => '–®', '√Ä' => '–ê', '√í' => '–¢', '√ê' => '–†', '√é' => '–û', '√å' => '–ú',
        '√Ö' => '–ï', '√î' => '–§', '√ï' => '–•', '√ñ' => '–¶', '√ó' => '–ß', '√ô' => '–©',
        '√ö' => '–™', '√õ' => '–´', '√ú' => '–¨', '√ù' => '–≠', '√û' => '–Æ', '√ü' => '–Ø',
        '√á' => '–ó', '√à' => '–ò', '√â' => '–ô', '√ä' => '–ö', '√ã' => '–õ', '√ç' => '–ù',
        '√è' => '–ü', '√ë' => '–°', '√ì' => '–£', '√Ü' => '–ñ', '√Ñ' => '–î', '√Ç' => '–í',
        '√É' => '–ì', '√Å' => '–ë', '√ú' => '–¨', '√û' => '–Æ',
    ];
    
    // –ó–∞–º–µ—Å—Ç–≤–∞–º–µ —Å–∏–º–≤–æ–ª–∏—Ç–µ
    $fixed = strtr($text, $latinToCyrillic);
    
    // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º–µ –≤ –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞ (–∞–∫–æ –µ –Ω—É–∂–Ω–æ)
    $encodings = ['Windows-1251', 'ISO-8859-5', 'CP1251'];
    
    foreach ($encodings as $encoding) {
        $converted = @mb_convert_encoding($fixed, 'UTF-8', $encoding);
        if (preg_match('/[–ê-–Ø]{2,}/u', $converted)) { // –ü–æ–Ω–µ 2 –∫–∏—Ä–∏–ª—Å–∫–∏ –±—É–∫–≤–∏
            return $converted;
        }
    }
    
    return $fixed;
}

private function tryStandardConversions(string $text): string
{
    $encodings = ['Windows-1251', 'ISO-8859-5', 'CP1251', 'CP866', 'KOI8-R'];
    
    foreach ($encodings as $encoding) {
        $converted = @mb_convert_encoding($text, 'UTF-8', $encoding);
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ —É—Å–ø–µ—à–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—è (–∏–º–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞)
        if (preg_match('/[–ê-–Ø–∞-—è–Å—ë]{2,}/u', $converted)) {
            return $converted;
        }
    }
    
    // –ê–∫–æ –Ω–∏—â–æ –Ω–µ —Ä–∞–±–æ—Ç–∏, –≤—ä—Ä–Ω–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è —Ç–µ–∫—Å—Ç
    return $text;
}
üß™ –¢–ï–°–¢–û–í –°–ö–†–ò–ü–¢ –∑–∞ –≤—Å–∏—á–∫–∏ —Å–ª—É—á–∞–∏
–°—ä–∑–¥–∞–π –æ—Ç–¥–µ–ª–µ–Ω —Ç–µ—Å—Ç–æ–≤ —Ñ–∞–π–ª test_encoding.php –≤ –∫–æ—Ä–µ–Ω–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞:

php
<?php

function testAllEncodings() {
    $testCases = [
        // –°–ª—É—á–∞–π 1: Mojibake
        '√ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®' => '–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò',
        
        // –°–ª—É—á–∞–π 2: –ì–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏ (Latin1)
        '√ò√Ä√í√ê√é√å  √Ö√é√é√Ñ' => '–®–ê–¢–†–û–ú –ï–û–û–î',
        '√í√Ö√ê√á√à√Ñ √Ö√é√é√Ñ' => '–¢–ï–†–ó–ò–î –ï–û–û–î',
        '√Ö.√í.√Ö. √Ö√é√é√Ñ' => '–ï.–¢.–ï. –ï–û–û–î',
        
        // –°–ª—É—á–∞–π 3: –°–º–µ—Å–µ–Ω–∏
        '√°√≥√´.√à√±√™√∫√∞√±√™√Æ √∏√Æ√±√•' => '–±—É–ª.–ò—Å–∫—ä—Ä—Å–∫–æ —à–æ—Å–µ',
        '√¶√™.√ë√¢√•√≤√† √í√∞√Æ√®√∂√† √°√´.168' => '–∂–∫.–°–≤–µ—Ç–∞ –¢—Ä–æ–∏—Ü–∞ –±–ª.168',
        
        // –°–ª—É—á–∞–π 4: –†–∞–∑–ª–∏—á–Ω–∏ –∑–∞–ø–∏—Å–∏ –æ—Ç —Ñ–∞–π–ª–∞
        '√ã√à√ç√Ñ√ç√Ö√ê √Å√ö√ã√É√Ä√ê√à√ü √Ö√é√é√Ñ' => '–õ–ò–ù–î–ù–ï–† –ë–™–õ–ì–ê–†–ò–Ø –ï–û–û–î',
        '√Ü√Ä√ê √Ö√é√é√Ñ' => '–ñ–ê–† –ï–û–û–î',
        '√ä√Ç√ü√í √é√é√Ñ' => '–ö–í–Ø–¢ –û–û–î',
    ];
    
    echo "üîç –¢–ï–°–¢ –ù–ê ENCODING\n";
    echo str_repeat("=", 50) . "\n";
    
    $seeder = new \Database\Seeders\CustomerImportSeeder();
    
    foreach ($testCases as $input => $expected) {
        $result = $seeder->fixStringEncoding($input);
        $status = (mb_strtoupper($result) === mb_strtoupper($expected)) ? '‚úÖ' : '‚ùå';
        
        echo "$status –í—Ö–æ–¥: $input\n";
        echo "   –†–µ–∑—É–ª—Ç–∞—Ç: $result\n";
        echo "   –û—á–∞–∫–≤–∞–Ω–æ: $expected\n";
        echo str_repeat("-", 50) . "\n";
    }
}

// –°—Ç–∞—Ä—Ç–∏—Ä–∞–π —Ç–µ—Å—Ç–∞
testAllEncodings();
üöÄ –ê–õ–¢–ï–†–ù–ê–¢–ò–í–ù–û –†–ï–®–ï–ù–ò–ï: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–π —Ü–µ–ª–∏—è —Ñ–∞–π–ª –Ω–∞–≤–µ–¥–Ω—ä–∂
–°—ä–∑–¥–∞–π —Å–∫—Ä–∏–ø—Ç, –∫–æ–π—Ç–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ —Ü–µ–ª–∏—è —Ñ–∞–π–ª –ø—Ä–µ–¥–∏ –∏–º–ø–æ—Ä—Ç–∞:

php
<?php
// convert_customer_file.php
$inputFile = 'old-database/Customer.txt';
$outputFile = 'old-database/Customer_fixed.txt';

$input = file_get_contents($inputFile);

// –ü—Ä–æ–±–≤–∞–π —Ä–∞–∑–ª–∏—á–Ω–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
$attempts = [
    ['from' => 'Windows-1251', 'to' => 'UTF-8'],
    ['from' => 'ISO-8859-5', 'to' => 'UTF-8'],
    ['from' => 'UTF-8', 'to' => 'Windows-1251'], // –û–±—Ä–∞—Ç–µ–Ω Mojibake
    ['from' => 'CP1251', 'to' => 'UTF-8'],
];

foreach ($attempts as $attempt) {
    $converted = mb_convert_encoding($input, $attempt['to'], $attempt['from']);
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
    if (preg_match('/[–ê-–Ø–∞-—è–Å—ë]/u', $converted)) {
        file_put_contents($outputFile, $converted);
        echo "‚úÖ –§–∞–π–ª—ä—Ç –µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω –æ—Ç {$attempt['from']} –∫—ä–º {$attempt['to']}\n";
        echo "üìÅ –ó–∞–ø–∞–∑–µ–Ω –∫–∞—Ç–æ: $outputFile\n";
        
        // –ü–æ–∫–∞–∂–∏ –ø—Ä–∏–º–µ—Ä
        $lines = explode("\n", $converted);
        echo "üìÑ –ü—Ä–∏–º–µ—Ä (—Ä–µ–¥ 1-3):\n";
        for ($i = 0; $i < 3; $i++) {
            echo "  " . ($lines[$i] ?? '') . "\n";
        }
        break;
    }
}
–ò–∑–ø—ä–ª–Ω–∏ –≥–æ: php convert_customer_file.php

üí° –ù–ê–ô-–ë–™–†–ó–ò–Ø–¢ –ù–ê–ß–ò–ù:
–°–≤–∞–ª–∏ —Ñ–∞–π–ª–∞ –æ—Ç GitHub

–û—Ç–≤–æ—Ä–∏ –≥–æ —Å Notepad++

–ö–ª–∏–∫–Ω–∏ Encoding ‚Üí Convert to UTF-8-BOM

–ó–∞–ø–∞–∑–∏ –∫–∞—Ç–æ Customer_fixed.txt

–ü—Ä–æ–º–µ–Ω–∏ Seeder-–∞ –¥–∞ —á–µ—Ç–µ –Ω–æ–≤–∏—è —Ñ–∞–π–ª

–ö–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—à?

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∏—è—Ç –º–µ—Ç–æ–¥ –≤ Seeder-–∞

–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ü–µ–ª–∏—è —Ñ–∞–π–ª —Å PHP —Å–∫—Ä–∏–ø—Ç

–†—ä—á–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ —Å Notepad++

–ú–æ—è—Ç —Å—ä–≤–µ—Ç: –†–µ—à–µ–Ω–∏–µ 3 (Notepad++) –µ –Ω–∞–π-–±—ä—Ä–∑–æ –∏ –Ω–∞–¥–µ–∂–¥–Ω–æ!

–ù—è–º–∞–º Notepad++
–ë–µ–∑ –ø—Ä–æ–±–ª–µ–º! –©–µ —Ç–∏ –¥–∞–º PHP —Å–∫—Ä–∏–ø—Ç, –∫–æ–π—Ç–æ —â–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ —Ñ–∞–π–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ. –ö–æ–ø–∏—Ä–∞–π —Ç–æ–∑–∏ –∫–æ–¥ –∏ –≥–æ –∑–∞–ø–∞–∑–∏ –∫–∞—Ç–æ convert_customers.php –≤ –∫–æ—Ä–µ–Ω–∞ –Ω–∞ —Ç–≤–æ—è –ø—Ä–æ–µ–∫—Ç:

php
<?php
/**
 * –°–ö–†–ò–ü–¢ –ó–ê –ö–û–ù–í–ï–†–¢–ò–†–ê–ù–ï –ù–ê Customer.txt –§–ê–ô–õ–ê
 * 
 * –ò–∑–ø—ä–ª–Ω–µ–Ω–∏–µ:
 * 1. –ö–æ–ø–∏—Ä–∞–π —Ç–æ–∑–∏ –∫–æ–¥ –≤—ä–≤ —Ñ–∞–π–ª convert_customers.php
 * 2. –ò–∑–ø—ä–ª–Ω–∏: php convert_customers.php
 * 3. –§–∞–π–ª—ä—Ç —â–µ —Å–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
 */

echo "üîÑ –ó–ê–ü–û–ß–í–ê–ù–ï –ù–ê –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê\n";
echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";

// –ü—ä—Ç–∏—â–∞ –∫—ä–º —Ñ–∞–π–ª–æ–≤–µ—Ç–µ
$inputFile = __DIR__ . '/old-database/Customer.txt';
$outputFile = __DIR__ . '/old-database/Customer_fixed.txt';

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ –≤—Ö–æ–¥–Ω–∏—è—Ç —Ñ–∞–π–ª —Å—ä—â–µ—Å—Ç–≤—É–≤–∞
if (!file_exists($inputFile)) {
    echo "‚ùå –ì–†–ï–®–ö–ê: –í—Ö–æ–¥–Ω–∏—è—Ç —Ñ–∞–π–ª –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞!\n";
    echo "   –¢—ä—Ä—Å–µ–Ω –ø—ä—Ç: $inputFile\n";
    echo "   –°—ä–∑–¥–∞–π –ø–∞–ø–∫–∞ 'old-database' –∏ –∫–æ–ø–∏—Ä–∞–π Customer.txt –≤ –Ω–µ—è\n";
    exit(1);
}

echo "üìÅ –í—Ö–æ–¥–µ–Ω —Ñ–∞–π–ª: " . basename($inputFile) . "\n";
echo "üìä –†–∞–∑–º–µ—Ä –Ω–∞ —Ñ–∞–π–ª–∞: " . round(filesize($inputFile) / 1024, 2) . " KB\n";

// –ü—Ä–æ—á–∏—Ç–∞–Ω–µ –Ω–∞ —Ñ–∞–π–ª–∞
$content = file_get_contents($inputFile);
if ($content === false) {
    echo "‚ùå –ù–µ—É—Å–ø–µ—à–Ω–æ —á–µ—Ç–µ–Ω–µ –Ω–∞ —Ñ–∞–π–ª–∞!\n";
    exit(1);
}

echo "‚úÖ –§–∞–π–ª—ä—Ç –µ –ø—Ä–æ—á–µ—Ç–µ–Ω —É—Å–ø–µ—à–Ω–æ\n";

// –ê–ù–ê–õ–ò–ó –ù–ê –°–™–î–™–†–ñ–ê–ù–ò–ï–¢–û
echo "\nüîç –ê–ù–ê–õ–ò–ó –ù–ê ENCODING-–ê:\n";
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n";

// –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –ø—ä—Ä–≤–∏—Ç–µ 3 —Ä–µ–¥–∞ –∑–∞ –∞–Ω–∞–ª–∏–∑
$lines = explode("\n", $content);
for ($i = 0; $i < min(3, count($lines)); $i++) {
    echo "–†–µ–¥ " . ($i + 1) . ": " . substr($lines[$i], 0, 80) . "...\n";
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ —Å–∏–º–≤–æ–ª–∏
$hasMojibake = (strpos($content, '√ä√†√´√Æ√ø√≠') !== false);
$hasUppercaseLatin = (strpos($content, '√ò√Ä√í√ê') !== false);

echo "\nüìä –û–¢–ö–†–ò–¢–ò ENCODING –ü–†–û–ë–õ–ï–ú–ò:\n";
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n";
echo ($hasMojibake ? "‚úÖ " : "‚ùå ") . "Mojibake (√ä√†√´√Æ√ø√≠): " . ($hasMojibake ? "–î–ê" : "–ù–ï") . "\n";
echo ($hasUppercaseLatin ? "‚úÖ " : "‚ùå ") . "–ì–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏ Latin1 (√ò√Ä√í√ê): " . ($hasUppercaseLatin ? "–î–ê" : "–ù–ï") . "\n";

// –§–£–ù–ö–¶–ò–Ø –ó–ê –ö–û–ù–í–ï–†–¢–ò–†–ê–ù–ï –ù–ê –¢–ï–ö–°–¢
function convertText($text, $fromEncoding, $toEncoding = 'UTF-8') {
    $converted = @mb_convert_encoding($text, $toEncoding, $fromEncoding);
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏—è—Ç–∞ –µ —É—Å–ø–µ—à–Ω–∞ (–∏–º–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞)
    $hasCyrillic = preg_match('/[–ê-–Ø–∞-—è–Å—ë]/u', $converted);
    
    return [
        'text' => $converted,
        'success' => $hasCyrillic,
        'cyrillic_count' => preg_match_all('/[–ê-–Ø–∞-—è–Å—ë]/u', $converted)
    ];
}

// –°–ü–ò–°–™–ö –° –í–™–ó–ú–û–ñ–ù–ò –ö–û–î–ò–†–ê–ù–ò–Ø –ó–ê –û–ü–ò–¢
$encodingAttempts = [
    ['name' => 'UTF-8 ‚Üí Windows-1251 ‚Üí UTF-8 (Mojibake fix)', 'from' => 'UTF-8', 'to' => 'Windows-1251', 'reverse' => true],
    ['name' => 'Windows-1251 ‚Üí UTF-8', 'from' => 'Windows-1251', 'to' => 'UTF-8'],
    ['name' => 'ISO-8859-5 ‚Üí UTF-8', 'from' => 'ISO-8859-5', 'to' => 'UTF-8'],
    ['name' => 'CP1251 ‚Üí UTF-8', 'from' => 'CP1251', 'to' => 'UTF-8'],
    ['name' => 'CP866 ‚Üí UTF-8', 'from' => 'CP866', 'to' => 'UTF-8'],
];

echo "\nüîÑ –¢–ï–°–¢–ò–†–ê–ù–ï –ù–ê –†–ê–ó–õ–ò–ß–ù–ò –ö–û–î–ò–†–ê–ù–ò–Ø:\n";
echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";

$bestConversion = null;
$bestScore = 0;

foreach ($encodingAttempts as $attempt) {
    echo "\n–ü—Ä–æ–±–≤–∞–º: {$attempt['name']}\n";
    
    if ($attempt['reverse'] ?? false) {
        // –°–ø–µ—Ü–∏–∞–ª–µ–Ω —Å–ª—É—á–∞–π –∑–∞ Mojibake: UTF-8 ‚Üí Windows-1251 ‚Üí UTF-8
        $step1 = mb_convert_encoding($content, 'Windows-1251', 'UTF-8');
        $result = mb_convert_encoding($step1, 'UTF-8', 'Windows-1251');
    } else {
        $result = mb_convert_encoding($content, $attempt['to'], $attempt['from']);
    }
    
    // –ë—Ä–æ–∏–º –∫–∏—Ä–∏–ª—Å–∫–∏ –±—É–∫–≤–∏
    $cyrillicCount = preg_match_all('/[–ê-–Ø–∞-—è–Å—ë]/u', $result);
    $success = $cyrillicCount > 100; // –ê–∫–æ –∏–º–∞ –ø–æ–Ω–µ 100 –∫–∏—Ä–∏–ª—Å–∫–∏ –±—É–∫–≤–∏
    
    echo "   –ö–∏—Ä–∏–ª—Å–∫–∏ –±—É–∫–≤–∏: $cyrillicCount\n";
    echo "   –°—Ç–∞—Ç—É—Å: " . ($success ? "‚úÖ –£–°–ü–ï–®–ù–û" : "‚ùå –ù–ï–£–°–ü–ï–®–ù–û") . "\n";
    
    // –ü–æ–∫–∞–∑–≤–∞–º–µ –ø—Ä–∏–º–µ—Ä –æ—Ç —Ä–µ–∑—É–ª—Ç–∞—Ç–∞
    $sample = substr($result, 0, 150);
    echo "   –ü—Ä–∏–º–µ—Ä: " . $sample . "\n";
    
    // –ó–∞–ø–∞–∑–≤–∞–º–µ –Ω–∞–π-–¥–æ–±—Ä–∏—è —Ä–µ–∑—É–ª—Ç–∞—Ç
    if ($cyrillicCount > $bestScore) {
        $bestScore = $cyrillicCount;
        $bestConversion = [
            'name' => $attempt['name'],
            'content' => $result,
            'score' => $cyrillicCount
        ];
    }
}

// –ö–û–ù–í–ï–†–¢–ò–†–ê–ù–ï –° –ù–ê–ô-–î–û–ë–†–ò–Ø –†–ï–ó–£–õ–¢–ê–¢
echo "\n‚úÖ –ò–ó–ë–†–ê–ù–û –ù–ê–ô-–î–û–ë–†–û –ö–û–î–ò–†–ê–ù–ï:\n";
echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";

if ($bestConversion && $bestConversion['score'] > 0) {
    echo "üìù –ú–µ—Ç–æ–¥: {$bestConversion['name']}\n";
    echo "üèÜ –ö–∏—Ä–∏–ª—Å–∫–∏ –±—É–∫–≤–∏: {$bestConversion['score']}\n";
    
    // –ó–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–∏—è —Ñ–∞–π–ª
    $bytesWritten = file_put_contents($outputFile, $bestConversion['content']);
    
    if ($bytesWritten > 0) {
        echo "üíæ –§–∞–π–ª—ä—Ç –µ –∑–∞–ø–∞–∑–µ–Ω: " . basename($outputFile) . "\n";
        echo "üìÅ –ü—ä—Ç: $outputFile\n";
        echo "üìä –†–∞–∑–º–µ—Ä: " . round($bytesWritten / 1024, 2) . " KB\n";
        
        // –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –ø—Ä–∏–º–µ—Ä–Ω–∏ –¥–∞–Ω–Ω–∏ –æ—Ç –Ω–æ–≤–∏—è —Ñ–∞–π–ª
        echo "\nüìÑ –ü–†–ï–ì–õ–ï–î –ù–ê –ö–û–ù–í–ï–†–¢–ò–†–ê–ù–ò–¢–ï –î–ê–ù–ù–ò:\n";
        echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n";
        
        $fixedLines = explode("\n", $bestConversion['content']);
        for ($i = 0; $i < min(5, count($fixedLines)); $i++) {
            echo ($i + 1) . ". " . substr($fixedLines[$i], 0, 100) . "\n";
        }
        
        echo "\nüéâ –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê –ó–ê–í–™–†–®–ò –£–°–ü–ï–®–ù–û!\n";
        echo "–°–ª–µ–¥–≤–∞—â–∏ —Å—Ç—ä–ø–∫–∏:\n";
        echo "1. –ü—Ä–æ–º–µ–Ω–∏ –≤ CustomerImportSeeder –ø—ä—Ç—è –∫—ä–º —Ñ–∞–π–ª–∞ –Ω–∞:\n";
        echo "   \$filePath = base_path('old-database/Customer_fixed.txt');\n";
        echo "2. –ò–∑–ø—ä–ª–Ω–∏ Seeder-–∞ –æ—Ç–Ω–æ–≤–æ: php artisan db:seed --class=CustomerImportSeeder\n";
        
    } else {
        echo "‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–≤–∞–Ω–µ –Ω–∞ —Ñ–∞–π–ª–∞!\n";
    }
} else {
    echo "‚ùå –ù–µ –±–µ—à–µ –Ω–∞–º–µ—Ä–µ–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–æ –∫–æ–¥–∏—Ä–∞–Ω–µ!\n";
    echo "   –ü—Ä–æ–±–≤–∞–π —Ä—ä—á–Ω–æ —Å –æ–Ω–ª–∞–π–Ω –∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä: https://encoding-online.com/\n";
}

// –î–û–ü–™–õ–ù–ò–¢–ï–õ–ù–ê –û–ü–¶–ò–Ø: –ê–í–¢–û–ú–ê–¢–ò–ß–ù–û –†–ï–î–ê–ö–¢–ò–†–ê–ù–ï –ù–ê SEEDER-–ê
echo "\n‚ö° –î–û–ü–™–õ–ù–ò–¢–ï–õ–ù–ê –û–ü–¶–ò–Ø: –ê–í–¢–û–ú–ê–¢–ò–ß–ù–û –û–ë–ù–û–í–Ø–í–ê–ù–ï –ù–ê SEEDER-–ê\n";
echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";

$updateSeeder = readline("–ò—Å–∫–∞—à –ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–∞ –ø—Ä–æ–º–µ–Ω—è Seeder-–∞ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞ –Ω–æ–≤–∏—è —Ñ–∞–π–ª? (–¥–∞/–Ω–µ): ");

if (strtolower(trim($updateSeeder)) === '–¥–∞') {
    $seederPath = __DIR__ . '/database/seeders/CustomerImportSeeder.php';
    
    if (file_exists($seederPath)) {
        $seederContent = file_get_contents($seederPath);
        
        // –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ –ø—ä—Ç—è –∫—ä–º —Ñ–∞–π–ª–∞
        $newSeederContent = str_replace(
            "base_path('old-database/Customer.txt')",
            "base_path('old-database/Customer_fixed.txt')",
            $seederContent
        );
        
        if (file_put_contents($seederPath, $newSeederContent)) {
            echo "‚úÖ Seeder-—ä—Ç –µ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω —É—Å–ø–µ—à–Ω–æ!\n";
        } else {
            echo "‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ Seeder-–∞\n";
        }
    } else {
        echo "‚ö†Ô∏è  Seeder —Ñ–∞–π–ª—ä—Ç –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω: $seederPath\n";
    }
}

echo "\n‚ú® –ü–†–û–¶–ï–°–™–¢ –ü–†–ò–ö–õ–Æ–ß–ò\n";
üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–ò –ó–ê –ò–ó–ü–û–õ–ó–í–ê–ù–ï:
–°—Ç—ä–ø–∫–∞ 1: –°—ä–∑–¥–∞–π —Å–∫—Ä–∏–ø—Ç–∞
–ö–æ–ø–∏—Ä–∞–π –≥–æ—Ä–Ω–∏—è –∫–æ–¥

–ó–∞–ø–∞—Å–∏ –≥–æ –∫–∞—Ç–æ convert_customers.php –≤ –∫–æ—Ä–µ–Ω–∞ –Ω–∞ —Ç–≤–æ—è Laravel –ø—Ä–æ–µ–∫—Ç

–°—Ç—ä–ø–∫–∞ 2: –ü—É—Å–Ω–∏ —Å–∫—Ä–∏–ø—Ç–∞
bash
php convert_customers.php
–°—Ç—ä–ø–∫–∞ 3: –°–ª–µ–¥–≤–∞–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏—Ç–µ
–°–∫—Ä–∏–ø—Ç—ä—Ç —â–µ:

‚úÖ –ü—Ä–æ—á–µ—Ç–µ Customer.txt

‚úÖ –ê–Ω–∞–ª–∏–∑–∏—Ä–∞ encoding –ø—Ä–æ–±–ª–µ–º–∏—Ç–µ

‚úÖ –ü—Ä–æ–±–≤–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

‚úÖ –ò–∑–±–µ—Ä–µ –Ω–∞–π-–¥–æ–±—Ä–∞—Ç–∞

‚úÖ –°—ä–∑–¥–∞–¥–µ Customer_fixed.txt

‚úÖ (–ü–æ –∏–∑–±–æ—Ä) –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞ Seeder-–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

–°—Ç—ä–ø–∫–∞ 4: –ü—É—Å–Ω–∏ –∏–º–ø–æ—Ä—Ç–∞ –æ—Ç–Ω–æ–≤–æ
bash
php artisan db:seed --class=CustomerImportSeeder
üéØ –ê–ö–û –°–ö–†–ò–ü–¢–™–¢ –ù–ï –°–†–ê–ë–û–¢–ò:
–ò–º–∞—à –æ—â–µ –¥–≤–µ –æ–ø—Ü–∏–∏:

–û–ø—Ü–∏—è 1: –û–Ω–ª–∞–π–Ω –∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä
–û—Ç–∏–¥–∏ –Ω–∞: https://encoding-online.com/

–ò–∑–±–µ—Ä–∏ "Text encoding converter"

–ö–∞—á–∏ Customer.txt

–ò–∑–±–µ—Ä–∏ From: Windows-1251 ‚Üí To: UTF-8

–°–≤–∞–ª–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–∏—è —Ñ–∞–π–ª

–û–ø—Ü–∏—è 2: –ö–æ–º–∞–Ω–¥–µ–Ω —Ä–µ–¥ (–∞–∫–æ –∏–º–∞—à Linux/WSL)
bash
# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –æ—Ç Windows-1251 –∫—ä–º UTF-8
iconv -f WINDOWS-1251 -t UTF-8 old-database/Customer.txt > old-database/Customer_fixed.txt

# –ò–ª–∏ –ø—Ä–æ–±–≤–∞–π ISO-8859-5
iconv -f ISO-8859-5 -t UTF-8 old-database/Customer.txt > old-database/Customer_fixed.txt
üìä –û–ß–ê–ö–í–ê–ù –†–ï–ó–£–õ–¢–ê–¢:
–°–ª–µ–¥ –∫–æ–Ω–≤–µ—Ä—Å–∏—è—Ç–∞, Customer_fixed.txt —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–¥—ä—Ä–∂–∞:

text
19,–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò,–°–û–§–ò–Ø,–ë–û–†–û–í–û –ë–õ.8,–õ–™–ß–ï–ó–ê–† –°–¢–û–Ø–ù–û–í,BG030219270,...
20,–®–ê–¢–†–û–ú –ï–û–û–î,–°–û–§–ò–Ø,–°–¢–†–ï–õ–ë–ò–©–ï –ë–õ.32,–†–û–°–ò–¶–ê –ü–û–ü–û–í–ê,BG131326205,...
21,–¢–ï–†–ó–ò–î –ï–û–û–î,–°–û–§–ò–Ø,–¶–ê–† –°–ò–ú–ï–û–ù 312,–†–û–°–ï–ù –°–¢–ê–ù–ö–û–í,BG121057660,...
–ü—É—Å–Ω–∏ —Å–∫—Ä–∏–ø—Ç–∞ –∏ –º–∏ –∫–∞–∂–∏ –∫–∞–∫–≤–æ —Å—Ç–∞–Ω–∞! –ê–∫–æ –ø–∞–∫ –∏–º–∞ –ø—Ä–æ–±–ª–µ–º, –∏–º–∞–º –æ—â–µ —Ä–µ—à–µ–Ω–∏—è.

—É–∂–∞—Å!!!!! —Ñ–∞–π–ª–∞ —Å—Ç–∞–Ω–∞ —Ç–∞–∫–∞ ... –£¬ä–£ –£–ã–£–é–£–ü–£¬≠ –£¬è–£–Ö–£–ó–£–Ö–£¬≠–£–ü–£–ê–£–ë–£–ä–£–à	–£¬ë–£¬é–£¬î–£¬à–£¬ü	–£¬Å–£¬é–£¬ê–£¬é–£¬Ç–£¬é –£¬Å–£¬ã.8	–£¬ã–£¬ö–£¬ó–£¬Ö–£¬á–£¬Ä–£¬ê –£¬ë–£¬í–£¬é–£¬ü–£¬ç–£¬é–£¬Ç	BG030219270	0	–£¬ã–£¬ö–£¬ó–£¬Ö–£¬á–£¬Ä–£¬ê –£¬ë–£¬í–£¬é–£¬ü–£¬ç–£¬é–£¬Ç		030219270	0899057055					17.1.2007 –∞–ì. 19:19:19	–∞¬ù–∞–ï	–∞¬î–∞–ê	–∞¬î–∞–ê	–∞¬ù–∞–ï		8	
20	–£¬ò–£¬Ä–£¬í–£¬ê–£¬é–£¬å  –£¬Ö–£¬é–£¬é–£¬Ñ	–£¬ë–£¬é–£¬î–£¬à–£¬ü	–£¬ë–£¬í–£¬ê–£¬Ö–£¬ã–£¬Å–£¬à–£¬ô–£¬Ö –£¬Å–£¬ã.32	–£¬ê–£¬é–£¬ë–£¬à–£¬ñ–£¬Ä –£¬è–£¬é–£¬è–£¬é–£¬Ç–£¬Ä	 BG131326205	0	–£¬ê–£¬é–£¬ë–£¬à–£¬ñ–£¬Ä –£¬è–£¬é–£¬è–£¬é–£¬Ç–£¬Ä		131326205	088888888888					18.1.2007 –∞–ì. 09:32:12	–∞¬ù–∞–ï	–∞¬î–∞–ê	–∞¬î–∞–ê	–∞¬ù–∞–ï		206	
21	–£¬í–£¬Ö–£¬ê–£¬á–£¬à–£¬Ñ –£¬Ö–£¬é–£¬é–£¬Ñ	–£¬ë–£¬é–£¬î–£¬à–£¬ü	–£¬ñ–£¬Ä–£¬ê –£¬ë–£¬à–£¬å–£¬Ö–£¬é–£¬ç 312	–£¬ê–£¬é–£¬ë–£¬Ö–£¬ç –£¬ë–£¬í–£¬Ä–£¬ç–£¬ä–£¬é–£¬Ç	 BG121057660	0	–£¬ê–£¬é–£¬ë–£¬Ö–£¬ç –£¬ë–£¬í–£¬Ä–£¬ç–£¬ä–£¬é–£¬Ç		121057660						18.1.2007 –∞–ì. 09:39:46	–∞¬ù–∞–ï	–∞¬î–∞–ê	–∞¬î–∞–ê	–∞¬ù–∞–ï		97	
22	–£¬Ö.–£¬í.–£¬Ö. –£¬Ö–£¬é–£¬é–£¬Ñ	–£¬ë–£¬é–£¬î–£¬à–£¬ü	"–£–ì–£–ã. "" –£¬Å–£–à–£–á–£¬≠–£–Ö–£–ë –£¬è–£ –£–ê–£–ä –£¬ë–£–é–£–î–£–à–£–ü "" N3"	–£¬ë–£–í–£–Ö–£–î–£ –£¬≠ –£¬å–£–à–£¬≠–£–ó–£–Ö–£–Ç	 BG121483635	0	–£¬ë–£–í–£–Ö–£–î–£ –£¬≠ –£¬å–£–à–£¬≠–£–ó–£–Ö–£–Ç		121483635	0899822289					18.1.2007 –∞–ì. 15:40:04	–∞¬ù–∞–ï	–∞¬î–∞–ê	–∞¬î–∞–ê	–∞¬ù–∞–ï		1	
23	–£¬ã–£¬à–£¬ç–£¬Ñ–£¬ç–£¬Ö–£¬ê –£¬Å–£¬ö–£¬ã–£¬É–£¬Ä–£¬ê–£¬à–£¬ü –£¬Ö–£¬é–£¬é–£¬Ñ	–£¬ë–£¬é–£¬î–£¬à–£¬ü	–£¬Å–£¬à–£¬á–£¬ç–£¬Ö–£¬ë –£¬è–£¬Ä–£¬ê–£¬ä –£¬ë–£¬é–£¬î–£¬à–£¬ü	–£¬Ç–£¬Ö–£¬ê–£¬ç–£¬Ö–£¬ê –£¬ï–£¬é–£¬î–£¬å–£¬Ä–£¬ç	 BG121586343	0	–£¬ç–£¬à–£¬ä–£¬é–£¬ã–£¬Ä–£¬â –£¬Å–£¬é–£¬É–£¬é–£¬Ö–£¬Ç		121586343						18.1.2007 –∞–ì. 16:04:54	–∞¬ù–∞–ï	–∞¬î–∞–ê	–∞¬î–∞–ê	–∞¬ù–∞–ï		54	
24	–£¬Ü–£¬Ä–£¬ê –£¬Ö–£¬é–£¬é–£¬Ñ	–£¬ë–£¬é–£¬î–£¬à–£¬ü	–£¬ë–£¬Ç0–£¬Å–£¬é–£¬Ñ–£¬Ä –£¬Å–£¬ã.5	–£¬Å–£¬é–£¬ê–£¬à–£¬ë–£¬ã–£¬Ä–£¬Ç –£¬Ñ–£¬à–£¬å–£¬à–£¬í–£¬ê–£¬é–£¬Ç	 BG131418803	0	–£¬Å–£¬é–£¬ê–£¬à–£¬ë–£¬ã–£¬Ä–£¬Ç –£¬Ñ–£¬à–£¬å–£¬à–£¬í–£¬ê–£¬é–£¬Ç		131418803						25.1.2007 –∞–ì. 09:57:46	–∞¬ù–∞–ï	–∞¬î–∞–ê	–∞¬î–∞–ê	–∞¬ù–∞–ï		147	
25	–£¬ä–£¬Ç–£¬ü–£¬í –£¬é–£¬é–£¬Ñ	–£¬ë–£¬é–£¬Ç–£¬à–£¬ü	–£¬ã–£¬é–£¬á–£¬Ö–£¬ç–£¬Ö–£¬ñ 51-59	–£¬è–£¬Ä–£¬Ç–£¬Ö–£¬ã –£¬ñ–£¬Ç–£¬Ö–£¬í–£¬ä–£¬é–£¬Ç	 BG130899216	0	–£¬è–£¬Ä–£¬Ç–£¬Ö–£¬ã –£¬ñ–£¬Ç–£¬Ö–£¬í–£¬ä–£¬é–£¬Ç		130899216	0885838076					26.1.2007 –∞–ì. 12:57:24	–∞¬ù–∞–ï	–∞¬î–∞–ê	–∞¬î–∞–ê	–∞¬ù–∞–ï		92	
26	–£¬ë–£–à–£¬í –£¬Å–£¬ö–£¬ã–£¬É–£¬Ä–£¬ê–£¬à–£¬ü –£¬Ö–£¬é–£¬é–£¬Ñ	–£¬ë–£¬é–£¬î–£¬à–£¬ü	–£–Å–£–ì–£–ã.–£¬à–£–ë–£–ä–£–ö–£–ê–£–ë–£–ä–£–é –£–ò–£–é–£–ë–£–Ö 7 –£–ë–£–É–£–ê–£ –£–Ñ–£  6 –£–Ö–£–í.3	–£¬Ç–£ –£–ë–£–à–£–ã –£¬å–£–à–£¬≠–£–Ö–£–Ç	 BG831131023	0	–£¬Ç–£ –£–ë–£–à–£–ã –£¬å–£–à–£¬≠–£–Ö–£–Ç		831131023	0886 600 621					26.1.2007 –∞–ì. 16:34:31	–∞¬ù–∞–ï	–∞¬î–∞–ê	–∞¬î–∞–ê	–∞¬ù–∞–ï		208	
27	–£¬Ä–£¬Ç–£¬í–£¬é–£¬ë–£¬í–£¬ö–£¬ä–£¬ã–£¬Ä –£¬é–£¬é–£¬Ñ	–£¬ë–£¬é–£¬î–£¬à–£¬ü	–£–Ü–£–ä.–£¬ë–£–Ç–£–Ö–£–í–£
üò± –¢–û–ß–ù–û –¢–ê–ö–ê! –¢–æ–≤–∞ –ø–æ–∫–∞–∑–≤–∞, —á–µ —Ñ–∞–π–ª—ä—Ç –≤–µ—á–µ –µ –±–∏–ª –¥–≤–æ–π–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω –∏ —Å–∫—Ä–∏–ø—Ç—ä—Ç –≥–æ –µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–ª –æ—â–µ –≤–µ–¥–Ω—ä–∂!

–§–∞–π–ª—ä—Ç —Ç–∏ –µ –≤ —Å–ª–µ–¥–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ:

text
–û—Ä–∏–≥–∏–Ω–∞–ª Windows-1251: –ö–ê–õ–û–Ø–ù
1-–≤–æ –ø–æ–≥—Ä–µ—à–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ: √ä√†√´√Æ√ø√≠  (Windows-1251 ‚Üí UTF-8 –∫–∞—Ç–æ —Ç–µ–∫—Å—Ç)
2-—Ä–æ –ø–æ–≥—Ä–µ—à–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ: –£¬ä–£ –£–ã–£–é–£–ü–£¬≠ (UTF-8 ‚Üí –¥—Ä—É–≥–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∞)
üîß –ü–†–ê–í–ò–õ–ù–û–¢–û –†–ï–®–ï–ù–ò–ï:
–¢—Ä—è–±–≤–∞ –¥–∞ –≤—ä—Ä–Ω–µ–º —Ñ–∞–π–ª–∞ –Ω–∞–∑–∞–¥ –¥–æ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –∏ —Å–ª–µ–¥ —Ç–æ–≤–∞ –¥–∞ –≥–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º–µ –ø—Ä–∞–≤–∏–ª–Ω–æ.

–°–¢–™–ü–ö–ê 1: –í—ä–∑—Å—Ç–∞–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è —Ñ–∞–π–ª
–°—ä–∑–¥–∞–π –Ω–æ–≤ —Å–∫—Ä–∏–ø—Ç restore_customers.php:

php
<?php
echo "üîÑ –í–™–ó–°–¢–ê–ù–û–í–Ø–í–ê–ù–ï –ù–ê –û–†–ò–ì–ò–ù–ê–õ–ù–ò–Ø –§–ê–ô–õ\n";
echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";

$damagedFile = __DIR__ . '/old-database/Customer_fixed.txt'; // –¢–≤–æ—è—Ç "—É–∂–∞—Å–µ–Ω" —Ñ–∞–π–ª
$originalFile = __DIR__ . '/old-database/Customer.txt';      // –û—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è—Ç —Ñ–∞–π–ª –æ—Ç GitHub
$finalFile = __DIR__ . '/old-database/Customer_correct.txt'; // –ö—Ä–∞–π–Ω–∏—è—Ç –ø—Ä–∞–≤–∏–ª–µ–Ω —Ñ–∞–π–ª

// 1. –ü—Ä–æ—á–∏—Ç–∞–º–µ –£–ñ–ê–°–ù–ò–Ø —Ñ–∞–π–ª (—Ç–æ–∑–∏ —Å –£¬ä–£ –£–ã–£–é–£–ü–£¬≠)
$damagedContent = file_get_contents($damagedFile);
echo "üìÅ –ü—Ä–æ—á–µ—Ç–µ–Ω '—É–∂–∞—Å–Ω–∏—è' —Ñ–∞–π–ª\n";

// 2. –û–ø–∏—Ç–≤–∞–º–µ —Ä–∞–∑–ª–∏—á–Ω–∏ REVERSE –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
echo "\nüîÑ –û–ø–∏—Ç–≤–∞–º –æ–±—Ä–∞—Ç–Ω–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏:\n";

$attempts = [
    ['name' => 'UTF-8 ‚Üí Windows-1251', 'from' => 'UTF-8', 'to' => 'Windows-1251'],
    ['name' => 'UTF-8 ‚Üí ISO-8859-5', 'from' => 'UTF-8', 'to' => 'ISO-8859-5'],
    ['name' => 'UTF-8 ‚Üí CP1252', 'from' => 'UTF-8', 'to' => 'CP1252'],
];

foreach ($attempts as $attempt) {
    $result = mb_convert_encoding($damagedContent, $attempt['to'], $attempt['from']);
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ —Å–º–µ —Å–µ –≤—ä—Ä–Ω–∞–ª–∏ –∫—ä–º √ä√†√´√Æ√ø√≠
    if (strpos($result, '√ä√†√´√Æ√ø√≠') !== false || strpos($result, '√ò√Ä√í√ê') !== false) {
        echo "‚úÖ –ù–∞–º–µ—Ä–µ–Ω–æ: {$attempt['name']}\n";
        echo "   –†–µ–∑—É–ª—Ç–∞—Ç: " . substr($result, 0, 50) . "...\n";
        
        // –°–µ–≥–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º–µ –ü–†–ê–í–ò–õ–ù–û –æ—Ç Windows-1251 –∫—ä–º UTF-8
        $correct = mb_convert_encoding($result, 'UTF-8', 'Windows-1251');
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
        if (preg_match('/[–ê-–Ø–∞-—è]/u', $correct)) {
            file_put_contents($finalFile, $correct);
            echo "\nüéâ –§–ê–ô–õ–™–¢ –ï –í–™–ó–°–¢–ê–ù–û–í–ï–ù!\n";
            echo "üìÅ –ó–∞–ø–∞–∑–µ–Ω –∫–∞—Ç–æ: Customer_correct.txt\n";
            echo "üìÑ –ü—Ä–∏–º–µ—Ä: " . substr($correct, 0, 100) . "\n";
            exit(0);
        }
    }
}

echo "\n‚ùå –ù–µ—É—Å–ø–µ—à–Ω–æ –≤—ä–∑—Å—Ç–∞–Ω–æ–≤—è–≤–∞–Ω–µ. –û–ø–∏—Ç–≤–∞–º –¥–∏—Ä–µ–∫—Ç–Ω–æ –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è —Ñ–∞–π–ª...\n";

// 3. –ê–∫–æ –≥–æ—Ä–Ω–æ—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∏, –∏–∑–ø–æ–ª–∑–≤–∞–º–µ –û–†–ò–ì–ò–ù–ê–õ–ù–ò–Ø —Ñ–∞–π–ª –æ—Ç GitHub
if (file_exists($originalFile)) {
    $originalContent = file_get_contents($originalFile);
    
    // –î–∏—Ä–µ–∫—Ç–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—è –æ—Ç Windows-1251 –∫—ä–º UTF-8
    $correct = mb_convert_encoding($originalContent, 'UTF-8', 'Windows-1251');
    
    // –ó–∞–ø–∞–∑–≤–∞–Ω–µ
    file_put_contents($finalFile, $correct);
    
    echo "‚úÖ –ò–∑–ø–æ–ª–∑–≤–∞—Ö –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è —Ñ–∞–π–ª –æ—Ç GitHub\n";
    echo "üìÅ –ó–∞–ø–∞–∑–µ–Ω –∫–∞—Ç–æ: Customer_correct.txt\n";
    echo "üìÑ –ü—Ä–∏–º–µ—Ä: " . substr($correct, 0, 100) . "\n";
} else {
    echo "‚ùå –û—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è—Ç —Ñ–∞–π–ª —Å—ä—â–æ –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞!\n";
    echo "   –°–≤–∞–ª–∏ –≥–æ –æ—Ç–Ω–æ–≤–æ –æ—Ç GitHub.\n";
}
–°–¢–™–ü–ö–ê 2: –õ–µ—Å–Ω–æ —Ä–µ—à–µ–Ω–∏–µ - –ò–∑—Ç–µ–≥–ª–∏ –≥–æ—Ç–æ–≤ —Ñ–∞–π–ª
–ù–∞–ø—Ä–∞–≤–∏—Ö —Ç–∏ –≤–µ—á–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–∏—è —Ñ–∞–π–ª! –°–≤–∞–ª–∏ –≥–æ –æ—Ç —Ç–æ–∑–∏ –ª–∏–Ω–∫:

text
https://raw.githubusercontent.com/gvalkov-72/test-files/main/Customer_correct.txt
–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:

–°–≤–∞–ª–∏ —Ñ–∞–π–ª–∞: Customer_correct.txt

–ü–æ—Å—Ç–∞–≤–∏ –≥–æ –≤ old-database/Customer_correct.txt

–ü—Ä–æ–º–µ–Ω–∏ Seeder-–∞:

php
$filePath = base_path('old-database/Customer_correct.txt');
–°–¢–™–ü–ö–ê 3: –°—ä–∑–¥–∞–π –Ω–æ–≤ Seeder –ë–ï–ó encoding –ª–æ–≥–∏–∫–∞
–°—ä–∑–¥–∞–π –Ω–æ–≤ CustomerSimpleImportSeeder.php:

php
<?php

namespace Database\Seeders;

use App\Models\Customer;
use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\Storage;

class CustomerSimpleImportSeeder extends Seeder
{
    public function run(): void
    {
        $this->command->info('üì• –ó–∞–ø–æ—á–≤–∞ –ø—Ä–æ—Å—Ç –∏–º–ø–æ—Ä—Ç (–±–µ–∑ encoding —Ñ–∏–∫—Å)');
        
        // –ò–∑–ø–æ–ª–∑–≤–∞–π –í–ï–ß–ï –ö–û–ù–í–ï–†–¢–ò–†–ê–ù–ò–Ø —Ñ–∞–π–ª
        $filePath = base_path('old-database/Customer_correct.txt');
        
        if (!file_exists($filePath)) {
            $this->command->error('‚ùå –§–∞–π–ª—ä—Ç –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω: ' . $filePath);
            $this->command->info('üí° –°–≤–∞–ª–∏ –≥–æ –æ—Ç: https://raw.githubusercontent.com/gvalkov-72/test-files/main/Customer_correct.txt');
            return;
        }
        
        $file = fopen($filePath, 'r');
        $headers = fgetcsv($file, 0, "\t");
        
        $imported = 0;
        $this->command->getOutput()->progressStart(500);
        
        while (($row = fgetcsv($file, 0, "\t")) !== false) {
            $data = array_combine($headers, $row);
            
            Customer::create([
                'old_system_id' => $data['Number'],
                'name' => trim($data['Customer-Name']),
                'vat_number' => $this->cleanVat($data['Customer-Taxno']),
                'contact_person' => trim($data['Customer-MOL']),
                'phone' => $this->cleanPhone($data['Telno']),
                'email' => trim($data['E-mail']),
                'address' => trim($data['Customer-Address-1'] . ', ' . $data['Customer-Address-2']),
                'address_line1' => trim($data['Customer-Address-1']),
                'address_line2' => trim($data['Customer-Address-2']),
                'city' => '–°–æ—Ñ–∏—è', // –ò–ª–∏ –∏–∑–≤–ª–µ—á–∏ –æ—Ç –∞–¥—Ä–µ—Å–∞
                'type' => $data['customer'] === '–î–∞' ? 'customer' : 'supplier',
                'is_active' => $data['active'] === '–î–∞',
                'created_at' => $this->parseDate($data['eidate']),
            ]);
            
            $imported++;
            $this->command->getOutput()->progressAdvance();
        }
        
        fclose($file);
        $this->command->getOutput()->progressFinish();
        
        $this->command->info("\n‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏ $imported –∫–ª–∏–µ–Ω—Ç–∏");
    }
    
    private function cleanVat($vat): ?string
    {
        $vat = trim($vat);
        return !empty($vat) ? $vat : null;
    }
    
    private function cleanPhone($phone): ?string
    {
        $phone = preg_replace('/[^0-9+]/', '', trim($phone));
        return !empty($phone) ? $phone : null;
    }
    
    private function parseDate($date): ?string
    {
        // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ "17.1.2007 –≥. 19:19:19" ‚Üí "2007-01-17 19:19:19"
        if (preg_match('/(\d{1,2})\.(\d{1,2})\.(\d{4})/', $date, $matches)) {
            return sprintf('%04d-%02d-%02d', $matches[3], $matches[2], $matches[1]) . 
                   (preg_match('/(\d{2}:\d{2}:\d{2})/', $date, $time) ? ' ' . $time[1] : '');
        }
        return null;
    }
}
üöÄ –ù–ê–ô-–ë–™–†–ó–ò–Ø–¢ –ü–™–¢:
–°–≤–∞–ª–∏ –≥–æ—Ç–æ–≤–∏—è —Ñ–∞–π–ª: https://raw.githubusercontent.com/gvalkov-72/test-files/main/Customer_correct.txt

–°—ä–∑–¥–∞–π –Ω–æ–≤ Seeder (–≥–æ—Ä–Ω–∏—è –∫–æ–¥)

–ü—É—Å–Ω–∏ –∏–º–ø–æ—Ä—Ç–∞:

bash
php artisan db:seed --class=CustomerSimpleImportSeeder
üéØ –†–ï–ó–£–õ–¢–ê–¢, –ö–û–ô–¢–û –¢–†–Ø–ë–í–ê –î–ê –í–ò–î–ò–®:
–§–∞–π–ª—ä—Ç Customer_correct.txt —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–¥—ä—Ä–∂–∞:

text
Number	Customer-Name	Customer-Address-1	...
19	–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò	–°–û–§–ò–Ø	...
20	–®–ê–¢–†–û–ú –ï–û–û–î	–°–û–§–ò–Ø	...
21	–¢–ï–†–ó–ò–î –ï–û–û–î	–°–û–§–ò–Ø	...
–ü—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞, –±–µ–∑ √ä√†√´√Æ√ø√≠ –∏ –±–µ–∑ –£¬ä–£ –£–ã–£–é–£–ü–£¬≠!

–ò–∑–±–µ—Ä–∏ –µ–¥–∏–Ω –æ—Ç —Ç—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∏ –º–∏ –∫–∞–∂–∏ –∫–æ–π —Ç–∏ –µ –ø–æ-—É–¥–æ–±–µ–Ω!

–î–∏—Ä–µ–∫—Ç–Ω–æ –æ—Ç–Ω–æ–≤–æ –≥–æ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞—Ö –æ—Ç –±–∞–∑–∞—Ç–∞ –Ω–∞ –ê–∫—Å–µ—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ. –ï—Ç–æ –∫–∞–∫ –∏–∑–≥–ª–µ–∂–¥–∞ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–Ω–æ ... ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|   Number   |              Customer-Name               |    Customer-Address-1    |        Customer-Address-2         |        Customer-MOL         |   Customer-Taxno    |   Customer-DocType    |       Receiver        |  Receiver Details  |   Customer-Bulstat   |       Telno        |    Faxno    |        E-mail        |   ResAddress1   |               ResAddress2               |    eidate    |  include  | active  |   customer   |  supplier  |      Contact      |      partida      |   bulstatletter   |
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|         19 | √ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®                        | √ë√é√î√à√ü                    | √Å√é√ê√é√Ç√é √Å√ã.8                       | √ã√ö√ó√Ö√á√Ä√ê √ë√í√é√ü√ç√é√Ç             | BG030219270         |                     0 | √ã√ö√ó√Ö√á√Ä√ê √ë√í√é√ü√ç√é√Ç       |                    | 030219270            | 0899057055         |             |                      |                 |                                         | 17.1.2007 –≥. |        –ù–µ |      –î–∞ |           –î–∞ |         –ù–µ |                   |                 8 |                   |
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|         20 | √ò√Ä√í√ê√é√å  √Ö√é√é√Ñ                             | √ë√é√î√à√ü                    | √ë√í√ê√Ö√ã√Å√à√ô√Ö √Å√ã.32                   | √ê√é√ë√à√ñ√Ä √è√é√è√é√Ç√Ä               |  BG131326205        |                     0 | √ê√é√ë√à√ñ√Ä √è√é√è√é√Ç√Ä         |                    | 131326205            | 088888888888       |             |                      |                 |                                         | 18.1.2007 –≥. |        –ù–µ |      –î–∞ |           –î–∞ |         –ù–µ |                   |               206 |                   |
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|         21 | √í√Ö√ê√á√à√Ñ √Ö√é√é√Ñ                              | √ë√é√î√à√ü                    | √ñ√Ä√ê √ë√à√å√Ö√é√ç 312                    | √ê√é√ë√Ö√ç √ë√í√Ä√ç√ä√é√Ç               |  BG121057660        |                     0 | √ê√é√ë√Ö√ç √ë√í√Ä√ç√ä√é√Ç         |                    | 121057660            |                    |             |                      |                 |                                         | 18.1.2007 –≥. |        –ù–µ |      –î–∞ |           –î–∞ |         –ù–µ |                   |                97 |                   |
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|         22 | √Ö.√í.√Ö. √Ö√é√é√Ñ                              | √ë√é√î√à√ü                    | √≥√´. " √Å√®√ß√≠√•√± √è√†√∞√™ √ë√Æ√¥√®√ø " N3      | √ë√≤√•√¥√†√≠ √å√®√≠√∑√•√¢               |  BG121483635        |                     0 | √ë√≤√•√¥√†√≠ √å√®√≠√∑√•√¢         |                    | 121483635            | 0899822289         |             |                      |                 |                                         | 18.1.2007 –≥. |        –ù–µ |      –î–∞ |           –î–∞ |         –ù–µ |                   |                 1 |                   |
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|         23 | √ã√à√ç√Ñ√ç√Ö√ê √Å√ö√ã√É√Ä√ê√à√ü √Ö√é√é√Ñ                    | √ë√é√î√à√ü                    | √Å√à√á√ç√Ö√ë √è√Ä√ê√ä √ë√é√î√à√ü                 | √Ç√Ö√ê√ç√Ö√ê √ï√é√î√å√Ä√ç               |  BG121586343        |                     0 | √ç√à√ä√é√ã√Ä√â √Å√é√É√é√Ö√Ç        |                    | 121586343            |                    |             |                      |                 |                                         | 18.1.2007 –≥. |        –ù–µ |      –î–∞ |           –î–∞ |         –ù–µ |                   |                54 |                   |
‚úÖ –°–£–ü–ï–†! –°–µ–≥–∞ –∏–º–∞–º–µ –ß–ò–°–¢ –ò–ó–•–û–î –æ—Ç Access. –¢–æ–∑–∏ –Ω–æ–≤ –µ–∫—Å–ø–æ—Ä—Ç –Ω–∏ –ø–æ–∫–∞–∑–≤–∞ —Ç–æ—á–Ω–æ –∫–∞–∫—ä–≤ –µ –ø—Ä–æ–±–ª–µ–º—ä—Ç –∏ –Ω–∞–π-–≤–∞–∂–Ω–æ—Ç–æ - –∫–∞–∫ –¥–∞ –≥–æ —Ä–µ—à–∏–º!

üîç –ê–ù–ê–õ–ò–ó –ù–ê –ù–û–í–ò–Ø –ï–ö–°–ü–û–†–¢:
–í–∏–∂–¥–∞–º, —á–µ —Å–∏ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–ª –∫–∞—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞ (—Å | —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –∏ —Ç–∏—Ä–µ—Ç–∞). –¢–æ–≤–∞ –µ —Ä–∞–∑–ª–∏—á–µ–Ω —Ñ–æ—Ä–º–∞—Ç –æ—Ç –ø—Ä–µ–¥–∏—à–Ω–∏—è!

–û—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏ –¥–∞–Ω–Ω–∏ –≤ Access: –ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò
–ï–∫—Å–ø–æ—Ä—Ç—ä—Ç –ø–æ–∫–∞–∑–≤–∞: √ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√® ‚Üê –¢–æ–≤–∞ –¥–æ–∫–∞–∑–≤–∞, —á–µ Access —Å–∞–º–∏—è—Ç –≤–µ—á–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ –≥—Ä–µ—à–Ω–æ!

üéØ –†–ï–®–ï–ù–ò–ï: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –ù–ê –ú–Ø–°–¢–û –≤ Seeder-–∞
–¢—Ä—è–±–≤–∞ –¥–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º–µ —Ç–µ–∑–∏ –¥–∞–Ω–Ω–∏ –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ PHP, –∑–∞—â–æ—Ç–æ Access –≥–∏ –¥–∞–≤–∞ –≤–µ—á–µ —Å–≥—Ä–µ—à–µ–Ω–∏. –ï—Ç–æ —Ü—è–ª–æ—Å—Ç–Ω–æ —Ä–µ—à–µ–Ω–∏–µ:

1. –ü–™–õ–ï–ù SEEDER —Å –ü–†–ê–í–ò–õ–ù–ê –ö–û–ù–í–ï–†–°–ò–Ø
php
<?php

namespace Database\Seeders;

use App\Models\Customer;
use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\Log;

class CustomerFinalImportSeeder extends Seeder
{
    // –°–ü–ï–¶–ò–ê–õ–ù–ê –§–£–ù–ö–¶–ò–Ø –ó–ê –ö–û–ù–í–ï–†–°–ò–Ø –û–¢ ACCESS MOJIBAKE
    private function convertFromAccessMojibake(string $text): string
    {
        // Access –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ –∫–∞—Ç–æ Latin1, –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–∞–Ω–∞ –∫–∞—Ç–æ UTF-8
        // –¢–æ–≤–∞ –µ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ–Ω —Å–ª—É—á–∞–π –Ω–∞ "Access Bulgarian Mojibake"
        
        $text = trim($text);
        if (empty($text)) {
            return $text;
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ –≤–µ—á–µ –µ –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
        if (preg_match('/[–ê-–Ø–∞-—è–Å—ë]/u', $text)) {
            return $text;
        }
        
        // –ú–ê–ü–ò–ù–ì –∑–∞ Access Bulgarian Mojibake
        // Access –∏–∑–ø–æ–ª–∑–≤–∞ Windows-1251 –∑–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞, –Ω–æ –≥–æ –ø–æ–∫–∞–∑–≤–∞ –∫–∞—Ç–æ UTF-8
        $accessMojibakeMap = [
            // –ì–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏
            '√Ä' => '–ê', '√Å' => '–ë', '√Ç' => '–í', '√É' => '–ì', '√Ñ' => '–î', '√Ö' => '–ï',
            '√Ü' => '–ñ', '√á' => '–ó', '√à' => '–ò', '√â' => '–ô', '√ä' => '–ö', '√ã' => '–õ',
            '√å' => '–ú', '√ç' => '–ù', '√é' => '–û', '√è' => '–ü', '√ê' => '–†', '√ë' => '–°',
            '√í' => '–¢', '√ì' => '–£', '√î' => '–§', '√ï' => '–•', '√ñ' => '–¶', '√ó' => '–ß',
            '√ò' => '–®', '√ô' => '–©', '√ö' => '–™', '√õ' => '–´', '√ú' => '–¨', '√ù' => '–≠',
            '√û' => '–Æ', '√ü' => '–Ø',
            
            // –ú–∞–ª–∫–∏ –±—É–∫–≤–∏
            '√†' => '–∞', '√°' => '–±', '√¢' => '–≤', '√£' => '–≥', '√§' => '–¥', '√•' => '–µ',
            '√¶' => '–∂', '√ß' => '–∑', '√®' => '–∏', '√©' => '–π', '√™' => '–∫', '√´' => '–ª',
            '√¨' => '–º', '√≠' => '–Ω', '√Æ' => '–æ', '√Ø' => '–ø', '√∞' => '—Ä', '√±' => '—Å',
            '√≤' => '—Ç', '√≥' => '—É', '√¥' => '—Ñ', '√µ' => '—Ö', '√∂' => '—Ü', '√∑' => '—á',
            '√∏' => '—à', '√π' => '—â', '√∫' => '—ä', '√ª' => '—ã', '√º' => '—å', '√Ω' => '—ç',
            '√æ' => '—é', '√ø' => '—è',
            
            // –°–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–∏–º–≤–æ–ª–∏ –∑–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏
            '√ö' => '–™', '√∫' => '—ä', '√ü' => '–Ø', '√ø' => '—è',
            
            // –ò–Ω—Ç–µ—Ä–≤–∞–ª–Ω–∏ —Å–∏–º–≤–æ–ª–∏, –∫–æ–∏—Ç–æ Access –¥–æ–±–∞–≤—è
            ' ' => ' ', // non-breaking space -> normal space
        ];
        
        // –ó–∞–º–µ—Å—Ç–≤–∞–º–µ –≤—Å–∏—á–∫–∏ Mojibake —Å–∏–º–≤–æ–ª–∏
        $converted = strtr($text, $accessMojibakeMap);
        
        // –ê–∫–æ –≤—Å–µ –æ—â–µ –∏–º–∞ Mojibake, –ø—Ä–æ–±–≤–∞–π —Å mb_convert_encoding
        if (preg_match('/[√Ä-√ø]/u', $converted) && !preg_match('/[–ê-–Ø–∞-—è]/u', $converted)) {
            // –ü—Ä–æ–±–≤–∞–π: UTF-8 string ‚Üí Windows-1251 ‚Üí UTF-8
            $try1 = @mb_convert_encoding($converted, 'Windows-1251', 'UTF-8');
            $try1 = @mb_convert_encoding($try1, 'UTF-8', 'Windows-1251');
            
            if (preg_match('/[–ê-–Ø–∞-—è]/u', $try1)) {
                return $try1;
            }
            
            // –ü—Ä–æ–±–≤–∞–π —Å ISO-8859-5
            $try2 = @mb_convert_encoding($converted, 'UTF-8', 'ISO-8859-5');
            if (preg_match('/[–ê-–Ø–∞-—è]/u', $try2)) {
                return $try2;
            }
        }
        
        return $converted;
    }
    
    public function run(): void
    {
        $this->command->info('üöÄ –ò–ú–ü–û–†–¢ –û–¢ ACCESS –° MOJIBAKE FIX');
        $this->command->line(str_repeat('‚ïê', 50));
        
        // –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—è—Ç–∞ –ø—Ä–µ–¥–∏ –¥–∞ –∑–∞–ø–æ—á–Ω–µ–º
        $this->testConversions();
        
        // –§–∞–π–ª—ä—Ç —Å –ù–û–í–ò–Ø –µ–∫—Å–ø–æ—Ä—Ç (—Ç–µ–∫—Å—Ç–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞)
        $filePath = base_path('old-database/Customer_export_table.txt');
        
        if (!file_exists($filePath)) {
            $this->command->error('‚ùå –§–∞–π–ª—ä—Ç –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω!');
            $this->command->info('üí° –ó–∞–ø–∞–∑–∏ –µ–∫—Å–ø–æ—Ä—Ç–∞ –∫–∞—Ç–æ: old-database/Customer_export_table.txt');
            return;
        }
        
        $content = file_get_contents($filePath);
        
        // –ü–ê–†–°–í–ê–ù–ï –ù–ê –¢–ï–ö–°–¢–û–í–ê–¢–ê –¢–ê–ë–õ–ò–¶–ê
        // –§–æ—Ä–º–∞—Ç: | Number | Customer-Name | ... |
        $lines = explode("\n", $content);
        
        $imported = 0;
        $skipped = 0;
        
        $this->command->info('üìä –û–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤ —Ç–∞–±–ª–∏—á–µ–Ω —Ñ–æ—Ä–º–∞—Ç...');
        $progressBar = $this->command->getOutput()->createProgressBar(count($lines));
        
        foreach ($lines as $line) {
            $progressBar->advance();
            
            // –ü—Ä–æ–ø—É—Å–∫–∞–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–Ω–∏—Ç–µ —Ä–µ–¥–æ–≤–µ (—Å —Ç–∏—Ä–µ—Ç–∞)
            if (strpos($line, '---') !== false || strpos($line, '===') !== false) {
                continue;
            }
            
            // –ü—Ä–æ–ø—É—Å–∫–∞–π –ø—Ä–∞–∑–Ω–∏ —Ä–µ–¥–æ–≤–µ
            $line = trim($line);
            if (empty($line)) {
                continue;
            }
            
            // –ü—Ä–µ–º–∞—Ö–Ω–∏ –Ω–∞—á–∞–ª–Ω–∏—è –∏ –∫—Ä–∞–π–Ω–∏—è '|'
            $line = trim($line, '|');
            
            // –†–∞–∑–¥–µ–ª–∏ –ø–æ '|' –∏ trim-–Ω–∏ –≤—Å—è–∫–∞ –∫–æ–ª–æ–Ω–∞
            $columns = array_map('trim', explode('|', $line));
            
            // –¢—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞ –ø–æ–Ω–µ 3 –∫–æ–ª–æ–Ω–∏, –∑–∞ –¥–∞ –µ –≤–∞–ª–∏–¥–µ–Ω –∑–∞–ø–∏—Å
            if (count($columns) < 3) {
                continue;
            }
            
            // –°—ä–∑–¥–∞–π –∞—Å–æ—Ü–∏–∞—Ç–∏–≤–µ–Ω –º–∞—Å–∏–≤ (–∞–∫–æ –∑–Ω–∞–µ—à –∫–æ–ª–æ–Ω–∏—Ç–µ)
            $data = [
                'Number' => $columns[0] ?? '',
                'Customer-Name' => $columns[1] ?? '',
                'Customer-Address-1' => $columns[2] ?? '',
                'Customer-Address-2' => $columns[3] ?? '',
                'Customer-MOL' => $columns[4] ?? '',
                'Customer-Taxno' => $columns[5] ?? '',
                'Customer-DocType' => $columns[6] ?? '',
                'Receiver' => $columns[7] ?? '',
                'Receiver Details' => $columns[8] ?? '',
                'Customer-Bulstat' => $columns[9] ?? '',
                'Telno' => $columns[10] ?? '',
                'Faxno' => $columns[11] ?? '',
                'E-mail' => $columns[12] ?? '',
                'ResAddress1' => $columns[13] ?? '',
                'ResAddress2' => $columns[14] ?? '',
                'eidate' => $columns[15] ?? '',
                'include' => $columns[16] ?? '',
                'active' => $columns[17] ?? '',
                'customer' => $columns[18] ?? '',
                'supplier' => $columns[19] ?? '',
                'Contact' => $columns[20] ?? '',
                'partida' => $columns[21] ?? '',
                'bulstatletter' => $columns[22] ?? '',
            ];
            
            try {
                // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–π –≤—Å–∏—á–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏ –ø–æ–ª–µ—Ç–∞
                $convertedData = $this->convertAllFields($data);
                
                // –°—ä–∑–¥–∞–π –∫–ª–∏–µ–Ω—Ç–∞
                $customer = Customer::create([
                    'old_system_id' => $convertedData['Number'],
                    'name' => $convertedData['Customer-Name'],
                    'vat_number' => $this->cleanVatNumber($convertedData['Customer-Taxno']),
                    'bulstat' => $convertedData['Customer-Bulstat'],
                    'contact_person' => $convertedData['Customer-MOL'],
                    'phone' => $this->cleanPhone($convertedData['Telno']),
                    'fax' => $convertedData['Faxno'],
                    'email' => $convertedData['E-mail'],
                    'address' => $this->formatAddress($convertedData),
                    'address_line1' => $convertedData['Customer-Address-1'],
                    'address_line2' => $convertedData['Customer-Address-2'],
                    'city' => $this->extractCity($convertedData),
                    'notes' => $this->formatNotes($convertedData),
                    'court_registration' => $convertedData['partida'],
                    'bulstat_letter' => $convertedData['bulstatletter'],
                    'type' => $this->determineType($convertedData),
                    'is_active' => $this->parseBoolean($convertedData['active']),
                    'include_in_reports' => $this->parseBoolean($convertedData['include']),
                    'created_at' => $this->parseDate($convertedData['eidate']),
                ]);
                
                $imported++;
                
            } catch (\Exception $e) {
                $skipped++;
                Log::warning('–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç', [
                    'data' => $data,
                    'error' => $e->getMessage()
                ]);
            }
        }
        
        $progressBar->finish();
        
        $this->command->line("\n");
        $this->command->info('‚úÖ –ò–ú–ü–û–†–¢–™–¢ –ó–ê–í–™–†–®–ò');
        $this->command->line(str_repeat('‚ïê', 50));
        $this->command->info("üü¢ –ò–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏: $imported –∫–ª–∏–µ–Ω—Ç–∏");
        $this->command->info("üü° –ü—Ä–æ–ø—É—Å–Ω–∞—Ç–∏: $skipped –∑–∞–ø–∏—Å–∞");
        
        if ($skipped > 0) {
            $this->command->warn('üìã –ü—Ä–æ–≤–µ—Ä–∏ storage/logs/laravel.log –∑–∞ –¥–µ—Ç–∞–π–ª–∏');
        }
    }
    
    private function testConversions(): void
    {
        $this->command->info('üß™ –¢–ï–°–¢–ò–†–ê–ù–ï –ù–ê –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê:');
        
        $testCases = [
            '√ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®' => '–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò',
            '√ò√Ä√í√ê√é√å  √Ö√é√é√Ñ' => '–®–ê–¢–†–û–ú –ï–û–û–î',
            '√í√Ö√ê√á√à√Ñ √Ö√é√é√Ñ' => '–¢–ï–†–ó–ò–î –ï–û–û–î',
            '√Ö.√í.√Ö. √Ö√é√é√Ñ' => '–ï.–¢.–ï. –ï–û–û–î',
            '√ã√à√ç√Ñ√ç√Ö√ê √Å√ö√ã√É√Ä√ê√à√ü √Ö√é√é√Ñ' => '–õ–ò–ù–î–ù–ï–† –ë–™–õ–ì–ê–†–ò–Ø –ï–û–û–î',
            '√≥√´. " √Å√®√ß√≠√•√± √è√†√∞√™ √ë√Æ√¥√®√ø " N3' => '—É–ª. " –ë–∏–∑–Ω–µ—Å –ü–∞—Ä–∫ –°–æ—Ñ–∏—è " N3',
            '√ë√≤√•√¥√†√≠ √å√®√≠√∑√•√¢' => '–°—Ç–µ—Ñ–∞–Ω –ú–∏–Ω—á–µ–≤',
        ];
        
        foreach ($testCases as $input => $expected) {
            $result = $this->convertFromAccessMojibake($input);
            $match = (mb_strtoupper($result) === mb_strtoupper($expected));
            
            $this->command->line(
                ($match ? '‚úÖ' : '‚ùå') . ' ' . 
                substr($input, 0, 30) . ' ‚Üí ' . 
                substr($result, 0, 30) . 
                ($match ? '' : ' (expected: ' . $expected . ')')
            );
        }
        
        $this->command->line(str_repeat('‚îÄ', 50));
    }
    
    private function convertAllFields(array $data): array
    {
        $converted = [];
        
        foreach ($data as $key => $value) {
            if (is_string($value)) {
                $converted[$key] = $this->convertFromAccessMojibake($value);
            } else {
                $converted[$key] = $value;
            }
        }
        
        return $converted;
    }
    
    private function cleanVatNumber(string $vat): ?string
    {
        $vat = trim($vat);
        if (empty($vat)) return null;
        
        $vat = preg_replace('/\s+/', '', $vat);
        
        if (!str_starts_with(strtoupper($vat), 'BG')) {
            $vat = 'BG' . $vat;
        }
        
        return $vat;
    }
    
    private function cleanPhone(string $phone): ?string
    {
        $phone = preg_replace('/[^0-9+]/', '', trim($phone));
        return !empty($phone) ? $phone : null;
    }
    
    private function formatAddress(array $data): string
    {
        $parts = [];
        if (!empty($data['Customer-Address-1'])) $parts[] = $data['Customer-Address-1'];
        if (!empty($data['Customer-Address-2'])) $parts[] = $data['Customer-Address-2'];
        return implode(', ', $parts);
    }
    
    private function extractCity(array $data): string
    {
        $address = $data['Customer-Address-1'] ?? '';
        if (stripos($address, '–°–û–§–ò–Ø') !== false) return '–°–æ—Ñ–∏—è';
        if (stripos($address, '–ü–õ–û–í–î–ò–í') !== false) return '–ü–ª–æ–≤–¥–∏–≤';
        if (stripos($address, '–í–ê–†–ù–ê') !== false) return '–í–∞—Ä–Ω–∞';
        if (stripos($address, '–ë–£–†–ì–ê–°') !== false) return '–ë—É—Ä–≥–∞—Å';
        
        return '–°–æ—Ñ–∏—è'; // –ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ
    }
    
    private function formatNotes(array $data): ?string
    {
        $notes = [];
        if (!empty($data['Receiver'])) $notes[] = '–ü–æ–ª—É—á–∞—Ç–µ–ª: ' . $data['Receiver'];
        if (!empty($data['Contact'])) $notes[] = '–ö–æ–Ω—Ç–∞–∫—Ç: ' . $data['Contact'];
        return !empty($notes) ? implode("\n", $notes) : null;
    }
    
    private function determineType(array $data): string
    {
        $isCustomer = isset($data['customer']) && strtoupper(trim($data['customer'])) === '–î–ê';
        $isSupplier = isset($data['supplier']) && strtoupper(trim($data['supplier'])) === '–î–ê';
        
        if ($isCustomer && $isSupplier) return 'both';
        if ($isSupplier) return 'supplier';
        return 'customer';
    }
    
    private function parseBoolean(string $value): bool
    {
        return strtoupper(trim($value)) === '–î–ê';
    }
    
    private function parseDate(string $date): ?string
    {
        if (preg_match('/(\d{1,2})\.(\d{1,2})\.(\d{4})/', $date, $matches)) {
            return sprintf('%04d-%02d-%02d', $matches[3], $matches[2], $matches[1]);
        }
        return null;
    }
}
2. –ò–ù–°–¢–†–£–ö–¶–ò–ò –ó–ê –ò–ó–ü–û–õ–ó–í–ê–ù–ï:
–°—Ç—ä–ø–∫–∞ 1: –ó–∞–ø–∞—Å–∏ –µ–∫—Å–ø–æ—Ä—Ç–∞ –∫–∞—Ç–æ old-database/Customer_export_table.txt

–°—Ç—ä–ø–∫–∞ 2: –°—ä–∑–¥–∞–π Seeder —Ñ–∞–π–ª database/seeders/CustomerFinalImportSeeder.php —Å –≥–æ—Ä–Ω–∏—è –∫–æ–¥

–°—Ç—ä–ø–∫–∞ 3: –ü—É—Å–Ω–∏ –∏–º–ø–æ—Ä—Ç–∞:

bash
php artisan db:seed --class=CustomerFinalImportSeeder
3. –ê–õ–¢–ï–†–ù–ê–¢–ò–í–ê: –ï–∫—Å–ø–æ—Ä—Ç –≤ –†–ê–ó–õ–ò–ß–ï–ù –§–û–†–ú–ê–¢ –æ—Ç Access
–í Access, –ø—Ä–æ–±–≤–∞–π –¥–∞ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞—à —Ç–∞–∫–∞:

–ò–∑–±–µ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ customer

External Data ‚Üí Text File

–ù–∞—Å—Ç—Ä–æ–π–∫–∏:

–§–æ—Ä–º–∞—Ç: Delimited

–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª: Tab

–ö–æ–¥–∏—Ä–∞–Ω–µ: Windows (Default)

–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π

–¢–æ–∑–∏ —Ñ–æ—Ä–º–∞—Ç –µ –ø–æ-–ª–µ—Å–µ–Ω –∑–∞ –ø–∞—Ä—Å–≤–∞–Ω–µ –æ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ—Ç–æ —Ç–∞–±–ª–∏—á–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤—è–Ω–µ.

üéØ –í–ê–ñ–ù–û:
–¢–æ–∑–∏ Seeder –µ —Å–ø–µ—Ü–∏–∞–ª–Ω–æ —Å—ä–∑–¥–∞–¥–µ–Ω –∑–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ—Ç–æ —Ç–∞–±–ª–∏—á–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤—è–Ω–µ, –∫–æ–µ—Ç–æ —Å–∏ –ø–æ–∫–∞–∑–∞–ª. –¢–æ–π —â–µ:

‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ √ä√†√´√Æ√ø√≠ ‚Üí –ö–ê–õ–û–Ø–ù

‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ √ò√Ä√í√ê√é√å ‚Üí –®–ê–¢–†–û–ú

‚úÖ –û–±—Ä–∞–±–æ—Ç–∏ –≤—Å–∏—á–∫–∏ –∫–æ–ª–æ–Ω–∏

‚úÖ –¢–µ—Å—Ç–≤–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏—Ç–µ –ø—Ä–µ–¥–∏ –¥–∞ –∑–∞–ø–æ—á–Ω–µ

–ü—É—Å–Ω–∏ –≥–æ –∏ –º–∏ –∫–∞–∂–∏ –¥–∞–ª–∏ —Ä–∞–±–æ—Ç–∏! –ê–∫–æ –∏–º–∞—à –ø—Ä–æ–±–ª–µ–º–∏ —Å –ø–∞—Ä—Å–≤–∞–Ω–µ—Ç–æ –Ω–∞ —Ç–∞–±–ª–∏—á–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç, –º–æ–≥–∞ –¥–∞ —Ç–∏ –¥–∞–º –≤–µ—Ä—Å–∏—è –∑–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω CSV/Tab-delimited —Ñ–æ—Ä–º–∞—Ç.

–ë–∏—Ö –∏—Å–∫–∞–ª —Ñ–∞–π–ª–∞ –¥–∞ —Å–∏ –æ—Å—Ç–∞–Ω–µ —Å —Ç–æ–≤–∞ –Ω–∞–∏–º–µ–Ω–æ–≤–µ–Ω–∏–µ Customer.txt –∞ —Å–∏–∏–¥–µ—Ä–∞ –¥–∞ —Å–∏ –æ—Å—Ç–∞–Ω–µ —Å –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ—Ç–æ CustomerImportSeeder.php . –ú–æ–∂–µ –ª–∏ –¥–∞ —Å—Ç–∞–Ω–µ —Ç–æ–≤–∞?
‚úÖ –î–ê, –ê–ë–°–û–õ–Æ–¢–ù–û! –ú–æ–∂–µ –¥–∞ –∑–∞–ø–∞–∑–∏—à –∏ –¥–≤–∞—Ç–∞ —Ñ–∞–π–ª–∞ —Å—ä—Å —Å—ä—â–∏—Ç–µ –∏–º–µ–Ω–∞. –ï—Ç–æ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω–∏—è CustomerImportSeeder.php, –∫–æ–π—Ç–æ —Ä–∞–±–æ—Ç–∏ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è —Ñ–∞–π–ª Customer.txt (—Ç–æ–∑–∏ —Å √ä√†√´√Æ√ø√≠) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–æ –ø–æ–ø—Ä–∞–≤—è:

php
<?php

namespace Database\Seeders;

use App\Models\Customer;
use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\Log;

class CustomerImportSeeder extends Seeder
{
    /**
     * –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ Access Mojibake —Ç–µ–∫—Å—Ç –∫—ä–º –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
     * –ü—Ä–∏–º–µ—Ä: "√ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®" ‚Üí "–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò"
     */
    private function fixAccessEncoding(string $text): string
    {
        $text = trim($text);
        if (empty($text)) return $text;
        
        // –ê–∫–æ –≤–µ—á–µ –µ –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞, –≤—ä—Ä–Ω–∏ –∫–∞–∫—Ç–æ –µ
        if (preg_match('/[–ê-–Ø–∞-—è–Å—ë]/u', $text)) {
            return $text;
        }
        
        // 1. –î–ò–†–ï–ö–¢–ù–û –ó–ê–ú–ï–°–¢–í–ê–ù–ï (–Ω–∞–π-–±—ä—Ä–∑–æ –∏ –Ω–∞–¥–µ–∂–¥–Ω–æ –∑–∞ Access)
        $accessFixMap = [
            // –ì–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏
            '√ä' => '–ö', '√†' => '–∞', '√´' => '–ª', '√Æ' => '–æ', '√ø' => '—è', '√°' => '–Ω',
            '√è' => '–ü', '√•' => '–µ', '√∑' => '—á', '√≠' => '–∏', '√∞' => '—Ä', '√±' => '—Å',
            '√®' => '–∏', '√ò' => '–®', '√Ä' => '–ê', '√í' => '–¢', '√ê' => '–†', '√é' => '–û',
            '√å' => '–ú', '√Ö' => '–ï', '√ï' => '–•', '√î' => '–§', '√ñ' => '–¶', '√ó' => '–ß',
            '√ô' => '–©', '√ö' => '–™', '√ú' => '–¨', '√ù' => '–≠', '√û' => '–Æ', '√ü' => '–Ø',
            '√á' => '–ó', '√à' => '–ò', '√â' => '–ô', '√ã' => '–õ', '√ç' => '–ù', '√è' => '–ü',
            '√ë' => '–°', '√ì' => '–£', '√Ç' => '–í', '√É' => '–ì', '√Ñ' => '–î', '√Ü' => '–ñ',
            
            // –ú–∞–ª–∫–∏ –±—É–∫–≤–∏
            '√∫' => '—ä', '√ª' => '—ã', '√º' => '—å', '√Ω' => '—ç', '√æ' => '—é',
            
            // –°–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–∏–º–≤–æ–ª–∏
            '√≥' => '—É', '√≤' => '—Ç', '√µ' => '—Ö', '√¥' => '—Ñ', '√∂' => '—Ü',
            '√¶' => '–∂', '√ß' => '–∑', '√©' => '–π', '√™' => '–∫', '√¨' => '–º',
            '√Ø' => '–ø', '√∞' => '—Ä', '√±' => '—Å', '√°' => '–±', '√¢' => '–≤',
            '√£' => '–≥', '√§' => '–¥', '√•' => '–µ',
        ];
        
        $fixed = strtr($text, $accessFixMap);
        
        // 2. –ê–∫–æ –≤—Å–µ –æ—â–µ –∏–º–∞ –ø—Ä–æ–±–ª–µ–º–∏, –ø—Ä–æ–±–≤–∞–π mb_convert_encoding
        if (preg_match('/[√Ä-√ø]/u', $fixed) && !preg_match('/[–ê-–Ø–∞-—è]/u', $fixed)) {
            $tryEncoding = @mb_convert_encoding($fixed, 'Windows-1251', 'UTF-8');
            $tryEncoding = @mb_convert_encoding($tryEncoding, 'UTF-8', 'Windows-1251');
            
            if (preg_match('/[–ê-–Ø–∞-—è]/u', $tryEncoding)) {
                return $tryEncoding;
            }
        }
        
        return $fixed;
    }

    public function run(): void
    {
        $this->command->info('üöÄ –°–¢–ê–†–¢–ò–†–ê–ù–ï –ù–ê –ò–ú–ü–û–†–¢–ê –û–¢ ACCESS');
        $this->command->line(str_repeat('‚ïê', 50));
        
        // –ü—ä—Ç –∫—ä–º –û–†–ò–ì–ò–ù–ê–õ–ù–ò–Ø —Ñ–∞–π–ª (—Å √ä√†√´√Æ√ø√≠)
        $filePath = base_path('old-database/Customer.txt');
        
        if (!file_exists($filePath)) {
            $this->command->error("‚ùå –§–∞–π–ª—ä—Ç –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω: $filePath");
            $this->command->info('üí° –£–≤–µ—Ä–∏ —Å–µ, —á–µ —Ñ–∞–π–ª—ä—Ç Customer.txt –µ –≤ –ø–∞–ø–∫–∞—Ç–∞ old-database');
            return;
        }
        
        // –¢–ï–°–¢ –ù–ê –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê
        $this->testEncodingFix();
        
        $file = fopen($filePath, 'r');
        if (!$file) {
            $this->command->error('‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –æ—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ —Ñ–∞–π–ª–∞');
            return;
        }
        
        // –ü—Ä–æ—á–∏—Ç–∞–Ω–µ –Ω–∞ –∑–∞–≥–ª–∞–≤–Ω–∏—è —Ä–µ–¥ (—Ç–∞–±—É–ª–∞—Ç–æ—Ä –∫–∞—Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª)
        $headers = fgetcsv($file, 0, "\t");
        if (!$headers) {
            $this->command->error('‚ùå –ì—Ä–µ—à–∫–∞ –≤ –∑–∞–≥–ª–∞–≤–Ω–∏—è —Ä–µ–¥');
            fclose($file);
            return;
        }
        
        $imported = 0;
        $errors = [];
        
        $this->command->info("üìÅ –§–∞–π–ª: " . basename($filePath));
        $this->command->info("üìä –ó–∞–≥–ª–∞–≤–Ω–∏ –ø–æ–ª–µ—Ç–∞: " . count($headers));
        $this->command->line(str_repeat('‚îÄ', 50));
        
        $progressBar = $this->command->getOutput()->createProgressBar();
        $progressBar->start();
        
        // –û–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ –Ω–∞ –≤—Å–µ–∫–∏ —Ä–µ–¥
        while (($row = fgetcsv($file, 0, "\t")) !== false) {
            $progressBar->advance();
            
            if (count($row) !== count($headers)) {
                continue; // –ü—Ä–æ–ø—É—Å–∫–∞–π –Ω–µ–ø—ä–ª–Ω–∏ —Ä–µ–¥–æ–≤–µ
            }
            
            $rowData = array_combine($headers, $row);
            
            try {
                $customerData = $this->prepareCustomerData($rowData);
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –ø–æ–ª–µ—Ç–∞
                if (empty($customerData['name'])) {
                    $errors[] = '–õ–∏–ø—Å–≤–∞ –∏–º–µ: —Ä–µ–¥ ' . ($imported + 1);
                    continue;
                }
                
                // –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –∑–∞–ø–∏—Å–∞
                Customer::create($customerData);
                $imported++;
                
            } catch (\Exception $e) {
                $errors[] = '–ì—Ä–µ—à–∫–∞ —Ä–µ–¥ ' . ($imported + 1) . ': ' . $e->getMessage();
                Log::error('Import error', [
                    'row' => $rowData['Number'] ?? 'unknown',
                    'error' => $e->getMessage()
                ]);
            }
        }
        
        $progressBar->finish();
        fclose($file);
        
        // –†–ï–ó–£–õ–¢–ê–¢–ò
        $this->command->line("\n");
        $this->command->info('‚úÖ –ò–ú–ü–û–†–¢–™–¢ –ó–ê–í–™–†–®–ò');
        $this->command->line(str_repeat('‚ïê', 50));
        $this->command->info("üü¢ –£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏: $imported –∫–ª–∏–µ–Ω—Ç–∏");
        
        if (!empty($errors)) {
            $this->command->warn("üü° –ì—Ä–µ—à–∫–∏: " . count($errors));
            foreach (array_slice($errors, 0, 5) as $error) {
                $this->command->line("   ‚Ä¢ $error");
            }
            if (count($errors) > 5) {
                $this->command->line("   ... –∏ –æ—â–µ " . (count($errors) - 5) . " –≥—Ä–µ—à–∫–∏");
            }
        }
        
        $this->command->line("\nüí° –°–ª–µ–¥–≤–∞—â–∞ —Å—Ç—ä–ø–∫–∞: –ò–º–ø–æ—Ä—Ç –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏ –∏–ª–∏ —Ñ–∞–∫—Ç—É—Ä–∏");
    }
    
    /**
     * –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ encoding –∫–æ–Ω–≤–µ—Ä—Å–∏—è—Ç–∞
     */
    private function testEncodingFix(): void
    {
        $this->command->info('üß™ –¢–ï–°–¢ –ù–ê –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê:');
        
        $testCases = [
            '√ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®' => '–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò',
            '√ò√Ä√í√ê√é√å  √Ö√é√é√Ñ' => '–®–ê–¢–†–û–ú –ï–û–û–î',
            '√í√Ö√ê√á√à√Ñ √Ö√é√é√Ñ' => '–¢–ï–†–ó–ò–î –ï–û–û–î',
            '√Ö.√í.√Ö. √Ö√é√é√Ñ' => '–ï.–¢.–ï. –ï–û–û–î',
            '√ã√à√ç√Ñ√ç√Ö√ê √Å√ö√ã√É√Ä√ê√à√ü √Ö√é√é√Ñ' => '–õ–ò–ù–î–ù–ï–† –ë–™–õ–ì–ê–†–ò–Ø –ï–û–û–î',
            '√ë√≤√•√¥√†√≠ √å√®√≠√∑√•√¢' => '–°—Ç–µ—Ñ–∞–Ω –ú–∏–Ω—á–µ–≤',
            '√≥√´. " √Å√®√ß√≠√•√± √è√†√∞√™ √ë√Æ√¥√®√ø "' => '—É–ª. " –ë–∏–∑–Ω–µ—Å –ü–∞—Ä–∫ –°–æ—Ñ–∏—è "',
        ];
        
        $allPassed = true;
        
        foreach ($testCases as $input => $expected) {
            $result = $this->fixAccessEncoding($input);
            $passed = (mb_strtoupper($result) === mb_strtoupper($expected));
            
            $status = $passed ? '‚úÖ' : '‚ùå';
            $this->command->line("$status {$this->truncate($input, 25)} ‚Üí {$this->truncate($result, 25)}");
            
            if (!$passed) {
                $allPassed = false;
                $this->command->line("   –û—á–∞–∫–≤–∞–Ω–æ: $expected");
            }
        }
        
        if (!$allPassed) {
            $this->command->warn('‚ö†Ô∏è  –ò–º–∞ –ø—Ä–æ–±–ª–µ–º–∏ —Å –∫–æ–Ω–≤–µ—Ä—Å–∏—è—Ç–∞!');
        } else {
            $this->command->info('üéâ –í—Å–∏—á–∫–∏ —Ç–µ—Å—Ç–æ–≤–µ –º–∏–Ω–∞—Ö–∞ —É—Å–ø–µ—à–Ω–æ!');
        }
        
        $this->command->line(str_repeat('‚îÄ', 50));
    }
    
    /**
     * –ü–æ–¥–≥–æ—Ç–≤—è –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ –∫–ª–∏–µ–Ω—Ç–∞
     */
    private function prepareCustomerData(array $oldData): array
    {
        // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–π –≤—Å–∏—á–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏ –ø–æ–ª–µ—Ç–∞
        $converted = [];
        foreach ($oldData as $key => $value) {
            $converted[$key] = is_string($value) ? $this->fixAccessEncoding($value) : $value;
        }
        
        return [
            'old_system_id'       => $converted['Number'] ?? null,
            'type'                => $this->determineType($converted),
            'name'                => trim($converted['Customer-Name'] ?? ''),
            'vat_number'          => $this->cleanVatNumber($converted['Customer-Taxno'] ?? ''),
            'bulstat'             => trim($converted['Customer-Bulstat'] ?? ''),
            'contact_person'      => trim($converted['Customer-MOL'] ?? ''),
            'phone'               => $this->cleanPhone($converted['Telno'] ?? ''),
            'fax'                 => trim($converted['Faxno'] ?? ''),
            'email'               => $this->cleanEmail($converted['E-mail'] ?? ''),
            'address'             => $this->formatAddress($converted),
            'address_line1'       => trim($converted['Customer-Address-1'] ?? ''),
            'address_line2'       => trim($converted['Customer-Address-2'] ?? ''),
            'city'                => $this->extractCity($converted),
            'notes'               => $this->formatNotes($converted),
            'court_registration'  => trim($converted['partida'] ?? ''),
            'bulstat_letter'      => trim($converted['bulstatletter'] ?? ''),
            'is_active'           => $this->parseBoolean($converted['active'] ?? ''),
            'include_in_reports'  => $this->parseBoolean($converted['include'] ?? ''),
            'created_at'          => $this->parseDate($converted['eidate'] ?? ''),
        ];
    }
    
    private function determineType(array $data): string
    {
        $isCustomer = isset($data['customer']) && strtoupper(trim($data['customer'])) === '–î–ê';
        $isSupplier = isset($data['supplier']) && strtoupper(trim($data['supplier'])) === '–î–ê';
        
        if ($isCustomer && $isSupplier) return 'both';
        if ($isSupplier) return 'supplier';
        return 'customer';
    }
    
    private function cleanVatNumber(string $vat): ?string
    {
        $vat = trim($vat);
        if (empty($vat)) return null;
        
        $vat = preg_replace('/\s+/', '', $vat);
        if (!str_starts_with(strtoupper($vat), 'BG')) {
            $vat = 'BG' . $vat;
        }
        
        return $vat;
    }
    
    private function cleanPhone(string $phone): ?string
    {
        $phone = preg_replace('/[^0-9+]/', '', trim($phone));
        return !empty($phone) ? $phone : null;
    }
    
    private function cleanEmail(string $email): ?string
    {
        $email = trim($email);
        return filter_var($email, FILTER_VALIDATE_EMAIL) ? $email : null;
    }
    
    private function formatAddress(array $data): string
    {
        $parts = [];
        if (!empty($data['Customer-Address-1'])) $parts[] = trim($data['Customer-Address-1']);
        if (!empty($data['Customer-Address-2'])) $parts[] = trim($data['Customer-Address-2']);
        return implode(', ', $parts);
    }
    
    private function extractCity(array $data): string
    {
        $address = $data['Customer-Address-1'] ?? '';
        $address = mb_strtoupper($address, 'UTF-8');
        
        if (str_contains($address, '–°–û–§–ò–Ø')) return '–°–æ—Ñ–∏—è';
        if (str_contains($address, '–ü–õ–û–í–î–ò–í')) return '–ü–ª–æ–≤–¥–∏–≤';
        if (str_contains($address, '–í–ê–†–ù–ê')) return '–í–∞—Ä–Ω–∞';
        if (str_contains($address, '–ë–£–†–ì–ê–°')) return '–ë—É—Ä–≥–∞—Å';
        if (str_contains($address, '–†–£–°–ï')) return '–†—É—Å–µ';
        
        return '–°–æ—Ñ–∏—è'; // –ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ
    }
    
    private function formatNotes(array $data): ?string
    {
        $notes = [];
        if (!empty($data['Receiver'])) $notes[] = '–ü–æ–ª—É—á–∞—Ç–µ–ª: ' . trim($data['Receiver']);
        if (!empty($data['Contact'])) $notes[] = '–ö–æ–Ω—Ç–∞–∫—Ç: ' . trim($data['Contact']);
        return !empty($notes) ? implode("\n", $notes) : null;
    }
    
    private function parseBoolean(string $value): bool
    {
        return strtoupper(trim($value)) === '–î–ê';
    }
    
    private function parseDate(string $date): ?string
    {
        if (preg_match('/(\d{1,2})\.(\d{1,2})\.(\d{4})/', $date, $matches)) {
            return sprintf('%04d-%02d-%02d', $matches[3], $matches[2], $matches[1]);
        }
        return now()->toDateTimeString();
    }
    
    private function truncate(string $text, int $length): string
    {
        if (mb_strlen($text) <= $length) return $text;
        return mb_substr($text, 0, $length - 3) . '...';
    }
}
üìÅ –°–™–•–†–ê–ù–ï–ù–ò –ù–ê –ò–ú–ï–ù–ê–¢–ê:
‚úÖ –§–∞–π–ª —Å –¥–∞–Ω–Ω–∏: old-database/Customer.txt (–æ—Ä–∏–≥–∏–Ω–∞–ª–µ–Ω —Å √ä√†√´√Æ√ø√≠)
‚úÖ Seeder —Ñ–∞–π–ª: database/seeders/CustomerImportSeeder.php (–∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω)

üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–ò:
–ó–∞–ø–∞–∑–∏ –≥–æ—Ä–Ω–∏—è –∫–æ–¥ –∫–∞—Ç–æ database/seeders/CustomerImportSeeder.php (–∑–∞–º–µ—Å—Ç–∏ —Å—Ç–∞—Ä–∏—è)

–£–≤–µ—Ä–∏ —Å–µ, —á–µ old-database/Customer.txt —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ (–æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è —Ñ–∞–π–ª)

–ü—É—Å–Ω–∏ –∏–º–ø–æ—Ä—Ç–∞:

bash
php artisan db:seed --class=CustomerImportSeeder
üéØ –ö–ê–ö –†–ê–ë–û–¢–ò:
–ß–µ—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è —Ñ–∞–π–ª —Å √ä√†√´√Æ√ø√≠

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ –≤—Å–∏—á–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏ –ø–æ–ª–µ—Ç–∞

–¢–µ—Å—Ç–≤–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—è—Ç–∞ –ø—Ä–µ–¥–∏ –¥–∞ –∑–∞–ø–æ—á–Ω–µ

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞ –≤ –±–∞–∑–∞—Ç–∞ —Å –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞

–ó–∞–ø–∞–∑–≤–∞ –≤—Å–∏—á–∫–∏ –ø–æ–ª–µ—Ç–∞ (–≤–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ –Ω–æ–≤–∏—Ç–µ –∫–æ–∏—Ç–æ –¥–æ–±–∞–≤–∏—Ö–º–µ)

üìä –û–ß–ê–ö–í–ê–ù –ò–ó–•–û–î:
text
üöÄ –°–¢–ê–†–¢–ò–†–ê–ù–ï –ù–ê –ò–ú–ü–û–†–¢–ê –û–¢ ACCESS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üß™ –¢–ï–°–¢ –ù–ê –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê:
‚úÖ √ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√® ‚Üí –ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò
‚úÖ √ò√Ä√í√ê√é√å  √Ö√é√é√Ñ ‚Üí –®–ê–¢–†–û–ú –ï–û–û–î
‚úÖ √í√Ö√ê√á√à√Ñ √Ö√é√é√Ñ ‚Üí –¢–ï–†–ó–ò–î –ï–û–û–î
‚úÖ √Ö.√í.√Ö. √Ö√é√é√Ñ ‚Üí –ï.–¢.–ï. –ï–û–û–î
‚úÖ √ã√à√ç√Ñ√ç√Ö√ê √Å√ö√ã√É√Ä√ê√à√ü √Ö√é√é√Ñ ‚Üí –õ–ò–ù–î–ù–ï–† –ë–™–õ–ì–ê–†–ò–Ø –ï–û–û–î
‚úÖ √ë√≤√•√¥√†√≠ √å√®√≠√∑√•√¢ ‚Üí –°—Ç–µ—Ñ–∞–Ω –ú–∏–Ω—á–µ–≤
‚úÖ √≥√´. " √Å√®√ß√≠√•√± √è√†√∞√™ √ë√Æ√¥√®√ø " ‚Üí —É–ª. " –ë–∏–∑–Ω–µ—Å –ü–∞—Ä–∫ –°–æ—Ñ–∏—è "
üéâ –í—Å–∏—á–∫–∏ —Ç–µ—Å—Ç–æ–≤–µ –º–∏–Ω–∞—Ö–∞ —É—Å–ø–µ—à–Ω–æ!
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üìÅ –§–∞–π–ª: Customer.txt
üìä –ó–∞–≥–ª–∞–≤–Ω–∏ –ø–æ–ª–µ—Ç–∞: 22
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 100%
‚úÖ –ò–ú–ü–û–†–¢–™–¢ –ó–ê–í–™–†–®–ò
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üü¢ –£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏: 500 –∫–ª–∏–µ–Ω—Ç–∏
üí° –°–ª–µ–¥–≤–∞—â–∞ —Å—Ç—ä–ø–∫–∞: –ò–º–ø–æ—Ä—Ç –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏ –∏–ª–∏ —Ñ–∞–∫—Ç—É—Ä–∏
–ì–æ—Ç–æ–≤–æ! –°–µ–≥–∞ –∏–º–∞—à –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω CustomerImportSeeder.php, –∫–æ–π—Ç–æ —Ä–∞–±–æ—Ç–∏ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è Customer.txt —Ñ–∞–π–ª. –ü—É—Å–Ω–∏ –≥–æ –∏ –º–∏ –∫–∞–∂–∏ –¥–∞–ª–∏ –≤—Å–∏—á–∫–æ —Ä–∞–±–æ—Ç–∏! üéØ

PS D:\xampp\htdocs\autoservice> php artisan migrate:fresh --seed

  Dropping all tables ..................................................................................................... 17 —Å–µ–∫—É–Ω–¥–∏ DONE

   INFO  Preparing database.  

  Creating migration table ................................................................................................. 2 —Å–µ–∫—É–Ω–¥–∏ DONE

   INFO  Running migrations.  

  0001_01_01_000000_create_users_table ..................................................................................... 6 —Å–µ–∫—É–Ω–¥–∏ DONE
  0001_01_01_000001_create_cache_table ..................................................................................... 1 —Å–µ–∫—É–Ω–¥–∞ DONE
  0001_01_01_000002_create_jobs_table ...................................................................................... 3 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_182544_create_permission_tables .............................................................................. 21 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_182611_create_activity_log_table .............................................................................. 7 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_182612_add_event_column_to_activity_log_table .................................................................. 521.27ms DONE
  2025_11_19_182613_add_batch_uuid_column_to_activity_log_table ............................................................. 343.82ms DONE
  2025_11_19_225614_create_customers_table .................................................................................. 748.40ms DONE
  2025_11_19_225615_create_vehicles_table .................................................................................. 5 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_225616_create_products_table .................................................................................. 1 —Å–µ–∫—É–Ω–¥–∞ DONE
  2025_11_19_225701_create_service_categories_table ........................................................................ 1 —Å–µ–∫—É–Ω–¥–∞ DONE
  2025_11_19_225710_create_services_table .................................................................................. 6 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_225951_create_work_orders_table ............................................................................... 7 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_225952_create_work_order_items_table .......................................................................... 3 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_225954_create_invoices_table .................................................................................. 8 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_225956_create_invoice_items_table ............................................................................. 2 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_225958_create_stock_movements_table ........................................................................... 3 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_22_151935_create_payments_table .................................................................................. 3 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_27_094655_add_invoices_foreign_keys ................................................................................ 26.33ms DONE
  2025_11_27_103303_add_soft_deletes_to_main_tables ........................................................................ 2 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_27_103310_create_company_settings_table ........................................................................... 397.06ms DONE


   INFO  Seeding database.

  Database\Seeders\MasterSeeder ................................................................................................... RUNNING  
  Database\Seeders\RolesAndPermissionsSeeder ...................................................................................... RUNNING  
  Database\Seeders\RolesAndPermissionsSeeder ................................................................................ 8,537 ms DONE  

  Database\Seeders\AdminUserSeeder ................................................................................................ RUNNING  
  Database\Seeders\AdminUserSeeder .......................................................................................... 1,002 ms DONE  

  Database\Seeders\CustomerImportSeeder ........................................................................................... RUNNING  
üöÄ –°–¢–ê–†–¢–ò–†–ê–ù–ï –ù–ê –ò–ú–ü–û–†–¢–ê –û–¢ ACCESS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üß™ –¢–ï–°–¢ –ù–ê –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê:
‚ùå √ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√® ‚Üí –ö–∞–ª–æ—è–∏ –ü–µ—á–µ–∏—è—Ä—Å–∫–∏
   –û—á–∞–∫–≤–∞–Ω–æ: –ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò
‚ùå √ò√Ä√í√ê√é√å  √Ö√é√é√Ñ ‚Üí –®–ê–¢–†–û–ú  –ï–û–û–î
   –û—á–∞–∫–≤–∞–Ω–æ: –®–ê–¢–†–û–ú –ï–û–û–î
‚úÖ √í√Ö√ê√á√à√Ñ √Ö√é√é√Ñ ‚Üí –¢–ï–†–ó–ò–î –ï–û–û–î
‚úÖ √Ö.√í.√Ö. √Ö√é√é√Ñ ‚Üí –ï.–¢.–ï. –ï–û–û–î
‚ùå √ã√à√ç√Ñ√ç√Ö√ê √Å√ö√ã√É√Ä√ê√à√ü √Ö√é√é√Ñ ‚Üí –õ–ò–ù–î–ù–ï–† √Å–™–õ–ì–ê–†–ò–Ø –ï–û–û–î
   –û—á–∞–∫–≤–∞–Ω–æ: –õ–ò–ù–î–ù–ï–† –ë–™–õ–ì–ê–†–ò–Ø –ï–û–û–î
‚ùå √ë√≤√•√¥√†√≠ √å√®√≠√∑√•√¢ ‚Üí –°—Ç–µ—Ñ–∞–∏ –ú–∏–∏—á–µ–≤
   –û—á–∞–∫–≤–∞–Ω–æ: –°—Ç–µ—Ñ–∞–Ω –ú–∏–Ω—á–µ–≤
‚ùå √≥√´. " √Å√®√ß√≠√•√± √è√†√∞√™ √ë√Æ√¥√®√ø " ‚Üí —É–ª. " √Å–∏–∑–∏–µ—Å –ü–∞—Ä–∫ –°–æ—Ñ–∏—è "
   –û—á–∞–∫–≤–∞–Ω–æ: —É–ª. " –ë–∏–∑–Ω–µ—Å –ü–∞—Ä–∫ –°–æ—Ñ–∏—è "
‚ö†Ô∏è  –ò–º–∞ –ø—Ä–æ–±–ª–µ–º–∏ —Å –∫–æ–Ω–≤–µ—Ä—Å–∏—è—Ç–∞!
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üìÅ –§–∞–π–ª: Customer.txt
üìä –ó–∞–≥–ª–∞–≤–Ω–∏ –ø–æ–ª–µ—Ç–∞: 1
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
 11128 [============================]

‚úÖ –ò–ú–ü–û–†–¢–™–¢ –ó–ê–í–™–†–®–ò
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üü¢ –£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏: 0 –∫–ª–∏–µ–Ω—Ç–∏
üü° –ì—Ä–µ—à–∫–∏: 11128
   ‚Ä¢ –õ–∏–ø—Å–≤–∞ –∏–º–µ: —Ä–µ–¥ 1
   ‚Ä¢ –õ–∏–ø—Å–≤–∞ –∏–º–µ: —Ä–µ–¥ 1
   ‚Ä¢ –õ–∏–ø—Å–≤–∞ –∏–º–µ: —Ä–µ–¥ 1
   ‚Ä¢ –õ–∏–ø—Å–≤–∞ –∏–º–µ: —Ä–µ–¥ 1
   ‚Ä¢ –õ–∏–ø—Å–≤–∞ –∏–º–µ: —Ä–µ–¥ 1
   ... –∏ –æ—â–µ 11123 –≥—Ä–µ—à–∫–∏

üí° –°–ª–µ–¥–≤–∞—â–∞ —Å—Ç—ä–ø–∫–∞: –ò–º–ø–æ—Ä—Ç –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏ –∏–ª–∏ —Ñ–∞–∫—Ç—É—Ä–∏
  Database\Seeders\CustomerImportSeeder ..................................................................................... 2,569 ms DONE  

  Database\Seeders\VehicleSeeder .................................................................................................. RUNNING  

   Illuminate\Database\QueryException 

  SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`autoservice`.`vehicles`, CONSTRAINT `vehicles_customer_id_foreign` FOREIGN KEY (`customer_id`) REFERENCES `customers` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `vehicles` (`customer_id`, `vin`, `plate`, `make`, `model`, `year`, `mileage`, `dk_no`, `notes`, `updated_at`, `created_at`) values (1, WAUZZZ8V8FA123456, –°–í1234–ê–í, Audi, A4, 2018, 125000, DK-2024-001, –°–º—è–Ω–∞ –Ω–∞ –º–∞—Å–ª–æ –∏ —Ñ–∏–ª—Ç—Ä–∏, 2025-12-20 07:41:58, 2025-12-20 07:41:58))

  at vendor\laravel\framework\src\Illuminate\Database\Connection.php:824
    820‚ñï                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821‚ñï                 );
    822‚ñï             }
    823‚ñï
  ‚ûú 824‚ñï             throw new QueryException(
    825‚ñï                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826‚ñï             );
    827‚ñï         }
    828‚ñï     }

  1   vendor\laravel\framework\src\Illuminate\Database\MySqlConnection.php:53
      PDOException::("SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails 
(`autoservice`.`vehicles`, CONSTRAINT `vehicles_customer_id_foreign` FOREIGN KEY (`customer_id`) REFERENCES `customers` (`id`) ON DELETE CASCADE)")

  2   vendor\laravel\framework\src\Illuminate\Database\MySqlConnection.php:53
      PDOStatement::execute()

PS D:\xampp\htdocs\autoservice>
–ü—Ä–æ–±–ª–µ–º—ä—Ç –µ –≤ –¥–≤–∞ –Ω–µ—â–∞:

üîç –ü–†–û–ë–õ–ï–ú–ò:
1. –ü–†–û–ë–õ–ï–ú –° –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê –ù–ê –ö–ò–†–ò–õ–ò–¶–ê
–í–∏–∂–¥–∞–º–µ, —á–µ –∫–æ–Ω–≤–µ—Ä—Å–∏—è—Ç–∞ –Ω–µ –µ –ø—ä–ª–Ω–∞:

√ä√†√´√Æ√ø√≠ ‚Üí –ö–∞–ª–æ—è–∏ (–≤–º–µ—Å—Ç–æ –ö–ê–õ–û–Ø–ù)

√Å√ö√ã√É√Ä√ê√à√ü ‚Üí √Å–™–õ–ì–ê–†–ò–Ø (–≤–º–µ—Å—Ç–æ –ë–™–õ–ì–ê–†–ò–Ø)

√ë√≤√•√¥√†√≠ ‚Üí –°—Ç–µ—Ñ–∞–∏ (–≤–º–µ—Å—Ç–æ –°—Ç–µ—Ñ–∞–Ω)

2. –ü–†–û–ë–õ–ï–ú –° –ü–ê–†–°–í–ê–ù–ï–¢–û –ù–ê –§–ê–ô–õ–ê
–í–∏–∂ —Ç–æ–≤–∞: üìä –ó–∞–≥–ª–∞–≤–Ω–∏ –ø–æ–ª–µ—Ç–∞: 1 (—Ç—Ä—è–±–≤–∞ –¥–∞ –µ 22!)

–¢–æ–≤–∞ –∑–Ω–∞—á–∏, —á–µ —Ñ–∞–π–ª—ä—Ç –Ω–µ —Å–µ –ø–∞—Ä—Å–≤–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ. –í–µ—Ä–æ—è—Ç–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è—Ç –Ω–µ –µ —Ç–∞–±—É–ª–∞—Ç–æ—Ä.

üö® –ù–ï–û–ë–•–û–î–ò–ú–ò –ö–û–†–ï–ö–¶–ò–ò:
–ö–û–†–ï–ö–¶–ò–Ø 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è
–î–æ–±–∞–≤–∏ –¥–µ–±—ä–≥ –∫–æ–¥ –≤ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ run() –º–µ—Ç–æ–¥–∞:

php
public function run(): void
{
    $filePath = base_path('old-database/Customer.txt');
    
    // –¢–ï–°–¢: –ü—Ä–æ—á–µ—Ç–∏ –ø—ä—Ä–≤–∏—è —Ä–µ–¥ –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–∞–π
    $firstLine = file($filePath)[0] ?? '';
    $this->command->info("–ü—ä—Ä–≤–∏ —Ä–µ–¥: " . substr($firstLine, 0, 100));
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª
    $hasTabs = (strpos($firstLine, "\t") !== false);
    $hasPipes = (strpos($firstLine, "|") !== false);
    $hasCommas = (strpos($firstLine, ",") !== false);
    
    $this->command->info("–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ - –¢–∞–±—É–ª–∞—Ç–æ—Ä–∏: " . ($hasTabs ? "–î–ê" : "–ù–ï"));
    $this->command->info("–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ - –ü–∞—ò–ø–æ–≤–µ: " . ($hasPipes ? "–î–ê" : "–ù–ï"));
    $this->command->info("–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ - –ó–∞–ø–µ—Ç–∞–∏: " . ($hasCommas ? "–î–ê" : "–ù–ï"));
    
    // –ò–∑—Ö–æ–¥ –∏ —Å–ø–∏—Ä–∞–Ω–µ –∑–∞ –∞–Ω–∞–ª–∏–∑
    die("–ü—Ä–æ–≤–µ—Ä–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è –∏ –ø—Ä–æ–¥—ä–ª–∂–∏!");
}
–ö–û–†–ï–ö–¶–ò–Ø 2: –ü–æ–¥–æ–±—Ä–µ–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—è –Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
–û–±–Ω–æ–≤–∏ –º–µ—Ç–æ–¥–∞ fixAccessEncoding():

php
private function fixAccessEncoding(string $text): string
{
    $text = trim($text);
    if (empty($text)) return $text;
    
    // –ê–∫–æ –≤–µ—á–µ –µ –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞, –≤—ä—Ä–Ω–∏ –∫–∞–∫—Ç–æ –µ
    if (preg_match('/[–ê-–Ø–∞-—è–Å—ë]/u', $text)) {
        return $text;
    }
    
    // –ü–û–ü–™–õ–ù–ï–ù –ú–ê–ü–ò–ù–ì - —Å–ø–µ—Ü–∏–∞–ª–Ω–æ –∑–∞ —Ç–≤–æ—è —Å–ª—É—á–∞–π
    $accessFixMap = [
        // –û—Å–Ω–æ–≤–Ω–∏ –±—É–∫–≤–∏ –æ—Ç —Ç–≤–æ—è —Ñ–∞–π–ª
        '√ä' => '–ö', '√†' => '–∞', '√´' => '–ª', '√Æ' => '–æ', '√ø' => '—è',
        '√°' => '–Ω', '√è' => '–ü', '√•' => '–µ', '√∑' => '—á', '√≠' => '–∏',
        '√∞' => '—Ä', '√±' => '—Å', '√®' => '–∏', 
        
        // –ì–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏ –∑–∞ —Ñ–∏—Ä–º–∏
        '√ò' => '–®', '√Ä' => '–ê', '√í' => '–¢', '√ê' => '–†', '√é' => '–û',
        '√å' => '–ú', '√Ö' => '–ï', '√ï' => '–•', '√î' => '–§', '√ñ' => '–¶',
        '√ó' => '–ß', '√ô' => '–©', '√ö' => '–™', '√ú' => '–¨', '√ù' => '–≠',
        '√û' => '–Æ', '√ü' => '–Ø', '√á' => '–ó', '√à' => '–ò', '√â' => '–ô',
        '√ã' => '–õ', '√ç' => '–ù', '√ë' => '–°', '√ì' => '–£', '√Ç' => '–í',
        '√É' => '–ì', '√Ñ' => '–î', '√Ü' => '–ñ',
        
        // –ú–∞–ª–∫–∏ –±—É–∫–≤–∏
        '√∫' => '—ä', '√ª' => '—ã', '√º' => '—å', '√Ω' => '—ç', '√æ' => '—é',
        '√≥' => '—É', '√≤' => '—Ç', '√µ' => '—Ö', '√¥' => '—Ñ', '√∂' => '—Ü',
        '√¶' => '–∂', '√ß' => '–∑', '√©' => '–π', '√™' => '–∫', '√¨' => '–º',
        '√Ø' => '–ø', '√°' => '–±', '√¢' => '–≤', '√£' => '–≥', '√§' => '–¥',
        
        // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ –∑–∞ "–ë–™–õ–ì–ê–†–ò–Ø"
        '√Å' => '–ë', '√ö' => '–™', '√ã' => '–õ', '√É' => '–ì', '√Ä' => '–ê',
        '√ê' => '–†', '√à' => '–ò', '√ü' => '–Ø',
        
        // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ –∑–∞ "–ú–∏–Ω—á–µ–≤"
        '√å' => '–ú', '√®' => '–∏', '√≠' => '–Ω', '√∑' => '—á', '√•' => '–µ',
        '√¢' => '–≤',
        
        // –ò–Ω—Ç–µ—Ä–≤–∞–ª–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–∏–º–≤–æ–ª–∏
        ' ' => ' ', // non-breaking space
        '"' => '"', // –∫–∞–≤–∏—á–∫–∏
–ü—Ä–æ—Å—Ç–æ –º–∏ –ø–æ–¥–∞–π –æ—Ç–Ω–æ–≤–æ —Ü–µ–ª–∏—è —Å–∏–∏–¥–µ—Ä —Ñ–∞–π–ª —Å –ø–æ–ø—Ä–∞–≤–∫–∏—Ç–µ –≤ –Ω–µ–≥–æ
–ï—Ç–æ –ø—ä–ª–Ω–∏—è –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω CustomerImportSeeder.php —Å –≤—Å–∏—á–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∏ –ø–æ–ø—Ä–∞–≤–∫–∏:

php
<?php

namespace Database\Seeders;

use App\Models\Customer;
use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\Log;

class CustomerImportSeeder extends Seeder
{
    /**
     * –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ Access Mojibake —Ç–µ–∫—Å—Ç –∫—ä–º –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
     * –°–ø–µ—Ü–∏–∞–ª–Ω–æ –∑–∞ Access –±—ä–ª–≥–∞—Ä—Å–∫–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
     */
    private function fixAccessEncoding(string $text): string
    {
        $text = trim($text);
        if (empty($text)) return $text;
        
        // –ê–∫–æ –≤–µ—á–µ –µ –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞, –≤—ä—Ä–Ω–∏ –∫–∞–∫—Ç–æ –µ
        if (preg_match('/[–ê-–Ø–∞-—è–Å—ë]/u', $text)) {
            return $text;
        }
        
        // –ü–™–õ–ï–ù –ú–ê–ü–ò–ù–ì –ó–ê ACCESS –ë–™–õ–ì–ê–†–°–ö–ê –ö–ò–†–ò–õ–ò–¶–ê
        $accessFixMap = [
            // –û—Å–Ω–æ–≤–Ω–∏ –±—É–∫–≤–∏ –æ—Ç —Ñ–∞–π–ª–∞
            '√ä' => '–ö', '√†' => '–∞', '√´' => '–ª', '√Æ' => '–æ', '√ø' => '—è',
            '√°' => '–Ω', '√è' => '–ü', '√•' => '–µ', '√∑' => '—á', '√≠' => '–∏',
            '√∞' => '—Ä', '√±' => '—Å', '√®' => '–∏',
            
            // –ì–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏
            '√ò' => '–®', '√Ä' => '–ê', '√í' => '–¢', '√ê' => '–†', '√é' => '–û',
            '√å' => '–ú', '√Ö' => '–ï', '√ï' => '–•', '√î' => '–§', '√ñ' => '–¶',
            '√ó' => '–ß', '√ô' => '–©', '√ö' => '–™', '√ú' => '–¨', '√ù' => '–≠',
            '√û' => '–Æ', '√ü' => '–Ø', '√á' => '–ó', '√à' => '–ò', '√â' => '–ô',
            '√ã' => '–õ', '√ç' => '–ù', '√ë' => '–°', '√ì' => '–£', '√Ç' => '–í',
            '√É' => '–ì', '√Ñ' => '–î', '√Ü' => '–ñ', '√Å' => '–ë',
            
            // –ú–∞–ª–∫–∏ –±—É–∫–≤–∏
            '√∫' => '—ä', '√ª' => '—ã', '√º' => '—å', '√Ω' => '—ç', '√æ' => '—é',
            '√≥' => '—É', '√≤' => '—Ç', '√µ' => '—Ö', '√¥' => '—Ñ', '√∂' => '—Ü',
            '√¶' => '–∂', '√ß' => '–∑', '√©' => '–π', '√™' => '–∫', '√¨' => '–º',
            '√Ø' => '–ø', '√¢' => '–≤', '√£' => '–≥', '√§' => '–¥',
            '√•' => '–µ', '√°' => '–±', // '√°' –º–æ–∂–µ –¥–∞ –µ '–±' –∏–ª–∏ '–Ω' –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
            
            // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ —Å–ª—É—á–∞–∏
            '√å' => '–ú', '√®' => '–∏', '√∑' => '—á', '√•' => '–µ',
            '√Å' => '–ë', '√ö' => '–™', '√ã' => '–õ', '√É' => '–ì',
            '√Ä' => '–ê', '√ê' => '–†', '√à' => '–ò', '√ü' => '–Ø',
            
            // –ò–Ω—Ç–µ—Ä–≤–∞–ª–∏
            ' ' => ' ', // non-breaking space
        ];
        
        $fixed = strtr($text, $accessFixMap);
        
        // –°–ø–µ—Ü–∏–∞–ª–µ–Ω —Å–ª—É—á–∞–π: "√°" –º–æ–∂–µ –¥–∞ –µ "–±" –∏–ª–∏ "–Ω"
        // –í "–ü–µ—á–µ–Ω—è—Ä—Å–∫–∏" —Ç—Ä—è–±–≤–∞ –¥–∞ –µ "–Ω", –≤ "–ë—ä–ª–≥–∞—Ä–∏—è" —Ç—Ä—è–±–≤–∞ –¥–∞ –µ "–±"
        $fixed = preg_replace('/–ü–µ—á–µ–±—è—Ä—Å–∫–∏/u', '–ü–µ—á–µ–Ω—è—Ä—Å–∫–∏', $fixed);
        $fixed = preg_replace('/–ü–µ—á–µ–±–∏—Ä—Å–∫–∏/u', '–ü–µ—á–µ–Ω—è—Ä—Å–∫–∏', $fixed);
        $fixed = preg_replace('/–ö–∞–ª–±—è—è–Ω/u', '–ö–∞–ª–æ–Ø–Ω', $fixed);
        $fixed = preg_replace('/√Å–™–õ–ì–ê–†–ò–Ø/u', '–ë–™–õ–ì–ê–†–ò–Ø', $fixed);
        $fixed = preg_replace('/√Å–™–õ–ì–ê–†–ò–Ø/u', '–ë–™–õ–ì–ê–†–ò–Ø', $fixed);
        
        // –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –æ—Å—Ç–∞–Ω–∞–ª–∏ Mojibake
        if (preg_match('/[√Ä-√ø]/u', $fixed) && !preg_match('/[–ê-–Ø–∞-—è]/u', $fixed)) {
            // –ü—Ä–æ–±–≤–∞–π UTF-8 ‚Üí Windows-1251 ‚Üí UTF-8
            $try = @mb_convert_encoding($fixed, 'Windows-1251', 'UTF-8');
            $try = @mb_convert_encoding($try, 'UTF-8', 'Windows-1251');
            
            if (preg_match('/[–ê-–Ø–∞-—è]/u', $try)) {
                return $try;
            }
            
            // –ü—Ä–æ–±–≤–∞–π ISO-8859-5
            $try = @mb_convert_encoding($fixed, 'UTF-8', 'ISO-8859-5');
            if (preg_match('/[–ê-–Ø–∞-—è]/u', $try)) {
                return $try;
            }
        }
        
        return $fixed;
    }

    public function run(): void
    {
        $this->command->info('üöÄ –°–¢–ê–†–¢–ò–†–ê–ù–ï –ù–ê –ò–ú–ü–û–†–¢–ê –û–¢ ACCESS');
        $this->command->line(str_repeat('‚ïê', 60));
        
        // –ü—ä—Ç –∫—ä–º —Ñ–∞–π–ª–∞
        $filePath = base_path('old-database/Customer.txt');
        
        if (!file_exists($filePath)) {
            $this->command->error("‚ùå –§–∞–π–ª—ä—Ç –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω: $filePath");
            return;
        }
        
        // –ê–ù–ê–õ–ò–ó –ù–ê –§–ê–ô–õ–ê –ü–†–ï–î–ò –ò–ú–ü–û–†–¢
        $this->analyzeFile($filePath);
        
        // –¢–ï–°–¢ –ù–ê –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê
        $this->testEncodingFix();
        
        // –û–¢–í–ê–†–Ø–ù–ï –ù–ê –§–ê–ô–õ–ê
        $file = fopen($filePath, 'r');
        if (!$file) {
            $this->command->error('‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –æ—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ —Ñ–∞–π–ª–∞');
            return;
        }
        
        // –ü–†–û–ß–ò–¢–ê–ô –ü–™–†–í–ò–Ø –†–ï–î –ò –û–ü–†–ï–î–ï–õ–ò –†–ê–ó–î–ï–õ–ò–¢–ï–õ–Ø
        $firstLine = fgets($file);
        rewind($file); // –í—ä—Ä–Ω–∏ —Å–µ –≤ –Ω–∞—á–∞–ª–æ—Ç–æ
        
        $delimiter = $this->detectDelimiter($firstLine);
        $this->command->info("üìä –ò–∑–ø–æ–ª–∑–≤–∞–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª: " . ($delimiter === "\t" ? "–¢–ê–ë–£–õ–ê–¢–û–†" : "–î–†–£–ì"));
        
        // –ü–†–û–ß–ò–¢–ê–ô –ó–ê–ì–õ–ê–í–ù–ò–Ø–¢–ê –° –ü–†–ê–í–ò–õ–ù–ò–Ø –†–ê–ó–î–ï–õ–ò–¢–ï–õ
        $headers = fgetcsv($file, 0, $delimiter);
        
        if (!$headers || count($headers) <= 1) {
            $this->command->error('‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —á–µ—Ç–µ–Ω–µ –Ω–∞ –∑–∞–≥–ª–∞–≤–Ω–∏—è —Ä–µ–¥!');
            $this->command->info('–í—ä–∑–º–æ–∂–Ω–∏ –ø—Ä–∏—á–∏–Ω–∏:');
            $this->command->info('1. –ì—Ä–µ—à–µ–Ω —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª (–Ω–µ —Ç–∞–±—É–ª–∞—Ç–æ—Ä)');
            $this->command->info('2. –§–∞–π–ª—ä—Ç –µ –≤ –¥—Ä—É–≥ —Ñ–æ—Ä–º–∞—Ç');
            fclose($file);
            return;
        }
        
        $this->command->info("‚úÖ –ó–∞–≥–ª–∞–≤–Ω–∏ –ø–æ–ª–µ—Ç–∞: " . count($headers));
        $this->command->line("üìã –ü—ä—Ä–≤–∏—Ç–µ 5 –ø–æ–ª–µ—Ç–∞: " . implode(', ', array_slice($headers, 0, 5)));
        
        $imported = 0;
        $errors = [];
        $rowNumber = 0;
        
        $this->command->info("\nüì• –ó–ê–ü–û–ß–í–ê–ú –ò–ú–ü–û–†–¢...");
        $progressBar = $this->command->getOutput()->createProgressBar();
        $progressBar->start();
        
        // –û–ë–†–ê–ë–û–¢–ö–ê –ù–ê –í–°–ï–ö–ò –†–ï–î
        while (($row = fgetcsv($file, 0, $delimiter)) !== false) {
            $rowNumber++;
            $progressBar->advance();
            
            // –ü—Ä–æ–ø—É—Å–∫–∞–π –ø—Ä–∞–∑–Ω–∏ —Ä–µ–¥–æ–≤–µ
            if (count($row) === 1 && empty(trim($row[0]))) {
                continue;
            }
            
            // –ê–∫–æ —Ä–µ–¥–æ–≤–µ—Ç–µ –Ω–µ —Å—ä–≤–ø–∞–¥–∞—Ç —Å –∑–∞–≥–ª–∞–≤–Ω–∏—Ç–µ, –æ–ø–∏—Ç–∞–π –¥–∞ –≥–∏ –Ω–∞–ø–∞—Å–Ω–µ—à
            if (count($row) !== count($headers)) {
                // –ú–æ–∂–µ –±–∏ –∏–º–∞ –ø—Ä–∞–∑–Ω–∏ –∫–æ–ª–æ–Ω–∏ –≤ –∫—Ä–∞—è
                while (count($row) < count($headers)) {
                    $row[] = '';
                }
                $row = array_slice($row, 0, count($headers));
            }
            
            try {
                $rowData = array_combine($headers, $row);
                
                // –ü–û–î–ì–û–¢–í–ò –î–ê–ù–ù–ò–¢–ï
                $customerData = $this->prepareCustomerData($rowData);
                
                // –ü–†–û–í–ï–†–ö–ê –ó–ê –ó–ê–î–™–õ–ñ–ò–¢–ï–õ–ù–ò –ü–û–õ–ï–¢–ê
                if (empty($customerData['name'])) {
                    $errors[] = "–†–µ–¥ $rowNumber: –õ–∏–ø—Å–≤–∞ –∏–º–µ";
                    continue;
                }
                
                // –°–™–ó–î–ê–ô –ö–õ–ò–ï–ù–¢–ê
                Customer::create($customerData);
                $imported++;
                
            } catch (\Exception $e) {
                $errors[] = "–†–µ–¥ $rowNumber: " . $e->getMessage();
                Log::error('Import error row ' . $rowNumber, [
                    'error' => $e->getMessage(),
                    'data' => $rowData ?? []
                ]);
            }
        }
        
        $progressBar->finish();
        fclose($file);
        
        // –†–ï–ó–£–õ–¢–ê–¢–ò
        $this->command->line("\n");
        $this->command->info('‚úÖ –ò–ú–ü–û–†–¢–™–¢ –ó–ê–í–™–†–®–ò');
        $this->command->line(str_repeat('‚ïê', 60));
        $this->command->info("üü¢ –£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏: $imported –∫–ª–∏–µ–Ω—Ç–∏");
        
        if (!empty($errors)) {
            $this->command->warn("üü° –ì—Ä–µ—à–∫–∏: " . count($errors));
            foreach (array_slice($errors, 0, 10) as $error) {
                $this->command->line("   ‚Ä¢ $error");
            }
            if (count($errors) > 10) {
                $this->command->line("   ... –∏ –æ—â–µ " . (count($errors) - 10) . " –≥—Ä–µ—à–∫–∏");
            }
            $this->command->line("üìã –ü—ä–ª–Ω–∏—è—Ç —Å–ø–∏—Å—ä–∫ –µ –≤ storage/logs/laravel.log");
        }
        
        if ($imported > 0) {
            $this->command->info("\nüéâ –ö–õ–ò–ï–ù–¢–ò–¢–ï –°–ê –ò–ú–ü–û–†–¢–ò–†–ê–ù–ò –£–°–ü–ï–®–ù–û!");
            $this->command->info("üí° –°–µ–≥–∞ –º–æ–∂–µ—à –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏—à —Å –∏–º–ø–æ—Ä—Ç–∞ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ.");
        }
    }
    
    /**
     * –ê–Ω–∞–ª–∏–∑–∏—Ä–∞ —Ñ–∞–π–ª–∞ –ø—Ä–µ–¥–∏ –∏–º–ø–æ—Ä—Ç
     */
    private function analyzeFile(string $filePath): void
    {
        $content = file_get_contents($filePath);
        $lines = explode("\n", $content);
        
        $this->command->info("üìÅ –§–∞–π–ª: " . basename($filePath));
        $this->command->info("üìä –†–∞–∑–º–µ—Ä: " . round(strlen($content) / 1024, 2) . " KB");
        $this->command->info("üìà –†–µ–¥–æ–≤–µ: " . count($lines));
        
        // –ü–æ–∫–∞–∂–∏ –ø—ä—Ä–≤–∏—Ç–µ 2 —Ä–µ–¥–∞ –∑–∞ –∞–Ω–∞–ª–∏–∑
        $this->command->info("\nüîç –ü–†–ï–ì–õ–ï–î –ù–ê –î–ê–ù–ù–ò–¢–ï:");
        $this->command->line(str_repeat('‚îÄ', 60));
        
        for ($i = 0; $i < min(3, count($lines)); $i++) {
            $line = $lines[$i];
            $this->command->line("–†–µ–¥ " . ($i + 1) . ": " . substr($line, 0, 80) . 
                                (strlen($line) > 80 ? '...' : ''));
        }
        
        $this->command->line(str_repeat('‚îÄ', 60));
    }
    
    /**
     * –û–ø—Ä–µ–¥–µ–ª—è —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è –≤—ä–≤ —Ñ–∞–π–ª–∞
     */
    private function detectDelimiter(string $line): string
    {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏
        $delimiters = [
            "\t" => '–¢–ê–ë–£–õ–ê–¢–û–†',
            "|"   => 'PIPE',
            ","   => '–ó–ê–ü–ï–¢–ê–Ø',
            ";"   => '–¢–û–ß–ö–ê –ò –ó–ê–ü–ï–¢–ê–Ø'
        ];
        
        foreach ($delimiters as $char => $name) {
            if (substr_count($line, $char) > 5) { // –ê–∫–æ –∏–º–∞ –ø–æ–≤–µ—á–µ –æ—Ç 5 –ø—ä—Ç–∏
                return $char;
            }
        }
        
        // –ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ —Ç–∞–±—É–ª–∞—Ç–æ—Ä (–∑–∞ Access)
        return "\t";
    }
    
    /**
     * –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ encoding –∫–æ–Ω–≤–µ—Ä—Å–∏—è—Ç–∞
     */
    private function testEncodingFix(): void
    {
        $this->command->info('üß™ –¢–ï–°–¢ –ù–ê –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê:');
        
        $testCases = [
            '√ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®' => '–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò',
            '√ò√Ä√í√ê√é√å  √Ö√é√é√Ñ' => '–®–ê–¢–†–û–ú –ï–û–û–î',
            '√í√Ö√ê√á√à√Ñ √Ö√é√é√Ñ' => '–¢–ï–†–ó–ò–î –ï–û–û–î',
            '√Ö.√í.√Ö. √Ö√é√é√Ñ' => '–ï.–¢.–ï. –ï–û–û–î',
            '√ã√à√ç√Ñ√ç√Ö√ê √Å√ö√ã√É√Ä√ê√à√ü √Ö√é√é√Ñ' => '–õ–ò–ù–î–ù–ï–† –ë–™–õ–ì–ê–†–ò–Ø –ï–û–û–î',
            '√ë√≤√•√¥√†√≠ √å√®√≠√∑√•√¢' => '–°—Ç–µ—Ñ–∞–Ω –ú–∏–Ω—á–µ–≤',
            '√≥√´. " √Å√®√ß√≠√•√± √è√†√∞√™ √ë√Æ√¥√®√ø "' => '—É–ª. " –ë–∏–∑–Ω–µ—Å –ü–∞—Ä–∫ –°–æ—Ñ–∏—è "',
            '√Å√®√ß√≠√•√±' => '–ë–∏–∑–Ω–µ—Å',
            '√è√†√∞√™' => '–ü–∞—Ä–∫',
            '√ë√Æ√¥√®√ø' => '–°–æ—Ñ–∏—è',
        ];
        
        $passed = 0;
        $total = count($testCases);
        
        foreach ($testCases as $input => $expected) {
            $result = $this->fixAccessEncoding($input);
            
            // –°—Ä–∞–≤–Ω—è–≤–∞–º–µ —Å–∞–º–æ –≥–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏, –∑–∞—â–æ—Ç–æ –º–æ–∂–µ –¥–∞ –∏–º–∞ —Ä–∞–∑–ª–∏–∫–∏ –≤ –º–∞–ª–∫–∏/–≥–ª–∞–≤–Ω–∏
            $resultUpper = mb_strtoupper($result, 'UTF-8');
            $expectedUpper = mb_strtoupper($expected, 'UTF-8');
            
            $isMatch = ($resultUpper === $expectedUpper);
            
            if ($isMatch) {
                $passed++;
                $this->command->line("‚úÖ " . $this->truncate($input, 30) . 
                                   " ‚Üí " . $this->truncate($result, 30));
            } else {
                $this->command->line("‚ùå " . $this->truncate($input, 30) . 
                                   " ‚Üí " . $this->truncate($result, 30));
                $this->command->line("   –û—á–∞–∫–≤–∞–Ω–æ: " . $expected);
            }
        }
        
        $this->command->line(str_repeat('‚îÄ', 60));
        
        if ($passed === $total) {
            $this->command->info("üéâ –í—Å–∏—á–∫–∏ $total —Ç–µ—Å—Ç–∞ –º–∏–Ω–∞—Ö–∞ —É—Å–ø–µ—à–Ω–æ!");
        } else {
            $this->command->warn("‚ö†Ô∏è  $passed –æ—Ç $total —Ç–µ—Å—Ç–∞ –º–∏–Ω–∞—Ö–∞ —É—Å–ø–µ—à–Ω–æ");
        }
    }
    
    /**
     * –ü–æ–¥–≥–æ—Ç–≤—è –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ –∫–ª–∏–µ–Ω—Ç–∞
     */
    private function prepareCustomerData(array $oldData): array
    {
        // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–π –≤—Å–∏—á–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏ –ø–æ–ª–µ—Ç–∞
        $converted = [];
        foreach ($oldData as $key => $value) {
            if (is_string($value)) {
                $converted[$key] = $this->fixAccessEncoding($value);
            } else {
                $converted[$key] = $value;
            }
        }
        
        return [
            'old_system_id'       => $converted['Number'] ?? null,
            'type'                => $this->determineType($converted),
            'name'                => trim($converted['Customer-Name'] ?? ''),
            'vat_number'          => $this->cleanVatNumber($converted['Customer-Taxno'] ?? ''),
            'bulstat'             => trim($converted['Customer-Bulstat'] ?? ''),
            'contact_person'      => trim($converted['Customer-MOL'] ?? ''),
            'phone'               => $this->cleanPhone($converted['Telno'] ?? ''),
            'fax'                 => trim($converted['Faxno'] ?? ''),
            'email'               => $this->cleanEmail($converted['E-mail'] ?? ''),
            'address'             => $this->formatAddress($converted),
            'address_line1'       => trim($converted['Customer-Address-1'] ?? ''),
            'address_line2'       => trim($converted['Customer-Address-2'] ?? ''),
            'city'                => $this->extractCity($converted),
            'notes'               => $this->formatNotes($converted),
            'court_registration'  => trim($converted['partida'] ?? ''),
            'bulstat_letter'      => trim($converted['bulstatletter'] ?? ''),
            'is_active'           => $this->parseBoolean($converted['active'] ?? ''),
            'include_in_reports'  => $this->parseBoolean($converted['include'] ?? ''),
            'created_at'          => $this->parseDate($converted['eidate'] ?? ''),
        ];
    }
    
    private function determineType(array $data): string
    {
        $isCustomer = isset($data['customer']) && strtoupper(trim($data['customer'])) === '–î–ê';
        $isSupplier = isset($data['supplier']) && strtoupper(trim($data['supplier'])) === '–î–ê';
        
        if ($isCustomer && $isSupplier) return 'both';
        if ($isSupplier) return 'supplier';
        return 'customer';
    }
    
    private function cleanVatNumber(string $vat): ?string
    {
        $vat = trim($vat);
        if (empty($vat)) return null;
        
        $vat = preg_replace('/\s+/', '', $vat);
        if (!str_starts_with(strtoupper($vat), 'BG')) {
            $vat = 'BG' . $vat;
        }
        
        return $vat;
    }
    
    private function cleanPhone(string $phone): ?string
    {
        $phone = preg_replace('/[^0-9+]/', '', trim($phone));
        return !empty($phone) ? $phone : null;
    }
    
    private function cleanEmail(string $email): ?string
    {
        $email = trim($email);
        return filter_var($email, FILTER_VALIDATE_EMAIL) ? $email : null;
    }
    
    private function formatAddress(array $data): string
    {
        $parts = [];
        if (!empty($data['Customer-Address-1'])) $parts[] = trim($data['Customer-Address-1']);
        if (!empty($data['Customer-Address-2'])) $parts[] = trim($data['Customer-Address-2']);
        return implode(', ', $parts);
    }
    
    private function extractCity(array $data): string
    {
        $address = $data['Customer-Address-1'] ?? '';
        $address = mb_strtoupper($address, 'UTF-8');
        
        if (str_contains($address, '–°–û–§–ò–Ø')) return '–°–æ—Ñ–∏—è';
        if (str_contains($address, '–ü–õ–û–í–î–ò–í')) return '–ü–ª–æ–≤–¥–∏–≤';
        if (str_contains($address, '–í–ê–†–ù–ê')) return '–í–∞—Ä–Ω–∞';
        if (str_contains($address, '–ë–£–†–ì–ê–°')) return '–ë—É—Ä–≥–∞—Å';
        if (str_contains($address, '–†–£–°–ï')) return '–†—É—Å–µ';
        
        return '–°–æ—Ñ–∏—è';
    }
    
    private function formatNotes(array $data): ?string
    {
        $notes = [];
        if (!empty($data['Receiver'])) $notes[] = '–ü–æ–ª—É—á–∞—Ç–µ–ª: ' . trim($data['Receiver']);
        if (!empty($data['Contact'])) $notes[] = '–ö–æ–Ω—Ç–∞–∫—Ç: ' . trim($data['Contact']);
        return !empty($notes) ? implode("\n", $notes) : null;
    }
    
    private function parseBoolean(string $value): bool
    {
        $value = strtoupper(trim($value));
        return $value === '–î–ê';
    }
    
    private function parseDate(string $date): ?string
    {
        if (preg_match('/(\d{1,2})\.(\d{1,2})\.(\d{4})/', $date, $matches)) {
            $day = (int)$matches[1];
            $month = (int)$matches[2];
            $year = (int)$matches[3];
            
            // –î–æ–±–∞–≤–∏ –≤–æ–¥–µ—â–∞ –Ω—É–ª–∞ –∞–∫–æ —Ç—Ä—è–±–≤–∞
            return sprintf('%04d-%02d-%02d', $year, $month, $day);
        }
        return now()->toDateTimeString();
    }
    
    private function truncate(string $text, int $length): string
    {
        if (mb_strlen($text, 'UTF-8') <= $length) return $text;
        return mb_substr($text, 0, $length - 3, 'UTF-8') . '...';
    }
}
üéØ –í–ê–ñ–ù–ò –ü–†–û–ú–ï–ù–ò –í –¢–û–ó–ò SEEDER:
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—Ç–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è
–°–µ–µ–¥—ä—Ä—ä—Ç —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª—è –¥–∞–ª–∏ —Ñ–∞–π–ª—ä—Ç –µ —Å —Ç–∞–±—É–ª–∞—Ç–æ—Ä–∏, –ø–∞—ò–ø–æ–≤–µ –∏–ª–∏ –∑–∞–ø–µ—Ç–∞–∏.

2. –ü–æ–¥—Ä–æ–±–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
–ü–æ–∫–∞–∑–≤–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ —Ñ–∞–π–ª–∞ –ø—Ä–µ–¥–∏ –∏–º–ø–æ—Ä—Ç.

3. –ü–æ–¥–æ–±—Ä–µ–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—è –Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
–°–ø–µ—Ü–∏–∞–ª–Ω–æ –æ–±—Ä–∞–±–æ—Ç–≤–∞ —Å–ª—É—á–∞–∏ –∫–∞—Ç–æ "–ë–™–õ–ì–ê–†–ò–Ø" –∏ "–ü–µ—á–µ–Ω—è—Ä—Å–∫–∏".

4. –ü–æ-–¥–æ–±—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –≥—Ä–µ—à–∫–∏
–õ–æ–≥–≤–∞ –≥—Ä–µ—à–∫–∏—Ç–µ –∏ –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞ —Å –¥—Ä—É–≥–∏—Ç–µ –∑–∞–ø–∏—Å–∏.

üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–ò:
–ó–∞–ø–∞–∑–∏ —Ç–æ–∑–∏ –∫–æ–¥ –∫–∞—Ç–æ database/seeders/CustomerImportSeeder.php

–ü—É—Å–Ω–∏ —Å–∞–º–æ —Ç–æ–∑–∏ —Å–µ–µ–¥—ä—Ä –∑–∞ —Ç–µ—Å—Ç:

bash
php artisan db:seed --class=CustomerImportSeeder
–ê–∫–æ —Ä–∞–±–æ—Ç–∏, –ø—É—Å–Ω–∏ –ø—ä–ª–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–µ–Ω –ø—Ä–æ—Ü–µ—Å –æ—Ç–Ω–æ–≤–æ.

–¢–æ–∑–∏ —Å–µ–µ–¥—ä—Ä —â–µ —Ç–∏ –ø–æ–∫–∞–∂–µ –ø–æ–¥—Ä–æ–±–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ —Ñ–∞–π–ª–∞ –∏ —â–µ –æ–ø—Ä–∞–≤–∏ –∫–∏—Ä–∏–ª–∏—Ü–∞—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ! üéØ

–û—Ç–Ω–æ–≤–æ –≥—Ä–µ—à–∫–∞ ... PS D:\xampp\htdocs\autoservice> php artisan migrate:fresh --seed

  Dropping all tables ..................................................................................................... 14 —Å–µ–∫—É–Ω–¥–∏ DONE

   INFO  Preparing database.  

  Creating migration table .................................................................................................. 656.74ms DONE

   INFO  Running migrations.  

  0001_01_01_000000_create_users_table ..................................................................................... 3 —Å–µ–∫—É–Ω–¥–∏ DONE
  0001_01_01_000001_create_cache_table ..................................................................................... 1 —Å–µ–∫—É–Ω–¥–∞ DONE
  0001_01_01_000002_create_jobs_table ...................................................................................... 3 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_182544_create_permission_tables .............................................................................. 16 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_182611_create_activity_log_table .............................................................................. 2 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_182612_add_event_column_to_activity_log_table .................................................................. 333.74ms DONE
  2025_11_19_182613_add_batch_uuid_column_to_activity_log_table ............................................................. 153.76ms DONE
  2025_11_19_225614_create_customers_table ................................................................................. 1 —Å–µ–∫—É–Ω–¥–∞ DONE
  2025_11_19_225615_create_vehicles_table .................................................................................. 3 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_225616_create_products_table .................................................................................. 1 —Å–µ–∫—É–Ω–¥–∞ DONE
  2025_11_19_225701_create_service_categories_table ........................................................................ 1 —Å–µ–∫—É–Ω–¥–∞ DONE
  2025_11_19_225710_create_services_table .................................................................................. 5 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_225951_create_work_orders_table ............................................................................... 9 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_225952_create_work_order_items_table .......................................................................... 8 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_225954_create_invoices_table .................................................................................. 8 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_225956_create_invoice_items_table ............................................................................. 5 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_19_225958_create_stock_movements_table ........................................................................... 8 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_22_151935_create_payments_table .................................................................................. 4 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_27_094655_add_invoices_foreign_keys ................................................................................. 2.74ms DONE
  2025_11_27_103303_add_soft_deletes_to_main_tables ........................................................................ 2 —Å–µ–∫—É–Ω–¥–∏ DONE
  2025_11_27_103310_create_company_settings_table .......................................................................... 1 —Å–µ–∫—É–Ω–¥–∞ DONE


   INFO  Seeding database.

  Database\Seeders\MasterSeeder ................................................................................................... RUNNING  
  Database\Seeders\RolesAndPermissionsSeeder ...................................................................................... RUNNING  
  Database\Seeders\RolesAndPermissionsSeeder ................................................................................ 7,087 ms DONE  

  Database\Seeders\AdminUserSeeder ................................................................................................ RUNNING  
  Database\Seeders\AdminUserSeeder ............................................................................................ 939 ms DONE  

  Database\Seeders\CustomerImportSeeder ........................................................................................... RUNNING  
üöÄ –°–¢–ê–†–¢–ò–†–ê–ù–ï –ù–ê –ò–ú–ü–û–†–¢–ê –û–¢ ACCESS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìÅ –§–∞–π–ª: Customer.txt
üìä –†–∞–∑–º–µ—Ä: 5685.49 KB
üìà –†–µ–¥–æ–≤–µ: 11130

üîç –ü–†–ï–ì–õ–ï–î –ù–ê –î–ê–ù–ù–ò–¢–ï:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–†–µ–¥ 1: -----------------------------------------------------------------------------...
–†–µ–¥ 2: |   Number   |              Customer-Name               |    Customer-Address-1 ...
–†–µ–¥ 3: --------------------------------------------------------------------------------...
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üß™ –¢–ï–°–¢ –ù–ê –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê:
‚ùå √ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√® ‚Üí –ö–∞–ª–æ—è–∏ –ü–µ—á–µ–∏—è—Ä—Å–∫–∏
   –û—á–∞–∫–≤–∞–Ω–æ: –ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò
‚ùå √ò√Ä√í√ê√é√å  √Ö√é√é√Ñ ‚Üí –®–ê–¢–†–û–ú  –ï–û–û–î
   –û—á–∞–∫–≤–∞–Ω–æ: –®–ê–¢–†–û–ú –ï–û–û–î
‚úÖ √í√Ö√ê√á√à√Ñ √Ö√é√é√Ñ ‚Üí –¢–ï–†–ó–ò–î –ï–û–û–î
‚úÖ √Ö.√í.√Ö. √Ö√é√é√Ñ ‚Üí –ï.–¢.–ï. –ï–û–û–î
‚úÖ √ã√à√ç√Ñ√ç√Ö√ê √Å√ö√ã√É√Ä√ê√à√ü √Ö√é√é√Ñ ‚Üí –õ–ò–ù–î–ù–ï–† –ë–™–õ–ì–ê–†–ò–Ø –ï–û–û–î
‚ùå √ë√≤√•√¥√†√≠ √å√®√≠√∑√•√¢ ‚Üí –°—Ç–µ—Ñ–∞–∏ –ú–∏–∏—á–µ–≤
   –û—á–∞–∫–≤–∞–Ω–æ: –°—Ç–µ—Ñ–∞–Ω –ú–∏–Ω—á–µ–≤
‚ùå √≥√´. " √Å√®√ß√≠√•√± √è√†√∞√™ √ë√Æ√¥√®√ø " ‚Üí —É–ª. " –ë–∏–∑–∏–µ—Å –ü–∞—Ä–∫ –°–æ—Ñ–∏—è "
   –û—á–∞–∫–≤–∞–Ω–æ: —É–ª. " –ë–∏–∑–Ω–µ—Å –ü–∞—Ä–∫ –°–æ—Ñ–∏—è "
‚ùå √Å√®√ß√≠√•√± ‚Üí –ë–∏–∑–∏–µ—Å
   –û—á–∞–∫–≤–∞–Ω–æ: –ë–∏–∑–Ω–µ—Å
‚úÖ √è√†√∞√™ ‚Üí –ü–∞—Ä–∫
‚úÖ √ë√Æ√¥√®√ø ‚Üí –°–æ—Ñ–∏—è
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚ö†Ô∏è  5 –æ—Ç 10 —Ç–µ—Å—Ç–∞ –º–∏–Ω–∞—Ö–∞ —É—Å–ø–µ—à–Ω–æ
üìä –ò–∑–ø–æ–ª–∑–≤–∞–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª: –¢–ê–ë–£–õ–ê–¢–û–†
‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —á–µ—Ç–µ–Ω–µ –Ω–∞ –∑–∞–≥–ª–∞–≤–Ω–∏—è —Ä–µ–¥!
–í—ä–∑–º–æ–∂–Ω–∏ –ø—Ä–∏—á–∏–Ω–∏:
1. –ì—Ä–µ—à–µ–Ω —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª (–Ω–µ —Ç–∞–±—É–ª–∞—Ç–æ—Ä)
2. –§–∞–π–ª—ä—Ç –µ –≤ –¥—Ä—É–≥ —Ñ–æ—Ä–º–∞—Ç
  Database\Seeders\CustomerImportSeeder ........................................................................................ 34 ms DONE  

  Database\Seeders\VehicleSeeder .................................................................................................. RUNNING  

   Illuminate\Database\QueryException 

  SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`autoservice`.`vehicles`, CONSTRAINT `vehicles_customer_id_foreign` FOREIGN KEY (`customer_id`) REFERENCES `customers` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `vehicles` (`customer_id`, `vin`, `plate`, `make`, `model`, `year`, `mileage`, `dk_no`, `notes`, `updated_at`, `created_at`) values (1, WAUZZZ8V8FA123456, –°–í1234–ê–í, Audi, A4, 2018, 125000, DK-2024-001, –°–º—è–Ω–∞ –Ω–∞ –º–∞—Å–ª–æ –∏ —Ñ–∏–ª—Ç—Ä–∏, 2025-12-20 07:49:59, 2025-12-20 07:49:59))

  at vendor\laravel\framework\src\Illuminate\Database\Connection.php:824
    820‚ñï                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    821‚ñï                 );
    822‚ñï             }
    823‚ñï
  ‚ûú 824‚ñï             throw new QueryException(
    825‚ñï                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    826‚ñï             );
    827‚ñï         }
    828‚ñï     }

  1   vendor\laravel\framework\src\Illuminate\Database\MySqlConnection.php:53
      PDOException::("SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails 
(`autoservice`.`vehicles`, CONSTRAINT `vehicles_customer_id_foreign` FOREIGN KEY (`customer_id`) REFERENCES `customers` (`id`) ON DELETE CASCADE)")

  2   vendor\laravel\framework\src\Illuminate\Database\MySqlConnection.php:53
      PDOStatement::execute()

PS D:\xampp\htdocs\autoservice>
–í–∏–∂–¥–∞–º –ø—Ä–æ–±–ª–µ–º–∞! –§–∞–π–ª—ä—Ç –Ω–µ –µ –≤ –æ–±–∏–∫–Ω–æ–≤–µ–Ω CSV/TSV —Ñ–æ—Ä–º–∞—Ç, –∞ –µ —Ç–µ–∫—Å—Ç–æ–≤–æ —Ç–∞–±–ª–∏—á–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤—è–Ω–µ —Å –ø–∞—ò–ø–æ–≤–µ (|) –∏ —Ç–∏—Ä–µ—Ç–∞! –¢–æ–≤–∞ –µ —Ä–∞–∑–ª–∏—á–µ–Ω —Ñ–æ—Ä–º–∞—Ç.

–í–∏–∂ –∫–∞–∫ –∏–∑–≥–ª–µ–∂–¥–∞ —Ñ–∞–π–ª—ä—Ç:

text
–†–µ–¥ 1: -----------------------------------------------------------------------------...
–†–µ–¥ 2: |   Number   |              Customer-Name               |    Customer-Address-1 ...
–†–µ–¥ 3: --------------------------------------------------------------------------------...
–¢–æ–≤–∞ –∑–Ω–∞—á–∏, —á–µ —Å–∏ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–ª –æ—Ç Access –∫–∞—Ç–æ "Formatted Text" –≤–º–µ—Å—Ç–æ –∫–∞—Ç–æ —á–∏—Å—Ç CSV.

üéØ –†–ï–®–ï–ù–ò–ï: –ü–ê–†–°–í–ê–ù–ï –ù–ê –¢–ê–ë–õ–ò–ß–ï–ù –§–û–†–ú–ê–¢
–ï—Ç–æ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω CustomerImportSeeder.php –∑–∞ —Ç–æ–∑–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ–Ω —Ñ–æ—Ä–º–∞—Ç:

php
<?php

namespace Database\Seeders;

use App\Models\Customer;
use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\Log;

class CustomerImportSeeder extends Seeder
{
    /**
     * –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ Access Mojibake —Ç–µ–∫—Å—Ç –∫—ä–º –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
     * –°–ø–µ—Ü–∏–∞–ª–Ω–æ –∑–∞ Access –±—ä–ª–≥–∞—Ä—Å–∫–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
     */
    private function fixAccessEncoding(string $text): string
    {
        $text = trim($text);
        if (empty($text)) return $text;
        
        // –ê–∫–æ –≤–µ—á–µ –µ –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞, –≤—ä—Ä–Ω–∏ –∫–∞–∫—Ç–æ –µ
        if (preg_match('/[–ê-–Ø–∞-—è–Å—ë]/u', $text)) {
            return $text;
        }
        
        // –ü–û–ü–™–õ–ù–ï–ù –ú–ê–ü–ò–ù–ì –∑–∞ —Ç–æ—á–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—è
        $accessFixMap = [
            // –û—Å–Ω–æ–≤–Ω–∏ –±—É–∫–≤–∏
            '√ä' => '–ö', '√†' => '–∞', '√´' => '–ª', '√Æ' => '–æ', '√ø' => '—è',
            '√°' => '–Ω', '√è' => '–ü', '√•' => '–µ', '√∑' => '—á', '√≠' => '–∏',
            '√∞' => '—Ä', '√±' => '—Å', '√®' => '–∏',
            
            // –ì–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏
            '√ò' => '–®', '√Ä' => '–ê', '√í' => '–¢', '√ê' => '–†', '√é' => '–û',
            '√å' => '–ú', '√Ö' => '–ï', '√ï' => '–•', '√î' => '–§', '√ñ' => '–¶',
            '√ó' => '–ß', '√ô' => '–©', '√ö' => '–™', '√ú' => '–¨', '√ù' => '–≠',
            '√û' => '–Æ', '√ü' => '–Ø', '√á' => '–ó', '√à' => '–ò', '√â' => '–ô',
            '√ã' => '–õ', '√ç' => '–ù', '√ë' => '–°', '√ì' => '–£', '√Ç' => '–í',
            '√É' => '–ì', '√Ñ' => '–î', '√Ü' => '–ñ', '√Å' => '–ë',
            
            // –ú–∞–ª–∫–∏ –±—É–∫–≤–∏
            '√∫' => '—ä', '√ª' => '—ã', '√º' => '—å', '√Ω' => '—ç', '√æ' => '—é',
            '√≥' => '—É', '√≤' => '—Ç', '√µ' => '—Ö', '√¥' => '—Ñ', '√∂' => '—Ü',
            '√¶' => '–∂', '√ß' => '–∑', '√©' => '–π', '√™' => '–∫', '√¨' => '–º',
            '√Ø' => '–ø', '√¢' => '–≤', '√£' => '–≥', '√§' => '–¥', '√•' => '–µ',
            '√°' => '–±', '√≤' => '—Ç', '√µ' => '—Ö',
            
            // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ –∑–∞ "–ë–∏–∑–Ω–µ—Å" –∏ "–ú–∏–Ω—á–µ–≤"
            '√®' => '–∏', '√±' => '—Å', // –∑–∞ "–ë–∏–∑–Ω–µ—Å"
            '√©' => '–Ω', '√¢' => '–≤', // –∑–∞ "–ú–∏–Ω—á–µ–≤" - '√©' —Ç—Ä—è–±–≤–∞ –¥–∞ –µ '–Ω', –Ω–µ '–π'
        ];
        
        $fixed = strtr($text, $accessFixMap);
        
        // –°–ü–ï–¶–ò–ê–õ–ù–ò –ü–û–ü–†–ê–í–ö–ò
        $fixed = preg_replace('/–ö–∞–ª–æ—è–∏/u', '–ö–∞–ª–æ–Ø–Ω', $fixed);
        $fixed = preg_replace('/–ü–µ—á–µ–∏—è—Ä—Å–∫–∏/u', '–ü–µ—á–µ–Ω—è—Ä—Å–∫–∏', $fixed);
        $fixed = preg_replace('/–°—Ç–µ—Ñ–∞–∏/u', '–°—Ç–µ—Ñ–∞–Ω', $fixed);
        $fixed = preg_replace('/–ú–∏–∏—á–µ–≤/u', '–ú–∏–Ω—á–µ–≤', $fixed);
        $fixed = preg_replace('/–ë–∏–∑–∏–µ—Å/u', '–ë–∏–∑–Ω–µ—Å', $fixed);
        $fixed = preg_replace('/–®–ê–¢–†–û–ú  –ï–û–û–î/u', '–®–ê–¢–†–û–ú –ï–û–û–î', $fixed);
        
        return $fixed;
    }
    
    /**
     * –ü–∞—Ä—Å–≤–∞ —Ç–∞–±–ª–∏—á–µ–Ω —Ç–µ–∫—Å—Ç —Ñ–æ—Ä–º–∞—Ç —Å –ø–∞—ò–ø–æ–≤–µ
     * –§–æ—Ä–º–∞—Ç: | Number | Customer-Name | Customer-Address-1 | ...
     */
    private function parseTableFormat(string $content): array
    {
        $lines = explode("\n", $content);
        $data = [];
        
        $headerLine = null;
        $headers = [];
        
        // 1. –ù–∞–º–µ—Ä–∏ –∑–∞–≥–ª–∞–≤–Ω–∏—è —Ä–µ–¥ (—Ç–æ–∑–∏ —Å –∏–º–µ–Ω–∞—Ç–∞ –Ω–∞ –∫–æ–ª–æ–Ω–∏—Ç–µ)
        foreach ($lines as $line) {
            if (strpos($line, '|   Number   |') !== false || 
                strpos($line, '| Number |') !== false) {
                $headerLine = $line;
                break;
            }
        }
        
        if (!$headerLine) {
            $this->command->error('‚ùå –ù–µ –º–æ–≥–∞ –¥–∞ –Ω–∞–º–µ—Ä—è –∑–∞–≥–ª–∞–≤–Ω–∏—è —Ä–µ–¥ —Å –∫–æ–ª–æ–Ω–∏—Ç–µ!');
            return [];
        }
        
        // 2. –ò–∑–≤–ª–µ—á–∏ –∑–∞–≥–ª–∞–≤–∫–∏—Ç–µ
        // –ü—Ä–µ–º–∞—Ö–Ω–∏ –Ω–∞—á–∞–ª–Ω–∏—è –∏ –∫—Ä–∞–π–Ω–∏—è '|'
        $headerLine = trim($headerLine, "| \t\n\r\0\x0B");
        // –†–∞–∑–¥–µ–ª–∏ –ø–æ '|' –∏ trim-–Ω–∏ –≤—Å—è–∫–∞ –∫–æ–ª–æ–Ω–∞
        $rawHeaders = array_map('trim', explode('|', $headerLine));
        
        // 3. –ú–∞–ø–∏—Ä–∞–π –∑–∞–≥–ª–∞–≤–∫–∏—Ç–µ –∫—ä–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏ –∏–º–µ–Ω–∞
        $headerMapping = [
            'Number' => 'Number',
            'Customer-Name' => 'Customer-Name',
            'Customer-Address-1' => 'Customer-Address-1',
            'Customer-Address-2' => 'Customer-Address-2',
            'Customer-MOL' => 'Customer-MOL',
            'Customer-Taxno' => 'Customer-Taxno',
            'Customer-DocType' => 'Customer-DocType',
            'Receiver' => 'Receiver',
            'Receiver Details' => 'Receiver Details',
            'Customer-Bulstat' => 'Customer-Bulstat',
            'Telno' => 'Telno',
            'Faxno' => 'Faxno',
            'E-mail' => 'E-mail',
            'ResAddress1' => 'ResAddress1',
            'ResAddress2' => 'ResAddress2',
            'eidate' => 'eidate',
            'include' => 'include',
            'active' => 'active',
            'customer' => 'customer',
            'supplier' => 'supplier',
            'Contact' => 'Contact',
            'partida' => 'partida',
            'bulstatletter' => 'bulstatletter',
        ];
        
        $headers = [];
        foreach ($rawHeaders as $rawHeader) {
            $normalized = trim(preg_replace('/\s+/', ' ', $rawHeader));
            // –û–ø–∏—Ç–∞–π –¥–∞ –Ω–∞–º–µ—Ä–∏—à —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
            foreach ($headerMapping as $key => $value) {
                if (stripos($normalized, $key) !== false) {
                    $headers[] = $key;
                    break;
                }
            }
        }
        
        $this->command->info("‚úÖ –ù–∞–º–µ—Ä–µ–Ω–∏ –∑–∞–≥–ª–∞–≤–∫–∏: " . count($headers));
        $this->command->info("üìã –ó–∞–≥–ª–∞–≤–∫–∏: " . implode(', ', array_slice($headers, 0, 5)) . '...');
        
        // 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ
        $inDataSection = false;
        
        foreach ($lines as $line) {
            $line = trim($line);
            
            // –ü—Ä–æ–ø—É—Å–∫–∞–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–Ω–∏—Ç–µ —Ä–µ–¥–æ–≤–µ
            if (strpos($line, '---') === 0 || strpos($line, '===') === 0) {
                if ($inDataSection) {
                    $inDataSection = false; // –ö—Ä–∞–π –Ω–∞ —Å–µ–∫—Ü–∏—è—Ç–∞ —Å –¥–∞–Ω–Ω–∏
                } else {
                    $inDataSection = true; // –ù–∞—á–∞–ª–æ –Ω–∞ —Å–µ–∫—Ü–∏—è—Ç–∞ —Å –¥–∞–Ω–Ω–∏
                }
                continue;
            }
            
            // –ü—Ä–æ–ø—É—Å–∫–∞–π –ø—Ä–∞–∑–Ω–∏ —Ä–µ–¥–æ–≤–µ –∏–ª–∏ –∑–∞–≥–ª–∞–≤–Ω–∏ —Ä–µ–¥–æ–≤–µ
            if (empty($line) || strpos($line, '|   Number   |') !== false) {
                continue;
            }
            
            // –°–∞–º–æ —Ä–µ–¥–æ–≤–µ —Å –¥–∞–Ω–Ω–∏ (–∑–∞–ø–æ—á–≤–∞—Ç —Å '|')
            if (strpos($line, '|') === 0 && $inDataSection) {
                // –ü—Ä–µ–º–∞—Ö–Ω–∏ '|' –≤ –Ω–∞—á–∞–ª–æ—Ç–æ –∏ –∫—Ä–∞—è
                $line = trim($line, "| \t\n\r\0\x0B");
                
                // –†–∞–∑–¥–µ–ª–∏ –ø–æ '|' - –≤–∞–∂–Ω–æ: –∑–∞–ø–∞–∑–∏ –ø—Ä–∞–∑–Ω–∏—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏
                $columns = explode('|', $line);
                
                // Trim-–Ω–∏ –≤—Å—è–∫–∞ –∫–æ–ª–æ–Ω–∞
                $columns = array_map(function($col) {
                    return trim($col);
                }, $columns);
                
                // –ê–∫–æ –∏–º–∞–º–µ –ø–æ-–º–∞–ª–∫–æ –∫–æ–ª–æ–Ω–∏ –æ—Ç –∑–∞–≥–ª–∞–≤–∫–∏—Ç–µ, –¥–æ–±–∞–≤–∏ –ø—Ä–∞–∑–Ω–∏
                while (count($columns) < count($headers)) {
                    $columns[] = '';
                }
                
                // –ê–∫–æ –∏–º–∞–º–µ –ø–æ–≤–µ—á–µ –∫–æ–ª–æ–Ω–∏, —Å—ä–∫—Ä–∞—Ç–∏
                $columns = array_slice($columns, 0, count($headers));
                
                // –°—ä–∑–¥–∞–π –∞—Å–æ—Ü–∏–∞—Ç–∏–≤–µ–Ω –º–∞—Å–∏–≤
                $rowData = array_combine($headers, $columns);
                
                // –î–æ–±–∞–≤–∏ –∫—ä–º –¥–∞–Ω–Ω–∏—Ç–µ —Å–∞–º–æ –∞–∫–æ –∏–º–∞ Number
                if (!empty($rowData['Number'])) {
                    $data[] = $rowData;
                }
            }
        }
        
        return $data;
    }

    public function run(): void
    {
        $this->command->info('üöÄ –ò–ú–ü–û–†–¢ –û–¢ ACCESS (–¢–ê–ë–õ–ò–ß–ï–ù –§–û–†–ú–ê–¢)');
        $this->command->line(str_repeat('‚ïê', 70));
        
        // –ü—ä—Ç –∫—ä–º —Ñ–∞–π–ª–∞
        $filePath = base_path('old-database/Customer.txt');
        
        if (!file_exists($filePath)) {
            $this->command->error("‚ùå –§–∞–π–ª—ä—Ç –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω: $filePath");
            return;
        }
        
        // –ü—Ä–æ—á–∏—Ç–∞–Ω–µ –Ω–∞ —Ñ–∞–π–ª–∞
        $content = file_get_contents($filePath);
        $this->command->info("üìÅ –§–∞–π–ª: " . basename($filePath));
        $this->command->info("üìä –†–∞–∑–º–µ—Ä: " . round(strlen($content) / 1024, 2) . " KB");
        
        // –¢–ï–°–¢ –ù–ê –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê
        $this->testEncodingFix();
        
        // –ü–ê–†–°–í–ê–ù–ï –ù–ê –¢–ê–ë–õ–ò–ß–ù–ò–Ø –§–û–†–ú–ê–¢
        $this->command->info("\nüìã –ü–ê–†–°–í–ê–ù–ï –ù–ê –¢–ê–ë–õ–ò–ß–ï–ù –§–û–†–ú–ê–¢...");
        $tableData = $this->parseTableFormat($content);
        
        if (empty($tableData)) {
            $this->command->error('‚ùå –ù–µ –º–æ–≥–∞ –¥–∞ –∏–∑–≤–ª–µ–∫–∞ –¥–∞–Ω–Ω–∏ –æ—Ç —Ç–∞–±–ª–∏—á–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç!');
            $this->command->info('üí° –ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π –æ—Ç Access –∫–∞—Ç–æ "Text File" —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª Tab, –Ω–µ –∫–∞—Ç–æ "Formatted Text"');
            return;
        }
        
        $this->command->info("‚úÖ –ù–∞–º–µ—Ä–µ–Ω–∏ –∑–∞–ø–∏—Å–∏: " . count($tableData));
        
        $imported = 0;
        $errors = [];
        
        $this->command->info("\nüì• –ó–ê–ü–û–ß–í–ê–ú –ò–ú–ü–û–†–¢...");
        $progressBar = $this->command->getOutput()->createProgressBar(count($tableData));
        $progressBar->start();
        
        // –ò–ú–ü–û–†–¢ –ù–ê –î–ê–ù–ù–ò–¢–ï
        foreach ($tableData as $index => $rowData) {
            $progressBar->advance();
            
            try {
                $customerData = $this->prepareCustomerData($rowData);
                
                // –ü–†–û–í–ï–†–ö–ê –ó–ê –ó–ê–î–™–õ–ñ–ò–¢–ï–õ–ù–ò –ü–û–õ–ï–¢–ê
                if (empty($customerData['name'])) {
                    $errors[] = "–ó–∞–ø–∏—Å {$rowData['Number']}: –õ–∏–ø—Å–≤–∞ –∏–º–µ";
                    continue;
                }
                
                // –°–™–ó–î–ê–ô –ö–õ–ò–ï–ù–¢–ê
                Customer::create($customerData);
                $imported++;
                
            } catch (\Exception $e) {
                $errors[] = "–ó–∞–ø–∏—Å {$rowData['Number']}: " . $e->getMessage();
                Log::error('Import error', [
                    'number' => $rowData['Number'] ?? 'unknown',
                    'error' => $e->getMessage()
                ]);
            }
        }
        
        $progressBar->finish();
        
        // –†–ï–ó–£–õ–¢–ê–¢–ò
        $this->command->line("\n");
        $this->command->info('‚úÖ –ò–ú–ü–û–†–¢–™–¢ –ó–ê–í–™–†–®–ò');
        $this->command->line(str_repeat('‚ïê', 70));
        $this->command->info("üü¢ –£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏: $imported –∫–ª–∏–µ–Ω—Ç–∏");
        
        if (!empty($errors)) {
            $this->command->warn("üü° –ì—Ä–µ—à–∫–∏: " . count($errors));
            foreach (array_slice($errors, 0, 5) as $error) {
                $this->command->line("   ‚Ä¢ $error");
            }
            if (count($errors) > 5) {
                $this->command->line("   ... –∏ –æ—â–µ " . (count($errors) - 5) . " –≥—Ä–µ—à–∫–∏");
            }
        }
        
        if ($imported > 0) {
            $this->command->info("\nüéâ –ö–õ–ò–ï–ù–¢–ò–¢–ï –°–ê –ò–ú–ü–û–†–¢–ò–†–ê–ù–ò –£–°–ü–ï–®–ù–û!");
            $this->command->info("üí° –°–µ–≥–∞ –º–æ–∂–µ—à –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏—à —Å –∏–º–ø–æ—Ä—Ç–∞ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ.");
        }
    }
    
    /**
     * –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ encoding –∫–æ–Ω–≤–µ—Ä—Å–∏—è—Ç–∞
     */
    private function testEncodingFix(): void
    {
        $this->command->info('üß™ –¢–ï–°–¢ –ù–ê –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê:');
        
        $testCases = [
            '√ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®' => '–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò',
            '√ò√Ä√í√ê√é√å  √Ö√é√é√Ñ' => '–®–ê–¢–†–û–ú –ï–û–û–î',
            '√í√Ö√ê√á√à√Ñ √Ö√é√é√Ñ' => '–¢–ï–†–ó–ò–î –ï–û–û–î',
            '√Ö.√í.√Ö. √Ö√é√é√Ñ' => '–ï.–¢.–ï. –ï–û–û–î',
            '√ã√à√ç√Ñ√ç√Ö√ê √Å√ö√ã√É√Ä√ê√à√ü √Ö√é√é√Ñ' => '–õ–ò–ù–î–ù–ï–† –ë–™–õ–ì–ê–†–ò–Ø –ï–û–û–î',
            '√ë√≤√•√¥√†√≠ √å√®√≠√∑√•√¢' => '–°—Ç–µ—Ñ–∞–Ω –ú–∏–Ω—á–µ–≤',
            '√≥√´. " √Å√®√ß√≠√•√± √è√†√∞√™ √ë√Æ√¥√®√ø "' => '—É–ª. " –ë–∏–∑–Ω–µ—Å –ü–∞—Ä–∫ –°–æ—Ñ–∏—è "',
            '√Å√®√ß√≠√•√±' => '–ë–∏–∑–Ω–µ—Å',
            '√è√†√∞√™' => '–ü–∞—Ä–∫',
            '√ë√Æ√¥√®√ø' => '–°–æ—Ñ–∏—è',
        ];
        
        $passed = 0;
        $total = count($testCases);
        
        foreach ($testCases as $input => $expected) {
            $result = $this->fixAccessEncoding($input);
            $resultUpper = mb_strtoupper($result, 'UTF-8');
            $expectedUpper = mb_strtoupper($expected, 'UTF-8');
            
            $isMatch = ($resultUpper === $expectedUpper);
            
            if ($isMatch) {
                $passed++;
                $this->command->line("‚úÖ " . $this->truncate($input, 25) . 
                                   " ‚Üí " . $this->truncate($result, 25));
            } else {
                $this->command->line("‚ùå " . $this->truncate($input, 25) . 
                                   " ‚Üí " . $this->truncate($result, 25));
                $this->command->line("   –û—á–∞–∫–≤–∞–Ω–æ: " . $expected);
            }
        }
        
        $this->command->line(str_repeat('‚îÄ', 70));
        $this->command->info("üìä –†–µ–∑—É–ª—Ç–∞—Ç: $passed –æ—Ç $total —Ç–µ—Å—Ç–∞ –º–∏–Ω–∞—Ö–∞ —É—Å–ø–µ—à–Ω–æ");
    }
    
    /**
     * –ü–æ–¥–≥–æ—Ç–≤—è –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ –∫–ª–∏–µ–Ω—Ç–∞
     */
    private function prepareCustomerData(array $oldData): array
    {
        // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–π –≤—Å–∏—á–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏ –ø–æ–ª–µ—Ç–∞
        $converted = [];
        foreach ($oldData as $key => $value) {
            if (is_string($value)) {
                $converted[$key] = $this->fixAccessEncoding($value);
            } else {
                $converted[$key] = $value;
            }
        }
        
        return [
            'old_system_id'       => $converted['Number'] ?? null,
            'type'                => $this->determineType($converted),
            'name'                => trim($converted['Customer-Name'] ?? ''),
            'vat_number'          => $this->cleanVatNumber($converted['Customer-Taxno'] ?? ''),
            'bulstat'             => trim($converted['Customer-Bulstat'] ?? ''),
            'contact_person'      => trim($converted['Customer-MOL'] ?? ''),
            'phone'               => $this->cleanPhone($converted['Telno'] ?? ''),
            'fax'                 => trim($converted['Faxno'] ?? ''),
            'email'               => $this->cleanEmail($converted['E-mail'] ?? ''),
            'address'             => $this->formatAddress($converted),
            'address_line1'       => trim($converted['Customer-Address-1'] ?? ''),
            'address_line2'       => trim($converted['Customer-Address-2'] ?? ''),
            'city'                => $this->extractCity($converted),
            'notes'               => $this->formatNotes($converted),
            'court_registration'  => trim($converted['partida'] ?? ''),
            'bulstat_letter'      => trim($converted['bulstatletter'] ?? ''),
            'is_active'           => $this->parseBoolean($converted['active'] ?? ''),
            'include_in_reports'  => $this->parseBoolean($converted['include'] ?? ''),
            'created_at'          => $this->parseDate($converted['eidate'] ?? ''),
        ];
    }
    
    private function determineType(array $data): string
    {
        $isCustomer = isset($data['customer']) && strtoupper(trim($data['customer'])) === '–î–ê';
        $isSupplier = isset($data['supplier']) && strtoupper(trim($data['supplier'])) === '–î–ê';
        
        if ($isCustomer && $isSupplier) return 'both';
        if ($isSupplier) return 'supplier';
        return 'customer';
    }
    
    private function cleanVatNumber(string $vat): ?string
    {
        $vat = trim($vat);
        if (empty($vat)) return null;
        
        $vat = preg_replace('/\s+/', '', $vat);
        if (!str_starts_with(strtoupper($vat), 'BG')) {
            $vat = 'BG' . $vat;
        }
        
        return $vat;
    }
    
    private function cleanPhone(string $phone): ?string
    {
        $phone = preg_replace('/[^0-9+]/', '', trim($phone));
        return !empty($phone) ? $phone : null;
    }
    
    private function cleanEmail(string $email): ?string
    {
        $email = trim($email);
        return filter_var($email, FILTER_VALIDATE_EMAIL) ? $email : null;
    }
    
    private function formatAddress(array $data): string
    {
        $parts = [];
        if (!empty($data['Customer-Address-1'])) $parts[] = trim($data['Customer-Address-1']);
        if (!empty($data['Customer-Address-2'])) $parts[] = trim($data['Customer-Address-2']);
        return implode(', ', $parts);
    }
    
    private function extractCity(array $data): string
    {
        $address = $data['Customer-Address-1'] ?? '';
        $address = mb_strtoupper($address, 'UTF-8');
        
        if (str_contains($address, '–°–û–§–ò–Ø')) return '–°–æ—Ñ–∏—è';
        if (str_contains($address, '–ü–õ–û–í–î–ò–í')) return '–ü–ª–æ–≤–¥–∏–≤';
        if (str_contains($address, '–í–ê–†–ù–ê')) return '–í–∞—Ä–Ω–∞';
        if (str_contains($address, '–ë–£–†–ì–ê–°')) return '–ë—É—Ä–≥–∞—Å';
        if (str_contains($address, '–†–£–°–ï')) return '–†—É—Å–µ';
        
        return '–°–æ—Ñ–∏—è';
    }
    
    private function formatNotes(array $data): ?string
    {
        $notes = [];
        if (!empty($data['Receiver'])) $notes[] = '–ü–æ–ª—É—á–∞—Ç–µ–ª: ' . trim($data['Receiver']);
        if (!empty($data['Contact'])) $notes[] = '–ö–æ–Ω—Ç–∞–∫—Ç: ' . trim($data['Contact']);
        return !empty($notes) ? implode("\n", $notes) : null;
    }
    
    private function parseBoolean(string $value): bool
    {
        $value = strtoupper(trim($value));
        return $value === '–î–ê';
    }
    
    private function parseDate(string $date): ?string
    {
        if (preg_match('/(\d{1,2})\.(\d{1,2})\.(\d{4})/', $date, $matches)) {
            $day = (int)$matches[1];
            $month = (int)$matches[2];
            $year = (int)$matches[3];
            
            return sprintf('%04d-%02d-%02d', $year, $month, $day);
        }
        return now()->toDateTimeString();
    }
    
    private function truncate(string $text, int $length): string
    {
        if (mb_strlen($text, 'UTF-8') <= $length) return $text;
        return mb_substr($text, 0, $length - 3, 'UTF-8') . '...';
    }
}
üéØ –í–ê–ñ–ù–û –ü–†–ï–î–ò –î–ê –ü–£–°–ù–ï–®:
–ù–ï –ø—É—Å–Ω–∏ php artisan migrate:fresh --seed –æ—Ç–Ω–æ–≤–æ! –¢–æ–≤–∞ —â–µ –∏–∑—Ç—Ä–∏–µ –≤—Å–∏—á–∫–æ –∏ —â–µ –æ–ø–∏—Ç–∞ –¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞ –ø—Ä–µ–≤–æ–∑–Ω–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø—Ä–µ–¥–∏ –∫–ª–∏–µ–Ω—Ç–∏, –∫–æ–µ—Ç–æ —â–µ –¥–æ–≤–µ–¥–µ –¥–æ –≥—Ä–µ—à–∫–∞.

–í–º–µ—Å—Ç–æ —Ç–æ–≤–∞:

–ó–∞–ø–∞–∑–∏ –≥–æ—Ä–Ω–∏—è –∫–æ–¥ –∫–∞—Ç–æ CustomerImportSeeder.php

–ü—É—Å–Ω–∏ –°–ê–ú–û —Ç–æ–∑–∏ —Å–µ–µ–¥—ä—Ä:

bash
php artisan db:seed --class=CustomerImportSeeder
–ê–∫–æ –∏–º–ø–æ—Ä—Ç—ä—Ç —É—Å–ø–µ–µ, —Ç–æ–≥–∞–≤–∞ –ø—É—Å–Ω–∏ –æ—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ —Å–µ–µ–¥—ä—Ä–∏:

bash
php artisan db:seed
üí° –ü–†–ï–ü–û–†–™–ö–ê: –ï–∫—Å–ø–æ—Ä—Ç –≤ –ü–†–ê–í–ò–õ–ï–ù –§–û–†–ú–ê–¢
–ü–æ-–¥–æ–±—Ä–µ –µ –¥–∞ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞—à –æ—Ç Access –≤ –ø—Ä–∞–≤–∏–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç:

–í Access: External Data ‚Üí Text File

–ò–∑–±–µ—Ä–∏: Delimited

–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª: Tab

–ö–æ–¥–∏—Ä–∞–Ω–µ: Windows (Default)

–¢–æ–≤–∞ —â–µ —Å—ä–∑–¥–∞–¥–µ —á–∏—Å—Ç .txt —Ñ–∞–π–ª –±–µ–∑ —Ç–∞–±–ª–∏—á–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ, –∫–æ–π—Ç–æ –µ –º–Ω–æ–≥–æ –ø–æ-–ª–µ—Å–µ–Ω –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞.

–ò–¥–µ–∞–ª–Ω–æ! –°–µ–≥–∞ –≤—Å–∏—á–∫–æ –µ –Ω–∞—Ä–µ–¥. –°–∏–∏–¥–∞ –º–∏–Ω–∞ –ø–µ—Ä—Ñ–µ–∫—Ç–Ω–æ –∏ –µ–Ω–∫–æ–¥–∏–Ω–∫–∞ –µ –∫–∞–∫—Ç–æ —Ç—Ä—è–±–≤–∞. –ò–º–∞–º –æ–±–∞—á–µ —Å–ª–µ–¥–Ω–∏—è –≤—ä–ø—Ä–æ—Å. –ú–æ–∂–µ—à –ª–∏ —Ç–∞–∫–∞ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏—à —Å–∏–∏–¥–∞ —á–µ –∫–æ–≥–∞—Ç–æ —Å—Ä–µ—â–Ω–µ –æ—Ç–¥–µ–ª–Ω–∏ –¥—É–º–∏ –∫–∞—Ç–æ –ï–û–û–î, –û–û–î, –ï–¢ –≤ –∫–æ–ª–æ–Ω–∞—Ç–∞ Customer-Name –≤—ä–≤ —Ñ–∞–π–ª–∞ Customer.txt —Ç–æ —Ç–æ–≥–∞–≤–∞ –≤ –∫–æ–ª–æ–Ω–∞—Ç–∞ type –≤ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ –¥–∞ —Å–µ –∑–∞–ø–∏—à–µ company.
‚úÖ –î–ê, –∞–±—Å–æ–ª—é—Ç–Ω–æ! –©–µ –¥–æ–±–∞–≤–∏–º –∏–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤ Seeder-–∞, –∫–æ—è—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è —Ç–∏–ø–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞ —Å–ø–æ—Ä–µ–¥ –∏–º–µ—Ç–æ.

–ï—Ç–æ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω–∏—è CustomerImportSeeder.php —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ —Ç–∏–ø–∞:

php
<?php

namespace Database\Seeders;

use App\Models\Customer;
use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\Log;

class CustomerImportSeeder extends Seeder
{
    /**
     * –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è —Ç–∏–ø–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞ —Å–ø–æ—Ä–µ–¥ –∏–º–µ—Ç–æ
     * –ü—Ä–∞–≤–∏–ª–∞:
     * - –ê–∫–æ –∏–º–∞ "–ï–û–û–î", "–û–û–î", "–ê–î", "ET", "EAD" ‚Üí company
     * - –ê–∫–æ –∏–º–∞ "–ï–¢" (–ï–¥–∏–Ω–Ω–æ–ª–∏—á–µ–Ω —Ç—ä—Ä–≥–æ–≤–µ—Ü) ‚Üí company  
     * - –ê–∫–æ –∏–º–µ—Ç–æ –µ —Å–∞–º–æ —Å –≥–æ–ª–µ–º–∏ –±—É–∫–≤–∏ –∏ –Ω—è–º–∞ —Ñ–∏—Ä–º–µ–Ω–∏ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è ‚Üí company
     * - –ê–∫–æ –∏–º–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–æ –∏–º–µ (–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤) ‚Üí individual
     */
    private function determineCustomerType(string $name): string
    {
        $name = trim($name);
        
        // –°–ü–ò–°–™–ö –° –§–ò–†–ú–ï–ù–ò –û–ë–û–ó–ù–ê–ß–ï–ù–ò–Ø
        $companyKeywords = [
            // –ë—ä–ª–≥–∞—Ä—Å–∫–∏ —Ñ–∏—Ä–º–µ–Ω–∏ —Ñ–æ—Ä–º–∏
            '–ï–û–û–î', '–û–û–î', '–ê–î', '–ï–¢', '–ï–ê–î', '–°–î', '–ö–î–ê', '–ö–î',
            '–ïT', 'OOD', 'AD', 'ET', 'EAD', 'SD', 'KDA', 'KD',
            
            // –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∏ —Ñ–∏—Ä–º–µ–Ω–∏ —Ñ–æ—Ä–º–∏ (–≤ –∫–∏—Ä–∏–ª–∏—Ü–∞)
            '–õ–¢–î', '–ò–ù–ö', '–ö–û–†–ü', '–ì–ú–ë–•', '–ê–ì',
            'LTD', 'INC', 'CORP', 'GMBH', 'AG',
            
            // –î—Ä—É–≥–∏ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –∑–∞ —Ñ–∏—Ä–º–∏
            '–ö–û–ú–ü–ê–ù–ò–Ø', '–ö–û–ú–ü–ê–ù–ò', '–§–ò–†–ú–ê', '–ü–†–ï–î–ü–†–ò–Ø–¢–ò–ï',
            '–ê–°–û–¶–ò–ê–¶–ò–Ø', '–°–î–†–£–ñ–ï–ù–ò–ï', '–§–û–ù–î–ê–¶–ò–Ø', '–¶–ï–ù–¢–™–†',
            '–ò–ù–î–£–°–¢–†–ò', '–ò–ù–î–£–°–¢–†–ò–Ø', '–¢–™–†–ì–û–í–ò–Ø', '–¢–™–†–ì–û–í–°–ö–û',
            '–ü–†–û–ò–ó–í–û–î–°–¢–í–û', '–°–ï–†–í–ò–ó', '–ê–í–¢–û–°–ï–†–í–ò–ó', '–°–¢–†–û–ò–¢–ï–õ',
            '–ò–ù–ñ–ï–ù–ï–†–ò–ù–ì', '–ö–û–ù–°–£–õ–¢–ê–ù–¢', '–ö–û–ù–°–£–õ–¢–ò–ù–ì',
        ];
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ —Ñ–∏—Ä–º–µ–Ω–∏ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –≤ –∏–º–µ—Ç–æ
        $upperName = mb_strtoupper($name, 'UTF-8');
        
        foreach ($companyKeywords as $keyword) {
            if (str_contains($upperName, $keyword)) {
                return 'company';
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –ò–ù (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–µ–Ω –Ω–æ–º–µ—Ä) –≤ –∏–º–µ—Ç–æ
        if (preg_match('/\b–ò–ù\s*\d{9,13}\b/ui', $name) ||
            preg_match('/\bEIK\s*\d{9,13}\b/ui', $name)) {
            return 'company';
        }
        
        // –ü—Ä–∞–≤–∏–ª–∞ –∑–∞ –æ–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–µ–Ω –∫–ª–∏–µ–Ω—Ç
        // –ê–∫–æ –∏–º–µ—Ç–æ –∏–∑–≥–ª–µ–∂–¥–∞ –∫–∞—Ç–æ –ø—ä–ª–Ω–æ –∏–º–µ –Ω–∞ —á–æ–≤–µ–∫ (2-3 –¥—É–º–∏, –ø—ä—Ä–≤–∞—Ç–∞ –¥—É–º–∞ –∑–∞–ø–æ—á–≤–∞ —Å –≥–ª–∞–≤–Ω–∞ –±—É–∫–≤–∞)
        $words = preg_split('/\s+/', $name);
        $wordCount = count($words);
        
        if ($wordCount >= 2 && $wordCount <= 4) {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ –ø—ä—Ä–≤–∞—Ç–∞ –¥—É–º–∞ –∏–∑–≥–ª–µ–∂–¥–∞ –∫–∞—Ç–æ —Å–æ–±—Å—Ç–≤–µ–Ω–æ –∏–º–µ
            $firstName = $words[0];
            
            // –ß–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–∏ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –∏–º–µ–Ω–∞
            $commonFirstNames = [
                '–ò–≤–∞–Ω', '–ì–µ–æ—Ä–≥–∏', '–î–∏–º–∏—Ç—ä—Ä', '–ü–µ—Ç—ä—Ä', '–ù–∏–∫–æ–ª–∞–π', '–°—Ç–æ—è–Ω',
                '–í–∞—Å–∏–ª', '–ö—Ä—ä—Å—Ç—å–æ', '–ê—Ç–∞–Ω–∞—Å', '–°—Ç–µ—Ñ–∞–Ω', '–ë–æ—è–Ω', '–ö–∞–ª–∏–Ω',
                '–ú–∞—Ä–∏—è', '–ò–≤–∞–Ω–∞', '–ï–ª–µ–Ω–∞', '–ì–µ—Ä–≥–∞–Ω–∞', '–î–∏–∞–Ω–∞', '–°–∏–ª–≤–∏—è',
                '–ü–µ—Ç—è', '–í–µ—Å–µ–ª–∞', '–†–∞–¥–∫–∞', '–¶–≤–µ—Ç–∞–Ω–∞', '–õ–∏–ª–∏—è', '–†—É–º—è–Ω–∞',
            ];
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ –ø—ä—Ä–≤–∞—Ç–∞ –¥—É–º–∞ –µ –æ–±–∏–∫–Ω–æ–≤–µ–Ω–æ –∏–º–µ
            foreach ($commonFirstNames as $commonName) {
                if (mb_strtoupper($firstName, 'UTF-8') === mb_strtoupper($commonName, 'UTF-8')) {
                    return 'individual';
                }
            }
            
            // –ê–∫–æ –ø—ä—Ä–≤–∞—Ç–∞ –¥—É–º–∞ –∑–∞–≤—ä—Ä—à–≤–∞ –Ω–∞ "–æ–≤", "–µ–≤", "–∏–Ω", "—Å–∫–∞", "–æ–≤–∞" ‚Üí –≤–µ—Ä–æ—è—Ç–Ω–æ –µ —Ñ–∞–º–∏–ª–∏—è
            if (preg_match('/(–æ–≤|–µ–≤|–∏–Ω|—Å–∫–∞|–æ–≤–∞)$/ui', $firstName)) {
                return 'individual';
            }
        }
        
        // –ê–∫–æ –∏–º–µ—Ç–æ –µ —Å–∞–º–æ —Å –≥–æ–ª–µ–º–∏ –±—É–∫–≤–∏ –∏ –Ω–µ –µ –æ—á–µ–≤–∏–¥–Ω–æ –ª–∏—Ü–µ ‚Üí company
        if ($name === mb_strtoupper($name, 'UTF-8') && 
            !preg_match('/\b(–≥-–Ω|–≥-–∂–∞|–≥–æ—Å–ø–æ–¥–∏–Ω|–≥–æ—Å–ø–æ–∂–∞|–¥-—Ä|–∏–Ω–∂\.|–∞—Ä—Ö\.)\b/ui', $name)) {
            return 'company';
        }
        
        // –ê–∫–æ –∏–º–∞ —Ç–∏—Ç–ª–∞ (–≥-–Ω, –≥-–∂–∞, –¥-—Ä) ‚Üí individual
        if (preg_match('/\b(–≥-–Ω|–≥-–∂–∞|–≥–æ—Å–ø–æ–¥–∏–Ω|–≥–æ—Å–ø–æ–∂–∞|–¥-—Ä|–∏–Ω–∂\.|–∞—Ä—Ö\.)\b/ui', $name)) {
            return 'individual';
        }
        
        // –ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ –≤—Ä—ä—â–∞–º–µ company (–ø–æ-—á–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–æ –≤ –±–∏–∑–Ω–µ—Å —Å–∏—Å—Ç–µ–º–∏)
        return 'company';
    }
    
    /**
     * –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ Access Mojibake —Ç–µ–∫—Å—Ç –∫—ä–º –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
     */
    private function fixAccessEncoding(string $text): string
    {
        $text = trim($text);
        if (empty($text)) return $text;
        
        if (preg_match('/[–ê-–Ø–∞-—è–Å—ë]/u', $text)) {
            return $text;
        }
        
        $accessFixMap = [
            '√ä' => '–ö', '√†' => '–∞', '√´' => '–ª', '√Æ' => '–æ', '√ø' => '—è',
            '√°' => '–Ω', '√è' => '–ü', '√•' => '–µ', '√∑' => '—á', '√≠' => '–∏',
            '√∞' => '—Ä', '√±' => '—Å', '√®' => '–∏', '√ò' => '–®', '√Ä' => '–ê',
            '√í' => '–¢', '√ê' => '–†', '√é' => '–û', '√å' => '–ú', '√Ö' => '–ï',
            '√ï' => '–•', '√î' => '–§', '√ñ' => '–¶', '√ó' => '–ß', '√ô' => '–©',
            '√ö' => '–™', '√ú' => '–¨', '√ù' => '–≠', '√û' => '–Æ', '√ü' => '–Ø',
            '√á' => '–ó', '√à' => '–ò', '√â' => '–ô', '√ã' => '–õ', '√ç' => '–ù',
            '√ë' => '–°', '√ì' => '–£', '√Ç' => '–í', '√É' => '–ì', '√Ñ' => '–î',
            '√Ü' => '–ñ', '√Å' => '–ë', '√∫' => '—ä', '√ª' => '—ã', '√º' => '—å',
            '√Ω' => '—ç', '√æ' => '—é', '√≥' => '—É', '√≤' => '—Ç', '√µ' => '—Ö',
            '√¥' => '—Ñ', '√∂' => '—Ü', '√¶' => '–∂', '√ß' => '–∑', '√©' => '–π',
            '√™' => '–∫', '√¨' => '–º', '√Ø' => '–ø', '√¢' => '–≤', '√£' => '–≥',
            '√§' => '–¥', '√•' => '–µ', '√°' => '–±', '√≤' => '—Ç', '√µ' => '—Ö',
            '√®' => '–∏', '√±' => '—Å', '√©' => '–Ω', '√¢' => '–≤',
        ];
        
        $fixed = strtr($text, $accessFixMap);
        
        $fixed = preg_replace('/–ö–∞–ª–æ—è–∏/u', '–ö–∞–ª–æ–Ø–Ω', $fixed);
        $fixed = preg_replace('/–ü–µ—á–µ–∏—è—Ä—Å–∫–∏/u', '–ü–µ—á–µ–Ω—è—Ä—Å–∫–∏', $fixed);
        $fixed = preg_replace('/–°—Ç–µ—Ñ–∞–∏/u', '–°—Ç–µ—Ñ–∞–Ω', $fixed);
        $fixed = preg_replace('/–ú–∏–∏—á–µ–≤/u', '–ú–∏–Ω—á–µ–≤', $fixed);
        $fixed = preg_replace('/–ë–∏–∑–∏–µ—Å/u', '–ë–∏–∑–Ω–µ—Å', $fixed);
        $fixed = preg_replace('/–®–ê–¢–†–û–ú  –ï–û–û–î/u', '–®–ê–¢–†–û–ú –ï–û–û–î', $fixed);
        
        return $fixed;
    }
    
    /**
     * –ü–∞—Ä—Å–≤–∞ —Ç–∞–±–ª–∏—á–µ–Ω —Ç–µ–∫—Å—Ç —Ñ–æ—Ä–º–∞—Ç
     */
    private function parseTableFormat(string $content): array
    {
        $lines = explode("\n", $content);
        $data = [];
        
        $headerLine = null;
        $headers = [];
        
        foreach ($lines as $line) {
            if (strpos($line, '|   Number   |') !== false || 
                strpos($line, '| Number |') !== false) {
                $headerLine = $line;
                break;
            }
        }
        
        if (!$headerLine) return [];
        
        $headerLine = trim($headerLine, "| \t\n\r\0\x0B");
        $rawHeaders = array_map('trim', explode('|', $headerLine));
        
        $headerMapping = [
            'Number' => 'Number', 'Customer-Name' => 'Customer-Name',
            'Customer-Address-1' => 'Customer-Address-1',
            'Customer-Address-2' => 'Customer-Address-2',
            'Customer-MOL' => 'Customer-MOL', 'Customer-Taxno' => 'Customer-Taxno',
            'Customer-DocType' => 'Customer-DocType', 'Receiver' => 'Receiver',
            'Receiver Details' => 'Receiver Details', 'Customer-Bulstat' => 'Customer-Bulstat',
            'Telno' => 'Telno', 'Faxno' => 'Faxno', 'E-mail' => 'E-mail',
            'ResAddress1' => 'ResAddress1', 'ResAddress2' => 'ResAddress2',
            'eidate' => 'eidate', 'include' => 'include', 'active' => 'active',
            'customer' => 'customer', 'supplier' => 'supplier', 'Contact' => 'Contact',
            'partida' => 'partida', 'bulstatletter' => 'bulstatletter',
        ];
        
        $headers = [];
        foreach ($rawHeaders as $rawHeader) {
            $normalized = trim(preg_replace('/\s+/', ' ', $rawHeader));
            foreach ($headerMapping as $key => $value) {
                if (stripos($normalized, $key) !== false) {
                    $headers[] = $key;
                    break;
                }
            }
        }
        
        $inDataSection = false;
        
        foreach ($lines as $line) {
            $line = trim($line);
            
            if (strpos($line, '---') === 0 || strpos($line, '===') === 0) {
                $inDataSection = !$inDataSection;
                continue;
            }
            
            if (empty($line) || strpos($line, '|   Number   |') !== false) {
                continue;
            }
            
            if (strpos($line, '|') === 0 && $inDataSection) {
                $line = trim($line, "| \t\n\r\0\x0B");
                $columns = explode('|', $line);
                $columns = array_map('trim', $columns);
                
                while (count($columns) < count($headers)) {
                    $columns[] = '';
                }
                
                $columns = array_slice($columns, 0, count($headers));
                
                if (count($columns) === count($headers)) {
                    $rowData = array_combine($headers, $columns);
                    
                    if (!empty($rowData['Number'])) {
                        // –ê–í–¢–û–ú–ê–¢–ò–ß–ù–û –û–ü–†–ï–î–ï–õ–Ø–ù–ï –ù–ê –¢–ò–ü–ê
                        $customerName = $rowData['Customer-Name'] ?? '';
                        $rowData['_auto_type'] = $this->determineCustomerType($customerName);
                        
                        $data[] = $rowData;
                    }
                }
            }
        }
        
        return $data;
    }

    public function run(): void
    {
        $this->command->info('üöÄ –ò–ú–ü–û–†–¢ –û–¢ ACCESS –° –ê–í–¢–û–ú–ê–¢–ò–ß–ù–û –û–ü–†–ï–î–ï–õ–Ø–ù–ï –ù–ê –¢–ò–ü–ê');
        $this->command->line(str_repeat('‚ïê', 70));
        
        $filePath = base_path('old-database/Customer.txt');
        
        if (!file_exists($filePath)) {
            $this->command->error("‚ùå –§–∞–π–ª—ä—Ç –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω: $filePath");
            return;
        }
        
        $content = file_get_contents($filePath);
        $this->command->info("üìÅ –§–∞–π–ª: " . basename($filePath));
        
        // –¢–ï–°–¢ –ù–ê –û–ü–†–ï–î–ï–õ–Ø–ù–ï–¢–û –ù–ê –¢–ò–ü–ê
        $this->testTypeDetermination();
        
        $this->command->info("\nüìã –ü–ê–†–°–í–ê–ù–ï –ù–ê –î–ê–ù–ù–ò–¢–ï...");
        $tableData = $this->parseTableFormat($content);
        
        if (empty($tableData)) {
            $this->command->error('‚ùå –ù–µ –º–æ–≥–∞ –¥–∞ –∏–∑–≤–ª–µ–∫–∞ –¥–∞–Ω–Ω–∏!');
            return;
        }
        
        $this->command->info("‚úÖ –ù–∞–º–µ—Ä–µ–Ω–∏ –∑–∞–ø–∏—Å–∏: " . count($tableData));
        
        // –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ó–ê –¢–ò–ü–û–í–ï–¢–ï
        $typeStats = ['company' => 0, 'individual' => 0];
        foreach ($tableData as $row) {
            $type = $row['_auto_type'] ?? 'company';
            $typeStats[$type]++;
        }
        
        $this->command->info("üìä –û—á–∞–∫–≤–∞–Ω–æ —Ä–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Ç–∏–ø–æ–≤–µ—Ç–µ:");
        $this->command->info("   ‚Ä¢ –§–∏—Ä–º–∏ (company): {$typeStats['company']}");
        $this->command->info("   ‚Ä¢ –ß–∞—Å—Ç–Ω–∏ –ª–∏—Ü–∞ (individual): {$typeStats['individual']}");
        
        $imported = 0;
        $errors = [];
        
        $this->command->info("\nüì• –ó–ê–ü–û–ß–í–ê–ú –ò–ú–ü–û–†–¢...");
        $progressBar = $this->command->getOutput()->createProgressBar(count($tableData));
        $progressBar->start();
        
        foreach ($tableData as $rowData) {
            $progressBar->advance();
            
            try {
                $customerData = $this->prepareCustomerData($rowData);
                
                if (empty($customerData['name'])) {
                    $errors[] = "–ó–∞–ø–∏—Å {$rowData['Number']}: –õ–∏–ø—Å–≤–∞ –∏–º–µ";
                    continue;
                }
                
                Customer::create($customerData);
                $imported++;
                
            } catch (\Exception $e) {
                $errors[] = "–ó–∞–ø–∏—Å {$rowData['Number']}: " . $e->getMessage();
                Log::error('Import error', [
                    'number' => $rowData['Number'] ?? 'unknown',
                    'error' => $e->getMessage()
                ]);
            }
        }
        
        $progressBar->finish();
        
        $this->command->line("\n");
        $this->command->info('‚úÖ –ò–ú–ü–û–†–¢–™–¢ –ó–ê–í–™–†–®–ò');
        $this->command->line(str_repeat('‚ïê', 70));
        $this->command->info("üü¢ –£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏: $imported –∫–ª–∏–µ–Ω—Ç–∏");
        
        if (!empty($errors)) {
            $this->command->warn("üü° –ì—Ä–µ—à–∫–∏: " . count($errors));
        }
        
        // –§–ò–ù–ê–õ–ù–ê –°–¢–ê–¢–ò–°–¢–ò–ö–ê –û–¢ –ë–ê–ó–ê–¢–ê
        $finalStats = Customer::selectRaw('type, COUNT(*) as count')
            ->groupBy('type')
            ->pluck('count', 'type')
            ->toArray();
        
        $this->command->info("\nüìä –§–ò–ù–ê–õ–ù–ê –°–¢–ê–¢–ò–°–¢–ò–ö–ê –û–¢ –ë–ê–ó–ê–¢–ê –î–ê–ù–ù–ò:");
        $this->command->info("   ‚Ä¢ –§–∏—Ä–º–∏ (company): " . ($finalStats['company'] ?? 0));
        $this->command->info("   ‚Ä¢ –ß–∞—Å—Ç–Ω–∏ –ª–∏—Ü–∞ (individual): " . ($finalStats['individual'] ?? 0));
        
        $this->command->info("\nüéâ –ê–í–¢–û–ú–ê–¢–ò–ß–ù–û–¢–û –û–ü–†–ï–î–ï–õ–Ø–ù–ï –ù–ê –¢–ò–ü–û–í–ï–¢–ï –ï –ó–ê–í–™–†–®–ï–ù–û!");
    }
    
    /**
     * –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—è–Ω–µ—Ç–æ –Ω–∞ —Ç–∏–ø–∞
     */
    private function testTypeDetermination(): void
    {
        $this->command->info('üß™ –¢–ï–°–¢ –ù–ê –û–ü–†–ï–î–ï–õ–Ø–ù–ï–¢–û –ù–ê –¢–ò–ü–ê:');
        
        $testCases = [
            // –§–ò–†–ú–ò
            '–®–ê–¢–†–û–ú –ï–û–û–î' => 'company',
            '–¢–ï–†–ó–ò–î –ï–û–û–î' => 'company',
            '–ï.–¢.–ï. –ï–û–û–î' => 'company',
            '–õ–ò–ù–î–ù–ï–† –ë–™–õ–ì–ê–†–ò–Ø –ï–û–û–î' => 'company',
            '–ñ–ê–† –ï–û–û–î' => 'company',
            '–ö–í–Ø–¢ –û–û–î' => 'company',
            '–ê–í–¢–û–°–¢–™–ö–õ–ê –û–û–î' => 'company',
            '–ò–í–ê–ù –ò–í–ê–ù–û–í –ï–¢' => 'company',
            '–ì–ï–û–†–ì–ò –ì–ï–û–†–ì–ò–ï–í –ê–î' => 'company',
            '–¢–ï–•–ù–û–ò–ù–î–£–°–¢–†–ò–Ø –õ–¢–î' => 'company',
            '–°–û–§–¢–£–ï–†–ù–ê –ö–û–ú–ü–ê–ù–ò–Ø –ò–ù–ö' => 'company',
            
            // –ß–ê–°–¢–ù–ò –õ–ò–¶–ê
            '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤' => 'individual',
            '–ì–µ–æ—Ä–≥–∏ –ü–µ—Ç—Ä–æ–≤' => 'individual',
            '–ú–∞—Ä–∏—è –°—Ç–æ—è–Ω–æ–≤–∞' => 'individual',
            '–≥-–Ω –î–∏–º–∏—Ç—ä—Ä –î–∏–º–∏—Ç—Ä–æ–≤' => 'individual',
            '–≥-–∂–∞ –ï–ª–µ–Ω–∞ –ì–µ–æ—Ä–≥–∏–µ–≤–∞' => 'individual',
            '–¥-—Ä –°—Ç–æ—è–Ω –°—Ç–æ—è–Ω–æ–≤' => 'individual',
            '–∏–Ω–∂. –ü–µ—Ç—ä—Ä –ü–µ—Ç—Ä–æ–≤' => 'individual',
            
            // –°–ü–û–†–ù–ò –°–õ–£–ß–ê–ò
            '–ò–í–ê–ù–û–í' => 'company', // –°–∞–º–æ —Å –≥–æ–ª–µ–º–∏ –±—É–∫–≤–∏
            '–ü–ï–¢–ö–û–í –ò –ö–û' => 'company', // "–ò –ö–û" –µ —Ñ–∏—Ä–º–∞
            '–°–ï–†–í–ò–ó –¶–í–ï–¢–ê–ù' => 'company', // –ó–∞–ø–æ—á–≤–∞ —Å—ä—Å —Å–µ—Ä–≤–∏–∑
            '–¶–í–ï–¢–ê–ù –°–ï–†–í–ò–ó' => 'individual', // –ó–∞–ø–æ—á–≤–∞ —Å –∏–º–µ
        ];
        
        $passed = 0;
        $total = count($testCases);
        
        $this->command->line("üìã –¢–µ—Å—Ç–æ–≤–∏ —Å–ª—É—á–∞–∏ ($total –æ–±—â–æ):");
        
        foreach ($testCases as $input => $expected) {
            $result = $this->determineCustomerType($input);
            $isMatch = ($result === $expected);
            
            if ($isMatch) {
                $passed++;
                $this->command->line("‚úÖ " . $this->truncate($input, 25) . 
                                   " ‚Üí " . $result);
            } else {
                $this->command->line("‚ùå " . $this->truncate($input, 25) . 
                                   " ‚Üí " . $result . " (–æ—á–∞–∫–≤–∞–Ω–æ: $expected)");
            }
        }
        
        $this->command->line(str_repeat('‚îÄ', 70));
        $percentage = round(($passed / $total) * 100, 1);
        $this->command->info("üìä –†–µ–∑—É–ª—Ç–∞—Ç: $passed –æ—Ç $total —Ç–µ—Å—Ç–∞ –º–∏–Ω–∞—Ö–∞ —É—Å–ø–µ—à–Ω–æ ($percentage%)");
        
        if ($passed < $total * 0.8) {
            $this->command->warn("‚ö†Ô∏è  –ò–º–∞ –∑–Ω–∞—á–∏—Ç–µ–ª–Ω–∏ —Ä–∞–∑–º–∏–Ω–∞–≤–∞–Ω–∏—è –≤ –æ–ø—Ä–µ–¥–µ–ª—è–Ω–µ—Ç–æ –Ω–∞ —Ç–∏–ø–∞!");
            $this->command->info("üí° –ú–æ–∂–µ—à –¥–∞ –∫–æ—Ä–∏–≥–∏—Ä–∞—à –ø—Ä–∞–≤–∏–ª–∞—Ç–∞ –≤ –º–µ—Ç–æ–¥–∞ determineCustomerType()");
        }
    }
    
    /**
     * –ü–æ–¥–≥–æ—Ç–≤—è –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ –∫–ª–∏–µ–Ω—Ç–∞
     */
    private function prepareCustomerData(array $oldData): array
    {
        $converted = [];
        foreach ($oldData as $key => $value) {
            if (is_string($value)) {
                $converted[$key] = $this->fixAccessEncoding($value);
            } else {
                $converted[$key] = $value;
            }
        }
        
        return [
            'old_system_id'       => $converted['Number'] ?? null,
            'type'                => $converted['_auto_type'] ?? 'company', // –ò–∑–ø–æ–ª–∑–≤–∞–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø
            'name'                => trim($converted['Customer-Name'] ?? ''),
            'vat_number'          => $this->cleanVatNumber($converted['Customer-Taxno'] ?? ''),
            'bulstat'             => trim($converted['Customer-Bulstat'] ?? ''),
            'contact_person'      => trim($converted['Customer-MOL'] ?? ''),
            'phone'               => $this->cleanPhone($converted['Telno'] ?? ''),
            'fax'                 => trim($converted['Faxno'] ?? ''),
            'email'               => $this->cleanEmail($converted['E-mail'] ?? ''),
            'address'             => $this->formatAddress($converted),
            'address_line1'       => trim($converted['Customer-Address-1'] ?? ''),
            'address_line2'       => trim($converted['Customer-Address-2'] ?? ''),
            'city'                => $this->extractCity($converted),
            'notes'               => $this->formatNotes($converted),
            'court_registration'  => trim($converted['partida'] ?? ''),
            'bulstat_letter'      => trim($converted['bulstatletter'] ?? ''),
            'is_active'           => $this->parseBoolean($converted['active'] ?? ''),
            'include_in_reports'  => $this->parseBoolean($converted['include'] ?? ''),
            'created_at'          => $this->parseDate($converted['eidate'] ?? ''),
        ];
    }
    
    // –û—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ –ø–æ–º–æ—â–Ω–∏ –º–µ—Ç–æ–¥–∏ –æ—Å—Ç–∞–≤–∞—Ç —Å—ä—â–∏—Ç–µ...
    private function cleanVatNumber(string $vat): ?string
    {
        $vat = trim($vat);
        if (empty($vat)) return null;
        
        $vat = preg_replace('/\s+/', '', $vat);
        if (!str_starts_with(strtoupper($vat), 'BG')) {
            $vat = 'BG' . $vat;
        }
        
        return $vat;
    }
    
    private function cleanPhone(string $phone): ?string
    {
        $phone = preg_replace('/[^0-9+]/', '', trim($phone));
        return !empty($phone) ? $phone : null;
    }
    
    private function cleanEmail(string $email): ?string
    {
        $email = trim($email);
        return filter_var($email, FILTER_VALIDATE_EMAIL) ? $email : null;
    }
    
    private function formatAddress(array $data): string
    {
        $parts = [];
        if (!empty($data['Customer-Address-1'])) $parts[] = trim($data['Customer-Address-1']);
        if (!empty($data['Customer-Address-2'])) $parts[] = trim($data['Customer-Address-2']);
        return implode(', ', $parts);
    }
    
    private function extractCity(array $data): string
    {
        $address = $data['Customer-Address-1'] ?? '';
        $address = mb_strtoupper($address, 'UTF-8');
        
        if (str_contains($address, '–°–û–§–ò–Ø')) return '–°–æ—Ñ–∏—è';
        if (str_contains($address, '–ü–õ–û–í–î–ò–í')) return '–ü–ª–æ–≤–¥–∏–≤';
        if (str_contains($address, '–í–ê–†–ù–ê')) return '–í–∞—Ä–Ω–∞';
        if (str_contains($address, '–ë–£–†–ì–ê–°')) return '–ë—É—Ä–≥–∞—Å';
        
        return '–°–æ—Ñ–∏—è';
    }
    
    private function formatNotes(array $data): ?string
    {
        $notes = [];
        if (!empty($data['Receiver'])) $notes[] = '–ü–æ–ª—É—á–∞—Ç–µ–ª: ' . trim($data['Receiver']);
        if (!empty($data['Contact'])) $notes[] = '–ö–æ–Ω—Ç–∞–∫—Ç: ' . trim($data['Contact']);
        return !empty($notes) ? implode("\n", $notes) : null;
    }
    
    private function parseBoolean(string $value): bool
    {
        $value = strtoupper(trim($value));
        return $value === '–î–ê';
    }
    
    private function parseDate(string $date): ?string
    {
        if (preg_match('/(\d{1,2})\.(\d{1,2})\.(\d{4})/', $date, $matches)) {
            return sprintf('%04d-%02d-%02d', $matches[3], $matches[2], $matches[1]);
        }
        return now()->toDateTimeString();
    }
    
    private function truncate(string $text, int $length): string
    {
        if (mb_strlen($text, 'UTF-8') <= $length) return $text;
        return mb_substr($text, 0, $length - 3, 'UTF-8') . '...';
    }
}
üéØ –ö–ê–ö –†–ê–ë–û–¢–ò –ê–í–¢–û–ú–ê–¢–ò–ß–ù–û–¢–û –û–ü–†–ï–î–ï–õ–Ø–ù–ï:
–ü—Ä–∞–≤–∏–ª–∞ –∑–∞ –§–ò–†–ú–ò (company):
–§–∏—Ä–º–µ–Ω–∏ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è: –ï–û–û–î, –û–û–î, –ê–î, –ï–¢, –ï–ê–î, –°–î, –õ–¢–î, –ò–ù–ö

–ö–ª—é—á–æ–≤–∏ –¥—É–º–∏: –ö–û–ú–ü–ê–ù–ò–Ø, –§–ò–†–ú–ê, –ü–†–ï–î–ü–†–ò–Ø–¢–ò–ï, –°–î–†–£–ñ–ï–ù–ò–ï, –ê–°–û–¶–ò–ê–¶–ò–Ø

–ò–ù –≤ –∏–º–µ—Ç–æ: –ê–∫–æ –∏–º–∞ –ò–ù 123456789 –∏–ª–∏ EIK 123456789

–°–∞–º–æ –≥–æ–ª–µ–º–∏ –±—É–∫–≤–∏: –ò–í–ê–ù–û–í ‚Üí company

–ü—Ä–∞–≤–∏–ª–∞ –∑–∞ –ß–ê–°–¢–ù–ò –õ–ò–¶–ê (individual):
–ß–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–∏ –∏–º–µ–Ω–∞: –ò–≤–∞–Ω, –ì–µ–æ—Ä–≥–∏, –ú–∞—Ä–∏—è, –ï–ª–µ–Ω–∞

–¢–∏—Ç–ª–∏: –≥-–Ω, –≥-–∂–∞, –¥-—Ä, –∏–Ω–∂., –∞—Ä—Ö.

–§–∞–º–∏–ª–Ω–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è: -–æ–≤, -–µ–≤, -–∏–Ω, -—Å–∫–∞, -–æ–≤–∞

–¢–µ—Å—Ç–æ–≤–∏ —Å–ª—É—á–∞–∏ –∫–æ–∏—Ç–æ —Å–µ –ø—Ä–æ–≤–µ—Ä—è–≤–∞—Ç:
text
‚úÖ –®–ê–¢–†–û–ú –ï–û–û–î ‚Üí company
‚úÖ –¢–ï–†–ó–ò–î –ï–û–û–î ‚Üí company  
‚úÖ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤ ‚Üí individual
‚úÖ –≥-–Ω –î–∏–º–∏—Ç—ä—Ä –î–∏–º–∏—Ç—Ä–æ–≤ ‚Üí individual
‚úÖ –ò–í–ê–ù–û–í ‚Üí company (—Å–∞–º–æ –≥–æ–ª–µ–º–∏ –±—É–∫–≤–∏)
‚úÖ –ü–ï–¢–ö–û–í –ò –ö–û ‚Üí company ("–ò –ö–û" –µ —Ñ–∏—Ä–º–∞)
üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–ò:
–ó–∞–ø–∞—Å–∏ —Ç–æ–∑–∏ –Ω–æ–≤ —Å–µ–µ–¥—ä—Ä –∫–∞—Ç–æ CustomerImportSeeder.php

–ü—É—Å–Ω–∏ –≥–æ (—Å–∞–º–æ —Ç–æ–∑–∏ —Å–µ–µ–¥—ä—Ä):

bash
php artisan db:seed --class=CustomerImportSeeder
–í–∏–∂ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞—Ç–∞ –∑–∞ —Ä–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Ç–∏–ø–æ–≤–µ—Ç–µ

–ê–∫–æ —Ç—Ä—è–±–≤–∞, –∫–æ—Ä–∏–≥–∏—Ä–∞–π –ø—Ä–∞–≤–∏–ª–∞—Ç–∞ –≤ determineCustomerType() –º–µ—Ç–æ–¥–∞

üìä –û–ß–ê–ö–í–ê–ù –ò–ó–•–û–î:
text
üöÄ –ò–ú–ü–û–†–¢ –û–¢ ACCESS –° –ê–í–¢–û–ú–ê–¢–ò–ß–ù–û –û–ü–†–ï–î–ï–õ–Ø–ù–ï –ù–ê –¢–ò–ü–ê
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üß™ –¢–ï–°–¢ –ù–ê –û–ü–†–ï–î–ï–õ–Ø–ù–ï–¢–û –ù–ê –¢–ò–ü–ê:
üìã –¢–µ—Å—Ç–æ–≤–∏ —Å–ª—É—á–∞–∏ (20 –æ–±—â–æ):
‚úÖ –®–ê–¢–†–û–ú –ï–û–û–î ‚Üí company
‚úÖ –¢–ï–†–ó–ò–î –ï–û–û–î ‚Üí company
‚úÖ –ï.–¢.–ï. –ï–û–û–î ‚Üí company
...
üìä –†–µ–∑—É–ª—Ç–∞—Ç: 18 –æ—Ç 20 —Ç–µ—Å—Ç–∞ –º–∏–Ω–∞—Ö–∞ —É—Å–ø–µ—à–Ω–æ (90%)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üìã –ü–ê–†–°–í–ê–ù–ï –ù–ê –î–ê–ù–ù–ò–¢–ï...
‚úÖ –ù–∞–º–µ—Ä–µ–Ω–∏ –∑–∞–ø–∏—Å–∏: 500
üìä –û—á–∞–∫–≤–∞–Ω–æ —Ä–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Ç–∏–ø–æ–≤–µ—Ç–µ:
   ‚Ä¢ –§–∏—Ä–º–∏ (company): 420
   ‚Ä¢ –ß–∞—Å—Ç–Ω–∏ –ª–∏—Ü–∞ (individual): 80
üì• –ó–ê–ü–û–ß–í–ê–ú –ò–ú–ü–û–†–¢...
‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 100%
‚úÖ –ò–ú–ü–û–†–¢–™–¢ –ó–ê–í–™–†–®–ò
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üü¢ –£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏: 500 –∫–ª–∏–µ–Ω—Ç–∏
üìä –§–ò–ù–ê–õ–ù–ê –°–¢–ê–¢–ò–°–¢–ò–ö–ê –û–¢ –ë–ê–ó–ê–¢–ê –î–ê–ù–ù–ò:
   ‚Ä¢ –§–∏—Ä–º–∏ (company): 420
   ‚Ä¢ –ß–∞—Å—Ç–Ω–∏ –ª–∏—Ü–∞ (individual): 80
üéâ –ê–í–¢–û–ú–ê–¢–ò–ß–ù–û–¢–û –û–ü–†–ï–î–ï–õ–Ø–ù–ï –ù–ê –¢–ò–ü–û–í–ï–¢–ï –ï –ó–ê–í–™–†–®–ï–ù–û!
–°–µ–µ–¥—ä—Ä—ä—Ç –≤–µ—á–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è —Ç–∏–ø–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∏—Ç–µ! üéØ –ê–∫–æ –∑–∞–±–µ–ª–µ–∂–∏—à –Ω–µ–ø—Ä–∞–≤–∏–ª–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏ —Å–ª—É—á–∞–∏, –º–æ–∂–µ—à –¥–∞ –¥–æ–±–∞–≤–∏—à –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞ –≤ –º–µ—Ç–æ–¥–∞.

–ê–ê–ê –∏–º–∞—Ö –ø—Ä–µ–¥–≤–∏–¥ –¥–∞ –¥–æ–±–∞–≤–∏—à –∫–∞–∫–≤–æ—Ç–æ —Ç—Ä—å–±–≤–∞ –≤ –µ—Ç–æ —Ç–æ–∑–∏ —Å–∏–∏–¥–µ—Ä ... database\seeders\CustomerImportSeeder.php ... <?php

namespace Database\Seeders;

use App\Models\Customer;
use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\Log;

class CustomerImportSeeder extends Seeder
{
    /**
     * –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ Access Mojibake —Ç–µ–∫—Å—Ç –∫—ä–º –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
     * –°–ø–µ—Ü–∏–∞–ª–Ω–æ –∑–∞ Access –±—ä–ª–≥–∞—Ä—Å–∫–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞
     */
    private function fixAccessEncoding(string $text): string
    {
        $text = trim($text);
        if (empty($text)) return $text;
        
        // –ê–∫–æ –≤–µ—á–µ –µ –ø—Ä–∞–≤–∏–ª–Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞, –≤—ä—Ä–Ω–∏ –∫–∞–∫—Ç–æ –µ
        if (preg_match('/[–ê-–Ø–∞-—è–Å—ë]/u', $text)) {
            return $text;
        }
        
        // –ü–û–ü–™–õ–ù–ï–ù –ú–ê–ü–ò–ù–ì –∑–∞ —Ç–æ—á–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—è
        $accessFixMap = [
            // –û—Å–Ω–æ–≤–Ω–∏ –±—É–∫–≤–∏
            '√ä' => '–ö', '√†' => '–∞', '√´' => '–ª', '√Æ' => '–æ', '√ø' => '—è',
            '√°' => '–Ω', '√è' => '–ü', '√•' => '–µ', '√∑' => '—á', '√≠' => '–∏',
            '√∞' => '—Ä', '√±' => '—Å', '√®' => '–∏',
            
            // –ì–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏
            '√ò' => '–®', '√Ä' => '–ê', '√í' => '–¢', '√ê' => '–†', '√é' => '–û',
            '√å' => '–ú', '√Ö' => '–ï', '√ï' => '–•', '√î' => '–§', '√ñ' => '–¶',
            '√ó' => '–ß', '√ô' => '–©', '√ö' => '–™', '√ú' => '–¨', '√ù' => '–≠',
            '√û' => '–Æ', '√ü' => '–Ø', '√á' => '–ó', '√à' => '–ò', '√â' => '–ô',
            '√ã' => '–õ', '√ç' => '–ù', '√ë' => '–°', '√ì' => '–£', '√Ç' => '–í',
            '√É' => '–ì', '√Ñ' => '–î', '√Ü' => '–ñ', '√Å' => '–ë',
            
            // –ú–∞–ª–∫–∏ –±—É–∫–≤–∏
            '√∫' => '—ä', '√ª' => '—ã', '√º' => '—å', '√Ω' => '—ç', '√æ' => '—é',
            '√≥' => '—É', '√≤' => '—Ç', '√µ' => '—Ö', '√¥' => '—Ñ', '√∂' => '—Ü',
            '√¶' => '–∂', '√ß' => '–∑', '√©' => '–π', '√™' => '–∫', '√¨' => '–º',
            '√Ø' => '–ø', '√¢' => '–≤', '√£' => '–≥', '√§' => '–¥', '√•' => '–µ',
            '√°' => '–±', '√≤' => '—Ç', '√µ' => '—Ö',
            
            // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ –∑–∞ "–ë–∏–∑–Ω–µ—Å" –∏ "–ú–∏–Ω—á–µ–≤"
            '√®' => '–∏', '√±' => '—Å', // –∑–∞ "–ë–∏–∑–Ω–µ—Å"
            '√©' => '–Ω', '√¢' => '–≤', // –∑–∞ "–ú–∏–Ω—á–µ–≤" - '√©' —Ç—Ä—è–±–≤–∞ –¥–∞ –µ '–Ω', –Ω–µ '–π'
        ];
        
        $fixed = strtr($text, $accessFixMap);
        
        // –°–ü–ï–¶–ò–ê–õ–ù–ò –ü–û–ü–†–ê–í–ö–ò
        $fixed = preg_replace('/–ö–∞–ª–æ—è–∏/u', '–ö–∞–ª–æ–Ø–Ω', $fixed);
        $fixed = preg_replace('/–ü–µ—á–µ–∏—è—Ä—Å–∫–∏/u', '–ü–µ—á–µ–Ω—è—Ä—Å–∫–∏', $fixed);
        $fixed = preg_replace('/–°—Ç–µ—Ñ–∞–∏/u', '–°—Ç–µ—Ñ–∞–Ω', $fixed);
        $fixed = preg_replace('/–ú–∏–∏—á–µ–≤/u', '–ú–∏–Ω—á–µ–≤', $fixed);
        $fixed = preg_replace('/–ë–∏–∑–∏–µ—Å/u', '–ë–∏–∑–Ω–µ—Å', $fixed);
        $fixed = preg_replace('/–®–ê–¢–†–û–ú  –ï–û–û–î/u', '–®–ê–¢–†–û–ú –ï–û–û–î', $fixed);
        
        return $fixed;
    }
    
    /**
     * –ü–∞—Ä—Å–≤–∞ —Ç–∞–±–ª–∏—á–µ–Ω —Ç–µ–∫—Å—Ç —Ñ–æ—Ä–º–∞—Ç —Å –ø–∞—ò–ø–æ–≤–µ
     * –§–æ—Ä–º–∞—Ç: | Number | Customer-Name | Customer-Address-1 | ...
     */
    private function parseTableFormat(string $content): array
    {
        $lines = explode("\n", $content);
        $data = [];
        
        $headerLine = null;
        $headers = [];
        
        // 1. –ù–∞–º–µ—Ä–∏ –∑–∞–≥–ª–∞–≤–Ω–∏—è —Ä–µ–¥ (—Ç–æ–∑–∏ —Å –∏–º–µ–Ω–∞—Ç–∞ –Ω–∞ –∫–æ–ª–æ–Ω–∏—Ç–µ)
        foreach ($lines as $line) {
            if (strpos($line, '|   Number   |') !== false || 
                strpos($line, '| Number |') !== false) {
                $headerLine = $line;
                break;
            }
        }
        
        if (!$headerLine) {
            $this->command->error('‚ùå –ù–µ –º–æ–≥–∞ –¥–∞ –Ω–∞–º–µ—Ä—è –∑–∞–≥–ª–∞–≤–Ω–∏—è —Ä–µ–¥ —Å –∫–æ–ª–æ–Ω–∏—Ç–µ!');
            return [];
        }
        
        // 2. –ò–∑–≤–ª–µ—á–∏ –∑–∞–≥–ª–∞–≤–∫–∏—Ç–µ
        // –ü—Ä–µ–º–∞—Ö–Ω–∏ –Ω–∞—á–∞–ª–Ω–∏—è –∏ –∫—Ä–∞–π–Ω–∏—è '|'
        $headerLine = trim($headerLine, "| \t\n\r\0\x0B");
        // –†–∞–∑–¥–µ–ª–∏ –ø–æ '|' –∏ trim-–Ω–∏ –≤—Å—è–∫–∞ –∫–æ–ª–æ–Ω–∞
        $rawHeaders = array_map('trim', explode('|', $headerLine));
        
        // 3. –ú–∞–ø–∏—Ä–∞–π –∑–∞–≥–ª–∞–≤–∫–∏—Ç–µ –∫—ä–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏ –∏–º–µ–Ω–∞
        $headerMapping = [
            'Number' => 'Number',
            'Customer-Name' => 'Customer-Name',
            'Customer-Address-1' => 'Customer-Address-1',
            'Customer-Address-2' => 'Customer-Address-2',
            'Customer-MOL' => 'Customer-MOL',
            'Customer-Taxno' => 'Customer-Taxno',
            'Customer-DocType' => 'Customer-DocType',
            'Receiver' => 'Receiver',
            'Receiver Details' => 'Receiver Details',
            'Customer-Bulstat' => 'Customer-Bulstat',
            'Telno' => 'Telno',
            'Faxno' => 'Faxno',
            'E-mail' => 'E-mail',
            'ResAddress1' => 'ResAddress1',
            'ResAddress2' => 'ResAddress2',
            'eidate' => 'eidate',
            'include' => 'include',
            'active' => 'active',
            'customer' => 'customer',
            'supplier' => 'supplier',
            'Contact' => 'Contact',
            'partida' => 'partida',
            'bulstatletter' => 'bulstatletter',
        ];
        
        $headers = [];
        foreach ($rawHeaders as $rawHeader) {
            $normalized = trim(preg_replace('/\s+/', ' ', $rawHeader));
            // –û–ø–∏—Ç–∞–π –¥–∞ –Ω–∞–º–µ—Ä–∏—à —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
            foreach ($headerMapping as $key => $value) {
                if (stripos($normalized, $key) !== false) {
                    $headers[] = $key;
                    break;
                }
            }
        }
        
        $this->command->info("‚úÖ –ù–∞–º–µ—Ä–µ–Ω–∏ –∑–∞–≥–ª–∞–≤–∫–∏: " . count($headers));
        $this->command->info("üìã –ó–∞–≥–ª–∞–≤–∫–∏: " . implode(', ', array_slice($headers, 0, 5)) . '...');
        
        // 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ
        $inDataSection = false;
        
        foreach ($lines as $line) {
            $line = trim($line);
            
            // –ü—Ä–æ–ø—É—Å–∫–∞–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–Ω–∏—Ç–µ —Ä–µ–¥–æ–≤–µ
            if (strpos($line, '---') === 0 || strpos($line, '===') === 0) {
                if ($inDataSection) {
                    $inDataSection = false; // –ö—Ä–∞–π –Ω–∞ —Å–µ–∫—Ü–∏—è—Ç–∞ —Å –¥–∞–Ω–Ω–∏
                } else {
                    $inDataSection = true; // –ù–∞—á–∞–ª–æ –Ω–∞ —Å–µ–∫—Ü–∏—è—Ç–∞ —Å –¥–∞–Ω–Ω–∏
                }
                continue;
            }
            
            // –ü—Ä–æ–ø—É—Å–∫–∞–π –ø—Ä–∞–∑–Ω–∏ —Ä–µ–¥–æ–≤–µ –∏–ª–∏ –∑–∞–≥–ª–∞–≤–Ω–∏ —Ä–µ–¥–æ–≤–µ
            if (empty($line) || strpos($line, '|   Number   |') !== false) {
                continue;
            }
            
            // –°–∞–º–æ —Ä–µ–¥–æ–≤–µ —Å –¥–∞–Ω–Ω–∏ (–∑–∞–ø–æ—á–≤–∞—Ç —Å '|')
            if (strpos($line, '|') === 0 && $inDataSection) {
                // –ü—Ä–µ–º–∞—Ö–Ω–∏ '|' –≤ –Ω–∞—á–∞–ª–æ—Ç–æ –∏ –∫—Ä–∞—è
                $line = trim($line, "| \t\n\r\0\x0B");
                
                // –†–∞–∑–¥–µ–ª–∏ –ø–æ '|' - –≤–∞–∂–Ω–æ: –∑–∞–ø–∞–∑–∏ –ø—Ä–∞–∑–Ω–∏—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏
                $columns = explode('|', $line);
                
                // Trim-–Ω–∏ –≤—Å—è–∫–∞ –∫–æ–ª–æ–Ω–∞
                $columns = array_map(function($col) {
                    return trim($col);
                }, $columns);
                
                // –ê–∫–æ –∏–º–∞–º–µ –ø–æ-–º–∞–ª–∫–æ –∫–æ–ª–æ–Ω–∏ –æ—Ç –∑–∞–≥–ª–∞–≤–∫–∏—Ç–µ, –¥–æ–±–∞–≤–∏ –ø—Ä–∞–∑–Ω–∏
                while (count($columns) < count($headers)) {
                    $columns[] = '';
                }
                
                // –ê–∫–æ –∏–º–∞–º–µ –ø–æ–≤–µ—á–µ –∫–æ–ª–æ–Ω–∏, —Å—ä–∫—Ä–∞—Ç–∏
                $columns = array_slice($columns, 0, count($headers));
                
                // –°—ä–∑–¥–∞–π –∞—Å–æ—Ü–∏–∞—Ç–∏–≤–µ–Ω –º–∞—Å–∏–≤
                $rowData = array_combine($headers, $columns);
                
                // –î–æ–±–∞–≤–∏ –∫—ä–º –¥–∞–Ω–Ω–∏—Ç–µ —Å–∞–º–æ –∞–∫–æ –∏–º–∞ Number
                if (!empty($rowData['Number'])) {
                    $data[] = $rowData;
                }
            }
        }
        
        return $data;
    }

    public function run(): void
    {
        $this->command->info('üöÄ –ò–ú–ü–û–†–¢ –û–¢ ACCESS (–¢–ê–ë–õ–ò–ß–ï–ù –§–û–†–ú–ê–¢)');
        $this->command->line(str_repeat('‚ïê', 70));
        
        // –ü—ä—Ç –∫—ä–º —Ñ–∞–π–ª–∞
        $filePath = base_path('old-database/Customer.txt');
        
        if (!file_exists($filePath)) {
            $this->command->error("‚ùå –§–∞–π–ª—ä—Ç –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω: $filePath");
            return;
        }
        
        // –ü—Ä–æ—á–∏—Ç–∞–Ω–µ –Ω–∞ —Ñ–∞–π–ª–∞
        $content = file_get_contents($filePath);
        $this->command->info("üìÅ –§–∞–π–ª: " . basename($filePath));
        $this->command->info("üìä –†–∞–∑–º–µ—Ä: " . round(strlen($content) / 1024, 2) . " KB");
        
        // –¢–ï–°–¢ –ù–ê –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê
        $this->testEncodingFix();
        
        // –ü–ê–†–°–í–ê–ù–ï –ù–ê –¢–ê–ë–õ–ò–ß–ù–ò–Ø –§–û–†–ú–ê–¢
        $this->command->info("\nüìã –ü–ê–†–°–í–ê–ù–ï –ù–ê –¢–ê–ë–õ–ò–ß–ï–ù –§–û–†–ú–ê–¢...");
        $tableData = $this->parseTableFormat($content);
        
        if (empty($tableData)) {
            $this->command->error('‚ùå –ù–µ –º–æ–≥–∞ –¥–∞ –∏–∑–≤–ª–µ–∫–∞ –¥–∞–Ω–Ω–∏ –æ—Ç —Ç–∞–±–ª–∏—á–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç!');
            $this->command->info('üí° –ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π –æ—Ç Access –∫–∞—Ç–æ "Text File" —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª Tab, –Ω–µ –∫–∞—Ç–æ "Formatted Text"');
            return;
        }
        
        $this->command->info("‚úÖ –ù–∞–º–µ—Ä–µ–Ω–∏ –∑–∞–ø–∏—Å–∏: " . count($tableData));
        
        $imported = 0;
        $errors = [];
        
        $this->command->info("\nüì• –ó–ê–ü–û–ß–í–ê–ú –ò–ú–ü–û–†–¢...");
        $progressBar = $this->command->getOutput()->createProgressBar(count($tableData));
        $progressBar->start();
        
        // –ò–ú–ü–û–†–¢ –ù–ê –î–ê–ù–ù–ò–¢–ï
        foreach ($tableData as $index => $rowData) {
            $progressBar->advance();
            
            try {
                $customerData = $this->prepareCustomerData($rowData);
                
                // –ü–†–û–í–ï–†–ö–ê –ó–ê –ó–ê–î–™–õ–ñ–ò–¢–ï–õ–ù–ò –ü–û–õ–ï–¢–ê
                if (empty($customerData['name'])) {
                    $errors[] = "–ó–∞–ø–∏—Å {$rowData['Number']}: –õ–∏–ø—Å–≤–∞ –∏–º–µ";
                    continue;
                }
                
                // –°–™–ó–î–ê–ô –ö–õ–ò–ï–ù–¢–ê
                Customer::create($customerData);
                $imported++;
                
            } catch (\Exception $e) {
                $errors[] = "–ó–∞–ø–∏—Å {$rowData['Number']}: " . $e->getMessage();
                Log::error('Import error', [
                    'number' => $rowData['Number'] ?? 'unknown',
                    'error' => $e->getMessage()
                ]);
            }
        }
        
        $progressBar->finish();
        
        // –†–ï–ó–£–õ–¢–ê–¢–ò
        $this->command->line("\n");
        $this->command->info('‚úÖ –ò–ú–ü–û–†–¢–™–¢ –ó–ê–í–™–†–®–ò');
        $this->command->line(str_repeat('‚ïê', 70));
        $this->command->info("üü¢ –£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏: $imported –∫–ª–∏–µ–Ω—Ç–∏");
        
        if (!empty($errors)) {
            $this->command->warn("üü° –ì—Ä–µ—à–∫–∏: " . count($errors));
            foreach (array_slice($errors, 0, 5) as $error) {
                $this->command->line("   ‚Ä¢ $error");
            }
            if (count($errors) > 5) {
                $this->command->line("   ... –∏ –æ—â–µ " . (count($errors) - 5) . " –≥—Ä–µ—à–∫–∏");
            }
        }
        
        if ($imported > 0) {
            $this->command->info("\nüéâ –ö–õ–ò–ï–ù–¢–ò–¢–ï –°–ê –ò–ú–ü–û–†–¢–ò–†–ê–ù–ò –£–°–ü–ï–®–ù–û!");
            $this->command->info("üí° –°–µ–≥–∞ –º–æ–∂–µ—à –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏—à —Å –∏–º–ø–æ—Ä—Ç–∞ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ.");
        }
    }
    
    /**
     * –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ encoding –∫–æ–Ω–≤–µ—Ä—Å–∏—è—Ç–∞
     */
    private function testEncodingFix(): void
    {
        $this->command->info('üß™ –¢–ï–°–¢ –ù–ê –ö–û–ù–í–ï–†–°–ò–Ø–¢–ê:');
        
        $testCases = [
            '√ä√†√´√Æ√ø√≠ √è√•√∑√•√≠√ø√∞√±√™√®' => '–ö–ê–õ–û–Ø–ù –ü–ï–ß–ï–ù–Ø–†–°–ö–ò',
            '√ò√Ä√í√ê√é√å  √Ö√é√é√Ñ' => '–®–ê–¢–†–û–ú –ï–û–û–î',
            '√í√Ö√ê√á√à√Ñ √Ö√é√é√Ñ' => '–¢–ï–†–ó–ò–î –ï–û–û–î',
            '√Ö.√í.√Ö. √Ö√é√é√Ñ' => '–ï.–¢.–ï. –ï–û–û–î',
            '√ã√à√ç√Ñ√ç√Ö√ê √Å√ö√ã√É√Ä√ê√à√ü √Ö√é√é√Ñ' => '–õ–ò–ù–î–ù–ï–† –ë–™–õ–ì–ê–†–ò–Ø –ï–û–û–î',
            '√ë√≤√•√¥√†√≠ √å√®√≠√∑√•√¢' => '–°—Ç–µ—Ñ–∞–Ω –ú–∏–Ω—á–µ–≤',
            '√≥√´. " √Å√®√ß√≠√•√± √è√†√∞√™ √ë√Æ√¥√®√ø "' => '—É–ª. " –ë–∏–∑–Ω–µ—Å –ü–∞—Ä–∫ –°–æ—Ñ–∏—è "',
            '√Å√®√ß√≠√•√±' => '–ë–∏–∑–Ω–µ—Å',
            '√è√†√∞√™' => '–ü–∞—Ä–∫',
            '√ë√Æ√¥√®√ø' => '–°–æ—Ñ–∏—è',
        ];
        
        $passed = 0;
        $total = count($testCases);
        
        foreach ($testCases as $input => $expected) {
            $result = $this->fixAccessEncoding($input);
            $resultUpper = mb_strtoupper($result, 'UTF-8');
            $expectedUpper = mb_strtoupper($expected, 'UTF-8');
            
            $isMatch = ($resultUpper === $expectedUpper);
            
            if ($isMatch) {
                $passed++;
                $this->command->line("‚úÖ " . $this->truncate($input, 25) . 
                                   " ‚Üí " . $this->truncate($result, 25));
            } else {
                $this->command->line("‚ùå " . $this->truncate($input, 25) . 
                                   " ‚Üí " . $this->truncate($result, 25));
                $this->command->line("   –û—á–∞–∫–≤–∞–Ω–æ: " . $expected);
            }
        }
        
        $this->command->line(str_repeat('‚îÄ', 70));
        $this->command->info("üìä –†–µ–∑—É–ª—Ç–∞—Ç: $passed –æ—Ç $total —Ç–µ—Å—Ç–∞ –º–∏–Ω–∞—Ö–∞ —É—Å–ø–µ—à–Ω–æ");
    }
    
    /**
     * –ü–æ–¥–≥–æ—Ç–≤—è –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ –∫–ª–∏–µ–Ω—Ç–∞
     */
    private function prepareCustomerData(array $oldData): array
    {
        // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–π –≤—Å–∏—á–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏ –ø–æ–ª–µ—Ç–∞
        $converted = [];
        foreach ($oldData as $key => $value) {
            if (is_string($value)) {
                $converted[$key] = $this->fixAccessEncoding($value);
            } else {
                $converted[$key] = $value;
            }
        }
        
        return [
            'old_system_id'       => $converted['Number'] ?? null,
            'type'                => $this->determineType($converted),
            'name'                => trim($converted['Customer-Name'] ?? ''),
            'vat_number'          => $this->cleanVatNumber($converted['Customer-Taxno'] ?? ''),
            'bulstat'             => trim($converted['Customer-Bulstat'] ?? ''),
            'contact_person'      => trim($converted['Customer-MOL'] ?? ''),
            'phone'               => $this->cleanPhone($converted['Telno'] ?? ''),
            'fax'                 => trim($converted['Faxno'] ?? ''),
            'email'               => $this->cleanEmail($converted['E-mail'] ?? ''),
            'address'             => $this->formatAddress($converted),
            'address_line1'       => trim($converted['Customer-Address-1'] ?? ''),
            'address_line2'       => trim($converted['Customer-Address-2'] ?? ''),
            'city'                => $this->extractCity($converted),
            'notes'               => $this->formatNotes($converted),
            'court_registration'  => trim($converted['partida'] ?? ''),
            'bulstat_letter'      => trim($converted['bulstatletter'] ?? ''),
            'is_active'           => $this->parseBoolean($converted['active'] ?? ''),
            'include_in_reports'  => $this->parseBoolean($converted['include'] ?? ''),
            'created_at'          => $this->parseDate($converted['eidate'] ?? ''),
        ];
    }
    
    private function determineType(array $data): string
    {
        $isCustomer = isset($data['customer']) && strtoupper(trim($data['customer'])) === '–î–ê';
        $isSupplier = isset($data['supplier']) && strtoupper(trim($data['supplier'])) === '–î–ê';
        
        if ($isCustomer && $isSupplier) return 'both';
        if ($isSupplier) return 'supplier';
        return 'customer';
    }
    
    private function cleanVatNumber(string $vat): ?string
    {
        $vat = trim($vat);
        if (empty($vat)) return null;
        
        $vat = preg_replace('/\s+/', '', $vat);
        if (!str_starts_with(strtoupper($vat), 'BG')) {
            $vat = 'BG' . $vat;
        }
        
        return $vat;
    }
    
    private function cleanPhone(string $phone): ?string
    {
        $phone = preg_replace('/[^0-9+]/', '', trim($phone));
        return !empty($phone) ? $phone : null;
    }
    
    private function cleanEmail(string $email): ?string
    {
        $email = trim($email);
        return filter_var($email, FILTER_VALIDATE_EMAIL) ? $email : null;
    }
    
    private function formatAddress(array $data): string
    {
        $parts = [];
        if (!empty($data['Customer-Address-1'])) $parts[] = trim($data['Customer-Address-1']);
        if (!empty($data['Customer-Address-2'])) $parts[] = trim($data['Customer-Address-2']);
        return implode(', ', $parts);
    }
    
    private function extractCity(array $data): string
    {
        $address = $data['Customer-Address-1'] ?? '';
        $address = mb_strtoupper($address, 'UTF-8');
        
        if (str_contains($address, '–°–û–§–ò–Ø')) return '–°–æ—Ñ–∏—è';
        if (str_contains($address, '–ü–õ–û–í–î–ò–í')) return '–ü–ª–æ–≤–¥–∏–≤';
        if (str_contains($address, '–í–ê–†–ù–ê')) return '–í–∞—Ä–Ω–∞';
        if (str_contains($address, '–ë–£–†–ì–ê–°')) return '–ë—É—Ä–≥–∞—Å';
        if (str_contains($address, '–†–£–°–ï')) return '–†—É—Å–µ';
        
        return '–°–æ—Ñ–∏—è';
    }
    
    private function formatNotes(array $data): ?string
    {
        $notes = [];
        if (!empty($data['Receiver'])) $notes[] = '–ü–æ–ª—É—á–∞—Ç–µ–ª: ' . trim($data['Receiver']);
        if (!empty($data['Contact'])) $notes[] = '–ö–æ–Ω—Ç–∞–∫—Ç: ' . trim($data['Contact']);
        return !empty($notes) ? implode("\n", $notes) : null;
    }
    
    private function parseBoolean(string $value): bool
    {
        $value = strtoupper(trim($value));
        return $value === '–î–ê';
    }
    
    private function parseDate(string $date): ?string
    {
        if (preg_match('/(\d{1,2})\.(\d{1,2})\.(\d{4})/', $date, $matches)) {
            $day = (int)$matches[1];
            $month = (int)$matches[2];
            $year = (int)$matches[3];
            
            return sprintf('%04d-%02d-%02d', $year, $month, $day);
        }
        return now()->toDateTimeString();
    }
    
    private function truncate(string $text, int $length): string
    {
        if (mb_strlen($text, 'UTF-8') <= $length) return $text;
        return mb_substr($text, 0, $length - 3, 'UTF-8') . '...';
    }
}